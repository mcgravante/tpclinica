(self.webpackChunktpclinica=self.webpackChunktpclinica||[]).push([[179],{8255:Vt=>{function Ie(N){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+N+"'");throw f.code="MODULE_NOT_FOUND",f})}Ie.keys=()=>[],Ie.resolve=Ie,Ie.id=8255,Vt.exports=Ie},7238:(Vt,Ie,N)=>{"use strict";N.d(Ie,{l3:()=>J,_j:()=>f,LC:()=>v,ZN:()=>Qe,jt:()=>le,vP:()=>Ae,SB:()=>ge,oB:()=>Me,eR:()=>Z,X$:()=>me,ZE:()=>it,k1:()=>nt});class f{}class v{}const J="*";function me(Ze,Xe){return{type:7,name:Ze,definitions:Xe,options:{}}}function le(Ze,Xe=null){return{type:4,styles:Xe,timings:Ze}}function Ae(Ze,Xe=null){return{type:2,steps:Ze,options:Xe}}function Me(Ze){return{type:6,styles:Ze,offset:null}}function ge(Ze,Xe,ye){return{type:0,name:Ze,styles:Xe,options:ye}}function Z(Ze,Xe,ye=null){return{type:1,expr:Ze,animation:Xe,options:ye}}function Ye(Ze){Promise.resolve(null).then(Ze)}class Qe{constructor(Xe=0,ye=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Xe+ye}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Xe=>Xe()),this._onDoneFns=[])}onStart(Xe){this._onStartFns.push(Xe)}onDone(Xe){this._onDoneFns.push(Xe)}onDestroy(Xe){this._onDestroyFns.push(Xe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ye(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Xe=>Xe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Xe=>Xe()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Xe){this._position=this.totalTime?Xe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Xe){const ye="start"==Xe?this._onStartFns:this._onDoneFns;ye.forEach(Qt=>Qt()),ye.length=0}}class it{constructor(Xe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Xe;let ye=0,Qt=0,De=0;const Ge=this.players.length;0==Ge?Ye(()=>this._onFinish()):this.players.forEach(ce=>{ce.onDone(()=>{++ye==Ge&&this._onFinish()}),ce.onDestroy(()=>{++Qt==Ge&&this._onDestroy()}),ce.onStart(()=>{++De==Ge&&this._onStart()})}),this.totalTime=this.players.reduce((ce,Ne)=>Math.max(ce,Ne.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Xe=>Xe()),this._onDoneFns=[])}init(){this.players.forEach(Xe=>Xe.init())}onStart(Xe){this._onStartFns.push(Xe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Xe=>Xe()),this._onStartFns=[])}onDone(Xe){this._onDoneFns.push(Xe)}onDestroy(Xe){this._onDestroyFns.push(Xe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Xe=>Xe.play())}pause(){this.players.forEach(Xe=>Xe.pause())}restart(){this.players.forEach(Xe=>Xe.restart())}finish(){this._onFinish(),this.players.forEach(Xe=>Xe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Xe=>Xe.destroy()),this._onDestroyFns.forEach(Xe=>Xe()),this._onDestroyFns=[])}reset(){this.players.forEach(Xe=>Xe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Xe){const ye=Xe*this.totalTime;this.players.forEach(Qt=>{const De=Qt.totalTime?Math.min(1,ye/Qt.totalTime):1;Qt.setPosition(De)})}getPosition(){const Xe=this.players.reduce((ye,Qt)=>null===ye||Qt.totalTime>ye.totalTime?Qt:ye,null);return null!=Xe?Xe.getPosition():0}beforeDestroy(){this.players.forEach(Xe=>{Xe.beforeDestroy&&Xe.beforeDestroy()})}triggerCallback(Xe){const ye="start"==Xe?this._onStartFns:this._onDoneFns;ye.forEach(Qt=>Qt()),ye.length=0}}const nt="!"},8583:(Vt,Ie,N)=>{"use strict";N.d(Ie,{mr:()=>it,ez:()=>ea,K0:()=>Ae,Do:()=>Ze,V_:()=>K,Ye:()=>Xe,S$:()=>Ye,mk:()=>Nn,sg:()=>Rr,O5:()=>Qi,b0:()=>nt,lw:()=>Me,EM:()=>Zi,JF:()=>Si,PM:()=>Ui,w_:()=>ue,bD:()=>fs,q:()=>J,Mx:()=>Pt,HT:()=>le});var f=N(639);let v=null;function J(){return v}function le(j){v||(v=j)}class ue{}const Ae=new f.OlP("DocumentToken");let Me=(()=>{class j{historyGo($){throw new Error("Not implemented")}}return j.\u0275fac=function($){return new($||j)},j.\u0275prov=(0,f.Yz7)({factory:ge,token:j,providedIn:"platform"}),j})();function ge(){return(0,f.LFG)(Z)}const K=new f.OlP("Location Initialized");let Z=(()=>{class j extends Me{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState($){const ie=J().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",$,!1),()=>ie.removeEventListener("popstate",$)}onHashChange($){const ie=J().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",$,!1),()=>ie.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,ie,Pe){te()?this._history.pushState($,ie,Pe):this.location.hash=Pe}replaceState($,ie,Pe){te()?this._history.replaceState($,ie,Pe):this.location.hash=Pe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return j.\u0275fac=function($){return new($||j)(f.LFG(Ae))},j.\u0275prov=(0,f.Yz7)({factory:de,token:j,providedIn:"platform"}),j})();function te(){return!!window.history.pushState}function de(){return new Z((0,f.LFG)(Ae))}function be(j,ne){if(0==j.length)return ne;if(0==ne.length)return j;let $=0;return j.endsWith("/")&&$++,ne.startsWith("/")&&$++,2==$?j+ne.substring(1):1==$?j+ne:j+"/"+ne}function je(j){const ne=j.match(/#|\?|$/),$=ne&&ne.index||j.length;return j.slice(0,$-("/"===j[$-1]?1:0))+j.slice($)}function Oe(j){return j&&"?"!==j[0]?"?"+j:j}let Ye=(()=>{class j{historyGo($){throw new Error("Not implemented")}}return j.\u0275fac=function($){return new($||j)},j.\u0275prov=(0,f.Yz7)({factory:Qe,token:j,providedIn:"root"}),j})();function Qe(j){const ne=(0,f.LFG)(Ae).location;return new nt((0,f.LFG)(Me),ne&&ne.origin||"")}const it=new f.OlP("appBaseHref");let nt=(()=>{class j extends Ye{constructor($,ie){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==ie&&(ie=this._platformLocation.getBaseHrefFromDOM()),null==ie)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ie}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return be(this._baseHref,$)}path($=!1){const ie=this._platformLocation.pathname+Oe(this._platformLocation.search),Pe=this._platformLocation.hash;return Pe&&$?`${ie}${Pe}`:ie}pushState($,ie,Pe,gt){const $t=this.prepareExternalUrl(Pe+Oe(gt));this._platformLocation.pushState($,ie,$t)}replaceState($,ie,Pe,gt){const $t=this.prepareExternalUrl(Pe+Oe(gt));this._platformLocation.replaceState($,ie,$t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var ie,Pe;null===(Pe=(ie=this._platformLocation).historyGo)||void 0===Pe||Pe.call(ie,$)}}return j.\u0275fac=function($){return new($||j)(f.LFG(Me),f.LFG(it,8))},j.\u0275prov=f.Yz7({token:j,factory:j.\u0275fac}),j})(),Ze=(()=>{class j extends Ye{constructor($,ie){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl($){const ie=be(this._baseHref,$);return ie.length>0?"#"+ie:ie}pushState($,ie,Pe,gt){let $t=this.prepareExternalUrl(Pe+Oe(gt));0==$t.length&&($t=this._platformLocation.pathname),this._platformLocation.pushState($,ie,$t)}replaceState($,ie,Pe,gt){let $t=this.prepareExternalUrl(Pe+Oe(gt));0==$t.length&&($t=this._platformLocation.pathname),this._platformLocation.replaceState($,ie,$t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var ie,Pe;null===(Pe=(ie=this._platformLocation).historyGo)||void 0===Pe||Pe.call(ie,$)}}return j.\u0275fac=function($){return new($||j)(f.LFG(Me),f.LFG(it,8))},j.\u0275prov=f.Yz7({token:j,factory:j.\u0275fac}),j})(),Xe=(()=>{class j{constructor($,ie){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const Pe=this._platformStrategy.getBaseHref();this._platformLocation=ie,this._baseHref=je(De(Pe)),this._platformStrategy.onPopState(gt=>{this._subject.emit({url:this.path(!0),pop:!0,state:gt.state,type:gt.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,ie=""){return this.path()==this.normalize($+Oe(ie))}normalize($){return j.stripTrailingSlash(function(j,ne){return j&&ne.startsWith(j)?ne.substring(j.length):ne}(this._baseHref,De($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,ie="",Pe=null){this._platformStrategy.pushState(Pe,"",$,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Oe(ie)),Pe)}replaceState($,ie="",Pe=null){this._platformStrategy.replaceState(Pe,"",$,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Oe(ie)),Pe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var ie,Pe;null===(Pe=(ie=this._platformStrategy).historyGo)||void 0===Pe||Pe.call(ie,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)}))}_notifyUrlChangeListeners($="",ie){this._urlChangeListeners.forEach(Pe=>Pe($,ie))}subscribe($,ie,Pe){return this._subject.subscribe({next:$,error:ie,complete:Pe})}}return j.\u0275fac=function($){return new($||j)(f.LFG(Ye),f.LFG(Me))},j.normalizeQueryParams=Oe,j.joinWithSlash=be,j.stripTrailingSlash=je,j.\u0275prov=(0,f.Yz7)({factory:ye,token:j,providedIn:"root"}),j})();function ye(){return new Xe((0,f.LFG)(Ye),(0,f.LFG)(Me))}function De(j){return j.replace(/\/index.html$/,"")}var Ne=(()=>((Ne=Ne||{})[Ne.Zero=0]="Zero",Ne[Ne.One=1]="One",Ne[Ne.Two=2]="Two",Ne[Ne.Few=3]="Few",Ne[Ne.Many=4]="Many",Ne[Ne.Other=5]="Other",Ne))();const Ct=f.kL8;class st{}let Ce=(()=>{class j extends st{constructor($){super(),this.locale=$}getPluralCategory($,ie){switch(Ct(ie||this.locale)($)){case Ne.Zero:return"zero";case Ne.One:return"one";case Ne.Two:return"two";case Ne.Few:return"few";case Ne.Many:return"many";default:return"other"}}}return j.\u0275fac=function($){return new($||j)(f.LFG(f.soG))},j.\u0275prov=f.Yz7({token:j,factory:j.\u0275fac}),j})();function Pt(j,ne){ne=encodeURIComponent(ne);for(const $ of j.split(";")){const ie=$.indexOf("="),[Pe,gt]=-1==ie?[$,""]:[$.slice(0,ie),$.slice(ie+1)];if(Pe.trim()===ne)return decodeURIComponent(gt)}return null}let Nn=(()=>{class j{constructor($,ie,Pe,gt){this._iterableDiffers=$,this._keyValueDiffers=ie,this._ngEl=Pe,this._renderer=gt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass($){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof $?$.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass($){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof $?$.split(/\s+/):$,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const $=this._iterableDiffer.diff(this._rawClass);$&&this._applyIterableChanges($)}else if(this._keyValueDiffer){const $=this._keyValueDiffer.diff(this._rawClass);$&&this._applyKeyValueChanges($)}}_applyKeyValueChanges($){$.forEachAddedItem(ie=>this._toggleClass(ie.key,ie.currentValue)),$.forEachChangedItem(ie=>this._toggleClass(ie.key,ie.currentValue)),$.forEachRemovedItem(ie=>{ie.previousValue&&this._toggleClass(ie.key,!1)})}_applyIterableChanges($){$.forEachAddedItem(ie=>{if("string"!=typeof ie.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(ie.item)}`);this._toggleClass(ie.item,!0)}),$.forEachRemovedItem(ie=>this._toggleClass(ie.item,!1))}_applyClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ie=>this._toggleClass(ie,!0)):Object.keys($).forEach(ie=>this._toggleClass(ie,!!$[ie])))}_removeClasses($){$&&(Array.isArray($)||$ instanceof Set?$.forEach(ie=>this._toggleClass(ie,!1)):Object.keys($).forEach(ie=>this._toggleClass(ie,!1)))}_toggleClass($,ie){($=$.trim())&&$.split(/\s+/g).forEach(Pe=>{ie?this._renderer.addClass(this._ngEl.nativeElement,Pe):this._renderer.removeClass(this._ngEl.nativeElement,Pe)})}}return j.\u0275fac=function($){return new($||j)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},j.\u0275dir=f.lG2({type:j,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),j})();class Cn{constructor(ne,$,ie,Pe){this.$implicit=ne,this.ngForOf=$,this.index=ie,this.count=Pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rr=(()=>{class j{constructor($,ie,Pe){this._viewContainer=$,this._template=ie,this._differs=Pe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;if(!this._differ&&$)try{this._differ=this._differs.find($).create(this.ngForTrackBy)}catch(ie){throw new Error(`Cannot find a differ supporting object '${$}' of type '${function(j){return j.name||typeof j}($)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ie=[];$.forEachOperation((Pe,gt,$t)=>{if(null==Pe.previousIndex){const L=this._viewContainer.createEmbeddedView(this._template,new Cn(null,this._ngForOf,-1,-1),null===$t?void 0:$t),k=new Wn(Pe,L);ie.push(k)}else if(null==$t)this._viewContainer.remove(null===gt?void 0:gt);else if(null!==gt){const L=this._viewContainer.get(gt);this._viewContainer.move(L,$t);const k=new Wn(Pe,L);ie.push(k)}});for(let Pe=0;Pe<ie.length;Pe++)this._perViewChange(ie[Pe].view,ie[Pe].record);for(let Pe=0,gt=this._viewContainer.length;Pe<gt;Pe++){const $t=this._viewContainer.get(Pe);$t.context.index=Pe,$t.context.count=gt,$t.context.ngForOf=this._ngForOf}$.forEachIdentityChange(Pe=>{this._viewContainer.get(Pe.currentIndex).context.$implicit=Pe.item})}_perViewChange($,ie){$.context.$implicit=ie.item}static ngTemplateContextGuard($,ie){return!0}}return j.\u0275fac=function($){return new($||j)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},j.\u0275dir=f.lG2({type:j,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),j})();class Wn{constructor(ne,$){this.record=ne,this.view=$}}let Qi=(()=>{class j{constructor($,ie){this._viewContainer=$,this._context=new Br,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){pt("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){pt("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ie){return!0}}return j.\u0275fac=function($){return new($||j)(f.Y36(f.s_b),f.Y36(f.Rgc))},j.\u0275dir=f.lG2({type:j,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),j})();class Br{constructor(){this.$implicit=null,this.ngIf=null}}function pt(j,ne){if(ne&&!ne.createEmbeddedView)throw new Error(`${j} must be a TemplateRef, but received '${(0,f.AaK)(ne)}'.`)}let ea=(()=>{class j{}return j.\u0275fac=function($){return new($||j)},j.\u0275mod=f.oAB({type:j}),j.\u0275inj=f.cJS({providers:[{provide:st,useClass:Ce}]}),j})();const fs="browser";function Ui(j){return"server"===j}let Zi=(()=>{class j{}return j.\u0275prov=(0,f.Yz7)({token:j,providedIn:"root",factory:()=>new Vs((0,f.LFG)(Ae),window)}),j})();class Vs{constructor(ne,$){this.document=ne,this.window=$,this.offset=()=>[0,0]}setOffset(ne){this.offset=Array.isArray(ne)?()=>ne:ne}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ne){this.supportsScrolling()&&this.window.scrollTo(ne[0],ne[1])}scrollToAnchor(ne){if(!this.supportsScrolling())return;const $=function(j,ne){const $=j.getElementById(ne)||j.getElementsByName(ne)[0];if($)return $;if("function"==typeof j.createTreeWalker&&j.body&&(j.body.createShadowRoot||j.body.attachShadow)){const ie=j.createTreeWalker(j.body,NodeFilter.SHOW_ELEMENT);let Pe=ie.currentNode;for(;Pe;){const gt=Pe.shadowRoot;if(gt){const $t=gt.getElementById(ne)||gt.querySelector(`[name="${ne}"]`);if($t)return $t}Pe=ie.nextNode()}}return null}(this.document,ne);$&&(this.scrollToElement($),this.attemptFocus($))}setHistoryScrollRestoration(ne){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=ne)}}scrollToElement(ne){const $=ne.getBoundingClientRect(),ie=$.left+this.window.pageXOffset,Pe=$.top+this.window.pageYOffset,gt=this.offset();this.window.scrollTo(ie-gt[0],Pe-gt[1])}attemptFocus(ne){return ne.focus(),this.document.activeElement===ne}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ne=oo(this.window.history)||oo(Object.getPrototypeOf(this.window.history));return!(!ne||!ne.writable&&!ne.set)}catch(ne){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ne){return!1}}}function oo(j){return Object.getOwnPropertyDescriptor(j,"scrollRestoration")}class Si{}},639:(Vt,Ie,N)=>{"use strict";N.d(Ie,{deG:()=>Ke,tb:()=>ow,AFp:()=>rw,ip1:()=>CE,CZH:()=>n_,hGG:()=>WA,z2F:()=>py,sBO:()=>OT,Sil:()=>fy,_Vd:()=>zm,EJc:()=>lw,SBq:()=>Eh,qLn:()=>Kn,vpe:()=>bh,L6J:()=>BS,gxx:()=>Bc,tBr:()=>Nl,XFs:()=>kt,OlP:()=>we,zs3:()=>Rs,IIB:()=>US,ZZ4:()=>tv,aQg:()=>nv,soG:()=>fv,YKP:()=>zb,v3s:()=>SA,h0i:()=>Wg,PXZ:()=>EA,R0b:()=>yc,FiY:()=>Ml,r_U:()=>VS,Lbi:()=>sw,g9A:()=>iw,Qsj:()=>_T,FYo:()=>ev,JOm:()=>pa,Tiy:()=>Yv,q3G:()=>Ji,tp0:()=>El,EAV:()=>RA,Rgc:()=>ty,dDg:()=>hw,DyG:()=>_l,q4F:()=>Qv,GfV:()=>jb,s_b:()=>sv,ifc:()=>Ue,eFA:()=>_w,G48:()=>fA,Gpc:()=>it,X6Q:()=>RE,_c5:()=>BA,VLi:()=>hA,c2e:()=>aw,zSh:()=>nf,wAp:()=>Cr,vHH:()=>ye,EiD:()=>Lu,mCW:()=>wl,qzn:()=>bl,JVY:()=>os,pB0:()=>If,eBb:()=>cu,L6k:()=>id,LAX:()=>la,cg1:()=>jv,Tjo:()=>UA,kL8:()=>ub,yhl:()=>xs,dqk:()=>rn,sIi:()=>pf,CqO:()=>Vm,QGY:()=>j_,F4k:()=>Um,RDi:()=>gt,AaK:()=>Oe,z3N:()=>Mi,qOj:()=>hf,TTD:()=>_o,_Bn:()=>Fb,xp6:()=>qp,uIk:()=>Gl,Tol:()=>z_,ekj:()=>Gm,Suo:()=>k0,Xpm:()=>Ii,lG2:()=>ei,Yz7:()=>Ct,cJS:()=>En,oAB:()=>Fi,Yjl:()=>ws,Y36:()=>Ip,_UZ:()=>Py,BQk:()=>Oy,ynx:()=>B_,qZA:()=>V_,TgZ:()=>U_,EpF:()=>Ny,n5z:()=>hr,Ikx:()=>Vv,LFG:()=>Wi,$8M:()=>ba,NdJ:()=>Bm,CRH:()=>F0,oxw:()=>Hg,ALo:()=>x0,lcZ:()=>R0,xi3:()=>P0,Q6J:()=>gh,VKq:()=>C0,iGM:()=>M0,MAs:()=>vi,evT:()=>od,CHM:()=>Ai,oJD:()=>ua,LSH:()=>Tl,kYT:()=>Yi,Udp:()=>Zm,d8E:()=>Bv,YNc:()=>Yn,_uU:()=>wn,Oqu:()=>er,hij:()=>kr});var f=N(7574),v=N(4869),J=N(3282),me=N(6693),ue=N(7709),Ae=N(5319),Me=N(2441);var Z=N(1307);function te(){return new ue.xQ}function be(t){for(let n in t)if(t[n]===be)return n;throw Error("Could not find renamed property on target object.")}function je(t,n){for(const r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=n[r])}function Oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function Ye(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Qe=be({__forward_ref__:be});function it(t){return t.__forward_ref__=it,t.toString=function(){return Oe(this())},t}function nt(t){return Ze(t)?t():t}function Ze(t){return"function"==typeof t&&t.hasOwnProperty(Qe)&&t.__forward_ref__===it}class ye extends Error{constructor(n,r){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,r)),this.code=n}}function Ge(t){return"string"==typeof t?t:null==t?"":String(t)}function ce(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ge(t)}function ct(t,n){const r=n?` in ${n}`:"";throw new ye("201",`No provider for ${ce(t)} found${r}`)}function ke(t,n){null==t&&function(t,n,r,l){throw new Error(`ASSERTION ERROR: ${t}`+(null==l?"":` [Expected=> ${r} ${l} ${n} <=Actual]`))}(n,t,null,"!=")}function Ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function En(t){return{providers:t.providers||[],imports:t.imports||[]}}function Jn(t){return gn(t,mt)||gn(t,Kt)}function gn(t,n){return t.hasOwnProperty(n)?t[n]:null}function on(t){return t&&(t.hasOwnProperty(Je)||t.hasOwnProperty(cn))?t[Je]:null}const mt=be({\u0275prov:be}),Je=be({\u0275inj:be}),Kt=be({ngInjectableDef:be}),cn=be({ngInjectorDef:be});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let ln;function re(t){const n=ln;return ln=t,n}function tr(t,n,r){const l=Jn(t);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:r&kt.Optional?null:void 0!==n?n:void ct(Oe(t),"Injector")}function Sr(t){return{toString:t}.toString()}var ni=(()=>((ni=ni||{})[ni.OnPush=0]="OnPush",ni[ni.Default=1]="Default",ni))(),Ue=(()=>((Ue=Ue||{})[Ue.Emulated=0]="Emulated",Ue[Ue.None=2]="None",Ue[Ue.ShadowDom=3]="ShadowDom",Ue))();const qe="undefined"!=typeof globalThis&&globalThis,He="undefined"!=typeof window&&window,Nt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,rn=qe||"undefined"!=typeof global&&global||He||Nt,ir={},Sn=[],_r=be({\u0275cmp:be}),Rn=be({\u0275dir:be}),qr=be({\u0275pipe:be}),Kr=be({\u0275mod:be}),bi=be({\u0275loc:be}),rr=be({\u0275fac:be}),ki=be({__NG_ELEMENT_ID__:be});let ji=0;function Ii(t){return Sr(()=>{const r={},l={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ni.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Sn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ue.Emulated,id:"c",styles:t.styles||Sn,_:null,setInput:null,schemas:t.schemas||null,tView:null},d=t.directives,p=t.features,E=t.pipes;return l.id+=ji++,l.inputs=bs(t.inputs,r),l.outputs=bs(t.outputs),p&&p.forEach(C=>C(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(Pn):null,l.pipeDefs=E?()=>("function"==typeof E?E():E).map(xr):null,l})}function Pn(t){return lr(t)||function(t){return t[Rn]||null}(t)}function xr(t){return function(t){return t[qr]||null}(t)}const Hr={};function Fi(t){return Sr(()=>{const n={type:t.type,bootstrap:t.bootstrap||Sn,declarations:t.declarations||Sn,imports:t.imports||Sn,exports:t.exports||Sn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Hr[t.id]=t.type),n})}function Yi(t,n){return Sr(()=>{const r=Qr(t,!0);r.declarations=n.declarations||Sn,r.imports=n.imports||Sn,r.exports=n.exports||Sn})}function bs(t,n){if(null==t)return ir;const r={};for(const l in t)if(t.hasOwnProperty(l)){let d=t[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),r[d]=l,n&&(n[d]=p)}return r}const ei=Ii;function ws(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function lr(t){return t[_r]||null}function Qr(t,n){const r=t[Kr]||null;if(!r&&!0===n)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return r}function hi(t){return Array.isArray(t)&&"object"==typeof t[1]}function fi(t){return Array.isArray(t)&&!0===t[1]}function Ps(t){return 0!=(8&t.flags)}function Os(t){return 2==(2&t.flags)}function cs(t){return 1==(1&t.flags)}function Ri(t){return null!==t.template}function ri(t){return 0!=(512&t[2])}function Ui(t,n){return t.hasOwnProperty(rr)?t[rr]:null}class ts{constructor(n,r,l){this.previousValue=n,this.currentValue=r,this.firstChange=l}isFirstChange(){return this.firstChange}}function _o(){return Us}function Us(t){return t.type.prototype.ngOnChanges&&(t.setInput=Vs),Zi}function Zi(){const t=Ys(this),n=null==t?void 0:t.current;if(n){const r=t.previous;if(r===ir)t.previous=n;else for(let l in n)r[l]=n[l];t.current=null,this.ngOnChanges(n)}}function Vs(t,n,r,l){const d=Ys(t)||function(t,n){return t[oo]=n}(t,{previous:ir,current:null}),p=d.current||(d.current={}),E=d.previous,C=this.declaredInputs[r],R=E[C];p[C]=new ts(R&&R.currentValue,n,E===ir),t[l]=n}_o.ngInherit=!0;const oo="__ngSimpleChanges__";function Ys(t){return t[oo]||null}let Pe;function gt(t){Pe=t}function $t(){return void 0!==Pe?Pe:"undefined"!=typeof document?document:void 0}function k(t){return!!t.listen}const X={createRenderer:(t,n)=>$t()};function Ft(t){for(;Array.isArray(t);)t=t[0];return t}function ii(t,n){return Ft(n[t])}function Wr(t,n){return Ft(n[t.index])}function ps(t,n){return t.data[n]}function Bs(t,n){return t[n]}function Q(t,n){const r=n[t];return hi(r)?r:r[0]}function G(t){return 4==(4&t[2])}function pe(t){return 128==(128&t[2])}function We(t,n){return null==n?null:t[n]}function xt(t){t[18]=0}function Wt(t,n){t[5]+=n;let r=t,l=t[3];for(;null!==l&&(1===n&&1===r[5]||-1===n&&0===r[5]);)l[5]+=n,r=l,l=l[3]}const en={lFrame:Jl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Mr(){return en.bindingsEnabled}function Bt(){return en.lFrame.lView}function ur(){return en.lFrame.tView}function Ai(t){return en.lFrame.contextLView=t,t[8]}function Fr(){let t=ai();for(;null!==t&&64===t.type;)t=t.parent;return t}function ai(){return en.lFrame.currentTNode}function Pr(t,n){const r=en.lFrame;r.currentTNode=t,r.isParent=n}function gs(){return en.lFrame.isParent}function Qs(){en.lFrame.isParent=!1}function yo(){return en.isInCheckNoChangesMode}function ta(t){en.isInCheckNoChangesMode=t}function ns(){const t=en.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function ll(){return en.lFrame.bindingIndex++}function ra(t){const n=en.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,r}function li(t,n){const r=en.lFrame;r.bindingIndex=r.bindingRootIndex=t,Ql(n)}function Ql(t){en.lFrame.currentDirectiveIndex=t}function vo(t){const n=en.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Rl(){return en.lFrame.currentQueryIndex}function Ts(t){en.lFrame.currentQueryIndex=t}function ao(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function La(t,n,r){if(r&kt.SkipSelf){let d=n,p=t;for(;!(d=d.parent,null!==d||r&kt.Host||(d=ao(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;n=d,t=p}const l=en.lFrame=Iu();return l.currentTNode=n,l.lView=t,!0}function cr(t){const n=Iu(),r=t[1];en.lFrame=n,n.currentTNode=r.firstChild,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function Iu(){const t=en.lFrame,n=null===t?null:t.child;return null===n?Jl(t):n}function Jl(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Xl(){const t=en.lFrame;return en.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Di=Xl;function eu(){const t=Xl();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pi(){return en.lFrame.selectedIndex}function Eo(t){en.lFrame.selectedIndex=t}function gi(){const t=en.lFrame;return ps(t.tView,t.selectedIndex)}function Xs(t,n){for(let r=n.directiveStart,l=n.directiveEnd;r<l;r++){const p=t.data[r].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:C,ngAfterViewInit:R,ngAfterViewChecked:V,ngOnDestroy:z}=p;E&&(t.contentHooks||(t.contentHooks=[])).push(-r,E),C&&((t.contentHooks||(t.contentHooks=[])).push(r,C),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,C)),R&&(t.viewHooks||(t.viewHooks=[])).push(-r,R),V&&((t.viewHooks||(t.viewHooks=[])).push(r,V),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,V)),null!=z&&(t.destroyHooks||(t.destroyHooks=[])).push(r,z)}}function $o(t,n,r){dl(t,n,3,r)}function bo(t,n,r,l){(3&t[2])===r&&dl(t,n,r,l)}function Pl(t,n){let r=t[2];(3&r)===n&&(r&=2047,r+=1,t[2]=r)}function dl(t,n,r,l){const p=null!=l?l:-1,E=n.length-1;let C=0;for(let R=void 0!==l?65535&t[18]:0;R<E;R++)if("number"==typeof n[R+1]){if(C=n[R],null!=l&&C>=l)break}else n[R]<0&&(t[18]+=65536),(C<p||-1==p)&&(Qc(t,r,n,R),t[18]=(4294901760&t[18])+R+2),R++}function Qc(t,n,r,l){const d=r[l]<0,p=r[l+1],C=t[d?-r[l]:r[l]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class ms{constructor(n,r,l){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=l}}function fl(t,n,r){const l=k(t);let d=0;for(;d<r.length;){const p=r[d];if("number"==typeof p){if(0!==p)break;d++;const E=r[d++],C=r[d++],R=r[d++];l?t.setAttribute(n,C,R,E):n.setAttributeNS(E,C,R)}else{const E=p,C=r[++d];iu(E)?l&&t.setProperty(n,E,C):l?t.setAttribute(n,E,C):n.setAttribute(E,C),d++}}return d}function _a(t){return 3===t||4===t||6===t}function iu(t){return 64===t.charCodeAt(0)}function oa(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let r=-1;for(let l=0;l<n.length;l++){const d=n[l];"number"==typeof d?r=d:0===r||ya(t,r,d,null,-1===r||2===r?n[++l]:null)}}return t}function ya(t,n,r,l,d){let p=0,E=t.length;if(-1===n)E=-1;else for(;p<t.length;){const C=t[p++];if("number"==typeof C){if(C===n){E=-1;break}if(C>n){E=p-1;break}}}for(;p<t.length;){const C=t[p];if("number"==typeof C)break;if(C===r){if(null===l)return void(null!==d&&(t[p+1]=d));if(l===t[p+1])return void(t[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==E&&(t.splice(E,0,n),p=E+1),t.splice(p++,0,r),null!==l&&t.splice(p++,0,l),null!==d&&t.splice(p++,0,d)}function su(t){return-1!==t}function mi(t){return 32767&t}function Ms(t,n){let r=function(t){return t>>16}(t),l=n;for(;r>0;)l=l[15],r--;return l}let lo=!0;function Ol(t){const n=lo;return lo=t,n}let ja=0;function $n(t,n){const r=pn(t,n);if(-1!==r)return r;const l=n[1];l.firstCreatePass&&(t.injectorIndex=n.length,Ho(l.data,t),Ho(n,null),Ho(l.blueprint,null));const d=St(t,n),p=t.injectorIndex;if(su(d)){const E=mi(d),C=Ms(d,n),R=C[1].data;for(let V=0;V<8;V++)n[p+V]=C[E+V]|R[E+V]}return n[p+8]=d,p}function Ho(t,n){t.push(0,0,0,0,0,0,0,0,n)}function pn(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function St(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,l=null,d=n;for(;null!==d;){const p=d[1],E=p.type;if(l=2===E?p.declTNode:1===E?d[6]:null,null===l)return-1;if(r++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|r<<16}return-1}function zt(t,n,r){!function(t,n,r){let l;"string"==typeof r?l=r.charCodeAt(0)||0:r.hasOwnProperty(ki)&&(l=r[ki]),null==l&&(l=r[ki]=ja++);const d=255&l;n.data[t+(d>>5)]|=1<<d}(t,n,r)}function Ec(t,n,r){if(r&kt.Optional)return t;ct(n,"NodeInjector")}function aa(t,n,r,l){if(r&kt.Optional&&void 0===l&&(l=null),0==(r&(kt.Self|kt.Host))){const d=t[9],p=re(void 0);try{return d?d.get(n,l,r&kt.Optional):tr(n,l,r&kt.Optional)}finally{re(p)}}return Ec(l,n,r)}function va(t,n,r,l=kt.Default,d){if(null!==t){const p=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(ki)?t[ki]:void 0;return"number"==typeof n?n>=0?255&n:bc:n}(r);if("function"==typeof p){if(!La(n,t,l))return l&kt.Host?Ec(d,r,l):aa(n,r,l,d);try{const E=p(l);if(null!=E||l&kt.Optional)return E;ct(r)}finally{Di()}}else if("number"==typeof p){let E=null,C=pn(t,n),R=-1,V=l&kt.Host?n[16][6]:null;for((-1===C||l&kt.SkipSelf)&&(R=-1===C?St(t,n):n[C+8],-1!==R&&Ea(l,!1)?(E=n[1],C=mi(R),n=Ms(R,n)):C=-1);-1!==C;){const z=n[1];if(gr(p,C,z.data)){const fe=pl(C,n,r,E,l,V);if(fe!==Du)return fe}R=n[C+8],-1!==R&&Ea(l,n[1].data[C+8]===V)&&gr(p,C,n)?(E=z,C=mi(R),n=Ms(R,n)):C=-1}}}return aa(n,r,l,d)}const Du={};function bc(){return new gl(Fr(),Bt())}function pl(t,n,r,l,d,p){const E=n[1],C=E.data[t+8],z=ss(C,E,r,null==l?Os(C)&&lo:l!=E&&0!=(3&C.type),d&kt.Host&&p===C);return null!==z?$a(n,E,z,C):Du}function ss(t,n,r,l,d){const p=t.providerIndexes,E=n.data,C=1048575&p,R=t.directiveStart,z=p>>20,Ee=d?C+z:t.directiveEnd;for(let Be=l?C:C+z;Be<Ee;Be++){const lt=E[Be];if(Be<R&&r===lt||Be>=R&&lt.type===r)return Be}if(d){const Be=E[R];if(Be&&Ri(Be)&&Be.type===r)return R}return null}function $a(t,n,r,l){let d=t[r];const p=n.data;if(function(t){return t instanceof ms}(d)){const E=d;E.resolving&&function(t,n){throw new ye("200",`Circular dependency in DI detected for ${t}`)}(ce(p[r]));const C=Ol(E.canSeeViewProviders);E.resolving=!0;const R=E.injectImpl?re(E.injectImpl):null;La(t,l,kt.Default);try{d=t[r]=E.factory(void 0,p,t,l),n.firstCreatePass&&r>=l.directiveStart&&function(t,n,r){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=n.type.prototype;if(l){const E=Us(n);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,E),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,E)}d&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,d),p&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,p),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,p))}(r,p[r],n)}finally{null!==R&&re(R),Ol(C),E.resolving=!1,Di()}}return d}function gr(t,n,r){return!!(r[n+(t>>5)]&1<<t)}function Ea(t,n){return!(t&kt.Self||t&kt.Host&&n)}class gl{constructor(n,r){this._tNode=n,this._lView=r}get(n,r){return va(this._tNode,this._lView,n,void 0,r)}}function hr(t){return Sr(()=>{const n=t.prototype.constructor,r=n[rr]||Hn(n),l=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==l;){const p=d[rr]||Hn(d);if(p&&p!==r)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Hn(t){return Ze(t)?()=>{const n=Hn(nt(t));return n&&n()}:Ui(t)}function ba(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const r=t.attrs;if(r){const l=r.length;let d=0;for(;d<l;){const p=r[d];if(_a(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof r[d];)d++;else{if(p===n)return r[d+1];d+=2}}}return null}(Fr(),t)}const ml="__parameters__",Po="__prop__metadata__";function xu(t){return function(...r){if(t){const l=t(...r);for(const d in l)this[d]=l[d]}}}function P(t,n,r){return Sr(()=>{const l=xu(n);function d(...p){if(this instanceof d)return l.apply(this,p),this;const E=new d(...p);return C.annotation=E,C;function C(R,V,z){const fe=R.hasOwnProperty(ml)?R[ml]:Object.defineProperty(R,ml,{value:[]})[ml];for(;fe.length<=z;)fe.push(null);return(fe[z]=fe[z]||[]).push(E),R}}return r&&(d.prototype=Object.create(r.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}function S(t,n,r,l){return Sr(()=>{const d=xu(n);function p(...E){if(this instanceof p)return d.apply(this,E),this;const C=new p(...E);return function(V,z){const fe=V.constructor,Ee=fe.hasOwnProperty(Po)?fe[Po]:Object.defineProperty(fe,Po,{value:{}})[Po];Ee[z]=Ee.hasOwnProperty(z)&&Ee[z]||[],Ee[z].unshift(C),l&&l(V,z,...E)}}return r&&(p.prototype=Object.create(r.prototype)),p.prototype.ngMetadataName=t,p.annotationCls=p,p})}class we{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=Ct({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ke=new we("AnalyzeForEntryComponents"),_l=Function;function uo(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let l=t[r];Array.isArray(l)?(n===t&&(n=t.slice(0,r)),uo(l,n)):n!==t&&n.push(l)}return n}function Ca(t,n){t.forEach(r=>Array.isArray(r)?Ca(r,n):n(r))}function Ga(t,n,r){n>=t.length?t.push(r):t.splice(n,0,r)}function Go(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function to(t,n,r){let l=qi(t,n);return l>=0?t[1|l]=r:(l=~l,function(t,n,r,l){let d=t.length;if(d==n)t.push(r,l);else if(1===d)t.push(l,t[0]),t[0]=r;else{for(d--,t.push(t[d-1],t[d]);d>n;)t[d]=t[d-2],d--;t[n]=r,t[n+1]=l}}(t,l,n,r)),l}function Wa(t,n){const r=qi(t,n);if(r>=0)return t[1|r]}function qi(t,n){return function(t,n,r){let l=0,d=t.length>>r;for(;d!==l;){const p=l+(d-l>>1),E=t[p<<r];if(n===E)return p<<r;E>n?d=p:l=p+1}return~(d<<r)}(t,n,1)}const hn={},fr="__NG_DI_FLAG__",zr="ngTempTokenPath",As=/\n/gm,To="__source",za=be({provide:String,useValue:be});let Oo;function Io(t){const n=Oo;return Oo=t,n}function Pu(t,n=kt.Default){if(void 0===Oo)throw new Error("inject() must be called from an injection context");return null===Oo?tr(t,void 0,n):Oo.get(t,n&kt.Optional?null:void 0,n)}function Wi(t,n=kt.Default){return(ln||Pu)(nt(t),n)}function Ka(t){const n=[];for(let r=0;r<t.length;r++){const l=nt(t[r]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,p=kt.Default;for(let E=0;E<l.length;E++){const C=l[E],R=Xc(C);"number"==typeof R?-1===R?d=C.token:p|=R:d=C}n.push(Wi(d,p))}else n.push(Wi(l))}return n}function Ia(t,n){return t[fr]=n,t.prototype[fr]=n,t}function Xc(t){return t[fr]}function Wu(t,n,r,l){const d=t[zr];throw n[To]&&d.unshift(n[To]),t.message=function(t,n,r,l=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let d=Oe(n);if(Array.isArray(n))d=n.map(Oe).join(" -> ");else if("object"==typeof n){let p=[];for(let E in n)if(n.hasOwnProperty(E)){let C=n[E];p.push(E+":"+("string"==typeof C?JSON.stringify(C):Oe(C)))}d=`{${p.join(", ")}}`}return`${r}${l?"("+l+")":""}[${d}]: ${t.replace(As,"\n  ")}`}("\n"+t.message,d,r,l),t.ngTokenPath=d,t[zr]=null,t}const Nl=Ia(P("Inject",t=>({token:t})),-1),Ml=Ia(P("Optional"),8),El=Ia(P("SkipSelf"),4);let nd,Ja;function uu(t){var n;return(null===(n=function(){if(void 0===nd&&(nd=null,rn.trustedTypes))try{nd=rn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return nd}())||void 0===n?void 0:n.createHTML(t))||t}function Ah(t){var n;return(null===(n=function(){if(void 0===Ja&&(Ja=null,rn.trustedTypes))try{Ja=rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ja}())||void 0===n?void 0:n.createHTML(t))||t}class So{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xh extends So{getTypeName(){return"HTML"}}class $s extends So{getTypeName(){return"Style"}}class Zr extends So{getTypeName(){return"Script"}}class Tf extends So{getTypeName(){return"URL"}}class Fd extends So{getTypeName(){return"ResourceURL"}}function Mi(t){return t instanceof So?t.changingThisBreaksApplicationSecurity:t}function bl(t,n){const r=xs(t);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===n}function xs(t){return t instanceof So&&t.getTypeName()||null}function os(t){return new xh(t)}function id(t){return new $s(t)}function cu(t){return new Zr(t)}function la(t){return new Tf(t)}function If(t){return new Fd(t)}class Ud{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const r=(new window.DOMParser).parseFromString(uu(n),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(n):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class Rh{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const l=this.inertDocument.createElement("body");r.appendChild(l)}}getInertBodyElement(n){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=uu(n),r;const l=this.inertDocument.createElement("body");return l.innerHTML=uu(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(n){const r=n.attributes;for(let d=r.length-1;0<d;d--){const E=r.item(d).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&n.removeAttribute(E)}let l=n.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Xr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function wl(t){return(t=String(t)).match(Xr)||t.match(Vd)?t:"unsafe:"+t}function qo(t){const n={};for(const r of t.split(","))n[r]=!0;return n}function du(...t){const n={};for(const r of t)for(const l in r)r.hasOwnProperty(l)&&(n[l]=!0);return n}const Xu=qo("area,br,col,hr,img,wbr"),Ph=qo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cc=qo("rp,rt"),Bd=du(Xu,du(Ph,qo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),du(Cc,qo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),du(Cc,Ph)),sd=qo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Cl=qo("srcset"),yi=du(sd,Cl,qo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jd=qo("script,style,template");class Df{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let r=n.firstChild,l=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?l=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,l&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let d=this.checkClobberedElement(r,r.nextSibling);if(d){r=d;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(n){const r=n.nodeName.toLowerCase();if(!Bd.hasOwnProperty(r))return this.sanitizedSomething=!0,!jd.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const l=n.attributes;for(let d=0;d<l.length;d++){const p=l.item(d),E=p.name,C=E.toLowerCase();if(!yi.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let R=p.value;sd[C]&&(R=wl(R)),Cl[C]&&(t=R,R=(t=String(t)).split(",").map(n=>wl(n.trim())).join(", ")),this.buf.push(" ",E,'="',No(R),'"')}var t;return this.buf.push(">"),!0}endElement(n){const r=n.nodeName.toLowerCase();Bd.hasOwnProperty(r)&&!Xu.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(n){this.buf.push(No(n))}checkClobberedElement(n,r){if(r&&(n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return r}}const ku=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xa=/([^\#-~ |!])/g;function No(t){return t.replace(/&/g,"&amp;").replace(ku,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Xa,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fu;function Lu(t,n){let r=null;try{Fu=Fu||function(t){const n=new Rh(t);return function(){try{return!!(new window.DOMParser).parseFromString(uu(""),"text/html")}catch(t){return!1}}()?new Ud(n):n}(t);let l=n?String(n):"";r=Fu.getInertBodyElement(l);let d=5,p=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=p,p=r.innerHTML,r=Fu.getInertBodyElement(l)}while(l!==p);return uu((new Df).sanitizeChildren(Ic(r)||r))}finally{if(r){const l=Ic(r)||r;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Ic(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ji=(()=>((Ji=Ji||{})[Ji.NONE=0]="NONE",Ji[Ji.HTML=1]="HTML",Ji[Ji.STYLE=2]="STYLE",Ji[Ji.SCRIPT=3]="SCRIPT",Ji[Ji.URL=4]="URL",Ji[Ji.RESOURCE_URL=5]="RESOURCE_URL",Ji))();function ua(t){const n=Dc();return n?Ah(n.sanitize(Ji.HTML,t)||""):bl(t,"HTML")?Ah(Mi(t)):Lu($t(),Ge(t))}function Tl(t){const n=Dc();return n?n.sanitize(Ji.URL,t)||"":bl(t,"URL")?Mi(t):wl(Ge(t))}function Dc(){const t=Bt();return t&&t[12]}const Hs="__ngContext__";function ho(t,n){t[Hs]=n}function Wd(t){const n=function(t){return t[Hs]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Ot(t){return t.ngOriginalError}function kn(t,...n){t.error(...n)}class Kn{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n),l=this._findContext(n),d=(t=n)&&t.ngErrorLogger||kn;var t;d(this._console,"ERROR",n),r&&d(this._console,"ORIGINAL ERROR",r),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(n){return n?n.ngDebugContext||this._findContext(Ot(n)):null}_findOriginalError(n){let r=n&&Ot(n);for(;r&&Ot(r);)r=Ot(r);return r||null}}const Nh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rn))();function od(t){return t.ownerDocument}function Vl(t){return t instanceof Function?t():t}var pa=(()=>((pa=pa||{})[pa.Important=1]="Important",pa[pa.DashCase=2]="DashCase",pa))();function ec(t,n){return undefined(t,n)}function Vu(t){const n=t[3];return fi(n)?n[3]:n}function Nf(t){return Np(t[13])}function Mf(t){return Np(t[4])}function Np(t){for(;null!==t&&!fi(t);)t=t[4];return t}function tc(t,n,r,l,d){if(null!=l){let p,E=!1;fi(l)?p=l:hi(l)&&(E=!0,l=l[0]);const C=Ft(l);0===t&&null!==r?null==d?Ff(n,r,C):kc(n,r,C,d||null,!0):1===t&&null!==r?kc(n,r,C,d||null,!0):2===t?function(t,n,r){const l=kh(t,n);l&&function(t,n,r,l){k(t)?t.removeChild(n,r,l):n.removeChild(r)}(t,l,n,r)}(n,C,E):3===t&&n.destroyNode(C),null!=p&&function(t,n,r,l,d){const p=r[7];p!==Ft(r)&&tc(n,t,l,p,d);for(let C=10;C<r.length;C++){const R=r[C];rc(R[1],R,t,n,l,p)}}(n,t,p,r,d)}}function ga(t,n,r){return k(t)?t.createElement(n,r):null===r?t.createElement(n):t.createElementNS(r,n)}function Lp(t,n){const r=t[9],l=r.indexOf(n),d=n[3];1024&n[2]&&(n[2]&=-1025,Wt(d,-1)),r.splice(l,1)}function nc(t,n){if(t.length<=10)return;const r=10+n,l=t[r];if(l){const d=l[17];null!==d&&d!==t&&Lp(d,l),n>0&&(t[r-1][4]=l[4]);const p=Go(t,10+n);!function(t,n){rc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(l[1],l);const E=p[19];null!==E&&E.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function im(t,n){if(!(256&n[2])){const r=n[11];k(r)&&r.destroyNode&&rc(t,n,r,3,null,null),function(t){let n=t[13];if(!n)return Oc(t[1],t);for(;n;){let r=null;if(hi(n))r=n[13];else{const l=n[10];l&&(r=l)}if(!r){for(;n&&!n[4]&&n!==t;)hi(n)&&Oc(n[1],n),n=n[3];null===n&&(n=t),hi(n)&&Oc(n[1],n),r=n&&n[4]}n=r}}(n)}}function Oc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let l=0;l<r.length;l+=2){const d=n[r[l]];if(!(d instanceof ms)){const p=r[l+1];if(Array.isArray(p))for(let E=0;E<p.length;E+=2){const C=d[p[E]],R=p[E+1];try{R.call(C)}finally{}}else try{p.call(d)}finally{}}}}(t,n),function(t,n){const r=t.cleanup,l=n[7];let d=-1;if(null!==r)for(let p=0;p<r.length-1;p+=2)if("string"==typeof r[p]){const E=r[p+1],C="function"==typeof E?E(n):Ft(n[E]),R=l[d=r[p+2]],V=r[p+3];"boolean"==typeof V?C.removeEventListener(r[p],R,V):V>=0?l[d=V]():l[d=-V].unsubscribe(),p+=2}else{const E=l[d=r[p+1]];r[p].call(E)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();n[7]=null}}(t,n),1===n[1].type&&k(n[11])&&n[11].destroy();const r=n[17];if(null!==r&&fi(n[3])){r!==n[3]&&Lp(r,n);const l=n[19];null!==l&&l.detachView(t)}}}function Mc(t,n,r){return function(t,n,r){let l=n;for(;null!==l&&40&l.type;)l=(n=l).parent;if(null===l)return r[0];if(2&l.flags){const d=t.data[l.directiveStart].encapsulation;if(d===Ue.None||d===Ue.Emulated)return null}return Wr(l,r)}(t,n.parent,r)}function kc(t,n,r,l,d){k(t)?t.insertBefore(n,r,l,d):n.insertBefore(r,l,d)}function Ff(t,n,r){k(t)?t.appendChild(n,r):n.appendChild(r)}function Up(t,n,r,l,d){null!==l?kc(t,n,r,l,d):Ff(t,n,r)}function kh(t,n){return k(t)?t.parentNode(n):n.parentNode}let om=function(t,n,r){return 40&t.type?Wr(t,r):null};function pu(t,n,r,l){const d=Mc(t,l,n),p=n[11],C=function(t,n,r){return om(t,n,r)}(l.parent||n[6],l,n);if(null!=d)if(Array.isArray(r))for(let R=0;R<r.length;R++)Up(p,d,r[R],C,!1);else Up(p,d,r,C,!1)}function dd(t,n){if(null!==n){const r=n.type;if(3&r)return Wr(n,t);if(4&r)return Uf(-1,t[n.index]);if(8&r){const l=n.child;if(null!==l)return dd(t,l);{const d=t[n.index];return fi(d)?Uf(-1,d):Ft(d)}}if(32&r)return ec(n,t)()||Ft(t[n.index]);{const l=lm(t,n);return null!==l?Array.isArray(l)?l[0]:dd(Vu(t[16]),l):dd(t,n.next)}}return null}function lm(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Uf(t,n){const r=10+t+1;if(r<n.length){const l=n[r],d=l[1].firstChild;if(null!==d)return dd(l,d)}return n[7]}function Fh(t,n,r,l,d,p,E){for(;null!=r;){const C=l[r.index],R=r.type;if(E&&0===n&&(C&&ho(Ft(C),l),r.flags|=4),64!=(64&r.flags))if(8&R)Fh(t,n,r.child,l,d,p,!1),tc(n,t,d,C,p);else if(32&R){const V=ec(r,l);let z;for(;z=V();)tc(n,t,d,z,p);tc(n,t,d,C,p)}else 16&R?jf(t,n,l,r,d,p):tc(n,t,d,C,p);r=E?r.projectionNext:r.next}}function rc(t,n,r,l,d,p){Fh(r,l,t.firstChild,n,d,p,!1)}function jf(t,n,r,l,d,p){const E=r[16],R=E[6].projection[l.projection];if(Array.isArray(R))for(let V=0;V<R.length;V++)tc(n,t,d,R[V],p);else Fh(t,n,R,E[3],d,p,!0)}function $f(t,n,r){k(t)?t.setAttribute(n,"style",r):n.style.cssText=r}function Hf(t,n,r){k(t)?""===r?t.removeAttribute(n,"class"):t.setAttribute(n,"class",r):n.className=r}function um(t,n,r){let l=t.length;for(;;){const d=t.indexOf(n,r);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const p=n.length;if(d+p===l||t.charCodeAt(d+p)<=32)return d}r=d+1}}const jp="ng-template";function $p(t,n,r){let l=0;for(;l<t.length;){let d=t[l++];if(r&&"class"===d){if(d=t[l],-1!==um(d.toLowerCase(),n,0))return!0}else if(1===d){for(;l<t.length&&"string"==typeof(d=t[l++]);)if(d.toLowerCase()===n)return!0;return!1}}return!1}function dm(t){return 4===t.type&&t.value!==jp}function hm(t,n,r){return n===(4!==t.type||r?t.value:jp)}function Fc(t,n,r){let l=4;const d=t.attrs||[],p=function(t){for(let n=0;n<t.length;n++)if(_a(t[n]))return n;return t.length}(d);let E=!1;for(let C=0;C<n.length;C++){const R=n[C];if("number"!=typeof R){if(!E)if(4&l){if(l=2|1&l,""!==R&&!hm(t,R,r)||""===R&&1===n.length){if(Ki(l))return!1;E=!0}}else{const V=8&l?R:n[++C];if(8&l&&null!==t.attrs){if(!$p(t.attrs,V,r)){if(Ki(l))return!1;E=!0}continue}const fe=Il(8&l?"class":R,d,dm(t),r);if(-1===fe){if(Ki(l))return!1;E=!0;continue}if(""!==V){let Ee;Ee=fe>p?"":d[fe+1].toLowerCase();const Be=8&l?Ee:null;if(Be&&-1!==um(Be,V,0)||2&l&&V!==Ee){if(Ki(l))return!1;E=!0}}}}else{if(!E&&!Ki(l)&&!Ki(R))return!1;if(E&&Ki(R))continue;E=!1,l=R|1&l}}return Ki(l)||E}function Ki(t){return 0==(1&t)}function Il(t,n,r,l){if(null===n)return-1;let d=0;if(l||!r){let p=!1;for(;d<n.length;){const E=n[d];if(E===t)return d;if(3===E||6===E)p=!0;else{if(1===E||2===E){let C=n[++d];for(;"string"==typeof C;)C=n[++d];continue}if(4===E)break;if(0===E){d+=4;continue}}d+=p?1:2}return-1}return function(t,n){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const l=t[r];if("number"==typeof l)return-1;if(l===n)return r;r++}return-1}(n,t)}function gu(t,n,r=!1){for(let l=0;l<n.length;l++)if(Fc(t,n[l],r))return!0;return!1}function Zp(t,n){return t?":not("+n.trim()+")":n}function d_(t){let n=t[0],r=1,l=2,d="",p=!1;for(;r<t.length;){let E=t[r];if("string"==typeof E)if(2&l){const C=t[++r];d+="["+E+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?d+="."+E:4&l&&(d+=" "+E);else""!==d&&!Ki(E)&&(n+=Zp(p,d),d=""),l=E,p=p||!Ki(l);r++}return""!==d&&(n+=Zp(p,d)),n}const wr={};function qp(t){Lh(ur(),Bt(),pi()+t,yo())}function Lh(t,n,r,l){if(!l)if(3==(3&n[2])){const p=t.preOrderCheckHooks;null!==p&&$o(n,p,r)}else{const p=t.preOrderHooks;null!==p&&bo(n,p,0,r)}Eo(r)}function Uh(t,n){return t<<17|n<<2}function zo(t){return t>>17&32767}function Wp(t){return 2|t}function ic(t){return(131068&t)>>2}function Gf(t,n){return-131069&t|n<<2}function qf(t){return 1|t}function Jf(t,n){const r=t.contentQueries;if(null!==r)for(let l=0;l<r.length;l+=2){const d=r[l],p=r[l+1];if(-1!==p){const E=t.data[p];Ts(d),E.contentQueries(2,n[p],p)}}}function gd(t,n,r,l,d,p,E,C,R,V){const z=n.blueprint.slice();return z[0]=d,z[2]=140|l,xt(z),z[3]=z[15]=t,z[8]=r,z[10]=E||t&&t[10],z[11]=C||t&&t[11],z[12]=R||t&&t[12]||null,z[9]=V||t&&t[9]||null,z[6]=p,z[16]=2==n.type?t[16]:z,z}function oc(t,n,r,l,d){let p=t.data[n];if(null===p)p=function(t,n,r,l,d){const p=ai(),E=gs(),R=t.data[n]=function(t,n,r,l,d,p){return{type:r,index:l,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?p:p&&p.parent,r,n,l,d);return null===t.firstChild&&(t.firstChild=R),null!==p&&(E?null==p.child&&null!==R.parent&&(p.child=R):null===p.next&&(p.next=R)),R}(t,n,r,l,d),en.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=r,p.value=l,p.attrs=d;const E=function(){const t=en.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();p.injectorIndex=null===E?-1:E.injectorIndex}return Pr(p,!0),p}function md(t,n,r,l){if(0===r)return-1;const d=n.length;for(let p=0;p<r;p++)n.push(l),t.blueprint.push(l),t.data.push(null);return d}function Xf(t,n,r){cr(n);try{const l=t.viewQuery;null!==l&&bd(1,l,r);const d=t.template;null!==d&&ep(t,n,d,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Jf(t,n),t.staticViewQueries&&bd(2,t.viewQuery,r);const p=t.components;null!==p&&function(t,n){for(let r=0;r<n.length;r++)ap(t,n[r])}(n,p)}catch(l){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),l}finally{n[2]&=-5,eu()}}function ac(t,n,r,l){const d=n[2];if(256==(256&d))return;cr(n);const p=yo();try{xt(n),function(t){en.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&ep(t,n,r,2,l);const E=3==(3&d);if(!p)if(E){const V=t.preOrderCheckHooks;null!==V&&$o(n,V,null)}else{const V=t.preOrderHooks;null!==V&&bo(n,V,0,null),Pl(n,0)}if(function(t){for(let n=Nf(t);null!==n;n=Mf(n)){if(!n[2])continue;const r=n[9];for(let l=0;l<r.length;l++){const d=r[l],p=d[3];0==(1024&d[2])&&Wt(p,1),d[2]|=1024}}}(n),function(t){for(let n=Nf(t);null!==n;n=Mf(n))for(let r=10;r<n.length;r++){const l=n[r],d=l[1];pe(l)&&ac(d,l,d.template,l[8])}}(n),null!==t.contentQueries&&Jf(t,n),!p)if(E){const V=t.contentCheckHooks;null!==V&&$o(n,V)}else{const V=t.contentHooks;null!==V&&bo(n,V,1),Pl(n,1)}!function(t,n){const r=t.hostBindingOpCodes;if(null!==r)try{for(let l=0;l<r.length;l++){const d=r[l];if(d<0)Eo(~d);else{const p=d,E=r[++l],C=r[++l];li(E,p),C(2,n[p])}}}finally{Eo(-1)}}(t,n);const C=t.components;null!==C&&function(t,n){for(let r=0;r<n.length;r++)vd(t,n[r])}(n,C);const R=t.viewQuery;if(null!==R&&bd(2,R,l),!p)if(E){const V=t.viewCheckHooks;null!==V&&$o(n,V)}else{const V=t.viewHooks;null!==V&&bo(n,V,2),Pl(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),p||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Wt(n[3],-1))}finally{eu()}}function Gh(t,n,r,l){const d=n[10],p=!yo(),E=G(n);try{p&&!E&&d.begin&&d.begin(),E&&Xf(t,n,l),ac(t,n,r,l)}finally{p&&!E&&d.end&&d.end()}}function ep(t,n,r,l,d){const p=pi(),E=2&l;try{Eo(-1),E&&n.length>20&&Lh(t,n,20,yo()),r(l,d)}finally{Eo(p)}}function tp(t,n,r){if(Ps(n)){const d=n.directiveEnd;for(let p=n.directiveStart;p<d;p++){const E=t.data[p];E.contentQueries&&E.contentQueries(1,r[p],p)}}}function yu(t,n,r){!Mr()||(function(t,n,r,l){const d=r.directiveStart,p=r.directiveEnd;t.firstCreatePass||$n(r,n),ho(l,n);const E=r.initialInputs;for(let C=d;C<p;C++){const R=t.data[C],V=Ri(R);V&&dg(n,r,R);const z=$a(n,t,C,r);ho(z,n),null!==E&&__(0,C-d,z,R,0,E),V&&(Q(r.index,n)[8]=z)}}(t,n,r,Wr(r,n)),128==(128&r.flags)&&function(t,n,r){const l=r.directiveStart,d=r.directiveEnd,E=r.index,C=en.lFrame.currentDirectiveIndex;try{Eo(E);for(let R=l;R<d;R++){const V=t.data[R],z=n[R];Ql(R),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&Cm(V,z)}}finally{Eo(-1),Ql(C)}}(t,n,r))}function qh(t,n,r=Wr){const l=n.localNames;if(null!==l){let d=n.index+1;for(let p=0;p<l.length;p+=2){const E=l[p+1],C=-1===E?r(n,t):t[E];t[d++]=C}}}function _d(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=np(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function np(t,n,r,l,d,p,E,C,R,V){const z=20+l,fe=z+d,Ee=function(t,n){const r=[];for(let l=0;l<n;l++)r.push(l<t?null:wr);return r}(z,fe),Be="function"==typeof V?V():V;return Ee[1]={type:t,blueprint:Ee,template:r,queries:null,viewQuery:C,declTNode:n,data:Ee.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:R,consts:Be,incompleteFirstPass:!1}}function zh(t,n,r,l){const d=Vc(n);null===r?d.push(l):(d.push(r),t.firstCreatePass&&Eg(t).push(l,d.length-1))}function Oa(t,n,r){for(let l in t)if(t.hasOwnProperty(l)){const d=t[l];(r=null===r?{}:r).hasOwnProperty(l)?r[l].push(n,d):r[l]=[n,d]}return r}function po(t,n,r,l,d,p,E,C){const R=Wr(n,r);let z,V=n.inputs;!C&&null!=V&&(z=V[l])?(wg(t,r,z,l,d),Os(n)&&function(t,n){const r=Q(n,t);16&r[2]||(r[2]|=64)}(r,n.index)):3&n.type&&(l=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(l),d=null!=E?E(d,n.value||"",l):d,k(p)?p.setProperty(R,l,d):iu(l)||(R.setProperty?R.setProperty(l,d):R[l]=d))}function rh(t,n,r,l){let d=!1;if(Mr()){const p=function(t,n,r){const l=t.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const E=l[p];gu(r,E.selectors,!1)&&(d||(d=[]),zt($n(r,n),t,E.type),Ri(E)?(Kh(t,r),d.unshift(E)):d.push(E))}return d}(t,n,r),E=null===l?null:{"":-1};if(null!==p){d=!0,ip(r,t.data.length,p.length);for(let z=0;z<p.length;z++){const fe=p[z];fe.providersResolver&&fe.providersResolver(fe)}let C=!1,R=!1,V=md(t,n,p.length,null);for(let z=0;z<p.length;z++){const fe=p[z];r.mergedAttrs=oa(r.mergedAttrs,fe.hostAttrs),cg(t,r,n,V,fe),ug(V,fe,E),null!==fe.contentQueries&&(r.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(r.flags|=128);const Ee=fe.type.prototype;!C&&(Ee.ngOnChanges||Ee.ngOnInit||Ee.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),C=!0),!R&&(Ee.ngOnChanges||Ee.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),R=!0),V++}!function(t,n){const l=n.directiveEnd,d=t.data,p=n.attrs,E=[];let C=null,R=null;for(let V=n.directiveStart;V<l;V++){const z=d[V],fe=z.inputs,Ee=null===p||dm(n)?null:fg(fe,p);E.push(Ee),C=Oa(fe,V,C),R=Oa(z.outputs,V,R)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=16),C.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=E,n.inputs=C,n.outputs=R}(t,r)}E&&function(t,n,r){if(n){const l=t.localNames=[];for(let d=0;d<n.length;d+=2){const p=r[n[d+1]];if(null==p)throw new ye("301",`Export of name '${n[d+1]}' not found!`);l.push(n[d],p)}}}(r,l,E)}return r.mergedAttrs=oa(r.mergedAttrs,r.attrs),d}function nl(t,n,r,l,d,p){const E=p.hostBindings;if(E){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const R=~n.index;(function(t){let n=t.length;for(;n>0;){const r=t[--n];if("number"==typeof r&&r<0)return r}return 0})(C)!=R&&C.push(R),C.push(l,d,E)}}function Cm(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Kh(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function ug(t,n,r){if(r){if(n.exportAs)for(let l=0;l<n.exportAs.length;l++)r[n.exportAs[l]]=t;Ri(n)&&(r[""]=t)}}function ip(t,n,r){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+r,t.providerIndexes=n}function cg(t,n,r,l,d){t.data[l]=d;const p=d.factory||(d.factory=Ui(d.type)),E=new ms(p,Ri(d),null);t.blueprint[l]=E,r[l]=E,nl(t,n,0,l,md(t,r,d.hostVars,wr),d)}function dg(t,n,r){const l=Wr(n,t),d=_d(r),p=t[10],E=Qh(t,gd(t,d,null,r.onPush?64:16,l,n,p,p.createRenderer(l,r),null,null));t[n.index]=E}function vu(t,n,r,l,d,p){const E=Wr(t,n);!function(t,n,r,l,d,p,E){if(null==p)k(t)?t.removeAttribute(n,d,r):n.removeAttribute(d);else{const C=null==E?Ge(p):E(p,l||"",d);k(t)?t.setAttribute(n,d,C,r):r?n.setAttributeNS(r,d,C):n.setAttribute(d,C)}}(n[11],E,p,t.value,r,l,d)}function __(t,n,r,l,d,p){const E=p[n];if(null!==E){const C=l.setInput;for(let R=0;R<E.length;){const V=E[R++],z=E[R++],fe=E[R++];null!==C?l.setInput(r,fe,V,z):r[z]=fe}}}function fg(t,n){let r=null,l=0;for(;l<n.length;){const d=n[l];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===r&&(r=[]),r.push(d,t[d],n[l+1])),l+=2}else l+=2;else l+=4}return r}function sp(t,n,r,l){return new Array(t,!0,!1,n,null,0,l,r,null,null)}function vd(t,n){const r=Q(n,t);if(pe(r)){const l=r[1];80&r[2]?ac(l,r,l.template,r[8]):r[5]>0&&Ed(r)}}function Ed(t){for(let l=Nf(t);null!==l;l=Mf(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const E=p[1];ac(E,p,E.template,p[8])}else p[5]>0&&Ed(p)}const r=t[1].components;if(null!==r)for(let l=0;l<r.length;l++){const d=Q(r[l],t);pe(d)&&d[5]>0&&Ed(d)}}function ap(t,n){const r=Q(n,t),l=r[1];(function(t,n){for(let r=n.length;r<t.blueprint.length;r++)n.push(t.blueprint[r])})(l,r),Xf(l,r,r[8])}function Qh(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function gg(t){for(;t;){t[2]|=64;const n=Vu(t);if(ri(t)&&!n)return t;t=n}return null}function Jh(t,n,r){const l=n[10];l.begin&&l.begin();try{ac(t,n,t.template,r)}catch(d){throw cp(n,d),d}finally{l.end&&l.end()}}function lp(t){!function(t){for(let n=0;n<t.components.length;n++){const r=t.components[n],l=Wd(r),d=l[1];Gh(d,l,d.template,r)}}(t[8])}function bd(t,n,r){Ts(0),n(t,r)}const vg=(()=>Promise.resolve(null))();function Vc(t){return t[7]||(t[7]=[])}function Eg(t){return t.cleanup||(t.cleanup=[])}function cp(t,n){const r=t[9],l=r?r.get(Kn,null):null;l&&l.handleError(n)}function wg(t,n,r,l,d){for(let p=0;p<r.length;){const E=r[p++],C=r[p++],R=n[E],V=t.data[E];null!==V.setInput?V.setInput(R,d,l,C):R[C]=d}}function Ko(t,n,r){const l=ii(n,t);!function(t,n,r){k(t)?t.setValue(n,r):n.textContent=r}(t[11],l,r)}function ef(t,n,r){let l=r?t.styles:null,d=r?t.classes:null,p=0;if(null!==n)for(let E=0;E<n.length;E++){const C=n[E];"number"==typeof C?p=C:1==p?d=Ye(d,C):2==p&&(l=Ye(l,C+": "+n[++E]+";"))}r?t.styles=l:t.stylesWithoutHost=l,r?t.classes=d:t.classesWithoutHost=d}const Bc=new we("INJECTOR",-1);class tf{get(n,r=hn){if(r===hn){const l=new Error(`NullInjectorError: No provider for ${Oe(n)}!`);throw l.name="NullInjectorError",l}return r}}const nf=new we("Set Injector scope."),wd={},E_={};let rf;function Sm(){return void 0===rf&&(rf=new tf),rf}function Tg(t,n=null,r=null,l){return new Ig(t,r,n||Sm(),l)}class Ig{constructor(n,r,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];r&&Ca(r,C=>this.processProvider(C,n,r)),Ca([n],C=>this.processInjectorType(C,[],p)),this.records.set(Bc,oh(void 0,this));const E=this.records.get(nf);this.scope=null!=E?E.value:null,this.source=d||("object"==typeof n?null:Oe(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,r=hn,l=kt.Default){this.assertNotDestroyed();const d=Io(this),p=re(void 0);try{if(!(l&kt.SkipSelf)){let C=this.records.get(n);if(void 0===C){const R=("function"==typeof(t=n)||"object"==typeof t&&t instanceof we)&&Jn(n);C=R&&this.injectableDefInScope(R)?oh(sf(n),wd):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(l&kt.Self?Sm():this.parent).get(n,r=l&kt.Optional&&r===hn?null:r)}catch(E){if("NullInjectorError"===E.name){if((E[zr]=E[zr]||[]).unshift(Oe(n)),d)throw E;return Wu(E,n,"R3InjectorError",this.source)}throw E}finally{re(p),Io(d)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((l,d)=>n.push(Oe(d))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,r,l){if(!(n=nt(n)))return!1;let d=on(n);const p=null==d&&n.ngModule||void 0,E=void 0===p?n:p,C=-1!==l.indexOf(E);if(void 0!==p&&(d=on(p)),null==d)return!1;if(null!=d.imports&&!C){let z;l.push(E);try{Ca(d.imports,fe=>{this.processInjectorType(fe,r,l)&&(void 0===z&&(z=[]),z.push(fe))})}finally{}if(void 0!==z)for(let fe=0;fe<z.length;fe++){const{ngModule:Ee,providers:Be}=z[fe];Ca(Be,lt=>this.processProvider(lt,Ee,Be||Sn))}}this.injectorDefTypes.add(E);const R=Ui(E)||(()=>new E);this.records.set(E,oh(R,wd));const V=d.providers;if(null!=V&&!C){const z=n;Ca(V,fe=>this.processProvider(fe,z,V))}return void 0!==p&&void 0!==n.providers}processProvider(n,r,l){let d=ah(n=nt(n))?n:nt(n&&n.provide);const p=hp(t=n)?oh(void 0,t.useValue):oh(af(t),wd);var t;if(ah(n)||!0!==n.multi)this.records.get(d);else{let E=this.records.get(d);E||(E=oh(void 0,wd,!0),E.factory=()=>Ka(E.multi),this.records.set(d,E)),d=n,E.multi.push(n)}this.records.set(d,p)}hydrate(n,r){return r.value===wd&&(r.value=E_,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(t=r.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const r=nt(n.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function sf(t){const n=Jn(t),r=null!==n?n.factory:Ui(t);if(null!==r)return r;if(t instanceof we)throw new Error(`Token ${Oe(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const l=function(t,n){const r=[];for(let l=0;l<t;l++)r.push(n);return r}(n,"?");throw new Error(`Can't resolve all parameters for ${Oe(t)}: (${l.join(", ")}).`)}const r=function(t){const n=t&&(t[mt]||t[Kt]);if(n){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),n}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function af(t,n,r){let l;if(ah(t)){const d=nt(t);return Ui(d)||sf(d)}if(hp(t))l=()=>nt(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))l=()=>t.useFactory(...Ka(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))l=()=>Wi(nt(t.useExisting));else{const d=nt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ui(d)||sf(d);l=()=>new d(...Ka(t.deps))}return l}function oh(t,n,r=!1){return{factory:t,value:n,multi:r?[]:void 0}}function hp(t){return null!==t&&"object"==typeof t&&za in t}function ah(t){return"function"==typeof t}const mp=function(t,n,r){return function(t,n=null,r=null,l){const d=Tg(t,n,r,l);return d._resolveInjectorDefTypes(),d}({name:r},n,t,r)};let Rs=(()=>{class t{static create(r,l){return Array.isArray(r)?mp(r,l,""):mp(r.providers,r.parent,r.name||"")}}return t.THROW_IF_NOT_FOUND=hn,t.NULL=new tf,t.\u0275prov=Ct({token:t,providedIn:"any",factory:()=>Wi(Bc)}),t.__NG_ELEMENT_ID__=-1,t})();function A_(t,n){Xs(Wd(t)[1],Fr())}function hf(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const l=[t];for(;n;){let d;if(Ri(t))d=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");d=n.\u0275dir}if(d){if(r){l.push(d);const E=t;E.inputs=ff(t.inputs),E.declaredInputs=ff(t.declaredInputs),E.outputs=ff(t.outputs);const C=d.hostBindings;C&&qs(t,C);const R=d.viewQuery,V=d.contentQueries;if(R&&km(t,R),V&&x_(t,V),je(t.inputs,d.inputs),je(t.declaredInputs,d.declaredInputs),je(t.outputs,d.outputs),Ri(d)&&d.data.animation){const z=t.data;z.animation=(z.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let E=0;E<p.length;E++){const C=p[E];C&&C.ngInherit&&C(t),C===hf&&(r=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,r=null;for(let l=t.length-1;l>=0;l--){const d=t[l];d.hostVars=n+=d.hostVars,d.hostAttrs=oa(d.hostAttrs,r=oa(r,d.hostAttrs))}}(l)}function ff(t){return t===ir?{}:t===Sn?[]:t}function km(t,n){const r=t.viewQuery;t.viewQuery=r?(l,d)=>{n(l,d),r(l,d)}:n}function x_(t,n){const r=t.contentQueries;t.contentQueries=r?(l,d,p)=>{n(l,d,p),r(l,d,p)}:n}function qs(t,n){const r=t.hostBindings;t.hostBindings=r?(l,d)=>{n(l,d),r(l,d)}:n}let dh=null;function hh(){if(!dh){const t=rn.Symbol;if(t&&t.iterator)dh=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<n.length;++r){const l=n[r];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(dh=l)}}}return dh}class Hl{constructor(n){this.wrapped=n}static wrap(n){return new Hl(n)}static unwrap(n){return Hl.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof Hl}}function pf(t){return!!Vg(t)&&(Array.isArray(t)||!(t instanceof Map)&&hh()in t)}function Vg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function dc(t,n,r){return t[n]=r}function Yo(t,n,r){return!Object.is(t[n],r)&&(t[n]=r,!0)}function Gl(t,n,r,l){const d=Bt();return Yo(d,ll(),n)&&(ur(),vu(gi(),d,t,n,r,l)),Gl}function Yn(t,n,r,l,d,p,E,C){const R=Bt(),V=ur(),z=t+20,fe=V.firstCreatePass?function(t,n,r,l,d,p,E,C,R){const V=n.consts,z=oc(n,t,4,E||null,We(V,C));rh(n,r,z,We(V,R)),Xs(n,z);const fe=z.tViews=np(2,z,l,d,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,V);return null!==n.queries&&(n.queries.template(n,z),fe.queries=n.queries.embeddedTView(z)),z}(z,V,R,n,r,l,d,p,E):V.data[z];Pr(fe,!1);const Ee=R[11].createComment("");pu(V,R,Ee,fe),ho(Ee,R),Qh(R,R[z]=sp(Ee,R,Ee,fe)),cs(fe)&&yu(V,R,fe),null!=E&&qh(R,fe,C)}function vi(t){return Bs(en.lFrame.contextLView,20+t)}function Ip(t,n=kt.Default){const r=Bt();return null===r?Wi(t,n):va(Fr(),r,nt(t),n)}function gh(t,n,r){const l=Bt();return Yo(l,ll(),n)&&po(ur(),gi(),l,t,n,l[11],r,!1),gh}function $g(t,n,r,l,d){const E=d?"class":"style";wg(t,r,n.inputs[E],E,l)}function U_(t,n,r,l){const d=Bt(),p=ur(),E=20+t,C=d[11],R=d[E]=ga(C,n,en.lFrame.currentNamespace),V=p.firstCreatePass?function(t,n,r,l,d,p,E){const C=n.consts,V=oc(n,t,2,d,We(C,p));return rh(n,r,V,We(C,E)),null!==V.attrs&&ef(V,V.attrs,!1),null!==V.mergedAttrs&&ef(V,V.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,V),V}(E,p,d,0,n,r,l):p.data[E];Pr(V,!0);const z=V.mergedAttrs;null!==z&&fl(C,R,z);const fe=V.classes;null!==fe&&Hf(C,R,fe);const Ee=V.styles;null!==Ee&&$f(C,R,Ee),64!=(64&V.flags)&&pu(p,d,R,V),0===en.lFrame.elementDepthCount&&ho(R,d),en.lFrame.elementDepthCount++,cs(V)&&(yu(p,d,V),tp(p,V,d)),null!==l&&qh(d,V)}function V_(){let t=Fr();gs()?Qs():(t=t.parent,Pr(t,!1));const n=t;en.lFrame.elementDepthCount--;const r=ur();r.firstCreatePass&&(Xs(r,t),Ps(t)&&r.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&$g(r,n,Bt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&$g(r,n,Bt(),n.stylesWithoutHost,!1)}function Py(t,n,r,l){U_(t,n,r,l),V_()}function B_(t,n,r){const l=Bt(),d=ur(),p=t+20,E=d.firstCreatePass?function(t,n,r,l,d){const p=n.consts,E=We(p,l),C=oc(n,t,8,"ng-container",E);return null!==E&&ef(C,E,!0),rh(n,r,C,We(p,d)),null!==n.queries&&n.queries.elementStart(n,C),C}(p,d,l,n,r):d.data[p];Pr(E,!0);const C=l[p]=l[11].createComment("");pu(d,l,C,E),ho(C,l),cs(E)&&(yu(d,l,E),tp(d,E,l)),null!=r&&qh(l,E)}function Oy(){let t=Fr();const n=ur();gs()?Qs():(t=t.parent,Pr(t,!1)),n.firstCreatePass&&(Xs(n,t),Ps(t)&&n.queries.elementEnd(t))}function Ny(){return Bt()}function j_(t){return!!t&&"function"==typeof t.then}function Um(t){return!!t&&"function"==typeof t.subscribe}const Vm=Um;function Bm(t,n,r,l){const d=Bt(),p=ur(),E=Fr();return function(t,n,r,l,d,p,E,C){const R=cs(l),z=t.firstCreatePass&&Eg(t),fe=n[8],Ee=Vc(n);let Be=!0;if(3&l.type||C){const vt=Wr(l,n),fn=C?C(vt):vt,Yt=Ee.length,or=C?Dr=>C(Ft(Dr[l.index])):l.index;if(k(r)){let Dr=null;if(!C&&R&&(Dr=function(t,n,r,l){const d=t.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const E=d[p];if(E===r&&d[p+1]===l){const C=n[7],R=d[p+2];return C.length>R?C[R]:null}"string"==typeof E&&(p+=2)}return null}(t,n,d,l.index)),null!==Dr)(Dr.__ngLastListenerFn__||Dr).__ngNextListenerFn__=p,Dr.__ngLastListenerFn__=p,Be=!1;else{p=jm(l,n,fe,p,!1);const Ei=r.listen(fn,d,p);Ee.push(p,Ei),z&&z.push(d,or,Yt,Yt+1)}}else p=jm(l,n,fe,p,!0),fn.addEventListener(d,p,E),Ee.push(p),z&&z.push(d,or,Yt,E)}else p=jm(l,n,fe,p,!1);const lt=l.outputs;let Mt;if(Be&&null!==lt&&(Mt=lt[d])){const vt=Mt.length;if(vt)for(let fn=0;fn<vt;fn+=2){const ka=n[Mt[fn]][Mt[fn+1]].subscribe(p),Yc=Ee.length;Ee.push(p,ka),z&&z.push(d,l.index,Yc,-(Yc+1))}}}(p,d,d[11],E,t,n,!!r,l),Bm}function ky(t,n,r,l){try{return!1!==r(l)}catch(d){return cp(t,d),!1}}function jm(t,n,r,l,d){return function p(E){if(E===Function)return l;const C=2&t.flags?Q(t.index,n):n;0==(32&n[2])&&gg(C);let R=ky(n,0,l,E),V=p.__ngNextListenerFn__;for(;V;)R=ky(n,0,V,E)&&R,V=V.__ngNextListenerFn__;return d&&!1===R&&(E.preventDefault(),E.returnValue=!1),R}}function Hg(t=1){return function(t){return(en.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,en.lFrame.contextLView))[8]}(t)}function _h(t,n,r,l,d){const p=t[r+1],E=null===n;let C=l?zo(p):ic(p),R=!1;for(;0!==C&&(!1===R||E);){const z=t[C+1];kv(t[C],n)&&(R=!0,t[C+1]=l?qf(z):Wp(z)),C=l?zo(z):ic(z)}R&&(t[r+1]=l?Wp(p):qf(p))}function kv(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&qi(t,n)>=0}const Qo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vy(t){return t.substring(Qo.key,Qo.keyEnd)}function By(t,n){const r=Qo.textEnd;return r===n?-1:(n=Qo.keyEnd=function(t,n,r){for(;n<r&&t.charCodeAt(n)>32;)n++;return n}(t,Qo.key=n,r),vh(t,n,r))}function vh(t,n,r){for(;n<r&&t.charCodeAt(n)<=32;)n++;return n}function Zm(t,n,r){return mc(t,n,r,!1),Zm}function Gm(t,n){return mc(t,n,null,!0),Gm}function z_(t){!function(t,n,r,l){const d=ur(),p=ra(2);d.firstUpdatePass&&qy(d,null,p,l);const E=Bt();if(r!==wr&&Yo(E,p,r)){const C=d.data[pi()];if(Xt(C,l)&&!K_(d,p)){let R=l?C.classesWithoutHost:C.stylesWithoutHost;null!==R&&(r=Ye(R,r||"")),$g(d,C,E,r,l)}else!function(t,n,r,l,d,p,E,C){d===wr&&(d=Sn);let R=0,V=0,z=0<d.length?d[0]:null,fe=0<p.length?p[0]:null;for(;null!==z||null!==fe;){const Ee=R<d.length?d[R+1]:void 0,Be=V<p.length?p[V+1]:void 0;let Mt,lt=null;z===fe?(R+=2,V+=2,Ee!==Be&&(lt=fe,Mt=Be)):null===fe||null!==z&&z<fe?(R+=2,lt=z):(V+=2,lt=fe,Mt=Be),null!==lt&&ve(t,n,r,l,lt,Mt,E,C),z=R<d.length?d[R]:null,fe=V<p.length?p[V]:null}}(d,C,E,E[11],E[p+1],E[p+1]=function(t,n,r){if(null==r||""===r)return Sn;const l=[],d=Mi(r);if(Array.isArray(d))for(let p=0;p<d.length;p++)t(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&t(l,p,d[p]);else"string"==typeof d&&n(l,d);return l}(t,n,r),l,p)}}(to,Gc,t,!0)}function Gc(t,n){for(let r=function(t){return function(t){Qo.key=0,Qo.keyEnd=0,Qo.value=0,Qo.valueEnd=0,Qo.textEnd=t.length}(t),By(t,vh(t,0,Qo.textEnd))}(n);r>=0;r=By(n,r))to(t,Vy(n),!0)}function mc(t,n,r,l){const d=Bt(),p=ur(),E=ra(2);p.firstUpdatePass&&qy(p,t,E,l),n!==wr&&Yo(d,E,n)&&ve(p,p.data[pi()],d,d[11],t,d[E+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Oe(Mi(t)))),t}(n,r),l,E)}function K_(t,n){return n>=t.expandoStartIndex}function qy(t,n,r,l){const d=t.data;if(null===d[r+1]){const p=d[pi()],E=K_(t,r);Xt(p,l)&&null===n&&!E&&(n=!1),n=function(t,n,r,l){const d=vo(t);let p=l?n.residualClasses:n.residualStyles;if(null===d)0===(l?n.classBindings:n.styleBindings)&&(r=b(r=g(null,t,n,r,l),n.attrs,l),p=null);else{const E=n.directiveStylingLast;if(-1===E||t[E]!==d)if(r=g(d,t,n,r,l),null===p){let R=function(t,n,r){const l=r?n.classBindings:n.styleBindings;if(0!==ic(l))return t[zo(l)]}(t,n,l);void 0!==R&&Array.isArray(R)&&(R=g(null,t,n,R[1],l),R=b(R,n.attrs,l),function(t,n,r,l){t[zo(r?n.classBindings:n.styleBindings)]=l}(t,n,l,R))}else p=function(t,n,r){let l;const d=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<d;p++)l=b(l,t[p].hostAttrs,r);return b(l,n.attrs,r)}(t,n,l)}return void 0!==p&&(l?n.residualClasses=p:n.residualStyles=p),r}(d,p,n,l),function(t,n,r,l,d,p){let E=p?n.classBindings:n.styleBindings,C=zo(E),R=ic(E);t[l]=r;let z,V=!1;if(Array.isArray(r)){const fe=r;z=fe[1],(null===z||qi(fe,z)>0)&&(V=!0)}else z=r;if(d)if(0!==R){const Ee=zo(t[C+1]);t[l+1]=Uh(Ee,C),0!==Ee&&(t[Ee+1]=Gf(t[Ee+1],l)),t[C+1]=function(t,n){return 131071&t|n<<17}(t[C+1],l)}else t[l+1]=Uh(C,0),0!==C&&(t[C+1]=Gf(t[C+1],l)),C=l;else t[l+1]=Uh(R,0),0===C?C=l:t[R+1]=Gf(t[R+1],l),R=l;V&&(t[l+1]=Wp(t[l+1])),_h(t,z,l,!0),_h(t,z,l,!1),function(t,n,r,l,d){const p=d?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof n&&qi(p,n)>=0&&(r[l+1]=qf(r[l+1]))}(n,z,t,l,p),E=Uh(C,R),p?n.classBindings=E:n.styleBindings=E}(d,p,n,r,E,l)}}function g(t,n,r,l,d){let p=null;const E=r.directiveEnd;let C=r.directiveStylingLast;for(-1===C?C=r.directiveStart:C++;C<E&&(p=n[C],l=b(l,p.hostAttrs,d),p!==t);)C++;return null!==t&&(r.directiveStylingLast=C),l}function b(t,n,r){const l=r?1:2;let d=-1;if(null!==n)for(let p=0;p<n.length;p++){const E=n[p];"number"==typeof E?d=E:d===l&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),to(t,E,!!r||n[++p]))}return void 0===t?null:t}function ve(t,n,r,l,d,p,E,C){if(!(3&n.type))return;const R=t.data,V=R[C+1];ut(function(t){return 1==(1&t)}(V)?Fe(R,n,r,d,ic(V),E):void 0)||(ut(p)||function(t){return 2==(2&t)}(V)&&(p=Fe(R,null,r,d,C,E)),function(t,n,r,l,d){const p=k(t);if(n)d?p?t.addClass(r,l):r.classList.add(l):p?t.removeClass(r,l):r.classList.remove(l);else{let E=-1===l.indexOf("-")?void 0:pa.DashCase;if(null==d)p?t.removeStyle(r,l,E):r.style.removeProperty(l);else{const C="string"==typeof d&&d.endsWith("!important");C&&(d=d.slice(0,-10),E|=pa.Important),p?t.setStyle(r,l,d,E):r.style.setProperty(l,d,C?"important":"")}}}(l,E,ii(pi(),r),d,p))}function Fe(t,n,r,l,d,p){const E=null===n;let C;for(;d>0;){const R=t[d],V=Array.isArray(R),z=V?R[1]:R,fe=null===z;let Ee=r[d+1];Ee===wr&&(Ee=fe?Sn:void 0);let Be=fe?Wa(Ee,l):z===l?Ee:void 0;if(V&&!ut(Be)&&(Be=Wa(R,l)),ut(Be)&&(C=Be,E))return C;const lt=t[d+1];d=E?zo(lt):ic(lt)}if(null!==n){let R=p?n.residualClasses:n.residualStyles;null!=R&&(C=Wa(R,l))}return C}function ut(t){return void 0!==t}function Xt(t,n){return 0!=(t.flags&(n?16:32))}function wn(t,n=""){const r=Bt(),l=ur(),d=t+20,p=l.firstCreatePass?oc(l,d,1,n,null):l.data[d],E=r[d]=function(t,n){return k(t)?t.createText(n):t.createTextNode(n)}(r[11],n);pu(l,r,E,p),Pr(p,!1)}function er(t){return kr("",t,""),er}function kr(t,n,r){const l=Bt(),d=function(t,n,r,l){return Yo(t,ll(),r)?n+Ge(r)+l:wr}(l,t,n,r);return d!==wr&&Ko(l,pi(),d),kr}function Vv(t,n,r){const l=Bt();return Yo(l,ll(),n)&&po(ur(),gi(),l,t,n,l[11],r,!0),Vv}function Bv(t,n,r){const l=Bt();if(Yo(l,ll(),n)){const p=ur(),E=gi();po(p,E,l,t,n,function(t,n,r){return(null===t||Ri(t))&&(r=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(r[n.index])),r[11]}(vo(p.data),E,l),r,!0)}return Bv}const qg=void 0;var fC=["en",[["a","p"],["AM","PM"],qg],[["AM","PM"],qg,qg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qg,"{1} 'at' {0}",qg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let qm={};function jv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=cb(n);if(r)return r;const l=n.split("-")[0];if(r=cb(l),r)return r;if("en"===l)return fC;throw new Error(`Missing locale data for the locale "${t}".`)}function ub(t){return jv(t)[Cr.PluralCase]}function cb(t){return t in qm||(qm[t]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[t]),qm[t]}var Cr=(()=>((Cr=Cr||{})[Cr.LocaleId=0]="LocaleId",Cr[Cr.DayPeriodsFormat=1]="DayPeriodsFormat",Cr[Cr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Cr[Cr.DaysFormat=3]="DaysFormat",Cr[Cr.DaysStandalone=4]="DaysStandalone",Cr[Cr.MonthsFormat=5]="MonthsFormat",Cr[Cr.MonthsStandalone=6]="MonthsStandalone",Cr[Cr.Eras=7]="Eras",Cr[Cr.FirstDayOfWeek=8]="FirstDayOfWeek",Cr[Cr.WeekendRange=9]="WeekendRange",Cr[Cr.DateFormat=10]="DateFormat",Cr[Cr.TimeFormat=11]="TimeFormat",Cr[Cr.DateTimeFormat=12]="DateTimeFormat",Cr[Cr.NumberSymbols=13]="NumberSymbols",Cr[Cr.NumberFormats=14]="NumberFormats",Cr[Cr.CurrencyCode=15]="CurrencyCode",Cr[Cr.CurrencySymbol=16]="CurrencySymbol",Cr[Cr.CurrencyName=17]="CurrencyName",Cr[Cr.Currencies=18]="Currencies",Cr[Cr.Directionality=19]="Directionality",Cr[Cr.PluralCase=20]="PluralCase",Cr[Cr.ExtraData=21]="ExtraData",Cr))();const zy="en-US";let db=zy;function $v(t){ke(t,"Expected localeId to be defined"),"string"==typeof t&&(db=t.toLowerCase().replace(/_/g,"-"))}function Gv(t,n,r,l,d){if(t=nt(t),Array.isArray(t))for(let p=0;p<t.length;p++)Gv(t[p],n,r,l,d);else{const p=ur(),E=Bt();let C=ah(t)?t:nt(t.provide),R=af(t);const V=Fr(),z=1048575&V.providerIndexes,fe=V.directiveStart,Ee=V.providerIndexes>>20;if(ah(t)||!t.multi){const Be=new ms(R,d,Ip),lt=Wv(C,n,d?z:z+Ee,fe);-1===lt?(zt($n(V,E),p,C),qv(p,t,n.length),n.push(C),V.directiveStart++,V.directiveEnd++,d&&(V.providerIndexes+=1048576),r.push(Be),E.push(Be)):(r[lt]=Be,E[lt]=Be)}else{const Be=Wv(C,n,z+Ee,fe),lt=Wv(C,n,z,z+Ee),Mt=Be>=0&&r[Be],vt=lt>=0&&r[lt];if(d&&!vt||!d&&!Mt){zt($n(V,E),p,C);const fn=function(t,n,r,l,d){const p=new ms(t,r,Ip);return p.multi=[],p.index=n,p.componentProviders=0,kb(p,d,l&&!r),p}(d?cT:uT,r.length,d,l,R);!d&&vt&&(r[lt].providerFactory=fn),qv(p,t,n.length,0),n.push(C),V.directiveStart++,V.directiveEnd++,d&&(V.providerIndexes+=1048576),r.push(fn),E.push(fn)}else qv(p,t,Be>-1?Be:lt,kb(r[d?lt:Be],R,!d&&l));!d&&l&&vt&&r[lt].componentProviders++}}}function qv(t,n,r,l){const d=ah(n);if(d||function(t){return!!t.useClass}(n)){const E=(n.useClass||n).prototype.ngOnDestroy;if(E){const C=t.destroyHooks||(t.destroyHooks=[]);if(!d&&n.multi){const R=C.indexOf(r);-1===R?C.push(r,[l,E]):C[R+1].push(l,E)}else C.push(r,E)}}}function kb(t,n,r){return r&&t.componentProviders++,t.multi.push(n)-1}function Wv(t,n,r,l){for(let d=r;d<l;d++)if(n[d]===t)return d;return-1}function uT(t,n,r,l){return zv(this.multi,[])}function cT(t,n,r,l){const d=this.multi;let p;if(this.providerFactory){const E=this.providerFactory.componentProviders,C=$a(r,r[1],this.providerFactory.index,l);p=C.slice(0,E),zv(d,p);for(let R=E;R<C.length;R++)p.push(C[R])}else p=[],zv(d,p);return p}function zv(t,n){for(let r=0;r<t.length;r++)n.push((0,t[r])());return n}function Fb(t,n=[]){return r=>{r.providersResolver=(l,d)=>function(t,n,r){const l=ur();if(l.firstCreatePass){const d=Ri(t);Gv(r,l.data,l.blueprint,d,!0),Gv(n,l.data,l.blueprint,d,!1)}}(l,d?d(t):t,n)}}class Lb{}const Vb="ngComponent";class fT{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${Oe(t)}. Did you add it to @NgModule.entryComponents?`);return n[Vb]=t,n}(n)}}let zm=(()=>{class t{}return t.NULL=new fT,t})();function Xy(...t){}function Km(t,n){return new Eh(Wr(t,n))}const mT=function(){return Km(Fr(),Bt())};let Eh=(()=>{class t{constructor(r){this.nativeElement=r}}return t.__NG_ELEMENT_ID__=mT,t})();function Bb(t){return t instanceof Eh?t.nativeElement:t}class ev{}let _T=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>vT(),t})();const vT=function(){const t=Bt(),r=Q(Fr().index,t);return function(t){return t[11]}(hi(r)?r:t)};let Yv=(()=>{class t{}return t.\u0275prov=Ct({token:t,providedIn:"root",factory:()=>null}),t})();class jb{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Qv=new jb("12.2.10");class $b{constructor(){}supports(n){return pf(n)}create(n){return new CT(n)}}const wT=(t,n)=>n;class CT{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||wT}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,l=this._removalsHead,d=0,p=null;for(;r||l;){const E=!l||r&&r.currentIndex<Zb(l,d,p)?r:l,C=Zb(E,d,p),R=E.currentIndex;if(E===l)d--,l=l._nextRemoved;else if(r=r._next,null==E.previousIndex)d++;else{p||(p=[]);const V=C-d,z=R-d;if(V!=z){for(let Ee=0;Ee<V;Ee++){const Be=Ee<p.length?p[Ee]:p[Ee]=0,lt=Be+Ee;z<=lt&&lt<V&&(p[Ee]=Be+1)}p[E.previousIndex]=z-V}}C!==R&&n(E,C,R)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!pf(n))throw new Error(`Error trying to diff '${Oe(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let d,p,E,r=this._itHead,l=!1;if(Array.isArray(n)){this.length=n.length;for(let C=0;C<this.length;C++)p=n[C],E=this._trackByFn(C,p),null!==r&&Object.is(r.trackById,E)?(l&&(r=this._verifyReinsertion(r,p,E,C)),Object.is(r.item,p)||this._addIdentityChange(r,p)):(r=this._mismatch(r,p,E,C),l=!0),r=r._next}else d=0,function(t,n){if(Array.isArray(t))for(let r=0;r<t.length;r++)n(t[r]);else{const r=t[hh()]();let l;for(;!(l=r.next()).done;)n(l.value)}}(n,C=>{E=this._trackByFn(d,C),null!==r&&Object.is(r.trackById,E)?(l&&(r=this._verifyReinsertion(r,C,E,d)),Object.is(r.item,C)||this._addIdentityChange(r,C)):(r=this._mismatch(r,C,E,d),l=!0),r=r._next,d++}),this.length=d;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,l,d){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,p,d)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,p,d)):n=this._addAfter(new TT(r,l),p,d),n}_verifyReinsertion(n,r,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?n=this._reinsertAfter(p,n._prev,d):n.currentIndex!=d&&(n.currentIndex=d,this._addToMoves(n,d)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const d=n._prevRemoved,p=n._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(n,r,l),this._addToMoves(n,l),n}_moveAfter(n,r,l){return this._unlink(n),this._insertAfter(n,r,l),this._addToMoves(n,l),n}_addAfter(n,r,l){return this._insertAfter(n,r,l),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,l){const d=null===r?this._itHead:r._next;return n._next=d,n._prev=r,null===d?this._itTail=n:d._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new Hb),this._linkedRecords.put(n),n.currentIndex=l,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,l=n._next;return null===r?this._itHead=l:r._next=l,null===l?this._itTail=r:l._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hb),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class TT{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IT{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===r||r<=l.currentIndex)&&Object.is(l.trackById,n))return l;return null}remove(n){const r=n._prevDup,l=n._nextDup;return null===r?this._head=l:r._nextDup=l,null===l?this._tail=r:l._prevDup=r,null===this._head}}class Hb{constructor(){this.map=new Map}put(n){const r=n.trackById;let l=this.map.get(r);l||(l=new IT,this.map.set(r,l)),l.add(n)}get(n,r){const d=this.map.get(n);return d?d.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zb(t,n,r){const l=t.previousIndex;if(null===l)return l;let d=0;return r&&l<r.length&&(d=r[l]),l+n+d}class Gb{constructor(){}supports(n){return n instanceof Map||Vg(n)}create(){return new ST}}class ST{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||Vg(n)))throw new Error(`Error trying to diff '${Oe(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(l,d)=>{if(r&&r.key===d)this._maybeAddToChanges(r,l),this._appendAfter=r,r=r._next;else{const p=this._getOrCreateRecordForKey(d,l);r=this._insertBeforeOrAppend(r,p)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let l=r;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const l=n._prev;return r._next=n,r._prev=l,n._prev=r,l&&(l._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const d=this._records.get(n);this._maybeAddToChanges(d,r);const p=d._prev,E=d._next;return p&&(p._next=E),E&&(E._prev=p),d._next=null,d._prev=null,d}const l=new AT(n);return this._records.set(n,l),l.currentValue=r,this._addToAdditions(l),l}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(l=>r(n[l],l))}}class AT{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qb(){return new tv([new $b])}let tv=(()=>{class t{constructor(r){this.factories=r}static create(r,l){if(null!=l){const d=l.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:l=>t.create(r,l||qb()),deps:[[t,new El,new Ml]]}}find(r){const l=this.factories.find(d=>d.supports(r));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(t){return t.name||typeof t}(r)}'`)}}return t.\u0275prov=Ct({token:t,providedIn:"root",factory:qb}),t})();function Wb(){return new nv([new Gb])}let nv=(()=>{class t{constructor(r){this.factories=r}static create(r,l){if(l){const d=l.factories.slice();r=r.concat(d)}return new t(r)}static extend(r){return{provide:t,useFactory:l=>t.create(r,l||Wb()),deps:[[t,new El,new Ml]]}}find(r){const l=this.factories.find(d=>d.supports(r));if(l)return l;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return t.\u0275prov=Ct({token:t,providedIn:"root",factory:Wb}),t})();function rv(t,n,r,l,d=!1){for(;null!==r;){const p=n[r.index];if(null!==p&&l.push(Ft(p)),fi(p))for(let C=10;C<p.length;C++){const R=p[C],V=R[1].firstChild;null!==V&&rv(R[1],R,V,l)}const E=r.type;if(8&E)rv(t,n,r.child,l);else if(32&E){const C=ec(r,n);let R;for(;R=C();)l.push(R)}else if(16&E){const C=lm(n,r);if(Array.isArray(C))l.push(...C);else{const R=Vu(n[16]);rv(R[1],R,C,l,!0)}}r=d?r.projectionNext:r.next}return l}class ey{constructor(n,r){this._lView=n,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,r=n[1];return rv(r,n,r.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(fi(n)){const r=n[8],l=r?r.indexOf(this):-1;l>-1&&(nc(n,l),Go(r,l))}this._attachedToViewContainer=!1}im(this._lView[1],this._lView)}onDestroy(n){zh(this._lView[1],this._lView,null,n)}markForCheck(){gg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Jh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,r){ta(!0);try{Jh(t,n,r)}finally{ta(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,rc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class xT extends ey{constructor(n){super(n),this._view=n}detectChanges(){lp(this._view)}checkNoChanges(){!function(t){ta(!0);try{lp(t)}finally{ta(!1)}}(this._view)}get context(){return null}}const PT=function(t){return function(t,n,r){if(Os(t)&&!r){const l=Q(t.index,n);return new ey(l,l)}return 47&t.type?new ey(n[16],n):null}(Fr(),Bt(),16==(16&t))};let OT=(()=>{class t{}return t.__NG_ELEMENT_ID__=PT,t})();const kT=[new Gb],LT=new tv([new $b]),UT=new nv(kT),BT=function(){return iv(Fr(),Bt())};let ty=(()=>{class t{}return t.__NG_ELEMENT_ID__=BT,t})();const jT=ty,$T=class extends jT{constructor(n,r,l){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=l}createEmbeddedView(n){const r=this._declarationTContainer.tViews,l=gd(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(r)),Xf(r,l,n),new ey(l)}};function iv(t,n){return 4&t.type?new $T(n,t,Km(t,n)):null}class Wg{}class zb{}const GT=function(){return Qb(Fr(),Bt())};let sv=(()=>{class t{}return t.__NG_ELEMENT_ID__=GT,t})();const WT=sv,Kb=class extends WT{constructor(n,r,l){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=l}get element(){return Km(this._hostTNode,this._hostLView)}get injector(){return new gl(this._hostTNode,this._hostLView)}get parentInjector(){const n=St(this._hostTNode,this._hostLView);if(su(n)){const r=Ms(n,this._hostLView),l=mi(n);return new gl(r[1].data[l+8],r)}return new gl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=Yb(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,r,l){const d=n.createEmbeddedView(r||{});return this.insert(d,l),d}createComponent(n,r,l,d,p){const E=l||this.parentInjector;if(!p&&null==n.ngModule&&E){const R=E.get(Wg,null);R&&(p=R)}const C=n.create(E,d,void 0,p);return this.insert(C.hostView,r),C}insert(n,r){const l=n._lView,d=l[1];if(fi(l[3])){const z=this.indexOf(n);if(-1!==z)this.detach(z);else{const fe=l[3],Ee=new Kb(fe,fe[6],fe[3]);Ee.detach(Ee.indexOf(n))}}const p=this._adjustIndex(r),E=this._lContainer;!function(t,n,r,l){const d=10+l,p=r.length;l>0&&(r[d-1][4]=n),l<p-10?(n[4]=r[d],Ga(r,10+l,n)):(r.push(n),n[4]=null),n[3]=r;const E=n[17];null!==E&&r!==E&&function(t,n){const r=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===r?t[9]=[n]:r.push(n)}(E,n);const C=n[19];null!==C&&C.insertView(t),n[2]|=128}(d,l,E,p);const C=Uf(p,E),R=l[11],V=kh(R,E[7]);return null!==V&&function(t,n,r,l,d,p){l[0]=d,l[6]=n,rc(t,l,r,1,d,p)}(d,E[6],R,l,V,C),n.attachToViewContainerRef(),Ga(Jv(E),p,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=Yb(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),l=nc(this._lContainer,r);l&&(Go(Jv(this._lContainer),r),im(l[1],l))}detach(n){const r=this._adjustIndex(n,-1),l=nc(this._lContainer,r);return l&&null!=Go(Jv(this._lContainer),r)?new ey(l):null}_adjustIndex(n,r=0){return null==n?this.length+r:n}};function Yb(t){return t[8]}function Jv(t){return t[8]||(t[8]=[])}function Qb(t,n){let r;const l=n[t.index];if(fi(l))r=l;else{let d;if(8&t.type)d=Ft(l);else{const p=n[11];d=p.createComment("");const E=Wr(t,n);kc(p,kh(p,E),d,function(t,n){return k(t)?t.nextSibling(n):n.nextSibling}(p,E),!1)}n[t.index]=r=sp(l,n,d,t),Qh(n,r)}return new Kb(r,t,n)}const Xm={};class y0 extends zm{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=lr(n);return new E0(r,this.ngModule)}}function v0(t){const n=[];for(let r in t)t.hasOwnProperty(r)&&n.push({propName:t[r],templateName:r});return n}const HI=new we("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Nh});class E0 extends Lb{constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=n.selectors.map(d_).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return v0(this.componentDef.inputs)}get outputs(){return v0(this.componentDef.outputs)}create(n,r,l,d){const p=(d=d||this.ngModule)?function(t,n){return{get:(r,l,d)=>{const p=t.get(r,Xm,d);return p!==Xm||l===Xm?p:n.get(r,l,d)}}}(n,d.injector):n,E=p.get(ev,X),C=p.get(Yv,null),R=E.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",z=l?function(t,n,r){if(k(t))return t.selectRootElement(n,r===Ue.ShadowDom);let l="string"==typeof n?t.querySelector(n):n;return l.textContent="",l}(R,l,this.componentDef.encapsulation):ga(E.createRenderer(null,this.componentDef),V,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(V)),fe=this.componentDef.onPush?576:528,Ee=function(t,n){return{components:[],scheduler:t||Nh,clean:vg,playerHandler:n||null,flags:0}}(),Be=np(0,null,null,1,0,null,null,null,null,null),lt=gd(null,Be,Ee,fe,null,null,E,R,C,p);let Mt,vt;cr(lt);try{const fn=function(t,n,r,l,d,p){const E=r[1];r[20]=t;const R=oc(E,20,2,"#host",null),V=R.mergedAttrs=n.hostAttrs;null!==V&&(ef(R,V,!0),null!==t&&(fl(d,t,V),null!==R.classes&&Hf(d,t,R.classes),null!==R.styles&&$f(d,t,R.styles)));const z=l.createRenderer(t,n),fe=gd(r,_d(n),null,n.onPush?64:16,r[20],R,l,z,p||null,null);return E.firstCreatePass&&(zt($n(R,r),E,n.type),Kh(E,R),ip(R,r.length,1)),Qh(r,fe),r[20]=fe}(z,this.componentDef,lt,E,R);if(z)if(l)fl(R,z,["ng-version",Qv.full]);else{const{attrs:Yt,classes:or}=function(t){const n=[],r=[];let l=1,d=2;for(;l<t.length;){let p=t[l];if("string"==typeof p)2===d?""!==p&&n.push(p,t[++l]):8===d&&r.push(p);else{if(!Ki(d))break;d=p}l++}return{attrs:n,classes:r}}(this.componentDef.selectors[0]);Yt&&fl(R,z,Yt),or&&or.length>0&&Hf(R,z,or.join(" "))}if(vt=ps(Be,20),void 0!==r){const Yt=vt.projection=[];for(let or=0;or<this.ngContentSelectors.length;or++){const Dr=r[or];Yt.push(null!=Dr?Array.from(Dr):null)}}Mt=function(t,n,r,l,d){const p=r[1],E=function(t,n,r){const l=Fr();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),cg(t,l,n,md(t,n,1,null),r));const d=$a(n,t,l.directiveStart,l);ho(d,n);const p=Wr(l,n);return p&&ho(p,n),d}(p,r,n);if(l.components.push(E),t[8]=E,d&&d.forEach(R=>R(E,n)),n.contentQueries){const R=Fr();n.contentQueries(1,E,R.directiveStart)}const C=Fr();return!p.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Eo(C.index),nl(r[1],C,0,C.directiveStart,C.directiveEnd,n),Cm(n,E)),E}(fn,this.componentDef,lt,Ee,[A_]),Xf(Be,lt,null)}finally{eu()}return new qI(this.componentType,Mt,Km(vt,lt),lt,vt)}}class qI extends class{}{constructor(n,r,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=r,this.hostView=this.changeDetectorRef=new xT(d),this.componentType=n}get injector(){return new gl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const e_=new Map;class KI extends Wg{constructor(n,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new y0(this);const l=Qr(n),d=n[bi]||null;d&&$v(d),this._bootstrapComponents=Vl(l.bootstrap),this._r3Injector=Tg(n,r,[{provide:Wg,useValue:this},{provide:zm,useValue:this.componentFactoryResolver}],Oe(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,r=Rs.THROW_IF_NOT_FOUND,l=kt.Default){return n===Rs||n===Wg||n===Bc?this:this._r3Injector.get(n,r,l)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class dE extends zb{constructor(n){super(),this.moduleType=n,null!==Qr(n)&&function(t){const n=new Set;!function r(l){const d=Qr(l,!0),p=d.id;null!==p&&(function(t,n,r){if(n&&n!==r)throw new Error(`Duplicate module registered for ${t} - ${Oe(n)} vs ${Oe(n.name)}`)}(p,e_.get(p),l),e_.set(p,l));const E=Vl(d.imports);for(const C of E)n.has(C)||(n.add(C),r(C))}(t)}(n)}create(n){return new KI(this.moduleType,n)}}function C0(t,n,r,l){return T0(Bt(),ns(),t,n,r,l)}function uy(t,n){const r=t[n];return r===wr?void 0:r}function T0(t,n,r,l,d,p){const E=n+r;return Yo(t,E,d)?dc(t,E+1,p?l.call(p,d):l(d)):uy(t,E+1)}function I0(t,n,r,l,d,p,E){const C=n+r;return function(t,n,r,l){const d=Yo(t,n,r);return Yo(t,n+1,l)||d}(t,C,d,p)?dc(t,C+2,E?l.call(E,d,p):l(d,p)):uy(t,C+2)}function x0(t,n){const r=ur();let l;const d=t+20;r.firstCreatePass?(l=function(t,n){if(n)for(let r=n.length-1;r>=0;r--){const l=n[r];if(t===l.name)return l}throw new ye("302",`The pipe '${t}' could not be found!`)}(n,r.pipeRegistry),r.data[d]=l,l.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(d,l.onDestroy)):l=r.data[d];const p=l.factory||(l.factory=Ui(l.type)),E=re(Ip);try{const C=Ol(!1),R=p();return Ol(C),function(t,n,r,l){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),n[r]=l}(r,Bt(),d,R),R}finally{re(E)}}function R0(t,n,r){const l=t+20,d=Bt(),p=Bs(d,l);return dy(d,cy(d,l)?T0(d,ns(),n,p.transform,r,p):p.transform(r))}function P0(t,n,r,l){const d=t+20,p=Bt(),E=Bs(p,d);return dy(p,cy(p,d)?I0(p,ns(),n,E.transform,r,l,E):E.transform(r,l))}function cy(t,n){return t[1].data[n].pure}function dy(t,n){return Hl.isWrapped(n)&&(n=Hl.unwrap(n),t[en.lFrame.bindingIndex]=wr),n}function hE(t){return n=>{setTimeout(t,void 0,n)}}const bh=class extends ue.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,r,l){var d,p,E;let C=n,R=r||(()=>null),V=l;if(n&&"object"==typeof n){const fe=n;C=null===(d=fe.next)||void 0===d?void 0:d.bind(fe),R=null===(p=fe.error)||void 0===p?void 0:p.bind(fe),V=null===(E=fe.complete)||void 0===E?void 0:E.bind(fe)}this.__isAsync&&(R=hE(R),C&&(C=hE(C)),V&&(V=hE(V)));const z=super.subscribe({next:C,error:R,complete:V});return n instanceof Ae.w&&n.add(z),z}};function cS(){return this._results[hh()]()}class cv{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=hh(),l=cv.prototype;l[r]||(l[r]=cS)}get changes(){return this._changes||(this._changes=new bh)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){const l=this;l.dirty=!1;const d=uo(n);(this._changesDetected=!function(t,n,r){if(t.length!==n.length)return!1;for(let l=0;l<t.length;l++){let d=t[l],p=n[l];if(r&&(d=r(d),p=r(p)),p!==d)return!1}return!0}(l._results,d,r))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class fE{constructor(n){this.queryList=n,this.matches=null}clone(){return new fE(this.queryList)}setDirty(){this.queryList.setDirty()}}class pE{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const l=null!==n.contentQueries?n.contentQueries[0]:r.length,d=[];for(let p=0;p<l;p++){const E=r.getByIndex(p);d.push(this.queries[E.indexInDeclarationView].clone())}return new pE(d)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==V0(n,r).matches&&this.queries[r].setDirty()}}class O0{constructor(n,r,l=null){this.predicate=n,this.flags=r,this.read=l}}class gE{constructor(n=[]){this.queries=n}elementStart(n,r){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let l=0;l<this.length;l++){const d=null!==r?r.length:0,p=this.getByIndex(l).embeddedTView(n,d);p&&(p.indexInDeclarationView=l,null!==r?r.push(p):r=[p])}return null!==r?new gE(r):null}template(n,r){for(let l=0;l<this.queries.length;l++)this.queries[l].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class mE{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new mE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let l=n.parent;for(;null!==l&&8&l.type&&l.index!==r;)l=l.parent;return r===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(n,r,fS(r,p)),this.matchTNodeWithReadOption(n,r,ss(r,n,p,!1,!1))}else l===ty?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,ss(r,n,l,!1,!1))}matchTNodeWithReadOption(n,r,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Eh||d===sv||d===ty&&4&r.type)this.addMatch(r.index,-2);else{const p=ss(r,n,d,!1,!1);null!==p&&this.addMatch(r.index,p)}else this.addMatch(r.index,l)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function fS(t,n){const r=t.localNames;if(null!==r)for(let l=0;l<r.length;l+=2)if(r[l]===n)return r[l+1];return null}function gS(t,n,r,l){return-1===r?function(t,n){return 11&t.type?Km(t,n):4&t.type?iv(t,n):null}(n,t):-2===r?function(t,n,r){return r===Eh?Km(n,t):r===ty?iv(n,t):r===sv?Qb(n,t):void 0}(t,n,l):$a(t,t[1],r,n)}function N0(t,n,r,l){const d=n[19].queries[l];if(null===d.matches){const p=t.data,E=r.matches,C=[];for(let R=0;R<E.length;R+=2){const V=E[R];C.push(V<0?null:gS(n,p[V],E[R+1],r.metadata.read))}d.matches=C}return d.matches}function _E(t,n,r,l){const d=t.queries.getByIndex(r),p=d.matches;if(null!==p){const E=N0(t,n,d,r);for(let C=0;C<p.length;C+=2){const R=p[C];if(R>0)l.push(E[C/2]);else{const V=p[C+1],z=n[-R];for(let fe=10;fe<z.length;fe++){const Ee=z[fe];Ee[17]===Ee[3]&&_E(Ee[1],Ee,V,l)}if(null!==z[9]){const fe=z[9];for(let Ee=0;Ee<fe.length;Ee++){const Be=fe[Ee];_E(Be[1],Be,V,l)}}}}}return l}function M0(t){const n=Bt(),r=ur(),l=Rl();Ts(l+1);const d=V0(r,l);if(t.dirty&&G(n)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const p=d.crossesNgTemplate?_E(r,n,l,[]):N0(r,n,d,l);t.reset(p,Bb),t.notifyOnChanges()}return!0}return!1}function k0(t,n,r,l){const d=ur();if(d.firstCreatePass){const p=Fr();(function(t,n,r){null===t.queries&&(t.queries=new gE),t.queries.track(new mE(n,r))})(d,new O0(n,r,l),p.index),function(t,n){const r=t.contentQueries||(t.contentQueries=[]);n!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,n)}(d,t),2==(2&r)&&(d.staticContentQueries=!0)}!function(t,n,r){const l=new cv(4==(4&r));zh(t,n,l,l.destroy),null===n[19]&&(n[19]=new pE),n[19].queries.push(new fE(l))}(d,Bt(),r)}function F0(){return t=Bt(),n=Rl(),t[19].queries[n].queryList;var t,n}function V0(t,n){return t.queries.getByIndex(n)}const US=S("Input",t=>({bindingPropertyName:t})),VS=S("Output",t=>({bindingPropertyName:t})),BS=S("HostListener",(t,n)=>({eventName:t,args:n})),CE=new we("Application Initializer");let n_=(()=>{class t{constructor(r){this.appInits=r,this.resolve=Xy,this.reject=Xy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const r=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(j_(p))r.push(p);else if(Vm(p)){const E=new Promise((C,R)=>{p.subscribe({complete:C,error:R})});r.push(E)}}Promise.all(r).then(()=>{l()}).catch(d=>{this.reject(d)}),0===r.length&&l(),this.initialized=!0}}return t.\u0275fac=function(r){return new(r||t)(Wi(CE,8))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();const rw=new we("AppId"),YS={provide:rw,useFactory:function(){return`${TE()}${TE()}${TE()}`},deps:[]};function TE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iw=new we("Platform Initializer"),sw=new we("Platform ID"),ow=new we("appBootstrapListener");let aw=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();const fv=new we("LocaleId"),lw=new we("DefaultCurrencyCode");class JS{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}const IE=function(t){return new dE(t)},XS=IE,eA=function(t){return Promise.resolve(IE(t))},uw=function(t){const n=IE(t),l=Vl(Qr(t).declarations).reduce((d,p)=>{const E=lr(p);return E&&d.push(new E0(E)),d},[]);return new JS(n,l)},tA=uw,nA=function(t){return Promise.resolve(uw(t))};let fy=(()=>{class t{constructor(){this.compileModuleSync=XS,this.compileModuleAsync=eA,this.compileModuleAndAllComponentsSync=tA,this.compileModuleAndAllComponentsAsync=nA}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();const sA=(()=>Promise.resolve(0))();function SE(t){"undefined"==typeof Zone?sA.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class yc{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bh(!1),this.onMicrotaskEmpty=new bh(!1),this.onStable=new bh(!1),this.onError=new bh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&r,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let t=rn.requestAnimationFrame,n=rn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(rn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,DE(t),t.isCheckStableRunning=!0,AE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),DE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,l,d,p,E,C)=>{try{return cw(t),r.invokeTask(d,p,E,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&n(),dw(t)}},onInvoke:(r,l,d,p,E,C,R)=>{try{return cw(t),r.invoke(d,p,E,C,R)}finally{t.shouldCoalesceRunChangeDetection&&n(),dw(t)}},onHasTask:(r,l,d,p)=>{r.hasTask(d,p),l===d&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,DE(t),AE(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(r,l,d,p)=>(r.handleError(d,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,r,l){return this._inner.run(n,r,l)}runTask(n,r,l,d){const p=this._inner,E=p.scheduleEventTask("NgZoneEvent: "+d,n,aA,Xy,Xy);try{return p.runTask(E,r,l)}finally{p.cancelTask(E)}}runGuarded(n,r,l){return this._inner.runGuarded(n,r,l)}runOutsideAngular(n){return this._outer.run(n)}}const aA={};function AE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function DE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function cw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dw(t){t._nesting--,AE(t)}class cA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bh,this.onMicrotaskEmpty=new bh,this.onStable=new bh,this.onError=new bh}run(n,r,l){return n.apply(r,l)}runGuarded(n,r,l){return n.apply(r,l)}runOutsideAngular(n){return n()}runTask(n,r,l,d){return n.apply(r,l)}}let hw=(()=>{class t{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yc.assertNotInAngularZone(),SE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())SE(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(r)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==p),r(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:r,timeoutId:p,updateCb:d})}whenStable(r,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,l,d){return[]}}return t.\u0275fac=function(r){return new(r||t)(Wi(yc))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})(),fw=(()=>{class t{constructor(){this._applications=new Map,xE.addToWindow(this)}registerApplication(r,l){this._applications.set(r,l)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,l=!0){return xE.findTestabilityInTree(this,r,l)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();class dA{addToWindow(n){}findTestabilityInTree(n,r,l){return null}}function hA(t){xE=t}let xE=new dA,pw=!0,gw=!1;function RE(){return gw=!0,pw}function fA(){if(gw)throw new Error("Cannot enable prod mode after platform setup.");pw=!1}let Ad;const mw=new we("AllowMultipleToken");class EA{constructor(n,r){this.name=n,this.token=r}}function _w(t,n,r=[]){const l=`Platform: ${n}`,d=new we(l);return(p=[])=>{let E=yw();if(!E||E.injector.get(mw,!1))if(t)t(r.concat(p).concat({provide:d,useValue:!0}));else{const C=r.concat(p).concat({provide:d,useValue:!0},{provide:nf,useValue:"platform"});!function(t){if(Ad&&!Ad.destroyed&&!Ad.injector.get(mw,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ad=t.get(vw);const n=t.get(iw,null);n&&n.forEach(r=>r())}(Rs.create({providers:C,name:l}))}return function(t){const n=yw();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(d)}}function yw(){return Ad&&!Ad.destroyed?Ad:null}let vw=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,l){const C=function(t,n){let r;return r="noop"===t?new cA:("zone.js"===t?void 0:t)||new yc({enableLongStackTrace:RE(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),r}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),R=[{provide:yc,useValue:C}];return C.run(()=>{const V=Rs.create({providers:R,parent:this.injector,name:r.moduleType.name}),z=r.create(V),fe=z.injector.get(Kn,null);if(!fe)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const Ee=C.onError.subscribe({next:Be=>{fe.handleError(Be)}});z.onDestroy(()=>{PE(this._modules,z),Ee.unsubscribe()})}),function(t,n,r){try{const l=r();return j_(l)?l.catch(d=>{throw n.runOutsideAngular(()=>t.handleError(d)),d}):l}catch(l){throw n.runOutsideAngular(()=>t.handleError(l)),l}}(fe,C,()=>{const Ee=z.injector.get(n_);return Ee.runInitializers(),Ee.donePromise.then(()=>($v(z.injector.get(fv,zy)||zy),this._moduleDoBootstrap(z),z))})})}bootstrapModule(r,l=[]){const d=Ew({},l);return function(t,n,r){const l=new dE(r);return Promise.resolve(l)}(0,0,r).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(r){const l=r.injector.get(py);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!r.instance.ngDoBootstrap)throw new Error(`The module ${Oe(r.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);r.instance.ngDoBootstrap(l)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(r){return new(r||t)(Wi(Rs))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();function Ew(t,n){return Array.isArray(n)?n.reduce(Ew,t):Object.assign(Object.assign({},t),n)}let py=(()=>{class t{constructor(r,l,d,p,E){this._zone=r,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=E,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new f.y(V=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{V.next(this._stable),V.complete()})}),R=new f.y(V=>{let z;this._zone.runOutsideAngular(()=>{z=this._zone.onStable.subscribe(()=>{yc.assertNotInAngularZone(),SE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,V.next(!0))})})});const fe=this._zone.onUnstable.subscribe(()=>{yc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{V.next(!1)}))});return()=>{z.unsubscribe(),fe.unsubscribe()}});this.isStable=function(...t){let n=Number.POSITIVE_INFINITY,r=null,l=t[t.length-1];return(0,v.K)(l)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof l&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof f.y?t[0]:(0,J.J)(n)((0,me.n)(t,r))}(C,R.pipe(t=>(0,Z.x)()(function(t,n){return function(l){let d;d="function"==typeof t?t:function(){return t};const p=Object.create(l,Me.N);return p.source=l,p.subjectFactory=d,p}}(te)(t))))}bootstrap(r,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=r instanceof Lb?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(d.componentType);const p=function(t){return t.isBoundToModule}(d)?void 0:this._injector.get(Wg),C=d.create(Rs.NULL,[],l||d.selector,p),R=C.location.nativeElement,V=C.injector.get(hw,null),z=V&&C.injector.get(fw);return V&&z&&z.registerApplication(R,V),C.onDestroy(()=>{this.detachView(C.hostView),PE(this.components,C),z&&z.unregisterApplication(R)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const l=r;this._views.push(l),l.attachToAppRef(this)}detachView(r){const l=r;PE(this._views,l),l.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(ow,[]).concat(this._bootstrapListeners).forEach(d=>d(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(r){return new(r||t)(Wi(yc),Wi(Rs),Wi(Kn),Wi(zm),Wi(n_))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();function PE(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}class SA{}class DA{}const xA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let RA=(()=>{class t{constructor(r,l){this._compiler=r,this._config=l||xA}load(r){return this.loadAndCompile(r)}loadAndCompile(r){let[l,d]=r.split("#");return void 0===d&&(d="default"),N(8255)(l).then(p=>p[d]).then(p=>Tw(p,l,d)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(r){let[l,d]=r.split("#"),p="NgFactory";return void 0===d&&(d="default",p=""),N(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(E=>E[d+p]).then(E=>Tw(E,l,d))}}return t.\u0275fac=function(r){return new(r||t)(Wi(fy),Wi(DA,8))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();function Tw(t,n,r){if(!t)throw new Error(`Cannot find '${r}' in '${n}'`);return t}const UA=function(t){return null},BA=_w(null,"core",[{provide:sw,useValue:"unknown"},{provide:vw,deps:[Rs]},{provide:fw,deps:[]},{provide:aw,deps:[]}]),GA=[{provide:py,useClass:py,deps:[yc,Rs,Kn,zm,n_]},{provide:HI,deps:[yc],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(r){n.push(r)}}},{provide:n_,useClass:n_,deps:[[new Ml,CE]]},{provide:fy,useClass:fy,deps:[]},YS,{provide:tv,useFactory:function(){return LT},deps:[]},{provide:nv,useFactory:function(){return UT},deps:[]},{provide:fv,useFactory:function(t){return $v(t=t||"undefined"!=typeof $localize&&$localize.locale||zy),t},deps:[[new Nl(fv),new Ml,new El]]},{provide:lw,useValue:"USD"}];let WA=(()=>{class t{constructor(r){}}return t.\u0275fac=function(r){return new(r||t)(Wi(py))},t.\u0275mod=Fi({type:t}),t.\u0275inj=En({providers:GA}),t})()},2965:(Vt,Ie,N)=>{"use strict";N.d(Ie,{nm:()=>qt});var f=N(8797);N(639),N(2329);var Ze=N(8239),Xe=N(5452),ye=N(6034),Qt=N(3854),De=N(5601);const Ge=new Map,ce={activated:!1,tokenObservers:[]},Ne={initialized:!1,enabled:!1};function Re(pt){return Ge.get(pt)||ce}function _e(pt,yt){Ge.set(pt,yt)}function ct(){return Ne}class Zt{constructor(yt,At,Gt,yn,Ln){if(this.operation=yt,this.retryPolicy=At,this.getWaitDuration=Gt,this.lowerBound=yn,this.upperBound=Ln,this.pending=null,this.nextErrorWaitInterval=yn,yn>Ln)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(yt){var At=this;return(0,Ze.Z)(function*(){At.stop();try{At.pending=new Qt.BH,yield(pt=At.getNextRun(yt),new Promise(yt=>{setTimeout(yt,pt)})),At.pending.resolve(),yield At.pending.promise,At.pending=new Qt.BH,yield At.operation(),At.pending.resolve(),yield At.pending.promise,At.process(!0).catch(()=>{})}catch(Gt){At.retryPolicy(Gt)?At.process(!1).catch(()=>{}):At.stop()}var pt})()}getNextRun(yt){if(yt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const At=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),At}}}const vn=new Qt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function Dt(pt){if(!Re(pt).activated)throw vn.create("use-before-activation",{appName:pt.name})}function Ve(pt,yt){return bt.apply(this,arguments)}function bt(){return(bt=(0,Ze.Z)(function*({url:pt,body:yt},At){const Gt={"Content-Type":"application/json"},yn=At.getImmediate({optional:!0});yn&&(Gt["X-Firebase-Client"]=yn.getPlatformInfoString());const Ln={method:"POST",body:JSON.stringify(yt),headers:Gt};let Tr,nr;try{Tr=yield fetch(pt,Ln)}catch(sr){throw vn.create("fetch-network-error",{originalErrorMessage:sr.message})}if(200!==Tr.status)throw vn.create("fetch-status-error",{httpStatus:Tr.status});try{nr=yield Tr.json()}catch(sr){throw vn.create("fetch-parse-error",{originalErrorMessage:sr.message})}const Nr=nr.ttl.match(/^([\d.]+)(s)$/);if(!Nr||!Nr[2]||isNaN(Number(Nr[1])))throw vn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${nr.ttl}`});const $i=1e3*Number(Nr[1]),oi=Date.now();return{token:nr.attestationToken,expireTimeMillis:oi+$i,issuedAtTimeMillis:oi}})).apply(this,arguments)}function rt(pt,yt){const{projectId:At,appId:Gt,apiKey:yn}=pt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${At}/apps/${Gt}:exchangeDebugToken?key=${yn}`,body:{debug_token:yt}}}const It="firebase-app-check-store";let dn=null;function En(){return dn||(dn=new Promise((pt,yt)=>{try{const At=indexedDB.open("firebase-app-check-database",1);At.onsuccess=Gt=>{pt(Gt.target.result)},At.onerror=Gt=>{var yn;yt(vn.create("storage-open",{originalErrorMessage:null===(yn=Gt.target.error)||void 0===yn?void 0:yn.message}))},At.onupgradeneeded=Gt=>{const yn=Gt.target.result;switch(Gt.oldVersion){case 0:yn.createObjectStore(It,{keyPath:"compositeKey"})}}}catch(At){yt(vn.create("storage-open",{originalErrorMessage:At.message}))}}),dn)}function mt(){return(mt=(0,Ze.Z)(function*(pt,yt){const Gt=(yield En()).transaction(It,"readwrite"),Ln=Gt.objectStore(It).put({compositeKey:pt,value:yt});return new Promise((Tr,nr)=>{Ln.onsuccess=Nr=>{Tr()},Gt.onerror=Nr=>{var $i;nr(vn.create("storage-set",{originalErrorMessage:null===($i=Nr.target.error)||void 0===$i?void 0:$i.message}))}})})).apply(this,arguments)}const kt=new De.Yd("@firebase/app-check");function re(pt,yt){return(0,Qt.hl)()?function(pt,yt){return function(pt,yt){return mt.apply(this,arguments)}(function(pt){return`${pt.options.appId}-${pt.name}`}(pt),yt)}(pt,yt).catch(At=>{kt.warn(`Failed to write token to IndexedDB. Error: ${At}`)}):Promise.resolve()}function Sr(){return ct().enabled}function ni(){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,Ze.Z)(function*(){const pt=ct();if(pt.enabled&&pt.token)return pt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ue={error:"UNKNOWN_ERROR"};function qe(pt){return Qt.US.encodeString(JSON.stringify(pt),!1)}function He(pt){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,Ze.Z)(function*(pt,yt=!1){const At=pt.app;Dt(At);const Gt=Re(At);let Ln,Tr,yn=Gt.token;if(!yn){const nr=yield Gt.cachedTokenPromise;nr&&ir(nr)&&(yn=nr,_e(At,Object.assign(Object.assign({},Gt),{token:yn})),vr(At,{token:yn.token}))}if(!yt&&yn&&ir(yn))return{token:yn.token};if(Sr()){const nr=yield Ve(rt(At,yield ni()),pt.platformLoggerProvider);return yield re(At,nr),_e(At,Object.assign(Object.assign({},Gt),{token:nr})),{token:nr.token}}try{yn=yield Gt.provider.getToken()}catch(nr){kt.error(nr),Ln=nr}return yn?(Tr={token:yn.token},_e(At,Object.assign(Object.assign({},Gt),{token:yn})),yield re(At,yn)):Tr=Sn(Ln),vr(At,Tr),Tr})).apply(this,arguments)}function rn(pt,yt){const At=Re(pt),Gt=At.tokenObservers.filter(yn=>yn.next!==yt);0===Gt.length&&At.tokenRefresher&&At.tokenRefresher.isRunning()&&At.tokenRefresher.stop(),_e(pt,Object.assign(Object.assign({},At),{tokenObservers:Gt}))}function vr(pt,yt){const At=Re(pt).tokenObservers;for(const Gt of At)try{"EXTERNAL"===Gt.type&&null!=yt.error?Gt.error(yt.error):Gt.next(yt)}catch(yn){}}function ir(pt){return pt.expireTimeMillis-Date.now()>0}function Sn(pt){return{token:qe(Ue),error:pt}}class _r{constructor(yt,At){this.app=yt,this.platformLoggerProvider=At}_delete(){const{tokenObservers:yt}=Re(this.app);for(const At of yt)rn(this.app,At.next);return Promise.resolve()}}const Er="app-check-internal";(0,Xe._registerComponent)(new ye.wA("app-check",pt=>function(pt,yt){return new _r(pt,yt)}(pt.getProvider("app").getImmediate(),pt.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((pt,yt,At)=>{pt.getProvider(Er).initialize()})),(0,Xe._registerComponent)(new ye.wA(Er,pt=>function(pt){return{getToken:yt=>He(pt,yt),addTokenListener:yt=>function(pt,yt,At,Gt){const{app:yn}=pt,Ln=Re(yn),Tr={next:At,error:Gt,type:yt},nr=Object.assign(Object.assign({},Ln),{tokenObservers:[...Ln.tokenObservers,Tr]});if(!nr.tokenRefresher){const Nr=function(pt){const{app:yt}=pt;return new Zt((0,Ze.Z)(function*(){let Gt;if(Gt=Re(yt).token?yield He(pt,!0):yield He(pt),Gt.error)throw Gt.error}),()=>!0,()=>{const At=Re(yt);if(At.token){let Gt=At.token.issuedAtTimeMillis+.5*(At.token.expireTimeMillis-At.token.issuedAtTimeMillis)+3e5;return Gt=Math.min(Gt,At.token.expireTimeMillis-3e5),Math.max(0,Gt-Date.now())}return 0},3e4,96e4)}(pt);nr.tokenRefresher=Nr}if(!nr.tokenRefresher.isRunning()&&Ln.isTokenAutoRefreshEnabled&&nr.tokenRefresher.start(),Ln.token&&ir(Ln.token)){const Nr=Ln.token;Promise.resolve().then(()=>At({token:Nr.token})).catch(()=>{})}else null==Ln.token&&Ln.cachedTokenPromise.then(Nr=>{Nr&&ir(Nr)&&At({token:Nr.token})}).catch(()=>{});_e(yn,nr)}(pt,"INTERNAL",yt),removeTokenListener:yt=>rn(pt.app,yt)}}(pt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.4.2");class qt{constructor(){return(0,f.vb)("app-check")}}"undefined"!=typeof window&&window},4421:(Vt,Ie,N)=>{"use strict";N.d(Ie,{zQ:()=>Dt,ww:()=>at,rT:()=>xn,f7:()=>vn,L6:()=>Bn,_Q:()=>Zt,lh:()=>pr,Qv:()=>mn,nw:()=>Et});var f=N(639),v=N(3842),J=N(4323),me=N(1827),le=N(1179),ue=N(1755),Ae=N(1373);class Me extends v.x{constructor(bt=1/0,ke=1/0,rt=Ae.l){super(),this._bufferSize=bt,this._windowTime=ke,this._timestampProvider=rt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ke===1/0,this._bufferSize=Math.max(1,bt),this._windowTime=Math.max(1,ke)}next(bt){const{isStopped:ke,_buffer:rt,_infiniteTimeWindow:Se,_timestampProvider:et,_windowTime:It}=this;ke||(rt.push(bt),!Se&&rt.push(et.now()+It)),this._trimBuffer(),super.next(bt)}_subscribe(bt){this._throwIfClosed(),this._trimBuffer();const ke=this._innerSubscribe(bt),{_infiniteTimeWindow:rt,_buffer:Se}=this,et=Se.slice();for(let It=0;It<et.length&&!bt.closed;It+=rt?1:2)bt.next(et[It]);return this._checkFinalizedStatuses(bt),ke}_trimBuffer(){const{_bufferSize:bt,_timestampProvider:ke,_buffer:rt,_infiniteTimeWindow:Se}=this,et=(Se?1:2)*bt;if(bt<1/0&&et<rt.length&&rt.splice(0,rt.length-et),!Se){const It=ke.now();let Ct=0;for(let dn=1;dn<rt.length&&rt[dn]<=It;dn+=2)Ct=dn;Ct&&rt.splice(0,Ct+1)}}}var ge=N(784);function K(Ve,bt,ke){var rt,Se;let et,It=!1;return Ve&&"object"==typeof Ve?(et=null!==(rt=Ve.bufferSize)&&void 0!==rt?rt:1/0,bt=null!==(Se=Ve.windowTime)&&void 0!==Se?Se:1/0,It=!!Ve.refCount,ke=Ve.scheduler):et=null!=Ve?Ve:1/0,(0,ge.B)({connector:()=>new Me(et,bt,ke),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:It})}const te=(0,N(9753).d)(Ve=>function(){Ve(this),this.name="EmptyError",this.message="no elements in sequence"});var de=N(1971),be=N(1054),je=N(3201),Oe=N(1894);function Ye(Ve){return(0,je.e)((bt,ke)=>{let rt=!1;bt.subscribe(new Oe.Q(ke,Se=>{rt=!0,ke.next(Se)},()=>{rt||ke.next(Ve),ke.complete()}))})}function Qe(Ve=it){return(0,je.e)((bt,ke)=>{let rt=!1;bt.subscribe(new Oe.Q(ke,Se=>{rt=!0,ke.next(Se)},()=>rt?ke.complete():ke.error(Ve())))})}function it(){return new te}var nt=N(576),Xe=N(1926),ye=N(6361);function Qt(Ve,bt){return(0,ye.m)(bt)?(0,Xe.w)(()=>Ve,bt):(0,Xe.w)(()=>Ve)}var De=N(8341),Ge=N(6885),ce=N(8127),Ne=N(8797),Re=N(8939),_e=N(8583),ct=N(2965),Te=N(7841);const mn=new f.OlP("angularfire2.auth.use-emulator"),Bn=new f.OlP("angularfire2.auth.settings"),Zt=new f.OlP("angularfire2.auth.tenant-id"),xn=new f.OlP("angularfire2.auth.langugage-code"),pr=new f.OlP("angularfire2.auth.use-device-language"),vn=new f.OlP("angularfire.auth.persistence"),Et=(Ve,bt,ke,rt,Se,et,It,Ct)=>(0,Re.cc)(`${Ve.name}.auth`,"AngularFireAuth",Ve.name,()=>{const dn=bt.runOutsideAngular(()=>Ve.auth());if(ke&&dn.useEmulator(...ke),rt&&(dn.tenantId=rt),dn.languageCode=Se,et&&dn.useDeviceLanguage(),It)for(const[En,Jn]of Object.entries(It))dn.settings[En]=Jn;return Ct&&dn.setPersistence(Ct),dn},[ke,rt,Se,et,It,Ct]);let Dt=(()=>{class Ve{constructor(ke,rt,Se,et,It,Ct,dn,En,Jn,gn,qn,Tt){const on=new v.x,mt=(0,J.of)(void 0).pipe((0,De.Q)(It.outsideAngular),(0,Xe.w)(()=>et.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,4671)))),(0,Ge.U)(()=>(0,Re.on)(ke,et,rt)),(0,Ge.U)(Je=>Et(Je,et,Ct,En,Jn,gn,dn,qn)),K({bufferSize:1,refCount:!1}));if((0,_e.PM)(Se))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{mt.pipe(function(Ve,bt){const ke=arguments.length>=2;return rt=>rt.pipe(Ve?(0,de.h)((Se,et)=>Ve(Se,et,rt)):nt.y,(0,be.q)(1),ke?Ye(bt):Qe(()=>new te))}()).subscribe();const Kt=mt.pipe((0,Xe.w)(ln=>ln.getRedirectResult().then(Ht=>Ht,()=>null)),Ne.iC,K({bufferSize:1,refCount:!1})),cn=mt.pipe((0,Xe.w)(ln=>new me.y(Ht=>({unsubscribe:et.runOutsideAngular(()=>ln.onAuthStateChanged(re=>Ht.next(re),re=>Ht.error(re),()=>Ht.complete()))})))),kt=mt.pipe((0,Xe.w)(ln=>new me.y(Ht=>({unsubscribe:et.runOutsideAngular(()=>ln.onIdTokenChanged(re=>Ht.next(re),re=>Ht.error(re),()=>Ht.complete()))}))));this.authState=Kt.pipe(Qt(cn),(0,ce.R)(It.outsideAngular),(0,De.Q)(It.insideAngular)),this.user=Kt.pipe(Qt(kt),(0,ce.R)(It.outsideAngular),(0,De.Q)(It.insideAngular)),this.idToken=this.user.pipe((0,Xe.w)(ln=>ln?(0,le.D)(ln.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,Xe.w)(ln=>ln?(0,le.D)(ln.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,ue.T)(Kt,on,this.authState.pipe((0,de.h)(ln=>!ln))).pipe((0,Ge.U)(ln=>(null==ln?void 0:ln.user)?ln:null),(0,ce.R)(It.outsideAngular),(0,De.Q)(It.insideAngular))}return(0,Re.pX)(this,mt,et,{spy:{apply:(Je,Kt,cn)=>{(Je.startsWith("signIn")||Je.startsWith("createUser"))&&cn.then(kt=>on.next(kt))}}})}}return Ve.\u0275fac=function(ke){return new(ke||Ve)(f.LFG(Re.Dh),f.LFG(Re.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Ne.HU),f.LFG(mn,8),f.LFG(Bn,8),f.LFG(Zt,8),f.LFG(xn,8),f.LFG(pr,8),f.LFG(vn,8),f.LFG(ct.nm,8))},Ve.\u0275prov=f.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"any"}),Ve})(),at=(()=>{class Ve{constructor(){Te.Z.registerVersion("angularfire",Ne.q4.full,"auth-compat")}}return Ve.\u0275fac=function(ke){return new(ke||Ve)},Ve.\u0275mod=f.oAB({type:Ve}),Ve.\u0275inj=f.cJS({providers:[Dt]}),Ve})()},3124:(Vt,Ie,N)=>{"use strict";N.d(Ie,{ST:()=>K_,yb:()=>qy});var f=N(639),v=N(4346),J=N(1827),me=N(1179),le=N(4323),ue=N(8797),Ae=N(2253),ge=N(7375);function K(...a){return(0,Ae.J)(1)((0,me.D)(a,(0,ge.yG)(a)))}var Z=N(3201);function te(...a){const e=(0,ge.yG)(a);return(0,Z.e)((i,u)=>{(e?K(a,i,e):K(a,i)).subscribe(u)})}var de=N(1894);function be(){return(0,Z.e)((a,e)=>{let i,u=!1;a.subscribe(new de.Q(e,g=>{const b=i;i=g,u&&e.next([b,g]),u=!0}))})}var _e,je=N(6885),Oe=N(3117),Ye=N(5488),Qe=N(1971),it=N(8939),nt=N(8583),Xe=(N(4671),N(4486)),ye=N(8239),Qt=N(5452),De=N(6034),Ge=N(5601),ce=N(3854),Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Re={},ct=ct||{},Te=Ne||self;function jt(){}function mn(a){var e=typeof a;return"array"==(e="object"!=e?e:a?Array.isArray(a)?"array":e:"null")||"object"==e&&"number"==typeof a.length}function Bn(a){var e=typeof a;return"object"==e&&null!=a||"function"==e}var xn="closure_uid_"+(1e9*Math.random()>>>0),pr=0;function vn(a,e,i){return a.call.apply(a.bind,arguments)}function Et(a,e,i){if(!a)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,u),a.apply(e,g)}}return function(){return a.apply(e,arguments)}}function Dt(a,e,i){return(Dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vn:Et).apply(null,arguments)}function at(a,e){var i=Array.prototype.slice.call(arguments,1);return function(){var u=i.slice();return u.push.apply(u,arguments),a.apply(this,u)}}function Ve(a,e){function i(){}i.prototype=e.prototype,a.Z=e.prototype,a.prototype=new i,a.prototype.constructor=a,a.Vb=function(u,g,b){for(var x=Array(arguments.length-2),B=2;B<arguments.length;B++)x[B-2]=arguments[B];return e.prototype[g].apply(u,x)}}function bt(){this.s=this.s,this.o=this.o}var rt={};bt.prototype.s=!1,bt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var a=function(a){return Object.prototype.hasOwnProperty.call(a,xn)&&a[xn]||(a[xn]=++pr)}(this);delete rt[a]}},bt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Se=Array.prototype.indexOf?function(a,e){return Array.prototype.indexOf.call(a,e,void 0)}:function(a,e){if("string"==typeof a)return"string"!=typeof e||1!=e.length?-1:a.indexOf(e,0);for(let i=0;i<a.length;i++)if(i in a&&a[i]===e)return i;return-1},et=Array.prototype.forEach?function(a,e,i){Array.prototype.forEach.call(a,e,i)}:function(a,e,i){const u=a.length,g="string"==typeof a?a.split(""):a;for(let b=0;b<u;b++)b in g&&e.call(i,g[b],b,a)};function Ct(a){return Array.prototype.concat.apply([],arguments)}function dn(a){const e=a.length;if(0<e){const i=Array(e);for(let u=0;u<e;u++)i[u]=a[u];return i}return[]}function En(a){return/^[\s\xa0]*$/.test(a)}var Tt,Jn=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function gn(a,e){return-1!=a.indexOf(e)}function qn(a,e){return a<e?-1:a>e?1:0}e:{var on=Te.navigator;if(on){var mt=on.userAgent;if(mt){Tt=mt;break e}}Tt=""}function Je(a,e,i){for(const u in a)e.call(i,a[u],u,a)}function Kt(a){const e={};for(const i in a)e[i]=a[i];return e}var cn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kt(a,e){let i,u;for(let g=1;g<arguments.length;g++){for(i in u=arguments[g],u)a[i]=u[i];for(let b=0;b<cn.length;b++)i=cn[b],Object.prototype.hasOwnProperty.call(u,i)&&(a[i]=u[i])}}function ln(a){return ln[" "](a),a}ln[" "]=jt;var Ue,a,re=gn(Tt,"Opera"),tr=gn(Tt,"Trident")||gn(Tt,"MSIE"),ar=gn(Tt,"Edge"),Sr=ar||tr,ni=gn(Tt,"Gecko")&&!(gn(Tt.toLowerCase(),"webkit")&&!gn(Tt,"Edge"))&&!(gn(Tt,"Trident")||gn(Tt,"MSIE"))&&!gn(Tt,"Edge"),Ti=gn(Tt.toLowerCase(),"webkit")&&!gn(Tt,"Edge");function Gr(){var a=Te.document;return a?a.documentMode:void 0}e:{var qe="",He=(a=Tt,ni?/rv:([^\);]+)(\)|;)/.exec(a):ar?/Edge\/([\d\.]+)/.exec(a):tr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Ti?/WebKit\/(\S+)/.exec(a):re?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(He&&(qe=He?He[1]:""),tr){var Nt=Gr();if(null!=Nt&&Nt>parseFloat(qe)){Ue=String(Nt);break e}}Ue=qe}var _t={};function rn(){return e=_t,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let a=0;const e=Jn(String(Ue)).split("."),i=Jn("9").split("."),u=Math.max(e.length,i.length);for(let x=0;0==a&&x<u;x++){var g=e[x]||"",b=i[x]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],0==g[0].length&&0==b[0].length)break;a=qn(0==g[1].length?0:parseInt(g[1],10),0==b[1].length?0:parseInt(b[1],10))||qn(0==g[2].length,0==b[2].length)||qn(g[2],b[2]),g=g[3],b=b[3]}while(0==a)}return 0<=a}();var e}var ir=Te.document&&tr&&(Gr()||parseInt(Ue,10))||void 0,Sn=function(){if(!Te.addEventListener||!Object.defineProperty)return!1;var a=!1,e=Object.defineProperty({},"passive",{get:function(){a=!0}});try{Te.addEventListener("test",jt,e),Te.removeEventListener("test",jt,e)}catch(i){}return a}();function _r(a,e){this.type=a,this.g=this.target=e,this.defaultPrevented=!1}function Rn(a,e){if(_r.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var i=this.type=a.type,u=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=e,e=a.relatedTarget){if(ni){e:{try{ln(e.nodeName);var g=!0;break e}catch(b){}g=!1}g||(e=null)}}else"mouseover"==i?e=a.fromElement:"mouseout"==i&&(e=a.toElement);this.relatedTarget=e,u?(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType="string"==typeof a.pointerType?a.pointerType:qr[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Rn.Z.h.call(this)}}_r.prototype.h=function(){this.defaultPrevented=!0},Ve(Rn,_r);var qr={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.Z.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Kr="closure_listenable_"+(1e6*Math.random()|0),bi=0;function rr(a,e,i,u,g){this.listener=a,this.proxy=null,this.src=e,this.type=i,this.capture=!!u,this.ia=g,this.key=++bi,this.ca=this.fa=!1}function ki(a){a.ca=!0,a.listener=null,a.proxy=null,a.src=null,a.ia=null}function ji(a){this.src=a,this.g={},this.h=0}function Ii(a,e){var i=e.type;if(i in a.g){var b,u=a.g[i],g=Se(u,e);(b=0<=g)&&Array.prototype.splice.call(u,g,1),b&&(ki(e),0==a.g[i].length&&(delete a.g[i],a.h--))}}function di(a,e,i,u){for(var g=0;g<a.length;++g){var b=a[g];if(!b.ca&&b.listener==e&&b.capture==!!i&&b.ia==u)return g}return-1}ji.prototype.add=function(a,e,i,u,g){var b=a.toString();(a=this.g[b])||(a=this.g[b]=[],this.h++);var x=di(a,e,u,g);return-1<x?(e=a[x],i||(e.fa=!1)):((e=new rr(e,this.src,b,!!u,g)).fa=i,a.push(e)),e};var Pn="closure_lm_"+(1e6*Math.random()|0),xr={};function Hr(a,e,i,u,g){if(u&&u.once)return bs(a,e,i,u,g);if(Array.isArray(e)){for(var b=0;b<e.length;b++)Hr(a,e[b],i,u,g);return null}return i=ls(i),a&&a[Kr]?a.N(e,i,Bn(u)?!!u.capture:!!u,g):Fi(a,e,i,!1,u,g)}function Fi(a,e,i,u,g,b){if(!e)throw Error("Invalid event type");var x=Bn(g)?!!g.capture:!!g,B=Er(a);if(B||(a[Pn]=B=new ji(a)),(i=B.add(e,i,u,x,b)).proxy)return i;if(u=function(){var e=Yr;return function a(i){return e.call(a.src,a.listener,i)}}(),i.proxy=u,u.src=a,u.listener=i,a.addEventListener)Sn||(g=x),void 0===g&&(g=!1),a.addEventListener(e.toString(),u,g);else if(a.attachEvent)a.attachEvent(lr(e.toString()),u);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(u)}return i}function bs(a,e,i,u,g){if(Array.isArray(e)){for(var b=0;b<e.length;b++)bs(a,e[b],i,u,g);return null}return i=ls(i),a&&a[Kr]?a.O(e,i,Bn(u)?!!u.capture:!!u,g):Fi(a,e,i,!0,u,g)}function ei(a,e,i,u,g){if(Array.isArray(e))for(var b=0;b<e.length;b++)ei(a,e[b],i,u,g);else u=Bn(u)?!!u.capture:!!u,i=ls(i),a&&a[Kr]?(a=a.i,(e=String(e).toString())in a.g&&-1<(i=di(b=a.g[e],i,u,g))&&(ki(b[i]),Array.prototype.splice.call(b,i,1),0==b.length&&(delete a.g[e],a.h--))):a&&(a=Er(a))&&(e=a.g[e.toString()],a=-1,e&&(a=di(e,i,u,g)),(i=-1<a?e[a]:null)&&ws(i))}function ws(a){if("number"!=typeof a&&a&&!a.ca){var e=a.src;if(e&&e[Kr])Ii(e.i,a);else{var i=a.type,u=a.proxy;e.removeEventListener?e.removeEventListener(i,u,a.capture):e.detachEvent?e.detachEvent(lr(i),u):e.addListener&&e.removeListener&&e.removeListener(u),(i=Er(e))?(Ii(i,a),0==i.h&&(i.src=null,e[Pn]=null)):ki(a)}}}function lr(a){return a in xr?xr[a]:xr[a]="on"+a}function Yr(a,e){if(a.ca)a=!0;else{e=new Rn(e,this);var i=a.listener,u=a.ia||a.src;a.fa&&ws(a),a=i.call(u,e)}return a}function Er(a){return(a=a[Pn])instanceof ji?a:null}var Qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ls(a){return"function"==typeof a?a:(a[Qr]||(a[Qr]=function(e){return a.handleEvent(e)}),a[Qr])}function On(){bt.call(this),this.i=new ji(this),this.P=this,this.I=null}function qt(a,e){var i,u=a.I;if(u)for(i=[];u;u=u.I)i.push(u);if(a=a.P,u=e.type||e,"string"==typeof e)e=new _r(e,a);else if(e instanceof _r)e.target=e.target||a;else{var g=e;kt(e=new _r(u,a),g)}if(g=!0,i)for(var b=i.length-1;0<=b;b--){var x=e.g=i[b];g=jn(x,u,!0,e)&&g}if(g=jn(x=e.g=a,u,!0,e)&&g,g=jn(x,u,!1,e)&&g,i)for(b=0;b<i.length;b++)g=jn(x=e.g=i[b],u,!1,e)&&g}function jn(a,e,i,u){if(!(e=a.i.g[String(e)]))return!0;e=e.concat();for(var g=!0,b=0;b<e.length;++b){var x=e[b];if(x&&!x.ca&&x.capture==i){var B=x.listener,ee=x.ia||x.src;x.fa&&Ii(a.i,x),g=!1!==B.call(ee,u)&&g}}return g&&!u.defaultPrevented}Ve(On,bt),On.prototype[Kr]=!0,On.prototype.removeEventListener=function(a,e,i,u){ei(this,a,e,i,u)},On.prototype.M=function(){if(On.Z.M.call(this),this.i){var e,a=this.i;for(e in a.g){for(var i=a.g[e],u=0;u<i.length;u++)ki(i[u]);delete a.g[e],a.h--}}this.I=null},On.prototype.N=function(a,e,i,u){return this.i.add(String(a),e,!1,i,u)},On.prototype.O=function(a,e,i,u){return this.i.add(String(a),e,!0,i,u)};var yr=Te.JSON.stringify;function st(){var a=Wn;let e=null;return a.g&&(e=a.g,a.g=a.g.next,a.g||(a.h=null),e.next=null),e}var Un,Ce=new class{constructor(a,e){this.i=a,this.j=e,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}(()=>new ht,a=>a.reset());class ht{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function Pt(a){Te.setTimeout(()=>{throw a},0)}function Nn(a,e){Un||function(){var a=Te.Promise.resolve(void 0);Un=function(){a.then(us)}}(),Rr||(Un(),Rr=!0),Wn.add(a,e)}var Rr=!1,Wn=new class{constructor(){this.h=this.g=null}add(e,i){const u=Ce.get();u.set(e,i),this.h?this.h.next=u:this.g=u,this.h=u}};function us(){for(var a;a=st();){try{a.h.call(a.g)}catch(i){Pt(i)}var e=Ce;e.j(a),100>e.h&&(e.h++,a.next=e.g,e.g=a)}Rr=!1}function Qi(a,e){On.call(this),this.h=a||1,this.g=e||Te,this.j=Dt(this.kb,this),this.l=Date.now()}function Br(a){a.da=!1,a.S&&(a.g.clearTimeout(a.S),a.S=null)}function pt(a,e,i){if("function"==typeof a)i&&(a=Dt(a,i));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=Dt(a.handleEvent,a)}return 2147483647<Number(e)?-1:Te.setTimeout(a,e||0)}function yt(a){a.g=pt(()=>{a.g=null,a.i&&(a.i=!1,yt(a))},a.j);const e=a.h;a.h=null,a.m.apply(null,e)}Ve(Qi,On),(_e=Qi.prototype).da=!1,_e.S=null,_e.kb=function(){if(this.da){var a=Date.now()-this.l;0<a&&a<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-a):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qt(this,"tick"),this.da&&(Br(this),this.start()))}},_e.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_e.M=function(){Qi.Z.M.call(this),Br(this),delete this.g};class At extends bt{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yt(this)}M(){super.M(),this.g&&(Te.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(a){bt.call(this),this.h=a,this.g={}}Ve(Gt,bt);var yn=[];function Ln(a,e,i,u){Array.isArray(i)||(i&&(yn[0]=i.toString()),i=yn);for(var g=0;g<i.length;g++){var b=Hr(e,i[g],u||a.handleEvent,!1,a.h||a);if(!b)break;a.g[b.key]=b}}function Tr(a){Je(a.g,function(e,i){this.g.hasOwnProperty(i)&&ws(e)},a),a.g={}}function nr(){this.g=!0}function oi(a,e,i,u){a.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(a,e){if(!a.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(a=0;a<i.length;a++)if(Array.isArray(i[a])){var u=i[a];if(!(2>u.length)){var g=u[1];if(Array.isArray(g)&&!(1>g.length)){var b=g[0];if("noop"!=b&&"stop"!=b&&"close"!=b)for(var x=1;x<g.length;x++)g[x]=""}}}return yr(i)}catch(B){return e}}(a,i)+(u?" "+u:"")})}Gt.prototype.M=function(){Gt.Z.M.call(this),Tr(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nr.prototype.Aa=function(){this.g=!1},nr.prototype.info=function(){};var hi={},fi=null;function Ps(){return fi=fi||new On}function Os(a){_r.call(this,hi.Ma,a)}function cs(a){const e=Ps();qt(e,new Os(e,a))}function Ri(a,e){_r.call(this,hi.STAT_EVENT,a),this.stat=e}function ri(a){const e=Ps();qt(e,new Ri(e,a))}function Vo(a,e){_r.call(this,hi.Na,a),this.size=e}function go(a,e){if("function"!=typeof a)throw Error("Fn must not be null and must be a function");return Te.setTimeout(function(){a()},e)}hi.Ma="serverreachability",Ve(Os,_r),hi.STAT_EVENT="statevent",Ve(Ri,_r),hi.Na="timingevent",Ve(Vo,_r);var mo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ro={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ds(){}function Jo(){}ds.prototype.h=null;var Li,hs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function so(){_r.call(this,"d")}function Ks(){_r.call(this,"c")}function Fs(){}function Pi(a,e,i,u){this.l=a,this.j=e,this.m=i,this.X=u||1,this.V=new Gt(this),this.P=Xo,this.W=new Qi(a=Sr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ns}function Ns(){this.i=null,this.g="",this.h=!1}Ve(so,_r),Ve(Ks,_r),Ve(Fs,ds),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},Li=new Fs;var Xo=45e3,Bo={},ea={};function fs(a,e,i){a.K=1,a.v=X(Pe(e)),a.s=i,a.U=!0,jo(a,null)}function jo(a,e){a.F=Date.now(),Ui(a),a.A=Pe(a.v);var i=a.A,u=a.X;Array.isArray(u)||(u=[String(u)]),xt(i.h,"t",u),a.C=0,i=a.l.H,a.h=new Ns,a.g=Qc(a.l,i?e:null,!a.s),0<a.O&&(a.L=new At(Dt(a.Ia,a,a.g),a.O)),Ln(a.V,a.g,"readystatechange",a.gb),e=a.H?Kt(a.H):{},a.s?(a.u||(a.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.s,e)):(a.u="GET",a.g.ea(a.A,a.u,null,e)),cs(1),function(a,e,i,u,g,b){a.info(function(){if(a.g)if(b)for(var x="",B=b.split("&"),ee=0;ee<B.length;ee++){var ve=B[ee].split("=");if(1<ve.length){var Fe=ve[0];ve=ve[1];var ut=Fe.split("_");x=2<=ut.length&&"type"==ut[1]?x+(Fe+"=")+ve+"&":x+(Fe+"=redacted&")}}else x=null;else x=b;return"XMLHTTP REQ ("+u+") [attempt "+g+"]: "+e+"\n"+i+"\n"+x})}(a.j,a.u,a.A,a.m,a.X,a.s)}function Ls(a){return!!a.g&&"GET"==a.u&&2!=a.K&&a.l.Ba}function Hi(a,e,i){let g,u=!0;for(;!a.I&&a.C<i.length;){if(g=Fa(a,i),g==ea){4==e&&(a.o=4,ri(14),u=!1),oi(a.j,a.m,null,"[Incomplete Response]");break}if(g==Bo){a.o=4,ri(15),oi(a.j,a.m,i,"[Invalid Chunk]"),u=!1;break}oi(a.j,a.m,g,null),Vs(a,g)}Ls(a)&&g!=ea&&g!=Bo&&(a.h.g="",a.C=0),4!=e||0!=i.length||a.h.h||(a.o=1,ri(16),u=!1),a.i=a.i&&u,u?0<i.length&&!a.aa&&(a.aa=!0,(e=a.l).g==a&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),cl(e),e.L=!0,ri(11))):(oi(a.j,a.m,i,"[Invalid Chunked Response]"),Zi(a),Us(a))}function Fa(a,e){var i=a.C,u=e.indexOf("\n",i);return-1==u?ea:(i=Number(e.substring(i,u)),isNaN(i)?Bo:(u+=1)+i>e.length?ea:(e=e.substr(u,i),a.C=u+i,e))}function Ui(a){a.Y=Date.now()+a.P,ts(a,a.P)}function ts(a,e){if(null!=a.B)throw Error("WatchDog timer not null");a.B=go(Dt(a.eb,a),e)}function _o(a){a.B&&(Te.clearTimeout(a.B),a.B=null)}function Us(a){0==a.l.G||a.I||Xs(a.l,a)}function Zi(a){_o(a);var e=a.L;e&&"function"==typeof e.na&&e.na(),a.L=null,Br(a.W),Tr(a.V),a.g&&(e=a.g,a.g=null,e.abort(),e.na())}function Vs(a,e){try{var i=a.l;if(0!=i.G&&(i.g==a||Fn(i.i,a)))if(i.I=a.N,!a.J&&Fn(i.i,a)&&3==i.G){try{var u=i.Ca.g.parse(e)}catch(ve){u=null}if(Array.isArray(u)&&3==u.length){var g=u;if(0==g[0])e:if(i.u)i.ta=g[1],0<i.ta-i.U&&37500>g[2]&&i.N&&0==i.A&&!i.v&&(i.v=go(Dt(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<a.F))break e;sa(i),Di(i)}nu(i),ri(18)}if(1>=Mr(i.i)&&i.ka){try{i.ka()}catch(ve){}i.ka=void 0}}else bo(i,11)}else if((a.J||i.g==a)&&sa(i),!En(e))for(g=i.Ca.g.parse(e),e=0;e<g.length;e++){let ve=g[e];if(i.U=ve[0],ve=ve[1],2==i.G)if("c"==ve[0]){i.J=ve[1],i.la=ve[2];const Fe=ve[3];null!=Fe&&(i.ma=Fe,i.h.info("VER="+i.ma));const ut=ve[4];null!=ut&&(i.za=ut,i.h.info("SVER="+i.za));const Ut=ve[5];null!=Ut&&"number"==typeof Ut&&0<Ut&&(i.K=u=1.5*Ut,i.h.info("backChannelRequestTimeoutMs_="+u)),u=i;const Xt=a.g;if(Xt){const wn=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wn){var b=u.i;!b.g&&(gn(wn,"spdy")||gn(wn,"quic")||gn(wn,"h2"))&&(b.j=b.l,b.g=new Set,b.h&&(jr(b,b.h),b.h=null))}if(u.D){const er=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;er&&(u.sa=er,O(u.F,u.D,er))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-a.F,i.h.info("Handshake RTT: "+i.O+"ms"));var x=a;if((u=i).oa=dl(u,u.H?u.la:null,u.W),x.J){Bt(u.i,x);var B=x,ee=u.K;ee&&B.setTimeout(ee),B.B&&(_o(B),Ui(B)),u.g=x}else Is(u);0<i.l.length&&Ua(i)}else"stop"!=ve[0]&&"close"!=ve[0]||bo(i,7);else 3==i.G&&("stop"==ve[0]||"close"==ve[0]?"stop"==ve[0]?bo(i,7):Xl(i):"noop"!=ve[0]&&i.j&&i.j.wa(ve),i.A=0)}cs(4)}catch(ve){}}function Ys(a,e){if(a.forEach&&"function"==typeof a.forEach)a.forEach(e,void 0);else if(mn(a)||"string"==typeof a)et(a,e,void 0);else{if(a.T&&"function"==typeof a.T)var i=a.T();else if(a.R&&"function"==typeof a.R)i=void 0;else if(mn(a)||"string"==typeof a){i=[];for(var u=a.length,g=0;g<u;g++)i.push(g)}else for(g in i=[],u=0,a)i[u++]=g;g=(u=function(a){if(a.R&&"function"==typeof a.R)return a.R();if("string"==typeof a)return a.split("");if(mn(a)){for(var e=[],i=a.length,u=0;u<i;u++)e.push(a[u]);return e}for(u in e=[],i=0,a)e[i++]=a[u];return e}(a)).length;for(var b=0;b<g;b++)e.call(void 0,u[b],i&&i[b],a)}}function Cs(a,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var u=0;u<i;u+=2)this.set(arguments[u],arguments[u+1])}else if(a)if(a instanceof Cs)for(i=a.T(),u=0;u<i.length;u++)this.set(i[u],a.get(i[u]));else for(u in a)this.set(u,a[u])}function Si(a){if(a.i!=a.g.length){for(var e=0,i=0;e<a.g.length;){var u=a.g[e];j(a.h,u)&&(a.g[i++]=u),e++}a.g.length=i}if(a.i!=a.g.length){var g={};for(i=e=0;e<a.g.length;)j(g,u=a.g[e])||(a.g[i++]=u,g[u]=1),e++;a.g.length=i}}function j(a,e){return Object.prototype.hasOwnProperty.call(a,e)}(_e=Pi.prototype).setTimeout=function(a){this.P=a},_e.gb=function(a){a=a.target;const e=this.L;e&&3==Ts(a)?e.l():this.Ia(a)},_e.Ia=function(a){try{if(a==this.g)e:{const Fe=Ts(this.g);var e=this.g.Da();const ut=this.g.ba();if(!(3>Fe)&&(3!=Fe||Sr||this.g&&(this.h.h||this.g.ga()||ao(this.g)))){this.I||4!=Fe||7==e||cs(8==e||0>=ut?3:2),_o(this);var i=this.g.ba();this.N=i;t:if(Ls(this)){var u=ao(this.g);a="";var g=u.length,b=4==Ts(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zi(this),Us(this);var x="";break t}this.h.i=new Te.TextDecoder}for(e=0;e<g;e++)this.h.h=!0,a+=this.h.i.decode(u[e],{stream:b&&e==g-1});u.splice(0,g),this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.ga();if(this.i=200==i,function(a,e,i,u,g,b,x){a.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+g+"]: "+e+"\n"+i+"\n"+b+" "+x})}(this.j,this.u,this.A,this.m,this.X,Fe,i),this.i){if(this.$&&!this.J){t:{if(this.g){var B,ee=this.g;if((B=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!En(B)){var ve=B;break t}}ve=null}if(!(i=ve)){this.i=!1,this.o=3,ri(12),Zi(this),Us(this);break e}oi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vs(this,i)}this.U?(Hi(this,Fe,x),Sr&&this.i&&3==Fe&&(Ln(this.V,this.W,"tick",this.fb),this.W.start())):(oi(this.j,this.m,x,null),Vs(this,x)),4==Fe&&Zi(this),this.i&&!this.I&&(4==Fe?Xs(this.l,this):(this.i=!1,Ui(this)))}else 400==i&&0<x.indexOf("Unknown SID")?(this.o=3,ri(12)):(this.o=0,ri(13)),Zi(this),Us(this)}}}catch(Fe){}},_e.fb=function(){if(this.g){var a=Ts(this.g),e=this.g.ga();this.C<e.length&&(_o(this),Hi(this,a,e),this.i&&4!=a&&Ui(this))}},_e.cancel=function(){this.I=!0,Zi(this)},_e.eb=function(){this.B=null;const a=Date.now();0<=a-this.Y?(function(a,e){a.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cs(3),ri(17)),Zi(this),this.o=2,Us(this)):ts(this,this.Y-a)},(_e=Cs.prototype).R=function(){Si(this);for(var a=[],e=0;e<this.g.length;e++)a.push(this.h[this.g[e]]);return a},_e.T=function(){return Si(this),this.g.concat()},_e.get=function(a,e){return j(this.h,a)?this.h[a]:e},_e.set=function(a,e){j(this.h,a)||(this.i++,this.g.push(a)),this.h[a]=e},_e.forEach=function(a,e){for(var i=this.T(),u=0;u<i.length;u++){var g=i[u],b=this.get(g);a.call(e,b,g,this)}};var ne=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ie(a,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,a instanceof ie){this.g=void 0!==e?e:a.g,gt(this,a.j),this.s=a.s,$t(this,a.i),L(this,a.m),this.l=a.l,e=a.h;var i=new G;i.i=e.i,e.g&&(i.g=new Cs(e.g),i.h=e.h),k(this,i),this.o=a.o}else a&&(i=String(a).match(ne))?(this.g=!!e,gt(this,i[1]||"",!0),this.s=an(i[2]||""),$t(this,i[3]||"",!0),L(this,i[4]),this.l=an(i[5]||"",!0),k(this,i[6]||"",!0),this.o=an(i[7]||"")):(this.g=!!e,this.h=new G(null,this.g))}function Pe(a){return new ie(a)}function gt(a,e,i){a.j=i?an(e,!0):e,a.j&&(a.j=a.j.replace(/:$/,""))}function $t(a,e,i){a.i=i?an(e,!0):e}function L(a,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);a.m=e}else a.m=null}function k(a,e,i){e instanceof G?(a.h=e,function(a,e){e&&!a.j&&(pe(a),a.i=null,a.g.forEach(function(i,u){var g=u.toLowerCase();u!=g&&(Le(this,u),xt(this,g,i))},a)),a.j=e}(a.h,a.g)):(i||(e=Xn(e,Bs)),a.h=new G(e,a.g))}function O(a,e,i){a.h.set(e,i)}function X(a){return O(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function an(a,e){return a?e?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xn(a,e,i){return"string"==typeof a?(a=encodeURI(a).replace(e,ii),i&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ii(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}ie.prototype.toString=function(){var a=[],e=this.j;e&&a.push(Xn(e,Wr,!0),":");var i=this.i;return(i||"file"==e)&&(a.push("//"),(e=this.s)&&a.push(Xn(e,Wr,!0),"@"),a.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&a.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&a.push("/"),a.push(Xn(i,"/"==i.charAt(0)?ps:Ur,!0))),(i=this.h.toString())&&a.push("?",i),(i=this.o)&&a.push("#",Xn(i,Q)),a.join("")};var Wr=/[#\/\?@]/g,Ur=/[#\?:]/g,ps=/[#\?]/g,Bs=/[#\?@]/g,Q=/#/g;function G(a,e){this.h=this.g=null,this.i=a||null,this.j=!!e}function pe(a){a.g||(a.g=new Cs,a.h=0,a.i&&function(a,e){if(a){a=a.split("&");for(var i=0;i<a.length;i++){var u=a[i].indexOf("="),g=null;if(0<=u){var b=a[i].substring(0,u);g=a[i].substring(u+1)}else b=a[i];e(b,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}(a.i,function(e,i){a.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function Le(a,e){pe(a),e=Wt(a,e),j(a.g.h,e)&&(a.i=null,a.h-=a.g.get(e).length,j((a=a.g).h,e)&&(delete a.h[e],a.i--,a.g.length>2*a.i&&Si(a)))}function We(a,e){return pe(a),e=Wt(a,e),j(a.g.h,e)}function xt(a,e,i){Le(a,e),0<i.length&&(a.i=null,a.g.set(Wt(a,e),dn(i)),a.h+=i.length)}function Wt(a,e){return e=String(e),a.j&&(e=e.toLowerCase()),e}function zn(a){this.l=a||mr,a=Te.PerformanceNavigationTiming?0<(a=Te.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):!!(Te.g&&Te.g.Ea&&Te.g.Ea()&&Te.g.Ea().Zb),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_e=G.prototype).add=function(a,e){pe(this),this.i=null,a=Wt(this,a);var i=this.g.get(a);return i||this.g.set(a,i=[]),i.push(e),this.h+=1,this},_e.forEach=function(a,e){pe(this),this.g.forEach(function(i,u){et(i,function(g){a.call(e,g,u,this)},this)},this)},_e.T=function(){pe(this);for(var a=this.g.R(),e=this.g.T(),i=[],u=0;u<e.length;u++)for(var g=a[u],b=0;b<g.length;b++)i.push(e[u]);return i},_e.R=function(a){pe(this);var e=[];if("string"==typeof a)We(this,a)&&(e=Ct(e,this.g.get(Wt(this,a))));else{a=this.g.R();for(var i=0;i<a.length;i++)e=Ct(e,a[i])}return e},_e.set=function(a,e){return pe(this),this.i=null,We(this,a=Wt(this,a))&&(this.h-=this.g.get(a).length),this.g.set(a,[e]),this.h+=1,this},_e.get=function(a,e){return a&&0<(a=this.R(a)).length?String(a[0]):e},_e.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var a=[],e=this.g.T(),i=0;i<e.length;i++){var u=e[i],g=encodeURIComponent(String(u));u=this.R(u);for(var b=0;b<u.length;b++){var x=g;""!==u[b]&&(x+="="+encodeURIComponent(String(u[b]))),a.push(x)}}return this.i=a.join("&")};var mr=10;function Oi(a){return!!a.h||!!a.g&&a.g.size>=a.j}function Mr(a){return a.h?1:a.g?a.g.size:0}function Fn(a,e){return a.h?a.h==e:!!a.g&&a.g.has(e)}function jr(a,e){a.g?a.g.add(e):a.h=e}function Bt(a,e){a.h&&a.h==e?a.h=null:a.g&&a.g.has(e)&&a.g.delete(e)}function ur(a){if(null!=a.h)return a.i.concat(a.h.D);if(null!=a.g&&0!==a.g.size){let e=a.i;for(const i of a.g.values())e=e.concat(i.D);return e}return dn(a.i)}function Ai(){}function Fr(){this.g=new Ai}function ai(a,e,i){const u=i||"";try{Ys(a,function(g,b){let x=g;Bn(g)&&(x=yr(g)),e.push(u+b+"="+encodeURIComponent(x))})}catch(g){throw e.push(u+"type="+encodeURIComponent("_badmap")),g}}function Pr(a,e,i,u,g){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,g(u)}catch(b){}}function gs(a){this.l=a.$b||null,this.j=a.ib||!1}function Qs(a,e){On.call(this),this.D=a,this.u=e,this.m=void 0,this.readyState=Js,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zn.prototype.cancel=function(){if(this.i=ur(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const a of this.g.values())a.cancel();this.g.clear()}},Ai.prototype.stringify=function(a){return Te.JSON.stringify(a,void 0)},Ai.prototype.parse=function(a){return Te.JSON.parse(a,void 0)},Ve(gs,ds),gs.prototype.g=function(){return new Qs(this.l,this.j)},gs.prototype.i=function(a){return function(){return a}}({}),Ve(Qs,On);var Js=0;function xl(a){a.j.read().then(a.Sa.bind(a)).catch(a.ha.bind(a))}function yo(a){a.readyState=4,a.l=null,a.j=null,a.A=null,ta(a)}function ta(a){a.onreadystatechange&&a.onreadystatechange.call(a)}(_e=Qs.prototype).open=function(a,e){if(this.readyState!=Js)throw this.abort(),Error("Error reopening a connection");this.C=a,this.B=e,this.readyState=1,ta(this)},_e.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};a&&(e.body=a),(this.D||Te).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},_e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yo(this)),this.readyState=Js},_e.Va=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ta(this)),this.g&&(this.readyState=3,ta(this),this.g)))if("arraybuffer"===this.responseType)a.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Te.ReadableStream&&"body"in a){if(this.j=a.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xl(this)}else a.text().then(this.Ua.bind(this),this.ha.bind(this))},_e.Sa=function(a){if(this.g){if(this.u&&a.value)this.response.push(a.value);else if(!this.u){var e=a.value?a.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!a.done}))&&(this.response=this.responseText+=e)}a.done?yo(this):ta(this),3==this.readyState&&xl(this)}},_e.Ua=function(a){this.g&&(this.response=this.responseText=a,yo(this))},_e.Ta=function(a){this.g&&(this.response=a,yo(this))},_e.ha=function(){this.g&&yo(this)},_e.setRequestHeader=function(a,e){this.v.append(a,e)},_e.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},_e.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],e=this.h.entries();for(var i=e.next();!i.done;)a.push((i=i.value)[0]+": "+i[1]),i=e.next();return a.join("\r\n")},Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(a){this.m=a?"include":"same-origin"}});var ns=Te.JSON.parse;function $r(a){On.call(this),this.headers=new Cs,this.u=a||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=na,this.K=this.L=!1}Ve($r,On);var na="",ll=/^https?$/i,ra=["POST","PUT"];function Yl(a){return"content-type"==a.toLowerCase()}function li(a,e){a.h=!1,a.g&&(a.l=!0,a.g.abort(),a.l=!1),a.j=e,a.m=5,ia(a),vo(a)}function ia(a){a.D||(a.D=!0,qt(a,"complete"),qt(a,"error"))}function Ql(a){if(a.h&&void 0!==ct&&(!a.C[1]||4!=Ts(a)||2!=a.ba()))if(a.v&&4==Ts(a))pt(a.Fa,0,a);else if(qt(a,"readystatechange"),4==Ts(a)){a.h=!1;try{const B=a.ba();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var u;if(u=0===B){var g=String(a.H).match(ne)[1]||null;if(!g&&Te.self&&Te.self.location){var b=Te.self.location.protocol;g=b.substr(0,b.length-1)}u=!ll.test(g?g.toLowerCase():"")}i=u}if(i)qt(a,"complete"),qt(a,"success");else{a.m=6;try{var x=2<Ts(a)?a.g.statusText:""}catch(ee){x=""}a.j=x+" ["+a.ba()+"]",ia(a)}}finally{vo(a)}}}function vo(a,e){if(a.g){Rl(a);const i=a.g,u=a.C[0]?jt:null;a.g=null,a.C=null,e||qt(a,"ready");try{i.onreadystatechange=u}catch(g){}}}function Rl(a){a.g&&a.K&&(a.g.ontimeout=null),a.A&&(Te.clearTimeout(a.A),a.A=null)}function Ts(a){return a.g?a.g.readyState:0}function ao(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.J){case na:case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(e){return null}}function cr(a,e,i){e:{for(u in i){var u=!1;break e}u=!0}u||(i=function(a){let e="";return Je(a,function(i,u){e+=u,e+=":",e+=i,e+="\r\n"}),e}(i),"string"==typeof a?null!=i&&encodeURIComponent(String(i)):O(a,e,i))}function Iu(a,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[a]||e}function Jl(a){this.za=0,this.l=[],this.h=new nr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Iu("failFast",!1,a),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Iu("baseRetryDelayMs",5e3,a),this.$a=Iu("retryDelaySeedMs",1e4,a),this.Ya=Iu("forwardChannelMaxRetries",2,a),this.ra=Iu("forwardChannelRequestTimeoutMs",2e4,a),this.qa=a&&a.xmlHttpFactory||void 0,this.Ba=a&&a.Yb||!1,this.K=void 0,this.H=a&&a.supportsCrossDomainXhr||!1,this.J="",this.i=new zn(a&&a.concurrentRequestLimit),this.Ca=new Fr,this.ja=a&&a.fastHandshake||!1,this.Ra=a&&a.Wb||!1,a&&a.Aa&&this.h.Aa(),a&&a.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&a&&a.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!a||!1!==a.Xb}function Xl(a){if(eu(a),3==a.G){var e=a.V++,i=Pe(a.F);O(i,"SID",a.J),O(i,"RID",e),O(i,"TYPE","terminate"),gi(a,i),(e=new Pi(a,a.h,e,void 0)).K=2,e.v=X(Pe(i)),i=!1,Te.navigator&&Te.navigator.sendBeacon&&(i=Te.navigator.sendBeacon(e.v.toString(),"")),!i&&Te.Image&&((new Image).src=e.v,i=!0),i||(e.g=Qc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ui(e)}Pl(a)}function Di(a){a.g&&(cl(a),a.g.cancel(),a.g=null)}function eu(a){Di(a),a.u&&(Te.clearTimeout(a.u),a.u=null),sa(a),a.i.cancel(),a.m&&("number"==typeof a.m&&Te.clearTimeout(a.m),a.m=null)}function tu(a,e){a.l.push(new class{constructor(a,e){this.h=a,this.g=e}}(a.Za++,e)),3==a.G&&Ua(a)}function Ua(a){Oi(a.i)||a.m||(a.m=!0,Nn(a.Ha,a),a.C=0)}function Eo(a,e){var i;i=e?e.m:a.V++;const u=Pe(a.F);O(u,"SID",a.J),O(u,"RID",i),O(u,"AID",a.U),gi(a,u),a.o&&a.s&&cr(u,a.o,a.s),i=new Pi(a,a.h,i,a.C+1),null===a.o&&(i.H=a.s),e&&(a.l=e.D.concat(a.l)),e=Su(a,i,1e3),i.setTimeout(Math.round(.5*a.ra)+Math.round(.5*a.ra*Math.random())),jr(a.i,i),fs(i,u,e)}function gi(a,e){a.j&&Ys({},function(i,u){O(e,u,i)})}function Su(a,e,i){i=Math.min(a.l.length,i);var u=a.j?Dt(a.j.Oa,a.j,a):null;e:{var g=a.l;let b=-1;for(;;){const x=["count="+i];-1==b?0<i?(b=g[0].h,x.push("ofs="+b)):b=0:x.push("ofs="+b);let B=!0;for(let ee=0;ee<i;ee++){let ve=g[ee].h;const Fe=g[ee].g;if(ve-=b,0>ve)b=Math.max(0,g[ee].h-100),B=!1;else try{ai(Fe,x,"req"+ve+"_")}catch(ut){u&&u(Fe)}}if(B){u=x.join("&");break e}}}return a=a.l.splice(0,i),e.D=a,u}function Is(a){a.g||a.u||(a.Y=1,Nn(a.Ga,a),a.A=0)}function nu(a){return!(a.g||a.u||3<=a.A||(a.Y++,a.u=go(Dt(a.Ga,a),$o(a,a.A)),a.A++,0))}function cl(a){null!=a.B&&(Te.clearTimeout(a.B),a.B=null)}function Au(a){a.g=new Pi(a,a.h,"rpc",a.Y),null===a.o&&(a.g.H=a.s),a.g.O=0;var e=Pe(a.oa);O(e,"RID","rpc"),O(e,"SID",a.J),O(e,"CI",a.N?"0":"1"),O(e,"AID",a.U),gi(a,e),O(e,"TYPE","xmlhttp"),a.o&&a.s&&cr(e,a.o,a.s),a.K&&a.g.setTimeout(a.K);var i=a.g;a=a.la,i.K=1,i.v=X(Pe(e)),i.s=null,i.U=!0,jo(i,a)}function sa(a){null!=a.v&&(Te.clearTimeout(a.v),a.v=null)}function Xs(a,e){var i=null;if(a.g==e){sa(a),cl(a),a.g=null;var u=2}else{if(!Fn(a.i,e))return;i=e.D,Bt(a.i,e),u=1}if(a.I=e.N,0!=a.G)if(e.i)if(1==u){i=e.s?e.s.length:0,e=Date.now()-e.F;var g=a.C;qt(u=Ps(),new Vo(u,i,e,g)),Ua(a)}else Is(a);else if(3==(g=e.o)||0==g&&0<a.I||!(1==u&&function(a,e){return!(Mr(a.i)>=a.i.j-(a.m?1:0)||(a.m?(a.l=e.D.concat(a.l),0):1==a.G||2==a.G||a.C>=(a.Xa?0:a.Ya)||(a.m=go(Dt(a.Ha,a,e),$o(a,a.C)),a.C++,0)))}(a,e)||2==u&&nu(a)))switch(i&&0<i.length&&(e=a.i,e.i=e.i.concat(i)),g){case 1:bo(a,5);break;case 4:bo(a,10);break;case 3:bo(a,6);break;default:bo(a,2)}}function $o(a,e){let i=a.Pa+Math.floor(Math.random()*a.$a);return a.j||(i*=2),i*e}function bo(a,e){if(a.h.info("Error code "+e),2==e){var i=null;a.j&&(i=null);var u=Dt(a.jb,a);i||(i=new ie("//www.google.com/images/cleardot.gif"),Te.location&&"http"==Te.location.protocol||gt(i,"https"),X(i)),function(a,e){const i=new nr;if(Te.Image){const u=new Image;u.onload=at(Pr,i,u,"TestLoadImage: loaded",!0,e),u.onerror=at(Pr,i,u,"TestLoadImage: error",!1,e),u.onabort=at(Pr,i,u,"TestLoadImage: abort",!1,e),u.ontimeout=at(Pr,i,u,"TestLoadImage: timeout",!1,e),Te.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=a}else e(!1)}(i.toString(),u)}else ri(2);a.G=0,a.j&&a.j.va(e),Pl(a),eu(a)}function Pl(a){a.G=0,a.I=-1,a.j&&((0!=ur(a.i).length||0!=a.l.length)&&(a.i.i.length=0,dn(a.l),a.l.length=0),a.j.ua())}function dl(a,e,i){let u=function(a){return a instanceof ie?Pe(a):new ie(a,void 0)}(i);if(""!=u.i)e&&$t(u,e+"."+u.i),L(u,u.m);else{const g=Te.location;u=function(a,e,i,u){var g=new ie(null,void 0);return a&&gt(g,a),e&&$t(g,e),i&&L(g,i),u&&(g.l=u),g}(g.protocol,e?e+"."+g.hostname:g.hostname,+g.port,i)}return a.aa&&Je(a.aa,function(g,b){O(u,b,g)}),i=a.sa,(e=a.D)&&i&&O(u,e,i),O(u,"VER",a.ma),gi(a,u),u}function Qc(a,e,i){if(e&&!a.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $r(i&&a.Ba&&!a.qa?new gs({ib:!0}):a.qa)).L=a.H,e}function eo(){}function ms(){if(tr&&!(10<=Number(ir)))throw Error("Environmental error: no available transport.")}function Gi(a,e){On.call(this),this.g=new Jl(e),this.l=a,this.h=e&&e.messageUrlParams||null,a=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.s=a,a=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(a?a["X-WebChannel-Content-Type"]=e.messageContentType:a={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(a?a["X-WebChannel-Client-Profile"]=e.ya:a={"X-WebChannel-Client-Profile":e.ya}),this.g.P=a,(a=e&&e.httpHeadersOverwriteParam)&&!En(a)&&(this.g.o=a),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!En(e)&&(this.g.D=e,null!==(a=this.h)&&e in a&&e in(a=this.h)&&delete a[e]),this.j=new wo(this)}function vc(a){so.call(this);var e=a.__sm__;if(e){e:{for(const i in e){a=i;break e}a=void 0}(this.i=a)&&(a=this.i,e=null!==e&&a in e?e[a]:void 0),this.data=e}else this.data=a}function Va(){Ks.call(this),this.status=1}function wo(a){this.g=a}(_e=$r.prototype).ea=function(a,e,i,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+a);e=e?e.toUpperCase():"GET",this.H=a,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Li.g(),this.C=function(a){return a.h||(a.h=a.i())}(this.u?this.u:Li),this.g.onreadystatechange=Dt(this.Fa,this);try{this.F=!0,this.g.open(e,String(a),!0),this.F=!1}catch(b){return void li(this,b)}a=i||"";const g=new Cs(this.headers);u&&Ys(u,function(b,x){g.set(x,b)}),u=function(a){e:{var e=Yl;const i=a.length,u="string"==typeof a?a.split(""):a;for(let g=0;g<i;g++)if(g in u&&e.call(void 0,u[g],g,a)){e=g;break e}e=-1}return 0>e?null:"string"==typeof a?a.charAt(e):a[e]}(g.T()),i=Te.FormData&&a instanceof Te.FormData,!(0<=Se(ra,e))||u||i||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),g.forEach(function(b,x){this.g.setRequestHeader(x,b)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rl(this),0<this.B&&((this.K=function(a){return tr&&rn()&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.pa,this)):this.A=pt(this.pa,this.B,this)),this.v=!0,this.g.send(a),this.v=!1}catch(b){li(this,b)}},_e.pa=function(){void 0!==ct&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qt(this,"timeout"),this.abort(8))},_e.abort=function(a){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=a||7,qt(this,"complete"),qt(this,"abort"),vo(this))},_e.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vo(this,!0)),$r.Z.M.call(this)},_e.Fa=function(){this.s||(this.F||this.v||this.l?Ql(this):this.cb())},_e.cb=function(){Ql(this)},_e.ba=function(){try{return 2<Ts(this)?this.g.status:-1}catch(a){return-1}},_e.ga=function(){try{return this.g?this.g.responseText:""}catch(a){return""}},_e.Qa=function(a){if(this.g){var e=this.g.responseText;return a&&0==e.indexOf(a)&&(e=e.substring(a.length)),ns(e)}},_e.Da=function(){return this.m},_e.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(_e=Jl.prototype).ma=8,_e.G=1,_e.hb=function(a){try{this.h.info("Origin Trials invoked: "+a)}catch(e){}},_e.Ha=function(a){if(this.m)if(this.m=null,1==this.G){if(!a){this.V=Math.floor(1e5*Math.random()),a=this.V++;const g=new Pi(this,this.h,a,void 0);let b=this.s;if(this.P&&(b?(b=Kt(b),kt(b,this.P)):b=this.P),null===this.o&&(g.H=b),this.ja)e:{for(var e=0,i=0;i<this.l.length;i++){var u=this.l[i];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(e+=u)){e=i;break e}if(4096===e||i===this.l.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=Su(this,g,e),O(i=Pe(this.F),"RID",a),O(i,"CVER",22),this.D&&O(i,"X-HTTP-Session-Id",this.D),gi(this,i),this.o&&b&&cr(i,this.o,b),jr(this.i,g),this.Ra&&O(i,"TYPE","init"),this.ja?(O(i,"$req",e),O(i,"SID","null"),g.$=!0,fs(g,i,null)):fs(g,i,e),this.G=2}}else 3==this.G&&(a?Eo(this,a):0==this.l.length||Oi(this.i)||Eo(this))},_e.Ga=function(){if(this.u=null,Au(this),this.$&&!(this.L||null==this.g||0>=this.O)){var a=2*this.O;this.h.info("BP detection timer enabled: "+a),this.B=go(Dt(this.bb,this),a)}},_e.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ri(10),Di(this),Au(this))},_e.ab=function(){null!=this.v&&(this.v=null,Di(this),nu(this),ri(19))},_e.jb=function(a){a?(this.h.info("Successfully pinged google.com"),ri(2)):(this.h.info("Failed to ping google.com"),ri(1))},(_e=eo.prototype).xa=function(){},_e.wa=function(){},_e.va=function(){},_e.ua=function(){},_e.Oa=function(){},ms.prototype.g=function(a,e){return new Gi(a,e)},Ve(Gi,On),Gi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var a=this.g,e=this.l,i=this.h||void 0;a.Wa&&(a.h.info("Origin Trials enabled."),Nn(Dt(a.hb,a,e))),ri(0),a.W=e,a.aa=i||{},a.N=a.X,a.F=dl(a,null,a.W),Ua(a)},Gi.prototype.close=function(){Xl(this.g)},Gi.prototype.u=function(a){if("string"==typeof a){var e={};e.__data__=a,tu(this.g,e)}else this.v?((e={}).__data__=yr(a),tu(this.g,e)):tu(this.g,a)},Gi.prototype.M=function(){this.g.j=null,delete this.j,Xl(this.g),delete this.g,Gi.Z.M.call(this)},Ve(vc,so),Ve(Va,Ks),Ve(wo,eo),wo.prototype.xa=function(){qt(this.g,"a")},wo.prototype.wa=function(a){qt(this.g,new vc(a))},wo.prototype.va=function(a){qt(this.g,new Va(a))},wo.prototype.ua=function(){qt(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Gi.prototype.send=Gi.prototype.u,Gi.prototype.open=Gi.prototype.m,Gi.prototype.close=Gi.prototype.close,mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,Ro.COMPLETE="complete",Jo.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",On.prototype.listen=On.prototype.N,$r.prototype.listenOnce=$r.prototype.O,$r.prototype.getLastError=$r.prototype.La,$r.prototype.getLastErrorCode=$r.prototype.Da,$r.prototype.getStatus=$r.prototype.ba,$r.prototype.getResponseJson=$r.prototype.Qa,$r.prototype.getResponseText=$r.prototype.ga,$r.prototype.send=$r.prototype.ea;var ru=Re.createWebChannelTransport=function(){return new ms},rs=Re.getStatEventTarget=function(){return Ps()},hl=Re.ErrorCode=mo,Ba=Re.EventType=Ro,fl=Re.Event=hi,_a=Re.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iu=Re.FetchXmlHttpFactory=gs,oa=Re.WebChannel=Jo,ya=Re.XhrIo=$r;const su="@firebase/firestore";class mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");let Vi="9.1.3";const Ms=new Ge.Yd("@firebase/firestore");function lo(){return Ms.logLevel}function un(a,...e){if(Ms.logLevel<=Ge.in.DEBUG){const i=e.map(ja);Ms.debug(`Firestore (${Vi}): ${a}`,...i)}}function ui(a,...e){if(Ms.logLevel<=Ge.in.ERROR){const i=e.map(ja);Ms.error(`Firestore (${Vi}): ${a}`,...i)}}function is(a,...e){if(Ms.logLevel<=Ge.in.WARN){const i=e.map(ja);Ms.warn(`Firestore (${Vi}): ${a}`,...i)}}function ja(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch(i){return a}}function Mn(a="Unexpected state"){const e=`FIRESTORE (${Vi}) INTERNAL ASSERTION FAILED: `+a;throw ui(e),new Error(e)}function $n(a,e){a||Mn()}function pn(a,e){return a}const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends Error{constructor(e,i){super(i),this.code=e,this.message=i,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _i{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}class Ec{constructor(e,i){this.user=i,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class aa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(mi.UNAUTHENTICATED))}shutdown(){}}class va{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Du{constructor(e){this.t=e,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){var u=this;let g=this.i;const b=ve=>this.i!==g?(g=this.i,i(ve)):Promise.resolve();let x=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),x.resolve(),x=new _i,e.enqueueRetryable(()=>b(this.currentUser))};const B=()=>{const ve=x;e.enqueueRetryable((0,ye.Z)(function*(){yield ve.promise,yield b(u.currentUser)}))},ee=ve=>{un("FirebaseCredentialsProvider","Auth detected"),this.auth=ve,this.auth.addAuthTokenListener(this.o),B()};this.t.onInit(ve=>ee(ve)),setTimeout(()=>{if(!this.auth){const ve=this.t.getImmediate({optional:!0});ve?ee(ve):(un("FirebaseCredentialsProvider","Auth not yet detected"),x.resolve(),x=new _i)}},0),B()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(u=>this.i!==e?(un("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?($n("string"==typeof u.accessToken),new Ec(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $n(null===e||"string"==typeof e),new mi(e)}}class bc{constructor(e,i,u){this.h=e,this.l=i,this.m=u,this.type="FirstParty",this.user=mi.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},i=this.h.auth.getAuthHeaderValueForFirstParty([]);return i&&(e.Authorization=i),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class pl{constructor(e,i,u){this.h=e,this.l=i,this.m=u}getToken(){return Promise.resolve(new bc(this.h,this.l,this.m))}start(e,i){e.enqueueRetryable(()=>i(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ss{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=u=>this.g(u),this.p=u=>i.writeSequenceNumber(u))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function $a(a){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let u=0;u<a;u++)i[u]=Math.floor(256*Math.random());return i}ss.T=-1;class Ha{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let u="";for(;u.length<20;){const g=$a(40);for(let b=0;b<g.length;++b)u.length<20&&g[b]<i&&(u+=e.charAt(g[b]%e.length))}return u}}function gr(a,e){return a<e?-1:a>e?1:0}function Ea(a,e,i){return a.length===e.length&&a.every((u,g)=>i(u,e[g]))}function gl(a){return a+"\0"}class hr{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new zt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new zt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new zt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),u=Math.floor(1e6*(e-1e3*i));return new hr(i,u)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gr(this.nanoseconds,e.nanoseconds):gr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Hn(e)}static min(){return new Hn(new hr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ba(a){let e=0;for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&e++;return e}function Co(a,e){for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&e(i,a[i])}function ml(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Po{constructor(e,i,u){void 0===i?i=0:i>e.length&&Mn(),void 0===u?u=e.length-i:u>e.length-i&&Mn(),this.segments=e,this.offset=i,this.len=u}get length(){return this.len}isEqual(e){return 0===Po.comparator(this,e)}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Po?e.forEach(u=>{i.push(u)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,u=this.limit();i<u;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const u=Math.min(e.length,i.length);for(let g=0;g<u;g++){const b=e.get(g),x=i.get(g);if(b<x)return-1;if(b>x)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class br extends Po{construct(e,i,u){return new br(e,i,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const u of e){if(u.indexOf("//")>=0)throw new zt(St.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);i.push(...u.split("/").filter(g=>g.length>0))}return new br(i)}static emptyPath(){return new br([])}}const xu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class P extends Po{construct(e,i,u){return new P(e,i,u)}static isValidIdentifier(e){return xu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),P.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new P(["__name__"])}static fromServerFormat(e){const i=[];let u="",g=0;const b=()=>{if(0===u.length)throw new zt(St.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(u),u=""};let x=!1;for(;g<e.length;){const B=e[g];if("\\"===B){if(g+1===e.length)throw new zt(St.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const ee=e[g+1];if("\\"!==ee&&"."!==ee&&"`"!==ee)throw new zt(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);u+=ee,g+=2}else"`"===B?(x=!x,g++):"."!==B||x?(u+=B,g++):(b(),g++)}if(b(),x)throw new zt(St.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new P(i)}static emptyPath(){return new P([])}}class S{constructor(e){this.fields=e,e.sort(P.comparator)}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(i,u)=>i.isEqual(u))}}class M{constructor(e){this.binaryString=e}static fromBase64String(e){const i=atob(e);return new M(i)}static fromUint8Array(e){const i=function(u){let g="";for(let b=0;b<u.length;++b)g+=String.fromCharCode(u[b]);return g}(e);return new M(i)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let u=0;u<e.length;u++)i[u]=e.charCodeAt(u);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}M.EMPTY_BYTE_STRING=new M("");const q=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function se(a){if($n(!!a),"string"==typeof a){let e=0;const i=q.exec(a);if($n(!!i),i[1]){let g=i[1];g=(g+"000000000").substr(0,9),e=Number(g)}const u=new Date(a);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:we(a.seconds),nanos:we(a.nanos)}}function we(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Ke(a){return"string"==typeof a?M.fromBase64String(a):M.fromUint8Array(a)}function Lt(a){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==a?void 0:a.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function In(a){const e=a.mapValue.fields.__previous_value__;return Lt(e)?In(e):e}function Or(a){const e=se(a.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}function Zn(a){return null==a}function Jr(a){return 0===a&&1/a==-1/0}function Ar(a){return"number"==typeof a&&Number.isInteger(a)&&!Jr(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}class Tn{constructor(e){this.path=e}static fromPath(e){return new Tn(br.fromString(e))}static fromName(e){return new Tn(br.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===br.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return br.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Tn(new br(e.slice()))}}function js(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Lt(a)?4:10:Mn()}function Ss(a,e){const i=js(a);if(i!==js(e))return!1;switch(i){case 0:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Or(a).isEqual(Or(e));case 3:return function(u,g){if("string"==typeof u.timestampValue&&"string"==typeof g.timestampValue&&u.timestampValue.length===g.timestampValue.length)return u.timestampValue===g.timestampValue;const b=se(u.timestampValue),x=se(g.timestampValue);return b.seconds===x.seconds&&b.nanos===x.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return g=e,Ke(a.bytesValue).isEqual(Ke(g.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,g){return we(u.geoPointValue.latitude)===we(g.geoPointValue.latitude)&&we(u.geoPointValue.longitude)===we(g.geoPointValue.longitude)}(a,e);case 2:return function(u,g){if("integerValue"in u&&"integerValue"in g)return we(u.integerValue)===we(g.integerValue);if("doubleValue"in u&&"doubleValue"in g){const b=we(u.doubleValue),x=we(g.doubleValue);return b===x?Jr(b)===Jr(x):isNaN(b)&&isNaN(x)}return!1}(a,e);case 9:return Ea(a.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:return function(u,g){const b=u.mapValue.fields||{},x=g.mapValue.fields||{};if(ba(b)!==ba(x))return!1;for(const B in b)if(b.hasOwnProperty(B)&&(void 0===x[B]||!Ss(b[B],x[B])))return!1;return!0}(a,e);default:return Mn()}var g}function wa(a,e){return void 0!==(a.values||[]).find(i=>Ss(i,e))}function _s(a,e){const i=js(a),u=js(e);if(i!==u)return gr(i,u);switch(i){case 0:return 0;case 1:return gr(a.booleanValue,e.booleanValue);case 2:return function(g,b){const x=we(g.integerValue||g.doubleValue),B=we(b.integerValue||b.doubleValue);return x<B?-1:x>B?1:x===B?0:isNaN(x)?isNaN(B)?0:-1:1}(a,e);case 3:return Zo(a.timestampValue,e.timestampValue);case 4:return Zo(Or(a),Or(e));case 5:return gr(a.stringValue,e.stringValue);case 6:return function(g,b){const x=Ke(g),B=Ke(b);return x.compareTo(B)}(a.bytesValue,e.bytesValue);case 7:return function(g,b){const x=g.split("/"),B=b.split("/");for(let ee=0;ee<x.length&&ee<B.length;ee++){const ve=gr(x[ee],B[ee]);if(0!==ve)return ve}return gr(x.length,B.length)}(a.referenceValue,e.referenceValue);case 8:return function(g,b){const x=gr(we(g.latitude),we(b.latitude));return 0!==x?x:gr(we(g.longitude),we(b.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return function(g,b){const x=g.values||[],B=b.values||[];for(let ee=0;ee<x.length&&ee<B.length;++ee){const ve=_s(x[ee],B[ee]);if(ve)return ve}return gr(x.length,B.length)}(a.arrayValue,e.arrayValue);case 10:return function(g,b){const x=g.fields||{},B=Object.keys(x),ee=b.fields||{},ve=Object.keys(ee);B.sort(),ve.sort();for(let Fe=0;Fe<B.length&&Fe<ve.length;++Fe){const ut=gr(B[Fe],ve[Fe]);if(0!==ut)return ut;const Ut=_s(x[B[Fe]],ee[ve[Fe]]);if(0!==Ut)return Ut}return gr(B.length,ve.length)}(a.mapValue,e.mapValue);default:throw Mn()}}function Zo(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return gr(a,e);const i=se(a),u=se(e),g=gr(i.seconds,u.seconds);return 0!==g?g:gr(i.nanos,u.nanos)}function si(a){return _l(a)}function _l(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(u){const g=se(u);return`time(${g.seconds},${g.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Ke(a.bytesValue).toBase64():"referenceValue"in a?Tn.fromName(a.referenceValue).toString():"geoPointValue"in a?`geo(${(e=a.geoPointValue).latitude},${e.longitude})`:"arrayValue"in a?function(u){let g="[",b=!0;for(const x of u.values||[])b?b=!1:g+=",",g+=_l(x);return g+"]"}(a.arrayValue):"mapValue"in a?function(u){const g=Object.keys(u.fields||{}).sort();let b="{",x=!0;for(const B of g)x?x=!1:b+=",",b+=`${B}:${_l(u.fields[B])}`;return b+"}"}(a.mapValue):Mn();var e}function Za(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function yl(a){return!!a&&"integerValue"in a}function Rd(a){return!!a&&"arrayValue"in a}function uo(a){return!!a&&"nullValue"in a}function Ca(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Ga(a){return!!a&&"mapValue"in a}function Go(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Co(a.mapValue.fields,(i,u)=>e.mapValue.fields[i]=Go(u)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(a.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Go(a.arrayValue.values[i]);return e}return Object.assign({},a)}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let u=0;u<e.length-1;++u)if(i=(i.mapValue.fields||{})[e.get(u)],!Ga(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(i)}setAll(e){let i=P.emptyPath(),u={},g=[];e.forEach((x,B)=>{if(!i.isImmediateParentOf(B)){const ee=this.getFieldsMap(i);this.applyChanges(ee,u,g),u={},g=[],i=B.popLast()}x?u[B.lastSegment()]=Go(x):g.push(B.lastSegment())});const b=this.getFieldsMap(i);this.applyChanges(b,u,g)}delete(e){const i=this.field(e.popLast());Ga(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let u=0;u<e.length;++u){let g=i.mapValue.fields[e.get(u)];Ga(g)&&g.mapValue.fields||(g={mapValue:{fields:{}}},i.mapValue.fields[e.get(u)]=g),i=g}return i.mapValue.fields}applyChanges(e,i,u){Co(i,(g,b)=>e[g]=b);for(const g of u)delete e[g]}clone(){return new Ci(Go(this.value))}}function ou(a){const e=[];return Co(a.fields,(i,u)=>{const g=new P([i]);if(Ga(u)){const b=ou(u.mapValue).fields;if(0===b.length)e.push(g);else for(const x of b)e.push(g.child(x))}else e.push(g)}),new S(e)}class Ni{constructor(e,i,u,g,b){this.key=e,this.documentType=i,this.version=u,this.data=g,this.documentState=b}static newInvalidDocument(e){return new Ni(e,0,Hn.min(),Ci.empty(),0)}static newFoundDocument(e,i,u){return new Ni(e,1,i,u,0)}static newNoDocument(e,i){return new Ni(e,2,i,Ci.empty(),0)}static newUnknownDocument(e,i){return new Ni(e,3,i,Ci.empty(),2)}convertToFoundDocument(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Ni(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wh{constructor(e,i=null,u=[],g=[],b=null,x=null,B=null){this.path=e,this.collectionGroup=i,this.orderBy=u,this.filters=g,this.limit=b,this.startAt=x,this.endAt=B,this.A=null}}function vl(a,e=null,i=[],u=[],g=null,b=null,x=null){return new wh(a,e,i,u,g,b,x)}function Ru(a){const e=pn(a);if(null===e.A){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(u=>function(a){return a.field.canonicalString()+a.op.toString()+si(a.value)}(u)).join(","),i+="|ob:",i+=e.orderBy.map(u=>{return(g=u).field.canonicalString()+g.dir;var g}).join(","),Zn(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=An(e.startAt)),e.endAt&&(i+="|ub:",i+=An(e.endAt)),e.A=i}return e.A}function to(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let g=0;g<a.orderBy.length;g++)if(!fr(a.orderBy[g],e.orderBy[g]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let g=0;g<a.filters.length;g++)if((i=a.filters[g]).op!==(u=e.filters[g]).op||!i.field.isEqual(u.field)||!Ss(i.value,u.value))return!1;var i,u;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!no(a.startAt,e.startAt)&&no(a.endAt,e.endAt)}function Wa(a){return Tn.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}class qi extends class{}{constructor(e,i,u){super(),this.field=e,this.op=i,this.value=u}static create(e,i,u){return e.isKeyField()?"in"===i||"not-in"===i?this.R(e,i,u):new Pd(e,i,u):"array-contains"===i?new oe(e,u):"in"===i?new xe(e,u):"not-in"===i?new ft(e,u):"array-contains-any"===i?new Rt(e,u):new qi(e,i,u)}static R(e,i,u){return"in"===i?new Jc(e,u):new F(e,u)}matches(e){const i=e.data.field(this.field);return"!="===this.op?null!==i&&this.P(_s(i,this.value)):null!==i&&js(this.value)===js(i)&&this.P(_s(i,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Mn()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Pd extends qi{constructor(e,i,u){super(e,i,u),this.key=Tn.fromName(u.referenceValue)}matches(e){const i=Tn.comparator(e.key,this.key);return this.P(i)}}class Jc extends qi{constructor(e,i){super(e,"in",i),this.keys=H(0,i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class F extends qi{constructor(e,i){super(e,"not-in",i),this.keys=H(0,i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function H(a,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(u=>Tn.fromName(u.referenceValue))}class oe extends qi{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Rd(i)&&wa(i.arrayValue,this.value)}}class xe extends qi{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return null!==i&&wa(this.value.arrayValue,i)}}class ft extends qi{constructor(e,i){super(e,"not-in",i)}matches(e){if(wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return null!==i&&!wa(this.value.arrayValue,i)}}class Rt extends qi{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Rd(i)||!i.arrayValue.values)&&i.arrayValue.values.some(u=>wa(this.value.arrayValue,u))}}class Jt{constructor(e,i){this.position=e,this.before=i}}function An(a){return`${a.before?"b":"a"}:${a.position.map(e=>si(e)).join(",")}`}class hn{constructor(e,i="asc"){this.field=e,this.dir=i}}function fr(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}function zr(a,e,i){let u=0;for(let g=0;g<a.position.length;g++){const b=e[g],x=a.position[g];if(u=b.field.isKeyField()?Tn.comparator(Tn.fromName(x.referenceValue),i.key):_s(x,i.data.field(b.field)),"desc"===b.dir&&(u*=-1),0!==u)break}return a.before?u<=0:u<0}function no(a,e){if(null===a)return null===e;if(null===e||a.before!==e.before||a.position.length!==e.position.length)return!1;for(let i=0;i<a.position.length;i++)if(!Ss(a.position[i],e.position[i]))return!1;return!0}class As{constructor(e,i=null,u=[],g=[],b=null,x="F",B=null,ee=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=u,this.filters=g,this.limit=b,this.limitType=x,this.startAt=B,this.endAt=ee,this.V=null,this.S=null}}function Ds(a,e,i,u,g,b,x,B){return new As(a,e,i,u,g,b,x,B)}function To(a){return new As(a)}function au(a){return!Zn(a.limit)&&"F"===a.limitType}function za(a){return!Zn(a.limit)&&"L"===a.limitType}function Oo(a){return a.explicitOrderBy.length>0?a.explicitOrderBy[0].field:null}function Io(a){for(const e of a.filters)if(e.v())return e.field;return null}function Pu(a){return null!==a.collectionGroup}function Wi(a){const e=pn(a);if(null===e.V){e.V=[];const i=Io(e),u=Oo(e);if(null!==i&&null===u)i.isKeyField()||e.V.push(new hn(i)),e.V.push(new hn(P.keyField(),"asc"));else{let g=!1;for(const b of e.explicitOrderBy)e.V.push(b),b.field.isKeyField()&&(g=!0);if(!g){const b=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new hn(P.keyField(),b))}}}return e.V}function Ta(a){const e=pn(a);if(!e.S)if("F"===e.limitType)e.S=vl(e.path,e.collectionGroup,Wi(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const b of Wi(e))i.push(new hn(b.field,"desc"===b.dir?"asc":"desc"));const u=e.endAt?new Jt(e.endAt.position,!e.endAt.before):null,g=e.startAt?new Jt(e.startAt.position,!e.startAt.before):null;e.S=vl(e.path,e.collectionGroup,i,e.filters,e.limit,u,g)}return e.S}function Th(a,e,i){return new As(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,i,a.startAt,a.endAt)}function Ka(a,e){return to(Ta(a),Ta(e))&&a.limitType===e.limitType}function Ia(a){return`${Ru(Ta(a))}|lt:${a.limitType}`}function Xc(a){return`Query(target=${function(a){let e=a.path.canonicalString();return null!==a.collectionGroup&&(e+=" collectionGroup="+a.collectionGroup),a.filters.length>0&&(e+=`, filters: [${a.filters.map(i=>{return`${(u=i).field.canonicalString()} ${u.op} ${si(u.value)}`;var u}).join(", ")}]`),Zn(a.limit)||(e+=", limit: "+a.limit),a.orderBy.length>0&&(e+=`, orderBy: [${a.orderBy.map(i=>{return`${(u=i).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),a.startAt&&(e+=", startAt: "+An(a.startAt)),a.endAt&&(e+=", endAt: "+An(a.endAt)),`Target(${e})`}(Ta(a))}; limitType=${a.limitType})`}function Wu(a,e){return e.isFoundDocument()&&function(i,u){const g=u.key.path;return null!==i.collectionGroup?u.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(g):Tn.isDocumentKey(i.path)?i.path.isEqual(g):i.path.isImmediateParentOf(g)}(a,e)&&function(i,u){for(const g of i.explicitOrderBy)if(!g.field.isKeyField()&&null===u.data.field(g.field))return!1;return!0}(a,e)&&function(i,u){for(const g of i.filters)if(!g.matches(u))return!1;return!0}(a,e)&&(u=e,!((i=a).startAt&&!zr(i.startAt,Wi(i),u)||i.endAt&&zr(i.endAt,Wi(i),u)));var i,u}function Sa(a){return(e,i)=>{let u=!1;for(const g of Wi(a)){const b=Ih(g,e,i);if(0!==b)return b;u=u||g.field.isKeyField()}return 0}}function Ih(a,e,i){const u=a.field.isKeyField()?Tn.comparator(e.key,i.key):function(g,b,x){const B=b.data.field(g),ee=x.data.field(g);return null!==B&&null!==ee?_s(B,ee):Mn()}(a.field,e,i);switch(a.dir){case"asc":return u;case"desc":return-1*u;default:return Mn()}}function Nl(a,e){if(a.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jr(e)?"-0":e}}function Ml(a){return{integerValue:""+a}}function ed(a,e){return Ar(e)?Ml(e):Nl(a,e)}class El{constructor(){this._=void 0}}function wf(a,e,i){return a instanceof co?function(u,g){const b={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return g&&(b.fields.__previous_value__=g),{mapValue:b}}(i,e):a instanceof Ya?Cf(a,e):a instanceof zu?Ku(a,e):function(u,g){const b=Nd(u,g),x=Sh(b)+Sh(u.C);return yl(b)&&yl(u.C)?Ml(x):Nl(u.N,x)}(a,e)}function Od(a,e,i){return a instanceof Ya?Cf(a,e):a instanceof zu?Ku(a,e):i}function Nd(a,e){return a instanceof Qa?yl(i=e)||(u=i)&&"doubleValue"in u?e:{integerValue:0}:null;var u,i}class co extends El{}class Ya extends El{constructor(e){super(),this.elements=e}}function Cf(a,e){const i=Pp(e);for(const u of a.elements)i.some(g=>Ss(g,u))||i.push(u);return{arrayValue:{values:i}}}class zu extends El{constructor(e){super(),this.elements=e}}function Ku(a,e){let i=Pp(e);for(const u of a.elements)i=i.filter(g=>!Ss(g,u));return{arrayValue:{values:i}}}class Qa extends El{constructor(e,i){super(),this.N=e,this.C=i}}function Sh(a){return we(a.integerValue||a.doubleValue)}function Pp(a){return Rd(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Yu{constructor(e,i){this.field=e,this.transform=i}}class Jg{constructor(e,i){this.version=e,this.transformResults=i}}class Bi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function td(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class Qu{}function nd(a,e,i){a instanceof Ju?function(u,g,b){const x=u.value.clone(),B=Ah(u.fieldTransforms,g,b.transformResults);x.setAll(B),g.convertToFoundDocument(b.version,x).setHasCommittedMutations()}(a,e,i):a instanceof Ja?function(u,g,b){if(!td(u.precondition,g))return void g.convertToUnknownDocument(b.version);const x=Ah(u.fieldTransforms,g,b.transformResults),B=g.data;B.setAll(Ou(u)),B.setAll(x),g.convertToFoundDocument(b.version,B).setHasCommittedMutations()}(a,e,i):e.convertToNoDocument(i.version).setHasCommittedMutations()}function lu(a,e,i){var g;a instanceof Ju?function(u,g,b){if(!td(u.precondition,g))return;const x=u.value.clone(),B=Dh(u.fieldTransforms,b,g);x.setAll(B),g.convertToFoundDocument(kd(g),x).setHasLocalMutations()}(a,e,i):a instanceof Ja?function(u,g,b){if(!td(u.precondition,g))return;const x=Dh(u.fieldTransforms,b,g),B=g.data;B.setAll(Ou(u)),B.setAll(x),g.convertToFoundDocument(kd(g),B).setHasLocalMutations()}(a,e,i):td(a.precondition,g=e)&&g.convertToNoDocument(Hn.min())}function uu(a,e){let i=null;for(const u of a.fieldTransforms){const g=e.data.field(u.field),b=Nd(u.transform,g||null);null!=b&&(null==i&&(i=Ci.empty()),i.set(u.field,b))}return i||null}function wc(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(i=a.fieldTransforms)&&void 0===u||i&&u&&Ea(i,u,(g,b)=>function(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(i=a.transform)instanceof Ya&&u instanceof Ya||i instanceof zu&&u instanceof zu?Ea(i.elements,u.elements,Ss):i instanceof Qa&&u instanceof Qa?Ss(i.C,u.C):i instanceof co&&u instanceof co);var i,u}(g,b))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var i,u}function kd(a){return a.isFoundDocument()?a.version:Hn.min()}class Ju extends Qu{constructor(e,i,u,g=[]){super(),this.key=e,this.value=i,this.precondition=u,this.fieldTransforms=g,this.type=0}}class Ja extends Qu{constructor(e,i,u,g,b=[]){super(),this.key=e,this.data=i,this.fieldMask=u,this.precondition=g,this.fieldTransforms=b,this.type=1}}function Ou(a){const e=new Map;return a.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const u=a.data.field(i);e.set(i,u)}}),e}function Ah(a,e,i){const u=new Map;$n(a.length===i.length);for(let g=0;g<i.length;g++){const b=a[g],x=b.transform,B=e.data.field(b.field);u.set(b.field,Od(x,B,i[g]))}return u}function Dh(a,e,i){const u=new Map;for(const g of a){const b=g.transform,x=i.data.field(g.field);u.set(g.field,wf(b,x,e))}return u}class rd extends Qu{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}}class So extends Qu{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}}class xh{constructor(e){this.count=e}}var $s,Zr;function Tf(a){switch(a){default:return Mn();case St.CANCELLED:case St.UNKNOWN:case St.DEADLINE_EXCEEDED:case St.RESOURCE_EXHAUSTED:case St.INTERNAL:case St.UNAVAILABLE:case St.UNAUTHENTICATED:return!1;case St.INVALID_ARGUMENT:case St.NOT_FOUND:case St.ALREADY_EXISTS:case St.PERMISSION_DENIED:case St.FAILED_PRECONDITION:case St.ABORTED:case St.OUT_OF_RANGE:case St.UNIMPLEMENTED:case St.DATA_LOSS:return!0}}function Fd(a){if(void 0===a)return ui("GRPC error has no .code"),St.UNKNOWN;switch(a){case $s.OK:return St.OK;case $s.CANCELLED:return St.CANCELLED;case $s.UNKNOWN:return St.UNKNOWN;case $s.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case $s.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case $s.INTERNAL:return St.INTERNAL;case $s.UNAVAILABLE:return St.UNAVAILABLE;case $s.UNAUTHENTICATED:return St.UNAUTHENTICATED;case $s.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case $s.NOT_FOUND:return St.NOT_FOUND;case $s.ALREADY_EXISTS:return St.ALREADY_EXISTS;case $s.PERMISSION_DENIED:return St.PERMISSION_DENIED;case $s.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case $s.ABORTED:return St.ABORTED;case $s.OUT_OF_RANGE:return St.OUT_OF_RANGE;case $s.UNIMPLEMENTED:return St.UNIMPLEMENTED;case $s.DATA_LOSS:return St.DATA_LOSS;default:return Mn()}}(Zr=$s||($s={}))[Zr.OK=0]="OK",Zr[Zr.CANCELLED=1]="CANCELLED",Zr[Zr.UNKNOWN=2]="UNKNOWN",Zr[Zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zr[Zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zr[Zr.NOT_FOUND=5]="NOT_FOUND",Zr[Zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zr[Zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zr[Zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zr[Zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zr[Zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zr[Zr.ABORTED=10]="ABORTED",Zr[Zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zr[Zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zr[Zr.INTERNAL=13]="INTERNAL",Zr[Zr.UNAVAILABLE=14]="UNAVAILABLE",Zr[Zr.DATA_LOSS=15]="DATA_LOSS";class Mi{constructor(e,i){this.comparator=e,this.root=i||xs.EMPTY}insert(e,i){return new Mi(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,xs.BLACK,null,null))}remove(e){return new Mi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xs.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const u=this.comparator(e,i.key);if(0===u)return i.value;u<0?i=i.left:u>0&&(i=i.right)}return null}indexOf(e){let i=0,u=this.root;for(;!u.isEmpty();){const g=this.comparator(e,u.key);if(0===g)return i+u.left.size;g<0?u=u.left:(i+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,u)=>(e(i,u),!1))}toString(){const e=[];return this.inorderTraversal((i,u)=>(e.push(`${i}:${u}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bl(this.root,e,this.comparator,!0)}}class bl{constructor(e,i,u,g){this.isReverse=g,this.nodeStack=[];let b=1;for(;!e.isEmpty();)if(b=i?u(e.key,i):1,g&&(b*=-1),b<0)e=this.isReverse?e.left:e.right;else{if(0===b){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xs{constructor(e,i,u,g,b){this.key=e,this.value=i,this.color=null!=u?u:xs.RED,this.left=null!=g?g:xs.EMPTY,this.right=null!=b?b:xs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,u,g,b){return new xs(null!=e?e:this.key,null!=i?i:this.value,null!=u?u:this.color,null!=g?g:this.left,null!=b?b:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,u){let g=this;const b=u(e,g.key);return g=b<0?g.copy(null,null,null,g.left.insert(e,i,u),null):0===b?g.copy(null,i,null,null,null):g.copy(null,null,null,null,g.right.insert(e,i,u)),g.fixUp()}removeMin(){if(this.left.isEmpty())return xs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let u,g=this;if(i(e,g.key)<0)g.left.isEmpty()||g.left.isRed()||g.left.left.isRed()||(g=g.moveRedLeft()),g=g.copy(null,null,null,g.left.remove(e,i),null);else{if(g.left.isRed()&&(g=g.rotateRight()),g.right.isEmpty()||g.right.isRed()||g.right.left.isRed()||(g=g.moveRedRight()),0===i(e,g.key)){if(g.right.isEmpty())return xs.EMPTY;u=g.right.min(),g=g.copy(u.key,u.value,null,null,g.right.removeMin())}g=g.copy(null,null,null,null,g.right.remove(e,i))}return g.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mn();const e=this.left.check();if(e!==this.right.check())throw Mn();return e+(this.isRed()?0:1)}}xs.EMPTY=null,xs.RED=!0,xs.BLACK=!1,xs.EMPTY=new class{constructor(){this.size=0}get key(){throw Mn()}get value(){throw Mn()}get color(){throw Mn()}get left(){throw Mn()}get right(){throw Mn()}copy(a,e,i,u,g){return this}insert(a,e,i){return new xs(a,e)}remove(a,e){return this}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class os{constructor(e){this.comparator=e,this.data=new Mi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,u)=>(e(i),!1))}forEachInRange(e,i){const u=this.data.getIteratorFrom(e[0]);for(;u.hasNext();){const g=u.getNext();if(this.comparator(g.key,e[1])>=0)return;i(g.key)}}forEachWhile(e,i){let u;for(u=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new id(this.data.getIterator())}getIteratorFrom(e){return new id(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(u=>{i=i.add(u)}),i}isEqual(e){if(!(e instanceof os)||this.size!==e.size)return!1;const i=this.data.getIterator(),u=e.data.getIterator();for(;i.hasNext();){const g=i.getNext().key,b=u.getNext().key;if(0!==this.comparator(g,b))return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new os(this.comparator);return i.data=e,i}}class id{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const cu=new Mi(Tn.comparator);function la(){return cu}const If=new Mi(Tn.comparator);function Ld(){return If}const Ud=new Mi(Tn.comparator);function Rh(){return Ud}const Sf=new os(Tn.comparator);function Xr(...a){let e=Sf;for(const i of a)e=e.add(i);return e}const Af=new os(gr);function Vd(){return Af}class wl{constructor(e,i,u,g,b){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=u,this.documentUpdates=g,this.resolvedLimboDocuments=b}static createSynthesizedRemoteEventForCurrentChange(e,i){const u=new Map;return u.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,i)),new wl(Hn.min(),u,Vd(),la(),Xr())}}class Nu{constructor(e,i,u,g,b){this.resumeToken=e,this.current=i,this.addedDocuments=u,this.modifiedDocuments=g,this.removedDocuments=b}static createSynthesizedTargetChangeForCurrentChange(e,i){return new Nu(M.EMPTY_BYTE_STRING,i,Xr(),Xr(),Xr())}}class qo{constructor(e,i,u,g){this.k=e,this.removedTargetIds=i,this.key=u,this.$=g}}class du{constructor(e,i){this.targetId=e,this.O=i}}class Xu{constructor(e,i,u=M.EMPTY_BYTE_STRING,g=null){this.state=e,this.targetIds=i,this.resumeToken=u,this.cause=g}}class Ph{constructor(){this.F=0,this.M=Tc(),this.L=M.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Xr(),i=Xr(),u=Xr();return this.M.forEach((g,b)=>{switch(b){case 0:e=e.add(g);break;case 2:i=i.add(g);break;case 1:u=u.add(g);break;default:Mn()}}),new Nu(this.L,this.B,e,i,u)}G(){this.U=!1,this.M=Tc()}H(e,i){this.U=!0,this.M=this.M.insert(e,i)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Cc{constructor(e){this.tt=e,this.et=new Map,this.nt=la(),this.st=kl(),this.it=new os(gr)}rt(e){for(const i of e.k)e.$&&e.$.isFoundDocument()?this.ot(i,e.$):this.at(i,e.key,e.$);for(const i of e.removedTargetIds)this.at(i,e.key,e.$)}ct(e){this.forEachTarget(e,i=>{const u=this.ut(i);switch(e.state){case 0:this.ht(i)&&u.j(e.resumeToken);break;case 1:u.X(),u.q||u.G(),u.j(e.resumeToken);break;case 2:u.X(),u.q||this.removeTarget(i);break;case 3:this.ht(i)&&(u.Z(),u.j(e.resumeToken));break;case 4:this.ht(i)&&(this.lt(i),u.j(e.resumeToken));break;default:Mn()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.et.forEach((u,g)=>{this.ht(g)&&i(g)})}ft(e){const i=e.targetId,u=e.O.count,g=this.dt(i);if(g){const b=g.target;if(Wa(b))if(0===u){const x=new Tn(b.path);this.at(i,x,Ni.newNoDocument(x,Hn.min()))}else $n(1===u);else this.wt(i)!==u&&(this.lt(i),this.it=this.it.add(i))}}_t(e){const i=new Map;this.et.forEach((b,x)=>{const B=this.dt(x);if(B){if(b.current&&Wa(B.target)){const ee=new Tn(B.target.path);null!==this.nt.get(ee)||this.gt(x,ee)||this.at(x,ee,Ni.newNoDocument(ee,e))}b.K&&(i.set(x,b.W()),b.G())}});let u=Xr();this.st.forEach((b,x)=>{let B=!0;x.forEachWhile(ee=>{const ve=this.dt(ee);return!ve||2===ve.purpose||(B=!1,!1)}),B&&(u=u.add(b))});const g=new wl(e,i,this.it,this.nt,u);return this.nt=la(),this.st=kl(),this.it=new os(gr),g}ot(e,i){if(!this.ht(e))return;const u=this.gt(e,i.key)?2:0;this.ut(e).H(i.key,u),this.nt=this.nt.insert(i.key,i),this.st=this.st.insert(i.key,this.yt(i.key).add(e))}at(e,i,u){if(!this.ht(e))return;const g=this.ut(e);this.gt(e,i)?g.H(i,1):g.J(i),this.st=this.st.insert(i,this.yt(i).delete(e)),u&&(this.nt=this.nt.insert(i,u))}removeTarget(e){this.et.delete(e)}wt(e){const i=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let i=this.et.get(e);return i||(i=new Ph,this.et.set(e,i)),i}yt(e){let i=this.st.get(e);return i||(i=new os(gr),this.st=this.st.insert(e,i)),i}ht(e){const i=null!==this.dt(e);return i||un("WatchChangeAggregator","Detected inactive target",e),i}dt(e){const i=this.et.get(e);return i&&i.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Ph),this.tt.getRemoteKeysForTarget(e).forEach(i=>{this.at(e,i,null)})}gt(e,i){return this.tt.getRemoteKeysForTarget(e).has(i)}}function kl(){return new Mi(Tn.comparator)}function Tc(){return new Mi(Tn.comparator)}const Xg={asc:"ASCENDING",desc:"DESCENDING"},Bd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sd{constructor(e,i){this.databaseId=e,this.D=i}}function Cl(a,e){return a.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mu(a,e){return a.D?e.toBase64():e.toUint8Array()}function em(a,e){return Cl(a,e.toTimestamp())}function yi(a){return $n(!!a),Hn.fromTimestamp(function(e){const i=se(e);return new hr(i.seconds,i.nanos)}(a))}function jd(a,e){return(i=a,new br(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function Df(a){const e=br.fromString(a);return $n(Ll(e)),e}function ku(a,e){return jd(a.databaseId,e.path)}function Xa(a,e){const i=Df(e);if(i.get(1)!==a.databaseId.projectId)throw new zt(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+a.databaseId.projectId);if(i.get(3)!==a.databaseId.database)throw new zt(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+a.databaseId.database);return new Tn(Ic(i))}function No(a,e){return jd(a.databaseId,e)}function Fu(a){const e=Df(a);return 4===e.length?br.emptyPath():Ic(e)}function Lu(a){return new br(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ic(a){return $n(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function xf(a,e,i){return{name:ku(a,e),fields:i.value.mapValue.fields}}function Ji(a,e,i){const u=Xa(a,e.name),g=yi(e.updateTime),b=new Ci({mapValue:{fields:e.fields}}),x=Ni.newFoundDocument(u,g,b);return i&&x.setHasCommittedMutations(),i?x.setHasCommittedMutations():x}function Tl(a,e){let i;if(e instanceof Ju)i={update:xf(a,e.key,e.value)};else if(e instanceof rd)i={delete:ku(a,e.key)};else if(e instanceof Ja)i={update:xf(a,e.key,e.data),updateMask:Wd(e.fieldMask)};else{if(!(e instanceof So))return Mn();i={verify:ku(a,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(u=>function(g,b){const x=b.transform;if(x instanceof co)return{fieldPath:b.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof Ya)return{fieldPath:b.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof zu)return{fieldPath:b.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof Qa)return{fieldPath:b.field.canonicalString(),increment:x.C};throw Mn()}(0,u))),e.precondition.isNone||(i.currentDocument=void 0!==(g=e.precondition).updateTime?{updateTime:em(a,g.updateTime)}:void 0!==g.exists?{exists:g.exists}:Mn()),i;var g}function $d(a,e){const i=e.currentDocument?void 0!==(g=e.currentDocument).updateTime?Bi.updateTime(yi(g.updateTime)):void 0!==g.exists?Bi.exists(g.exists):Bi.none():Bi.none(),u=e.updateTransforms?e.updateTransforms.map(g=>function(b,x){let B=null;"setToServerValue"in x?($n("REQUEST_TIME"===x.setToServerValue),B=new co):"appendMissingElements"in x?B=new Ya(x.appendMissingElements.values||[]):"removeAllFromArray"in x?B=new zu(x.removeAllFromArray.values||[]):"increment"in x?B=new Qa(b,x.increment):Mn();const ee=P.fromServerFormat(x.fieldPath);return new Yu(ee,B)}(a,g)):[];var g;if(e.update){const g=Xa(a,e.update.name),b=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const x=new S((e.updateMask.fieldPaths||[]).map(ve=>P.fromServerFormat(ve)));return new Ja(g,b,x,i,u)}return new Ju(g,b,i,u)}if(e.delete){const g=Xa(a,e.delete);return new rd(g,i)}if(e.verify){const g=Xa(a,e.verify);return new So(g,i)}return Mn()}function Zd(a,e){return{documents:[No(a,e.path)]}}function Gd(a,e){const i={structuredQuery:{}},u=e.path;null!==e.collectionGroup?(i.parent=No(a,u),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=No(a,u.popLast()),i.structuredQuery.from=[{collectionId:u.lastSegment()}]);const g=function(B){if(0===B.length)return;const ee=B.map(ve=>function(Fe){if("=="===Fe.op){if(Ca(Fe.value))return{unaryFilter:{field:Uu(Fe.field),op:"IS_NAN"}};if(uo(Fe.value))return{unaryFilter:{field:Uu(Fe.field),op:"IS_NULL"}}}else if("!="===Fe.op){if(Ca(Fe.value))return{unaryFilter:{field:Uu(Fe.field),op:"IS_NOT_NAN"}};if(uo(Fe.value))return{unaryFilter:{field:Uu(Fe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(Fe.field),op:qd(Fe.op),value:Fe.value}}}(ve));return 1===ee.length?ee[0]:{compositeFilter:{op:"AND",filters:ee}}}(e.filters);g&&(i.structuredQuery.where=g);const b=function(B){if(0!==B.length)return B.map(ee=>{return{field:Uu((ve=ee).field),direction:Wo(ve.dir)};var ve})}(e.orderBy);b&&(i.structuredQuery.orderBy=b);const x=(ee=e.limit,a.D||Zn(ee)?ee:{value:ee});var ee;return null!==x&&(i.structuredQuery.limit=x),e.startAt&&(i.structuredQuery.startAt=Rf(e.startAt)),e.endAt&&(i.structuredQuery.endAt=Rf(e.endAt)),i}function Ac(a){let e=Fu(a.parent);const i=a.structuredQuery,u=i.from?i.from.length:0;let g=null;if(u>0){$n(1===u);const Fe=i.from[0];Fe.allDescendants?g=Fe.collectionId:e=e.child(Fe.collectionId)}let b=[];i.where&&(b=Fl(i.where));let x=[];i.orderBy&&(x=i.orderBy.map(Fe=>{return new hn(Hs((ut=Fe).field),function(Ut){switch(Ut){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ut.direction));var ut}));let B=null;i.limit&&(B=function(Fe){let ut;return ut="object"==typeof Fe?Fe.value:Fe,Zn(ut)?null:ut}(i.limit));let ee=null;i.startAt&&(ee=Dc(i.startAt));let ve=null;return i.endAt&&(ve=Dc(i.endAt)),Ds(e,g,x,b,B,"F",ee,ve)}function Fl(a){return a?void 0!==a.unaryFilter?[hu(a)]:void 0!==a.fieldFilter?[ho(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(e=>Fl(e)).reduce((e,i)=>e.concat(i)):Mn():[]}function Rf(a){return{before:a.before,values:a.position}}function Dc(a){return new Jt(a.values||[],!!a.before)}function Wo(a){return Xg[a]}function qd(a){return Bd[a]}function Uu(a){return{fieldPath:a.canonicalString()}}function Hs(a){return P.fromServerFormat(a.fieldPath)}function ho(a){return qi.create(Hs(a.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mn()}}(a.fieldFilter.op),a.fieldFilter.value)}function hu(a){switch(a.unaryFilter.op){case"IS_NAN":const e=Hs(a.unaryFilter.field);return qi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=Hs(a.unaryFilter.field);return qi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Hs(a.unaryFilter.field);return qi.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Hs(a.unaryFilter.field);return qi.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Mn()}}function Wd(a){const e=[];return a.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function Ll(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}function Zs(a){let e="";for(let i=0;i<a.length;i++)e.length>0&&(e=Oh(e)),e=Ul(a.get(i),e);return Oh(e)}function Ul(a,e){let i=e;const u=a.length;for(let g=0;g<u;g++){const b=a.charAt(g);switch(b){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=b}}return i}function Oh(a){return a+"\x01\x01"}function ca(a){const e=a.length;if($n(e>=2),2===e)return $n("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),br.emptyPath();const i=e-2,u=[];let g="";for(let b=0;b<e;){const x=a.indexOf("\x01",b);switch((x<0||x>i)&&Mn(),a.charAt(x+1)){case"\x01":const B=a.substring(b,x);let ee;0===g.length?ee=B:(g+=B,ee=g,g=""),u.push(ee);break;case"\x10":g+=a.substring(b,x),g+="\0";break;case"\x11":g+=a.substring(b,x+1);break;default:Mn()}b=x+2}return new br(u)}class zd{constructor(e,i){this.seconds=e,this.nanoseconds=i}}class da{constructor(e,i,u){this.ownerId=e,this.allowTabSynchronization=i,this.leaseTimestampMs=u}}da.store="owner",da.key="owner";class Aa{constructor(e,i,u){this.userId=e,this.lastAcknowledgedBatchId=i,this.lastStreamToken=u}}Aa.store="mutationQueues",Aa.keyPath="userId";class Xi{constructor(e,i,u,g,b){this.userId=e,this.batchId=i,this.localWriteTimeMs=u,this.baseMutations=g,this.mutations=b}}Xi.store="mutations",Xi.keyPath="batchId",Xi.userMutationsIndex="userMutationsIndex",Xi.userMutationsKeyPath=["userId","batchId"];class I{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,i){return[e,Zs(i)]}static key(e,i,u){return[e,Zs(i),u]}}I.store="documentMutations",I.PLACEHOLDER=new I;class m{constructor(e,i){this.path=e,this.readTime=i}}class y{constructor(e,i){this.path=e,this.version=i}}class A{constructor(e,i,u,g,b,x){this.unknownDocument=e,this.noDocument=i,this.document=u,this.hasCommittedMutations=g,this.readTime=b,this.parentPath=x}}A.store="remoteDocuments",A.readTimeIndex="readTimeIndex",A.readTimeIndexPath="readTime",A.collectionReadTimeIndex="collectionReadTimeIndex",A.collectionReadTimeIndexPath=["parentPath","readTime"];class W{constructor(e){this.byteSize=e}}W.store="remoteDocumentGlobal",W.key="remoteDocumentGlobalKey";class he{constructor(e,i,u,g,b,x,B){this.targetId=e,this.canonicalId=i,this.readTime=u,this.resumeToken=g,this.lastListenSequenceNumber=b,this.lastLimboFreeSnapshotVersion=x,this.query=B}}he.store="targets",he.keyPath="targetId",he.queryTargetsIndexName="queryTargetsIndex",he.queryTargetsKeyPath=["canonicalId","targetId"];class ot{constructor(e,i,u){this.targetId=e,this.path=i,this.sequenceNumber=u}}ot.store="targetDocuments",ot.keyPath=["targetId","path"],ot.documentTargetsIndex="documentTargetsIndex",ot.documentTargetsKeyPath=["path","targetId"];class Ot{constructor(e,i,u,g){this.highestTargetId=e,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=u,this.targetCount=g}}Ot.key="targetGlobalKey",Ot.store="targetGlobal";class _n{constructor(e,i){this.collectionId=e,this.parent=i}}_n.store="collectionParents",_n.keyPath=["collectionId","parent"];class kn{constructor(e,i,u,g){this.clientId=e,this.updateTimeMs=i,this.networkEnabled=u,this.inForeground=g}}kn.store="clientMetadata",kn.keyPath="clientId";class Kn{constructor(e,i,u){this.bundleId=e,this.createTime=i,this.version=u}}Kn.store="bundles",Kn.keyPath="bundleId";class Qn{constructor(e,i,u){this.name=e,this.readTime=i,this.bundledQuery=u}}Qn.store="namedQueries",Qn.keyPath="name";const Gs=[Aa.store,Xi.store,I.store,A.store,he.store,da.store,Ot.store,ot.store,kn.store,W.store,_n.store,Kn.store,Qn.store],Da="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class tn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Mn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new tn((u,g)=>{this.nextCallback=b=>{this.wrapSuccess(e,b).next(u,g)},this.catchCallback=b=>{this.wrapFailure(i,b).next(u,g)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof tn?i:tn.resolve(i)}catch(i){return tn.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):tn.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):tn.reject(i)}static resolve(e){return new tn((i,u)=>{i(e)})}static reject(e){return new tn((i,u)=>{u(e)})}static waitFor(e){return new tn((i,u)=>{let g=0,b=0,x=!1;e.forEach(B=>{++g,B.next(()=>{++b,x&&b===g&&i()},ee=>u(ee))}),x=!0,b===g&&i()})}static or(e){let i=tn.resolve(!1);for(const u of e)i=i.next(g=>g?tn.resolve(g):u());return i}static forEach(e,i){const u=[];return e.forEach((g,b)=>{u.push(i.call(this,g,b))}),this.waitFor(u)}}class Mo{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.Et=new _i,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{i.error?this.Et.reject(new xa(e,i.error)):this.Et.resolve()},this.transaction.onerror=u=>{const g=Mh(u.target.error);this.Et.reject(new xa(e,g))}}static open(e,i,u,g){try{return new Mo(i,e.transaction(g,u))}catch(b){throw new xa(i,b)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(un("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const i=this.transaction.objectStore(e);return new Kd(i)}}class zi{constructor(e,i,u){this.name=e,this.version=i,this.At=u,12.2===zi.Rt((0,ce.z$)())&&ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return un("SimpleDb","Removing database:",e),fa(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,ce.hl)())return!1;if(zi.Pt())return!0;const e=(0,ce.z$)(),i=zi.Rt(e),u=0<i&&i<10,g=zi.vt(e),b=0<g&&g<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||u||b)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,i){return e.store(i)}static Rt(e){const i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(u)}static vt(e){const i=e.match(/Android ([\d.]+)/i),u=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(u)}Dt(e){var i=this;return(0,ye.Z)(function*(){return i.db||(un("SimpleDb","Opening database:",i.name),i.db=yield new Promise((u,g)=>{const b=indexedDB.open(i.name,i.version);b.onsuccess=x=>{u(x.target.result)},b.onblocked=()=>{g(new xa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},b.onerror=x=>{const B=x.target.error;g("VersionError"===B.name?new zt(St.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===B.name?new zt(St.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+B):new xa(e,B))},b.onupgradeneeded=x=>{un("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',x.oldVersion),i.At.Ct(x.target.result,b.transaction,x.oldVersion,i.version).next(()=>{un("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.Nt&&(i.db.onversionchange=u=>i.Nt(u)),i.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,u,g){var b=this;return(0,ye.Z)(function*(){const x="readonly"===i;let B=0;for(;;){++B;try{b.db=yield b.Dt(e);const ee=Mo.open(b.db,e,x?"readonly":"readwrite",u),ve=g(ee).catch(Fe=>(ee.abort(Fe),tn.reject(Fe))).toPromise();return ve.catch(()=>{}),yield ee.It,ve}catch(ee){const ve="FirebaseError"!==ee.name&&B<3;if(un("SimpleDb","Transaction failed with error:",ee.message,"Retrying:",ve),b.close(),!ve)return Promise.reject(ee)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ha{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return fa(this.kt.delete())}}class xa extends zt{constructor(e,i){super(St.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function fu(a){return"IndexedDbTransactionError"===a.name}class Kd{constructor(e){this.store=e}put(e,i){let u;return void 0!==i?(un("SimpleDb","PUT",this.store.name,e,i),u=this.store.put(i,e)):(un("SimpleDb","PUT",this.store.name,"<auto-key>",e),u=this.store.put(e)),fa(u)}add(e){return un("SimpleDb","ADD",this.store.name,e,e),fa(this.store.add(e))}get(e){return fa(this.store.get(e)).next(i=>(void 0===i&&(i=null),un("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return un("SimpleDb","DELETE",this.store.name,e),fa(this.store.delete(e))}count(){return un("SimpleDb","COUNT",this.store.name),fa(this.store.count())}Lt(e,i){const u=this.cursor(this.options(e,i)),g=[];return this.Bt(u,(b,x)=>{g.push(x)}).next(()=>g)}Ut(e,i){un("SimpleDb","DELETE ALL",this.store.name);const u=this.options(e,i);u.qt=!1;const g=this.cursor(u);return this.Bt(g,(b,x,B)=>B.delete())}Kt(e,i){let u;i?u=e:(u={},i=e);const g=this.cursor(u);return this.Bt(g,i)}jt(e){const i=this.cursor({});return new tn((u,g)=>{i.onerror=b=>{const x=Mh(b.target.error);g(x)},i.onsuccess=b=>{const x=b.target.result;x?e(x.primaryKey,x.value).next(B=>{B?x.continue():u()}):u()}})}Bt(e,i){const u=[];return new tn((g,b)=>{e.onerror=x=>{b(x.target.error)},e.onsuccess=x=>{const B=x.target.result;if(!B)return void g();const ee=new ha(B),ve=i(B.primaryKey,B.value,ee);if(ve instanceof tn){const Fe=ve.catch(ut=>(ee.done(),tn.reject(ut)));u.push(Fe)}ee.isDone?g():null===ee.Ft?B.continue():B.continue(ee.Ft)}}).next(()=>tn.waitFor(u))}options(e,i){let u;return void 0!==e&&("string"==typeof e?u=e:i=e),{index:u,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){const u=this.store.index(e.index);return e.qt?u.openKeyCursor(e.range,i):u.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}function fa(a){return new tn((e,i)=>{a.onsuccess=u=>{e(u.target.result)},a.onerror=u=>{const g=Mh(u.target.error);i(g)}})}let Nh=!1;function Mh(a){const e=zi.Rt((0,ce.z$)());if(e>=12.2&&e<13){const i="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(i)>=0){const u=new zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nh||(Nh=!0,setTimeout(()=>{throw u},0)),u}}return a}class od extends fo{constructor(e,i){super(),this.Qt=e,this.currentSequenceNumber=i}}function ko(a,e){const i=pn(a);return zi.St(i.Qt,e)}class xc{constructor(e,i,u,g){this.batchId=e,this.localWriteTime=i,this.baseMutations=u,this.mutations=g}applyToRemoteDocument(e,i){const u=i.mutationResults;for(let g=0;g<this.mutations.length;g++){const b=this.mutations[g];b.key.isEqual(e.key)&&nd(b,e,u[g])}}applyToLocalView(e){for(const i of this.baseMutations)i.key.isEqual(e.key)&&lu(i,e,this.localWriteTime);for(const i of this.mutations)i.key.isEqual(e.key)&&lu(i,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(i=>{const u=e.get(i.key),g=u;this.applyToLocalView(g),u.isValidDocument()||g.convertToNoDocument(Hn.min())})}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Xr())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(i,u)=>wc(i,u))&&Ea(this.baseMutations,e.baseMutations,(i,u)=>wc(i,u))}}class Vl{constructor(e,i,u,g){this.batch=e,this.commitVersion=i,this.mutationResults=u,this.docVersions=g}static from(e,i,u){$n(e.mutations.length===u.length);let g=Rh();const b=e.mutations;for(let x=0;x<b.length;x++)g=g.insert(b[x].key,u[x].version);return new Vl(e,i,u,g)}}class ad{constructor(e,i,u,g,b=Hn.min(),x=Hn.min(),B=M.EMPTY_BYTE_STRING){this.target=e,this.targetId=i,this.purpose=u,this.sequenceNumber=g,this.snapshotVersion=b,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=B}withSequenceNumber(e){return new ad(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,i){return new ad(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ad(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class l_{constructor(e){this.Wt=e}}function ld(a,e){if(e.document)return Ji(a.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const i=Tn.fromSegments(e.noDocument.path),u=ud(e.noDocument.readTime),g=Ni.newNoDocument(i,u);return e.hasCommittedMutations?g.setHasCommittedMutations():g}if(e.unknownDocument){const i=Tn.fromSegments(e.unknownDocument.path),u=ud(e.unknownDocument.version);return Ni.newUnknownDocument(i,u)}return Mn()}function Pf(a,e,i){const u=pa(i),g=e.key.path.popLast().toArray();if(e.isFoundDocument()){const b={name:ku(B=a.Wt,(ee=e).key),fields:ee.data.value.mapValue.fields,updateTime:Cl(B,ee.version.toTimestamp())};return new A(null,null,b,e.hasCommittedMutations,u,g)}var B,ee;if(e.isNoDocument()){const b=e.key.path.toArray(),x=ec(e.version),B=e.hasCommittedMutations;return new A(null,new m(b,x),null,B,u,g)}if(e.isUnknownDocument()){const b=e.key.path.toArray(),x=ec(e.version);return new A(new y(b,x),null,null,!0,u,g)}return Mn()}function pa(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function Yd(a){const e=new hr(a[0],a[1]);return Hn.fromTimestamp(e)}function ec(a){const e=a.toTimestamp();return new zd(e.seconds,e.nanoseconds)}function ud(a){const e=new hr(a.seconds,a.nanoseconds);return Hn.fromTimestamp(e)}function Rc(a,e){const i=(e.baseMutations||[]).map(b=>$d(a.Wt,b));for(let b=0;b<e.mutations.length-1;++b){const x=e.mutations[b];b+1<e.mutations.length&&void 0!==e.mutations[b+1].transform&&(x.updateTransforms=e.mutations[b+1].transform.fieldTransforms,e.mutations.splice(b+1,1),++b)}const u=e.mutations.map(b=>$d(a.Wt,b)),g=hr.fromMillis(e.localWriteTimeMs);return new xc(e.batchId,g,i,u)}function Vu(a){const e=ud(a.readTime),i=void 0!==a.lastLimboFreeSnapshotVersion?ud(a.lastLimboFreeSnapshotVersion):Hn.min();let u;var g;return void 0!==a.query.documents?($n(1===(g=a.query).documents.length),u=Ta(To(Fu(g.documents[0])))):u=Ta(Ac(a.query)),new ad(u,a.targetId,0,a.lastListenSequenceNumber,e,i,M.fromBase64String(a.resumeToken))}function Of(a,e){const i=ec(e.snapshotVersion),u=ec(e.lastLimboFreeSnapshotVersion);let g;g=Wa(e.target)?Zd(a.Wt,e.target):Gd(a.Wt,e.target);const b=e.resumeToken.toBase64();return new he(e.targetId,Ru(e.target),i,b,e.sequenceNumber,u,g)}function el(a){const e=Ac({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Th(e,e.limit,"L"):e}class Nf{getBundleMetadata(e,i){return Mf(e).get(i).next(u=>{if(u)return{id:(g=u).bundleId,createTime:ud(g.createTime),version:g.version};var g})}saveBundleMetadata(e,i){return Mf(e).put({bundleId:(u=i).id,createTime:ec(yi(u.createTime)),version:u.version});var u}getNamedQuery(e,i){return Np(e).get(i).next(u=>{if(u)return{name:(g=u).name,query:el(g.bundledQuery),readTime:ud(g.readTime)};var g})}saveNamedQuery(e,i){return Np(e).put({name:(u=i).name,readTime:ec(yi(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Mf(a){return ko(a,Kn.store)}function Np(a){return ko(a,Qn.store)}class Ey{constructor(){this.Gt=new tc}addToCollectionParentIndex(e,i){return this.Gt.add(i),tn.resolve()}getCollectionParents(e,i){return tn.resolve(this.Gt.getEntries(i))}}class tc{constructor(){this.index={}}add(e){const i=e.lastSegment(),u=e.popLast(),g=this.index[i]||new os(br.comparator),b=!g.has(u);return this.index[i]=g.add(u),b}has(e){const i=e.lastSegment(),u=e.popLast(),g=this.index[i];return g&&g.has(u)}getEntries(e){return(this.index[e]||new os(br.comparator)).toArray()}}class Mp{constructor(){this.zt=new tc}addToCollectionParentIndex(e,i){if(!this.zt.has(i)){const u=i.lastSegment(),g=i.popLast();e.addOnCommittedListener(()=>{this.zt.add(i)});const b={collectionId:u,parent:Zs(g)};return kp(e).put(b)}return tn.resolve()}getCollectionParents(e,i){const u=[],g=IDBKeyRange.bound([i,""],[gl(i),""],!1,!0);return kp(e).Lt(g).next(b=>{for(const x of b){if(x.collectionId!==i)break;u.push(ca(x.parent))}return u})}}function kp(a){return ko(a,_n.store)}const tm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ga{constructor(e,i,u){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=u}static withCacheSize(e){return new ga(e,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nm(a,e,i){const u=a.store(Xi.store),g=a.store(I.store),b=[],x=IDBKeyRange.only(i.batchId);let B=0;const ee=u.Kt({range:x},(Fe,ut,Ut)=>(B++,Ut.delete()));b.push(ee.next(()=>{$n(1===B)}));const ve=[];for(const Fe of i.mutations){const ut=I.key(e,Fe.key.path,i.batchId);b.push(g.delete(ut)),ve.push(Fe.key)}return tn.waitFor(b).next(()=>ve)}function kf(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw Mn();e=a.noDocument}return JSON.stringify(e).length}ga.DEFAULT_COLLECTION_PERCENTILE=10,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ga.DEFAULT=new ga(41943040,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ga.DISABLED=new ga(-1,0,0);class Fp{constructor(e,i,u,g){this.userId=e,this.N=i,this.Ht=u,this.referenceDelegate=g,this.Jt={}}static Yt(e,i,u,g){$n(""!==e.uid);const b=e.isAuthenticated()?e.uid:"";return new Fp(b,i,u,g)}checkEmpty(e){let i=!0;const u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pc(e).Kt({index:Xi.userMutationsIndex,range:u},(g,b,x)=>{i=!1,x.done()}).next(()=>i)}addMutationBatch(e,i,u,g){const b=Qd(e),x=Pc(e);return x.add({}).next(B=>{$n("number"==typeof B);const ee=new xc(B,i,u,g),ve=function(Ut,Xt,wn){const er=wn.baseMutations.map(io=>Tl(Ut.Wt,io)),kr=wn.mutations.map(io=>Tl(Ut.Wt,io));return new Xi(Xt,wn.batchId,wn.localWriteTime.toMillis(),er,kr)}(this.N,this.userId,ee),Fe=[];let ut=new os((Ut,Xt)=>gr(Ut.canonicalString(),Xt.canonicalString()));for(const Ut of g){const Xt=I.key(this.userId,Ut.key.path,B);ut=ut.add(Ut.key.path.popLast()),Fe.push(x.put(ve)),Fe.push(b.put(Xt,I.PLACEHOLDER))}return ut.forEach(Ut=>{Fe.push(this.Ht.addToCollectionParentIndex(e,Ut))}),e.addOnCommittedListener(()=>{this.Jt[B]=ee.keys()}),tn.waitFor(Fe).next(()=>ee)})}lookupMutationBatch(e,i){return Pc(e).get(i).next(u=>u?($n(u.userId===this.userId),Rc(this.N,u)):null)}Xt(e,i){return this.Jt[i]?tn.resolve(this.Jt[i]):this.lookupMutationBatch(e,i).next(u=>{if(u){const g=u.keys();return this.Jt[i]=g,g}return null})}getNextMutationBatchAfterBatchId(e,i){const u=i+1,g=IDBKeyRange.lowerBound([this.userId,u]);let b=null;return Pc(e).Kt({index:Xi.userMutationsIndex,range:g},(x,B,ee)=>{B.userId===this.userId&&($n(B.batchId>=u),b=Rc(this.N,B)),ee.done()}).next(()=>b)}getHighestUnacknowledgedBatchId(e){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let u=-1;return Pc(e).Kt({index:Xi.userMutationsIndex,range:i,reverse:!0},(g,b,x)=>{u=b.batchId,x.done()}).next(()=>u)}getAllMutationBatches(e){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pc(e).Lt(Xi.userMutationsIndex,i).next(u=>u.map(g=>Rc(this.N,g)))}getAllMutationBatchesAffectingDocumentKey(e,i){const u=I.prefixForPath(this.userId,i.path),g=IDBKeyRange.lowerBound(u),b=[];return Qd(e).Kt({range:g},(x,B,ee)=>{const[ve,Fe,ut]=x,Ut=ca(Fe);if(ve===this.userId&&i.path.isEqual(Ut))return Pc(e).get(ut).next(Xt=>{if(!Xt)throw Mn();$n(Xt.userId===this.userId),b.push(Rc(this.N,Xt))});ee.done()}).next(()=>b)}getAllMutationBatchesAffectingDocumentKeys(e,i){let u=new os(gr);const g=[];return i.forEach(b=>{const x=I.prefixForPath(this.userId,b.path),B=IDBKeyRange.lowerBound(x),ee=Qd(e).Kt({range:B},(ve,Fe,ut)=>{const[Ut,Xt,wn]=ve,er=ca(Xt);Ut===this.userId&&b.path.isEqual(er)?u=u.add(wn):ut.done()});g.push(ee)}),tn.waitFor(g).next(()=>this.Zt(e,u))}getAllMutationBatchesAffectingQuery(e,i){const u=i.path,g=u.length+1,b=I.prefixForPath(this.userId,u),x=IDBKeyRange.lowerBound(b);let B=new os(gr);return Qd(e).Kt({range:x},(ee,ve,Fe)=>{const[ut,Ut,Xt]=ee,wn=ca(Ut);ut===this.userId&&u.isPrefixOf(wn)?wn.length===g&&(B=B.add(Xt)):Fe.done()}).next(()=>this.Zt(e,B))}Zt(e,i){const u=[],g=[];return i.forEach(b=>{g.push(Pc(e).get(b).next(x=>{if(null===x)throw Mn();$n(x.userId===this.userId),u.push(Rc(this.N,x))}))}),tn.waitFor(g).next(()=>u)}removeMutationBatch(e,i){return nm(e.Qt,this.userId,i).next(u=>(e.addOnCommittedListener(()=>{this.te(i.batchId)}),tn.forEach(u,g=>this.referenceDelegate.markPotentiallyOrphaned(e,g))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return tn.resolve();const u=IDBKeyRange.lowerBound(I.prefixForUser(this.userId)),g=[];return Qd(e).Kt({range:u},(b,x,B)=>{if(b[0]===this.userId){const ee=ca(b[1]);g.push(ee)}else B.done()}).next(()=>{$n(0===g.length)})})}containsKey(e,i){return rm(e,this.userId,i)}ee(e){return Lp(e).get(this.userId).next(i=>i||new Aa(this.userId,-1,""))}}function rm(a,e,i){const u=I.prefixForPath(e,i.path),g=u[1],b=IDBKeyRange.lowerBound(u);let x=!1;return Qd(a).Kt({range:b,qt:!0},(B,ee,ve)=>{const[Fe,ut,Ut]=B;Fe===e&&ut===g&&(x=!0),ve.done()}).next(()=>x)}function Pc(a){return ko(a,Xi.store)}function Qd(a){return ko(a,I.store)}function Lp(a){return ko(a,Aa.store)}class nc{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new nc(0)}static ie(){return new nc(-1)}}class im{constructor(e,i){this.referenceDelegate=e,this.N=i}allocateTargetId(e){return this.re(e).next(i=>{const u=new nc(i.highestTargetId);return i.highestTargetId=u.next(),this.oe(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(i=>Hn.fromTimestamp(new hr(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,u){return this.re(e).next(g=>(g.highestListenSequenceNumber=i,u&&(g.lastRemoteSnapshotVersion=u.toTimestamp()),i>g.highestListenSequenceNumber&&(g.highestListenSequenceNumber=i),this.oe(e,g)))}addTargetData(e,i){return this.ae(e,i).next(()=>this.re(e).next(u=>(u.targetCount+=1,this.ce(i,u),this.oe(e,u))))}updateTargetData(e,i){return this.ae(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>Oc(e).delete(i.targetId)).next(()=>this.re(e)).next(u=>($n(u.targetCount>0),u.targetCount-=1,this.oe(e,u)))}removeTargets(e,i,u){let g=0;const b=[];return Oc(e).Kt((x,B)=>{const ee=Vu(B);ee.sequenceNumber<=i&&null===u.get(ee.targetId)&&(g++,b.push(this.removeTargetData(e,ee)))}).next(()=>tn.waitFor(b)).next(()=>g)}forEachTarget(e,i){return Oc(e).Kt((u,g)=>{const b=Vu(g);i(b)})}re(e){return sm(e).get(Ot.key).next(i=>($n(null!==i),i))}oe(e,i){return sm(e).put(Ot.key,i)}ae(e,i){return Oc(e).put(Of(this.N,i))}ce(e,i){let u=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,u=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,u=!0),u}getTargetCount(e){return this.re(e).next(i=>i.targetCount)}getTargetData(e,i){const u=Ru(i),g=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]);let b=null;return Oc(e).Kt({range:g,index:he.queryTargetsIndexName},(x,B,ee)=>{const ve=Vu(B);to(i,ve.target)&&(b=ve,ee.done())}).next(()=>b)}addMatchingKeys(e,i,u){const g=[],b=Nc(e);return i.forEach(x=>{const B=Zs(x.path);g.push(b.put(new ot(u,B))),g.push(this.referenceDelegate.addReference(e,u,x))}),tn.waitFor(g)}removeMatchingKeys(e,i,u){const g=Nc(e);return tn.forEach(i,b=>{const x=Zs(b.path);return tn.waitFor([g.delete([u,x]),this.referenceDelegate.removeReference(e,u,b)])})}removeMatchingKeysForTargetId(e,i){const u=Nc(e),g=IDBKeyRange.bound([i],[i+1],!1,!0);return u.delete(g)}getMatchingKeysForTargetId(e,i){const u=IDBKeyRange.bound([i],[i+1],!1,!0),g=Nc(e);let b=Xr();return g.Kt({range:u,qt:!0},(x,B,ee)=>{const ve=ca(x[1]),Fe=new Tn(ve);b=b.add(Fe)}).next(()=>b)}containsKey(e,i){const u=Zs(i.path),g=IDBKeyRange.bound([u],[gl(u)],!1,!0);let b=0;return Nc(e).Kt({index:ot.documentTargetsIndex,qt:!0,range:g},([x,B],ee,ve)=>{0!==x&&(b++,ve.done())}).next(()=>b>0)}Tt(e,i){return Oc(e).get(i).next(u=>u?Vu(u):null)}}function Oc(a){return ko(a,he.store)}function sm(a){return ko(a,Ot.store)}function Nc(a){return ko(a,ot.store)}function Mc(a){return tl.apply(this,arguments)}function tl(){return(tl=(0,ye.Z)(function*(a){if(a.code!==St.FAILED_PRECONDITION||a.message!==Da)throw a;un("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function kc([a,e],[i,u]){const g=gr(a,i);return 0===g?gr(e,u):g}class Ff{constructor(e){this.ue=e,this.buffer=new os(kc),this.he=0}le(){return++this.he}fe(e){const i=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(i);else{const u=this.buffer.last();kc(i,u)<0&&(this.buffer=this.buffer.delete(u).add(i))}}get maxValue(){return this.buffer.last()[0]}}class Up{constructor(e,i){this.garbageCollector=e,this.asyncQueue=i,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var i=this;const u=this.de?3e5:6e4;un("LruGarbageCollector",`Garbage collection scheduled in ${u}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",u,(0,ye.Z)(function*(){i.we=null,i.de=!0;try{yield e.collectGarbage(i.garbageCollector)}catch(g){fu(g)?un("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",g):yield Mc(g)}yield i._e(e)}))}}class u_{constructor(e,i){this.me=e,this.params=i}calculateTargetCount(e,i){return this.me.ge(e).next(u=>Math.floor(i/100*u))}nthSequenceNumber(e,i){if(0===i)return tn.resolve(ss.T);const u=new Ff(i);return this.me.forEachTarget(e,g=>u.fe(g.sequenceNumber)).next(()=>this.me.ye(e,g=>u.fe(g))).next(()=>u.maxValue)}removeTargets(e,i,u){return this.me.removeTargets(e,i,u)}removeOrphanedDocuments(e,i){return this.me.removeOrphanedDocuments(e,i)}collect(e,i){return-1===this.params.cacheSizeCollectionThreshold?(un("LruGarbageCollector","Garbage collection skipped; disabled"),tn.resolve(tm)):this.getCacheSize(e).next(u=>u<this.params.cacheSizeCollectionThreshold?(un("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tm):this.pe(e,i))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,i){let u,g,b,x,B,ee,ve;const Fe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ut=>(ut>this.params.maximumSequenceNumbersToCollect?(un("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ut}`),g=this.params.maximumSequenceNumbersToCollect):g=ut,x=Date.now(),this.nthSequenceNumber(e,g))).next(ut=>(u=ut,B=Date.now(),this.removeTargets(e,u,i))).next(ut=>(b=ut,ee=Date.now(),this.removeOrphanedDocuments(e,u))).next(ut=>(ve=Date.now(),lo()<=Ge.in.DEBUG&&un("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${x-Fe}ms\n\tDetermined least recently used ${g} in `+(B-x)+`ms\n\tRemoved ${b} targets in `+(ee-B)+`ms\n\tRemoved ${ut} documents in `+(ve-ee)+`ms\nTotal Duration: ${ve-Fe}ms`),tn.resolve({didRun:!0,sequenceNumbersCollected:g,targetsRemoved:b,documentsRemoved:ut})))}}class kh{constructor(e,i){this.db=e,this.garbageCollector=new u_(this,i)}ge(e){const i=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(u=>i.next(g=>u+g))}Te(e){let i=0;return this.ye(e,u=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}ye(e,i){return this.Ee(e,(u,g)=>i(g))}addReference(e,i,u){return Lf(e,u)}removeReference(e,i,u){return Lf(e,u)}removeTargets(e,i,u){return this.db.getTargetCache().removeTargets(e,i,u)}markPotentiallyOrphaned(e,i){return Lf(e,i)}Ie(e,i){return function(u,g){let b=!1;return Lp(u).jt(x=>rm(u,x,g).next(B=>(B&&(b=!0),tn.resolve(!B)))).next(()=>b)}(e,i)}removeOrphanedDocuments(e,i){const u=this.db.getRemoteDocumentCache().newChangeBuffer(),g=[];let b=0;return this.Ee(e,(x,B)=>{if(B<=i){const ee=this.Ie(e,x).next(ve=>{if(!ve)return b++,u.getEntry(e,x).next(()=>(u.removeEntry(x),Nc(e).delete([0,Zs(x.path)])))});g.push(ee)}}).next(()=>tn.waitFor(g)).next(()=>u.apply(e)).next(()=>b)}removeTarget(e,i){const u=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,u)}updateLimboDocument(e,i){return Lf(e,i)}Ee(e,i){const u=Nc(e);let g,b=ss.T;return u.Kt({index:ot.documentTargetsIndex},([x,B],{path:ee,sequenceNumber:ve})=>{0===x?(b!==ss.T&&i(new Tn(ca(g)),b),b=ve,g=ee):b=ss.T}).next(()=>{b!==ss.T&&i(new Tn(ca(g)),b)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(a,e){return Nc(a).put((u=a.currentSequenceNumber,new ot(0,Zs(e.path),u)));var u}class cd{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={}}get(e){const i=this.mapKeyFn(e),u=this.inner[i];if(void 0!==u)for(const[g,b]of u)if(this.equalsFn(g,e))return b}has(e){return void 0!==this.get(e)}set(e,i){const u=this.mapKeyFn(e),g=this.inner[u];if(void 0!==g){for(let b=0;b<g.length;b++)if(this.equalsFn(g[b][0],e))return void(g[b]=[e,i]);g.push([e,i])}else this.inner[u]=[[e,i]]}delete(e){const i=this.mapKeyFn(e),u=this.inner[i];if(void 0===u)return!1;for(let g=0;g<u.length;g++)if(this.equalsFn(u[g][0],e))return 1===u.length?delete this.inner[i]:u.splice(g,1),!0;return!1}forEach(e){Co(this.inner,(i,u)=>{for(const[g,b]of u)e(g,b)})}isEmpty(){return ml(this.inner)}}class Vp{constructor(){this.changes=new cd(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}getReadTime(e){const i=this.changes.get(e);return i?i.readTime:Hn.min()}addEntry(e,i){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:i})}removeEntry(e,i=null){this.assertNotApplied(),this.changes.set(e,{document:Ni.newInvalidDocument(e),readTime:i})}getEntry(e,i){this.assertNotApplied();const u=this.changes.get(i);return void 0!==u?tn.resolve(u.document):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class om{constructor(e,i){this.N=e,this.Ht=i}addEntry(e,i,u){return pu(e).put(dd(i),u)}removeEntry(e,i){const u=pu(e),g=dd(i);return u.delete(g)}updateMetadata(e,i){return this.getMetadata(e).next(u=>(u.byteSize+=i,this.Ae(e,u)))}getEntry(e,i){return pu(e).get(dd(i)).next(u=>this.Re(i,u))}be(e,i){return pu(e).get(dd(i)).next(u=>({document:this.Re(i,u),size:kf(u)}))}getEntries(e,i){let u=la();return this.Pe(e,i,(g,b)=>{const x=this.Re(g,b);u=u.insert(g,x)}).next(()=>u)}ve(e,i){let u=la(),g=new Mi(Tn.comparator);return this.Pe(e,i,(b,x)=>{const B=this.Re(b,x);u=u.insert(b,B),g=g.insert(b,kf(x))}).next(()=>({documents:u,Ve:g}))}Pe(e,i,u){if(i.isEmpty())return tn.resolve();const g=IDBKeyRange.bound(i.first().path.toArray(),i.last().path.toArray()),b=i.getIterator();let x=b.getNext();return pu(e).Kt({range:g},(B,ee,ve)=>{const Fe=Tn.fromSegments(B);for(;x&&Tn.comparator(x,Fe)<0;)u(x,null),x=b.getNext();x&&x.isEqual(Fe)&&(u(x,ee),x=b.hasNext()?b.getNext():null),x?ve.Mt(x.path.toArray()):ve.done()}).next(()=>{for(;x;)u(x,null),x=b.hasNext()?b.getNext():null})}getDocumentsMatchingQuery(e,i,u){let g=la();const b=i.path.length+1,x={};if(u.isEqual(Hn.min())){const B=i.path.toArray();x.range=IDBKeyRange.lowerBound(B)}else{const B=i.path.toArray(),ee=pa(u);x.range=IDBKeyRange.lowerBound([B,ee],!0),x.index=A.collectionReadTimeIndex}return pu(e).Kt(x,(B,ee,ve)=>{if(B.length!==b)return;const Fe=ld(this.N,ee);i.path.isPrefixOf(Fe.key.path)?Wu(i,Fe)&&(g=g.insert(Fe.key,Fe)):ve.done()}).next(()=>g)}newChangeBuffer(e){return new am(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return Bp(e).get(W.key).next(i=>($n(!!i),i))}Ae(e,i){return Bp(e).put(W.key,i)}Re(e,i){if(i){const u=ld(this.N,i);if(!u.isNoDocument()||!u.version.isEqual(Hn.min()))return u}return Ni.newInvalidDocument(e)}}class am extends Vp{constructor(e,i){super(),this.Se=e,this.trackRemovals=i,this.De=new cd(u=>u.toString(),(u,g)=>u.isEqual(g))}applyChanges(e){const i=[];let u=0,g=new os((b,x)=>gr(b.canonicalString(),x.canonicalString()));return this.changes.forEach((b,x)=>{const B=this.De.get(b);if(x.document.isValidDocument()){const ee=Pf(this.Se.N,x.document,this.getReadTime(b));g=g.add(b.path.popLast()),u+=kf(ee)-B,i.push(this.Se.addEntry(e,b,ee))}else if(u-=B,this.trackRemovals){const ee=Pf(this.Se.N,Ni.newNoDocument(b,Hn.min()),this.getReadTime(b));i.push(this.Se.addEntry(e,b,ee))}else i.push(this.Se.removeEntry(e,b))}),g.forEach(b=>{i.push(this.Se.Ht.addToCollectionParentIndex(e,b))}),i.push(this.Se.updateMetadata(e,u)),tn.waitFor(i)}getFromCache(e,i){return this.Se.be(e,i).next(u=>(this.De.set(i,u.size),u.document))}getAllFromCache(e,i){return this.Se.ve(e,i).next(({documents:u,Ve:g})=>(g.forEach((b,x)=>{this.De.set(b,x)}),u))}}function Bp(a){return ko(a,W.store)}function pu(a){return ko(a,A.store)}function dd(a){return a.path.toArray()}class lm{constructor(e){this.N=e}Ct(e,i,u,g){$n(u<g&&u>=0&&g<=11);const b=new Mo("createOrUpgrade",i);var B;u<1&&g>=1&&(e.createObjectStore(da.store),(B=e).createObjectStore(Aa.store,{keyPath:Aa.keyPath}),B.createObjectStore(Xi.store,{keyPath:Xi.keyPath,autoIncrement:!0}).createIndex(Xi.userMutationsIndex,Xi.userMutationsKeyPath,{unique:!0}),B.createObjectStore(I.store),Uf(e),function(B){B.createObjectStore(A.store)}(e));let x=tn.resolve();return u<3&&g>=3&&(0!==u&&(function(B){B.deleteObjectStore(ot.store),B.deleteObjectStore(he.store),B.deleteObjectStore(Ot.store)}(e),Uf(e)),x=x.next(()=>function(B){const ee=B.store(Ot.store),ve=new Ot(0,0,Hn.min().toTimestamp(),0);return ee.put(Ot.key,ve)}(b))),u<4&&g>=4&&(0!==u&&(x=x.next(()=>function(B,ee){return ee.store(Xi.store).Lt().next(ve=>{B.deleteObjectStore(Xi.store),B.createObjectStore(Xi.store,{keyPath:Xi.keyPath,autoIncrement:!0}).createIndex(Xi.userMutationsIndex,Xi.userMutationsKeyPath,{unique:!0});const Fe=ee.store(Xi.store),ut=ve.map(Ut=>Fe.put(Ut));return tn.waitFor(ut)})}(e,b))),x=x.next(()=>{!function(B){B.createObjectStore(kn.store,{keyPath:kn.keyPath})}(e)})),u<5&&g>=5&&(x=x.next(()=>this.Ce(b))),u<6&&g>=6&&(x=x.next(()=>(function(B){B.createObjectStore(W.store)}(e),this.Ne(b)))),u<7&&g>=7&&(x=x.next(()=>this.xe(b))),u<8&&g>=8&&(x=x.next(()=>this.ke(e,b))),u<9&&g>=9&&(x=x.next(()=>{(function(B){B.objectStoreNames.contains("remoteDocumentChanges")&&B.deleteObjectStore("remoteDocumentChanges")})(e),function(B){const ee=B.objectStore(A.store);ee.createIndex(A.readTimeIndex,A.readTimeIndexPath,{unique:!1}),ee.createIndex(A.collectionReadTimeIndex,A.collectionReadTimeIndexPath,{unique:!1})}(i)})),u<10&&g>=10&&(x=x.next(()=>this.$e(b))),u<11&&g>=11&&(x=x.next(()=>{(function(B){B.createObjectStore(Kn.store,{keyPath:Kn.keyPath})})(e),function(B){B.createObjectStore(Qn.store,{keyPath:Qn.keyPath})}(e)})),x}Ne(e){let i=0;return e.store(A.store).Kt((u,g)=>{i+=kf(g)}).next(()=>{const u=new W(i);return e.store(W.store).put(W.key,u)})}Ce(e){const i=e.store(Aa.store),u=e.store(Xi.store);return i.Lt().next(g=>tn.forEach(g,b=>{const x=IDBKeyRange.bound([b.userId,-1],[b.userId,b.lastAcknowledgedBatchId]);return u.Lt(Xi.userMutationsIndex,x).next(B=>tn.forEach(B,ee=>{$n(ee.userId===b.userId);const ve=Rc(this.N,ee);return nm(e,b.userId,ve).next(()=>{})}))}))}xe(e){const i=e.store(ot.store),u=e.store(A.store);return e.store(Ot.store).get(Ot.key).next(g=>{const b=[];return u.Kt((x,B)=>{const ee=new br(x),ve=[0,Zs(ee)];b.push(i.get(ve).next(Fe=>Fe?tn.resolve():i.put(new ot(0,Zs(ee),g.highestListenSequenceNumber))))}).next(()=>tn.waitFor(b))})}ke(e,i){e.createObjectStore(_n.store,{keyPath:_n.keyPath});const u=i.store(_n.store),g=new tc,b=x=>{if(g.add(x)){const B=x.lastSegment(),ee=x.popLast();return u.put({collectionId:B,parent:Zs(ee)})}};return i.store(A.store).Kt({qt:!0},(x,B)=>{const ee=new br(x);return b(ee.popLast())}).next(()=>i.store(I.store).Kt({qt:!0},([x,B,ee],ve)=>{const Fe=ca(B);return b(Fe.popLast())}))}$e(e){const i=e.store(he.store);return i.Kt((u,g)=>{const b=Vu(g),x=Of(this.N,b);return i.put(x)})}}function Uf(a){a.createObjectStore(ot.store,{keyPath:ot.keyPath}).createIndex(ot.documentTargetsIndex,ot.documentTargetsKeyPath,{unique:!0}),a.createObjectStore(he.store,{keyPath:he.keyPath}).createIndex(he.queryTargetsIndexName,he.queryTargetsKeyPath,{unique:!0}),a.createObjectStore(Ot.store)}const Vf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fh{constructor(e,i,u,g,b,x,B,ee,ve,Fe){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=u,this.Oe=b,this.window=x,this.document=B,this.Fe=ve,this.Me=Fe,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=ut=>Promise.resolve(),!Fh.bt())throw new zt(St.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kh(this,g),this.We=i+"main",this.N=new l_(ee),this.Ge=new zi(this.We,11,new lm(this.N)),this.ze=new im(this.referenceDelegate,this.N),this.Ht=new Mp,this.He=new om(this.N,this.Ht),this.Je=new Nf,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===Fe&&ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zt(St.FAILED_PRECONDITION,Vf);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ss(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var i=this;return this.Qe=function(){var u=(0,ye.Z)(function*(g){if(i.started)return e(g)});return function(g){return u.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var i=(0,ye.Z)(function*(u){null===u.newVersion&&(yield e())});return function(u){return i.apply(this,arguments)}}())}setNetworkEnabled(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,ye.Z)(function*(){i.started&&(yield i.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bf(e).put(new kn(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(i=>{i||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(i=>this.isPrimary&&!i?this.on(e).next(()=>!1):!!i&&this.an(e).next(()=>!0))).catch(e=>{if(fu(e))return un("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return un("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return rc(e).get(da.key).next(i=>tn.resolve(this.cn(i)))}un(e){return Bf(e).delete(this.clientId)}hn(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const i=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",u=>{const g=ko(u,kn.store);return g.Lt().next(b=>{const x=e.fn(b,18e5),B=b.filter(ee=>-1===x.indexOf(ee));return tn.forEach(B,ee=>g.delete(ee.clientId)).next(()=>B)})}).catch(()=>[]);if(e.Ye)for(const u of i)e.Ye.removeItem(e.dn(u.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?tn.resolve(!0):rc(e).get(da.key).next(i=>{if(null!==i&&this.ln(i.leaseTimestampMs,5e3)&&!this.wn(i.ownerId)){if(this.cn(i)&&this.networkEnabled)return!0;if(!this.cn(i)){if(!i.allowTabSynchronization)throw new zt(St.FAILED_PRECONDITION,Vf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bf(e).Lt().next(u=>void 0===this.fn(u,5e3).find(g=>{if(this.clientId!==g.clientId){const x=!this.inForeground&&g.inForeground,B=this.networkEnabled===g.networkEnabled;if(!this.networkEnabled&&g.networkEnabled||x&&B)return!0}return!1}))}).next(i=>(this.isPrimary!==i&&un("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[da.store,kn.store],i=>{const u=new od(i,ss.T);return e.on(u).next(()=>e.un(u))}),e.Ge.close(),e.yn()})()}fn(e,i){return e.filter(u=>this.ln(u.updateTimeMs,i)&&!this.wn(u.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Bf(e).Lt().next(i=>this.fn(i,18e5).map(u=>u.clientId)))}get started(){return this.Be}getMutationQueue(e){return Fp.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,i,u){let b;return un("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===i?"readonly":"readwrite",Gs,x=>(b=new od(x,this.Le?this.Le.next():ss.T),"readwrite-primary"===i?this.sn(b).next(B=>!!B||this.rn(b)).next(B=>{if(!B)throw ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new zt(St.FAILED_PRECONDITION,Da);return u(b)}).next(B=>this.an(b).next(()=>B)):this.Tn(b).next(()=>u(b)))).then(x=>(b.raiseOnCommittedEvent(),x))}Tn(e){return rc(e).get(da.key).next(i=>{if(null!==i&&this.ln(i.leaseTimestampMs,5e3)&&!this.wn(i.ownerId)&&!this.cn(i)&&!(this.Me||this.allowTabSynchronization&&i.allowTabSynchronization))throw new zt(St.FAILED_PRECONDITION,Vf)})}an(e){const i=new da(this.clientId,this.allowTabSynchronization,Date.now());return rc(e).put(da.key,i)}static bt(){return zi.bt()}on(e){const i=rc(e);return i.get(da.key).next(u=>this.cn(u)?(un("IndexedDbPersistence","Releasing primary lease."),i.delete(da.key)):tn.resolve())}ln(e,i){const u=Date.now();return!(e<u-i||e>u&&(ui(`Detected an update time that is in the future: ${e} > ${u}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,ce.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var i;try{const u=null!==(null===(i=this.Ye)||void 0===i?void 0:i.getItem(this.dn(e)));return un("IndexedDbPersistence",`Client '${e}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return ui("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){ui("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rc(a){return ko(a,da.store)}function Bf(a){return ko(a,kn.store)}function jf(a,e){let i=a.projectId;return a.isDefaultDatabase||(i+="."+a.database),"firestore/"+e+"/"+i+"/"}class by{constructor(e,i){this.progress=e,this.En=i}}class c_{constructor(e,i,u){this.He=e,this.In=i,this.Ht=u}An(e,i){return this.In.getAllMutationBatchesAffectingDocumentKey(e,i).next(u=>this.Rn(e,i,u))}Rn(e,i,u){return this.He.getEntry(e,i).next(g=>{for(const b of u)b.applyToLocalView(g);return g})}bn(e,i){e.forEach((u,g)=>{for(const b of i)b.applyToLocalView(g)})}Pn(e,i){return this.He.getEntries(e,i).next(u=>this.vn(e,u).next(()=>u))}vn(e,i){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,i).next(u=>this.bn(i,u))}getDocumentsMatchingQuery(e,i,u){return Tn.isDocumentKey((g=i).path)&&null===g.collectionGroup&&0===g.filters.length?this.Vn(e,i.path):Pu(i)?this.Sn(e,i,u):this.Dn(e,i,u);var g}Vn(e,i){return this.An(e,new Tn(i)).next(u=>{let g=Ld();return u.isFoundDocument()&&(g=g.insert(u.key,u)),g})}Sn(e,i,u){const g=i.collectionGroup;let b=Ld();return this.Ht.getCollectionParents(e,g).next(x=>tn.forEach(x,B=>{const ee=(ve=i,Fe=B.child(g),new As(Fe,null,ve.explicitOrderBy.slice(),ve.filters.slice(),ve.limit,ve.limitType,ve.startAt,ve.endAt));var ve,Fe;return this.Dn(e,ee,u).next(ve=>{ve.forEach((Fe,ut)=>{b=b.insert(Fe,ut)})})}).next(()=>b))}Dn(e,i,u){let g,b;return this.He.getDocumentsMatchingQuery(e,i,u).next(x=>(g=x,this.In.getAllMutationBatchesAffectingQuery(e,i))).next(x=>(b=x,this.Cn(e,b,g).next(B=>{g=B;for(const ee of b)for(const ve of ee.mutations){const Fe=ve.key;let ut=g.get(Fe);null==ut&&(ut=Ni.newInvalidDocument(Fe),g=g.insert(Fe,ut)),lu(ve,ut,ee.localWriteTime),ut.isFoundDocument()||(g=g.remove(Fe))}}))).next(()=>(g.forEach((x,B)=>{Wu(i,B)||(g=g.remove(x))}),g))}Cn(e,i,u){let g=Xr();for(const x of i)for(const B of x.mutations)B instanceof Ja&&null===u.get(B.key)&&(g=g.add(B.key));let b=u;return this.He.getEntries(e,g).next(x=>(x.forEach((B,ee)=>{ee.isFoundDocument()&&(b=b.insert(B,ee))}),b))}}class $f{constructor(e,i,u,g){this.targetId=e,this.fromCache=i,this.Nn=u,this.xn=g}static kn(e,i){let u=Xr(),g=Xr();for(const b of i.docChanges)switch(b.type){case 0:u=u.add(b.doc.key);break;case 1:g=g.add(b.doc.key)}return new $f(e,i.fromCache,u,g)}}class Hf{$n(e){this.On=e}getDocumentsMatchingQuery(e,i,u,g){return 0===(b=i).filters.length&&null===b.limit&&null==b.startAt&&null==b.endAt&&(0===b.explicitOrderBy.length||1===b.explicitOrderBy.length&&b.explicitOrderBy[0].field.isKeyField())||u.isEqual(Hn.min())?this.Fn(e,i):this.On.Pn(e,g).next(b=>{const x=this.Mn(i,b);return(au(i)||za(i))&&this.Ln(i.limitType,x,g,u)?this.Fn(e,i):(lo()<=Ge.in.DEBUG&&un("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Xc(i)),this.On.getDocumentsMatchingQuery(e,i,u).next(B=>(x.forEach(ee=>{B=B.insert(ee.key,ee)}),B)))});var b}Mn(e,i){let u=new os(Sa(e));return i.forEach((g,b)=>{Wu(e,b)&&(u=u.add(b))}),u}Ln(e,i,u,g){if(u.size!==i.size)return!0;const b="F"===e?i.last():i.first();return!!b&&(b.hasPendingWrites||b.version.compareTo(g)>0)}Fn(e,i){return lo()<=Ge.in.DEBUG&&un("QueryEngine","Using full collection scan to execute query:",Xc(i)),this.On.getDocumentsMatchingQuery(e,i,Hn.min())}}class um{constructor(e,i,u,g){this.persistence=e,this.Bn=i,this.N=g,this.Un=new Mi(gr),this.qn=new cd(b=>Ru(b),to),this.Kn=Hn.min(),this.In=e.getMutationQueue(u),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new c_(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Un))}}function cm(a,e,i,u){return new um(a,e,i,u)}function jp(a,e){return $p.apply(this,arguments)}function $p(){return($p=(0,ye.Z)(function*(a,e){const i=pn(a);let u=i.In,g=i.Qn;const b=yield i.persistence.runTransaction("Handle user change","readonly",x=>{let B;return i.In.getAllMutationBatches(x).next(ee=>(B=ee,u=i.persistence.getMutationQueue(e),g=new c_(i.jn,u,i.persistence.getIndexManager()),u.getAllMutationBatches(x))).next(ee=>{const ve=[],Fe=[];let ut=Xr();for(const Ut of B){ve.push(Ut.batchId);for(const Xt of Ut.mutations)ut=ut.add(Xt.key)}for(const Ut of ee){Fe.push(Ut.batchId);for(const Xt of Ut.mutations)ut=ut.add(Xt.key)}return g.Pn(x,ut).next(Ut=>({Wn:Ut,removedBatchIds:ve,addedBatchIds:Fe}))})});return i.In=u,i.Qn=g,i.Bn.$n(i.Qn),b})).apply(this,arguments)}function dm(a,e){const i=pn(a);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const g=e.batch.keys(),b=i.jn.newChangeBuffer({trackRemovals:!0});return function(x,B,ee,ve){const Fe=ee.batch,ut=Fe.keys();let Ut=tn.resolve();return ut.forEach(Xt=>{Ut=Ut.next(()=>ve.getEntry(B,Xt)).next(wn=>{const er=ee.docVersions.get(Xt);$n(null!==er),wn.version.compareTo(er)<0&&(Fe.applyToRemoteDocument(wn,ee),wn.isValidDocument()&&ve.addEntry(wn,ee.commitVersion))})}),Ut.next(()=>x.In.removeMutationBatch(B,Fe))}(i,u,e,b).next(()=>b.apply(u)).next(()=>i.In.performConsistencyCheck(u)).next(()=>i.Qn.Pn(u,g))})}function hm(a){const e=pn(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.ze.getLastRemoteSnapshotVersion(i))}function Fc(a,e){const i=pn(a),u=e.snapshotVersion;let g=i.Un;return i.persistence.runTransaction("Apply remote event","readwrite-primary",b=>{const x=i.jn.newChangeBuffer({trackRemovals:!0});g=i.Un;const B=[];e.targetChanges.forEach((ve,Fe)=>{const ut=g.get(Fe);if(!ut)return;B.push(i.ze.removeMatchingKeys(b,ve.removedDocuments,Fe).next(()=>i.ze.addMatchingKeys(b,ve.addedDocuments,Fe)));const Ut=ve.resumeToken;if(Ut.approximateByteSize()>0){const Xt=ut.withResumeToken(Ut,u).withSequenceNumber(b.currentSequenceNumber);g=g.insert(Fe,Xt),wn=ut,kr=ve,$n((er=Xt).resumeToken.approximateByteSize()>0),(0===wn.resumeToken.approximateByteSize()||er.snapshotVersion.toMicroseconds()-wn.snapshotVersion.toMicroseconds()>=3e8||kr.addedDocuments.size+kr.modifiedDocuments.size+kr.removedDocuments.size>0)&&B.push(i.ze.updateTargetData(b,Xt))}var wn,er,kr});let ee=la();if(e.documentUpdates.forEach((ve,Fe)=>{e.resolvedLimboDocuments.has(ve)&&B.push(i.persistence.referenceDelegate.updateLimboDocument(b,ve))}),B.push(Ki(b,x,e.documentUpdates,u,void 0).next(ve=>{ee=ve})),!u.isEqual(Hn.min())){const ve=i.ze.getLastRemoteSnapshotVersion(b).next(Fe=>i.ze.setTargetsMetadata(b,b.currentSequenceNumber,u));B.push(ve)}return tn.waitFor(B).next(()=>x.apply(b)).next(()=>i.Qn.vn(b,ee)).next(()=>ee)}).then(b=>(i.Un=g,b))}function Ki(a,e,i,u,g){let b=Xr();return i.forEach(x=>b=b.add(x)),e.getEntries(a,b).next(x=>{let B=la();return i.forEach((ee,ve)=>{const Fe=x.get(ee),ut=(null==g?void 0:g.get(ee))||u;ve.isNoDocument()&&ve.version.isEqual(Hn.min())?(e.removeEntry(ee,ut),B=B.insert(ee,ve)):!Fe.isValidDocument()||ve.version.compareTo(Fe.version)>0||0===ve.version.compareTo(Fe.version)&&Fe.hasPendingWrites?(e.addEntry(ve,ut),B=B.insert(ee,ve)):un("LocalStore","Ignoring outdated watch update for ",ee,". Current version:",Fe.version," Watch version:",ve.version)}),B})}function Il(a,e){const i=pn(a);return i.persistence.runTransaction("Get next mutation batch","readonly",u=>(void 0===e&&(e=-1),i.In.getNextMutationBatchAfterBatchId(u,e)))}function gu(a,e){const i=pn(a);return i.persistence.runTransaction("Allocate target","readwrite",u=>{let g;return i.ze.getTargetData(u,e).next(b=>b?(g=b,tn.resolve(g)):i.ze.allocateTargetId(u).next(x=>(g=new ad(e,x,0,u.currentSequenceNumber),i.ze.addTargetData(u,g).next(()=>g))))}).then(u=>{const g=i.Un.get(u.targetId);return(null===g||u.snapshotVersion.compareTo(g.snapshotVersion)>0)&&(i.Un=i.Un.insert(u.targetId,u),i.qn.set(e,u.targetId)),u})}function Jd(a,e,i){return Hp.apply(this,arguments)}function Hp(){return(Hp=(0,ye.Z)(function*(a,e,i){const u=pn(a),g=u.Un.get(e),b=i?"readwrite":"readwrite-primary";try{i||(yield u.persistence.runTransaction("Release target",b,x=>u.persistence.referenceDelegate.removeTarget(x,g)))}catch(x){if(!fu(x))throw x;un("LocalStore",`Failed to update sequence numbers for target ${e}: ${x}`)}u.Un=u.Un.remove(e),u.qn.delete(g.target)})).apply(this,arguments)}function Zf(a,e,i){const u=pn(a);let g=Hn.min(),b=Xr();return u.persistence.runTransaction("Execute query","readonly",x=>function(B,ee,ve){const Fe=pn(B),ut=Fe.qn.get(ve);return void 0!==ut?tn.resolve(Fe.Un.get(ut)):Fe.ze.getTargetData(ee,ve)}(u,x,Ta(e)).next(B=>{if(B)return g=B.lastLimboFreeSnapshotVersion,u.ze.getMatchingKeysForTargetId(x,B.targetId).next(ee=>{b=ee})}).next(()=>u.Bn.getDocumentsMatchingQuery(x,e,i?g:Hn.min(),i?b:Xr())).next(B=>({documents:B,Gn:b})))}function fm(a,e){const i=pn(a),u=pn(i.ze),g=i.Un.get(e);return g?Promise.resolve(g.target):i.persistence.runTransaction("Get target data","readonly",b=>u.Tt(b,e).next(x=>x?x.target:null))}function Zp(a){const e=pn(a);return e.persistence.runTransaction("Get new document changes","readonly",i=>function(u,g,b){const x=pn(u);let B=la(),ee=pa(b);const ve=pu(g),Fe=IDBKeyRange.lowerBound(ee,!0);return ve.Kt({index:A.readTimeIndex,range:Fe},(ut,Ut)=>{const Xt=ld(x.N,Ut);B=B.insert(Xt.key,Xt),ee=Ut.readTime}).next(()=>({En:B,readTime:Yd(ee)}))}(e.jn,i,e.Kn)).then(({En:i,readTime:u})=>(e.Kn=u,i))}function Gp(){return(Gp=(0,ye.Z)(function*(a){const e=pn(a);return e.persistence.runTransaction("Synchronize last document change read time","readonly",i=>function(u){const g=pu(u);let b=Hn.min();return g.Kt({index:A.readTimeIndex,reverse:!0},(x,B,ee)=>{B.readTime&&(b=Yd(B.readTime)),ee.done()}).next(()=>b)}(i)).then(i=>{e.Kn=i})})).apply(this,arguments)}function wr(){return(wr=(0,ye.Z)(function*(a,e,i,u){const g=pn(a);let b=Xr(),x=la(),B=Rh();for(const Fe of i){const ut=e.zn(Fe.metadata.name);Fe.document&&(b=b.add(ut)),x=x.insert(ut,e.Hn(Fe)),B=B.insert(ut,e.Jn(Fe.metadata.readTime))}const ee=g.jn.newChangeBuffer({trackRemovals:!0}),ve=yield gu(g,(Fe=u,Ta(To(br.fromString(`__bundle__/docs/${Fe}`)))));var Fe;return g.persistence.runTransaction("Apply bundle documents","readwrite",Fe=>Ki(Fe,ee,x,Hn.min(),B).next(ut=>(ee.apply(Fe),ut)).next(ut=>g.ze.removeMatchingKeysForTargetId(Fe,ve.targetId).next(()=>g.ze.addMatchingKeys(Fe,b,ve.targetId)).next(()=>g.Qn.vn(Fe,ut)).next(()=>ut)))})).apply(this,arguments)}function qp(a,e){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,ye.Z)(function*(a,e,i=Xr()){const u=yield gu(a,Ta(el(e.bundledQuery))),g=pn(a);return g.persistence.runTransaction("Save named query","readwrite",b=>{const x=yi(e.readTime);if(u.snapshotVersion.compareTo(x)>=0)return g.Je.saveNamedQuery(b,e);const B=u.withResumeToken(M.EMPTY_BYTE_STRING,x);return g.Un=g.Un.insert(B.targetId,B),g.ze.updateTargetData(b,B).next(()=>g.ze.removeMatchingKeysForTargetId(b,u.targetId)).next(()=>g.ze.addMatchingKeys(b,i,u.targetId)).next(()=>g.Je.saveNamedQuery(b,e))})})).apply(this,arguments)}class Uh{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,i){return tn.resolve(this.Yn.get(i))}saveBundleMetadata(e,i){var u;return this.Yn.set(i.id,{id:(u=i).id,version:u.version,createTime:yi(u.createTime)}),tn.resolve()}getNamedQuery(e,i){return tn.resolve(this.Xn.get(i))}saveNamedQuery(e,i){return this.Xn.set(i.name,{name:(u=i).name,query:el(u.bundledQuery),readTime:yi(u.readTime)}),tn.resolve();var u}}class zo{constructor(){this.Zn=new os(Ao.ts),this.es=new os(Ao.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,i){const u=new Ao(e,i);this.Zn=this.Zn.add(u),this.es=this.es.add(u)}ss(e,i){e.forEach(u=>this.addReference(u,i))}removeReference(e,i){this.rs(new Ao(e,i))}os(e,i){e.forEach(u=>this.removeReference(u,i))}cs(e){const i=new Tn(new br([])),u=new Ao(i,e),g=new Ao(i,e+1),b=[];return this.es.forEachInRange([u,g],x=>{this.rs(x),b.push(x.key)}),b}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const i=new Tn(new br([])),u=new Ao(i,e),g=new Ao(i,e+1);let b=Xr();return this.es.forEachInRange([u,g],x=>{b=b.add(x.key)}),b}containsKey(e){const i=new Ao(e,0),u=this.Zn.firstAfterOrEqual(i);return null!==u&&e.isEqual(u.key)}}class Ao{constructor(e,i){this.key=e,this.ls=i}static ts(e,i){return Tn.comparator(e.key,i.key)||gr(e.ls,i.ls)}static ns(e,i){return gr(e.ls,i.ls)||Tn.comparator(e.key,i.key)}}class pm{constructor(e,i){this.Ht=e,this.referenceDelegate=i,this.In=[],this.fs=1,this.ds=new os(Ao.ts)}checkEmpty(e){return tn.resolve(0===this.In.length)}addMutationBatch(e,i,u,g){const b=this.fs;this.fs++;const x=new xc(b,i,u,g);this.In.push(x);for(const B of g)this.ds=this.ds.add(new Ao(B.key,b)),this.Ht.addToCollectionParentIndex(e,B.key.path.popLast());return tn.resolve(x)}lookupMutationBatch(e,i){return tn.resolve(this.ws(i))}getNextMutationBatchAfterBatchId(e,i){const g=this._s(i+1),b=g<0?0:g;return tn.resolve(this.In.length>b?this.In[b]:null)}getHighestUnacknowledgedBatchId(){return tn.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return tn.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const u=new Ao(i,0),g=new Ao(i,Number.POSITIVE_INFINITY),b=[];return this.ds.forEachInRange([u,g],x=>{const B=this.ws(x.ls);b.push(B)}),tn.resolve(b)}getAllMutationBatchesAffectingDocumentKeys(e,i){let u=new os(gr);return i.forEach(g=>{const b=new Ao(g,0),x=new Ao(g,Number.POSITIVE_INFINITY);this.ds.forEachInRange([b,x],B=>{u=u.add(B.ls)})}),tn.resolve(this.gs(u))}getAllMutationBatchesAffectingQuery(e,i){const u=i.path,g=u.length+1;let b=u;Tn.isDocumentKey(b)||(b=b.child(""));const x=new Ao(new Tn(b),0);let B=new os(gr);return this.ds.forEachWhile(ee=>{const ve=ee.key.path;return!!u.isPrefixOf(ve)&&(ve.length===g&&(B=B.add(ee.ls)),!0)},x),tn.resolve(this.gs(B))}gs(e){const i=[];return e.forEach(u=>{const g=this.ws(u);null!==g&&i.push(g)}),i}removeMutationBatch(e,i){$n(0===this.ys(i.batchId,"removed")),this.In.shift();let u=this.ds;return tn.forEach(i.mutations,g=>{const b=new Ao(g.key,i.batchId);return u=u.delete(b),this.referenceDelegate.markPotentiallyOrphaned(e,g.key)}).next(()=>{this.ds=u})}te(e){}containsKey(e,i){const u=new Ao(i,0),g=this.ds.firstAfterOrEqual(u);return tn.resolve(i.isEqual(g&&g.key))}performConsistencyCheck(e){return tn.resolve()}ys(e,i){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const i=this._s(e);return i<0||i>=this.In.length?null:this.In[i]}}class Wp{constructor(e,i){this.Ht=e,this.ps=i,this.docs=new Mi(Tn.comparator),this.size=0}addEntry(e,i,u){const g=i.key,b=this.docs.get(g),x=b?b.size:0,B=this.ps(i);return this.docs=this.docs.insert(g,{document:i.clone(),size:B,readTime:u}),this.size+=B-x,this.Ht.addToCollectionParentIndex(e,g.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const u=this.docs.get(i);return tn.resolve(u?u.document.clone():Ni.newInvalidDocument(i))}getEntries(e,i){let u=la();return i.forEach(g=>{const b=this.docs.get(g);u=u.insert(g,b?b.document.clone():Ni.newInvalidDocument(g))}),tn.resolve(u)}getDocumentsMatchingQuery(e,i,u){let g=la();const b=new Tn(i.path.child("")),x=this.docs.getIteratorFrom(b);for(;x.hasNext();){const{key:B,value:{document:ee,readTime:ve}}=x.getNext();if(!i.path.isPrefixOf(B.path))break;ve.compareTo(u)<=0||Wu(i,ee)&&(g=g.insert(ee.key,ee.clone()))}return tn.resolve(g)}Ts(e,i){return tn.forEach(this.docs,u=>i(u))}newChangeBuffer(e){return new ic(this)}getSize(e){return tn.resolve(this.size)}}class ic extends Vp{constructor(e){super(),this.Se=e}applyChanges(e){const i=[];return this.changes.forEach((u,g)=>{g.document.isValidDocument()?i.push(this.Se.addEntry(e,g.document,this.getReadTime(u))):this.Se.removeEntry(u)}),tn.waitFor(i)}getFromCache(e,i){return this.Se.getEntry(e,i)}getAllFromCache(e,i){return this.Se.getEntries(e,i)}}class Gf{constructor(e){this.persistence=e,this.Es=new cd(i=>Ru(i),to),this.lastRemoteSnapshotVersion=Hn.min(),this.highestTargetId=0,this.Is=0,this.As=new zo,this.targetCount=0,this.Rs=nc.se()}forEachTarget(e,i){return this.Es.forEach((u,g)=>i(g)),tn.resolve()}getLastRemoteSnapshotVersion(e){return tn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tn.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),tn.resolve(this.highestTargetId)}setTargetsMetadata(e,i,u){return u&&(this.lastRemoteSnapshotVersion=u),i>this.Is&&(this.Is=i),tn.resolve()}ae(e){this.Es.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Rs=new nc(i),this.highestTargetId=i),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,i){return this.ae(i),this.targetCount+=1,tn.resolve()}updateTargetData(e,i){return this.ae(i),tn.resolve()}removeTargetData(e,i){return this.Es.delete(i.target),this.As.cs(i.targetId),this.targetCount-=1,tn.resolve()}removeTargets(e,i,u){let g=0;const b=[];return this.Es.forEach((x,B)=>{B.sequenceNumber<=i&&null===u.get(B.targetId)&&(this.Es.delete(x),b.push(this.removeMatchingKeysForTargetId(e,B.targetId)),g++)}),tn.waitFor(b).next(()=>g)}getTargetCount(e){return tn.resolve(this.targetCount)}getTargetData(e,i){const u=this.Es.get(i)||null;return tn.resolve(u)}addMatchingKeys(e,i,u){return this.As.ss(i,u),tn.resolve()}removeMatchingKeys(e,i,u){this.As.os(i,u);const g=this.persistence.referenceDelegate,b=[];return g&&i.forEach(x=>{b.push(g.markPotentiallyOrphaned(e,x))}),tn.waitFor(b)}removeMatchingKeysForTargetId(e,i){return this.As.cs(i),tn.resolve()}getMatchingKeysForTargetId(e,i){const u=this.As.hs(i);return tn.resolve(u)}containsKey(e,i){return tn.resolve(this.As.containsKey(i))}}class zp{constructor(e,i){this.bs={},this.Le=new ss(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Gf(this),this.Ht=new Ey,this.He=new Wp(this.Ht,u=>this.referenceDelegate.Ps(u)),this.N=new l_(i),this.Je=new Uh(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let i=this.bs[e.toKey()];return i||(i=new pm(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,i,u){un("MemoryPersistence","Starting transaction:",e);const g=new qf(this.Le.next());return this.referenceDelegate.vs(),u(g).next(b=>this.referenceDelegate.Vs(g).next(()=>b)).toPromise().then(b=>(g.raiseOnCommittedEvent(),b))}Ss(e,i){return tn.or(Object.values(this.bs).map(u=>()=>u.containsKey(e,i)))}}class qf extends fo{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.Ds=new zo,this.Cs=null}static Ns(e){return new gm(e)}get xs(){if(this.Cs)return this.Cs;throw Mn()}addReference(e,i,u){return this.Ds.addReference(u,i),this.xs.delete(u.toString()),tn.resolve()}removeReference(e,i,u){return this.Ds.removeReference(u,i),this.xs.add(u.toString()),tn.resolve()}markPotentiallyOrphaned(e,i){return this.xs.add(i.toString()),tn.resolve()}removeTarget(e,i){this.Ds.cs(i.targetId).forEach(g=>this.xs.add(g.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,i.targetId).next(g=>{g.forEach(b=>this.xs.add(b.toString()))}).next(()=>u.removeTargetData(e,i))}vs(){this.Cs=new Set}Vs(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tn.forEach(this.xs,u=>{const g=Tn.fromPath(u);return this.ks(e,g).next(b=>{b||i.removeEntry(g)})}).next(()=>(this.Cs=null,i.apply(e)))}updateLimboDocument(e,i){return this.ks(e,i).next(u=>{u?this.xs.delete(i.toString()):this.xs.add(i.toString())})}Ps(e){return 0}ks(e,i){return tn.or([()=>tn.resolve(this.Ds.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ss(e,i)])}}function Kp(a,e){return`firestore_clients_${a}_${e}`}function f_(a,e,i){let u=`firestore_mutations_${a}_${i}`;return e.isAuthenticated()&&(u+=`_${e.uid}`),u}function Bl(a,e){return`firestore_targets_${a}_${e}`}class hd{constructor(e,i,u,g){this.user=e,this.batchId=i,this.state=u,this.error=g}static $s(e,i,u){const g=JSON.parse(u);let b,x="object"==typeof g&&-1!==["pending","acknowledged","rejected"].indexOf(g.state)&&(void 0===g.error||"object"==typeof g.error);return x&&g.error&&(x="string"==typeof g.error.message&&"string"==typeof g.error.code,x&&(b=new zt(g.error.code,g.error.message))),x?new hd(e,i,g.state,b):(ui("SharedClientState",`Failed to parse mutation state for ID '${i}': ${u}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lc{constructor(e,i,u){this.targetId=e,this.state=i,this.error=u}static $s(e,i){const u=JSON.parse(i);let g,b="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return b&&u.error&&(b="string"==typeof u.error.message&&"string"==typeof u.error.code,b&&(g=new zt(u.error.code,u.error.message))),b?new Lc(e,u.state,g):(ui("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fd{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static $s(e,i){const u=JSON.parse(i);let g="object"==typeof u&&u.activeTargetIds instanceof Array,b=Vd();for(let x=0;g&&x<u.activeTargetIds.length;++x)g=Ar(u.activeTargetIds[x]),b=b.add(u.activeTargetIds[x]);return g?new fd(e,b):(ui("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}}class mm{constructor(e,i){this.clientId=e,this.onlineState=i}static $s(e){const i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new mm(i.clientId,i.onlineState):(ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yp{constructor(){this.activeTargetIds=Vd()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wf{constructor(e,i,u,g,b){this.window=e,this.Oe=i,this.persistenceKey=u,this.Ls=g,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Mi(gr),this.started=!1,this.Ks=[];const x=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=b,this.js=Kp(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Yp),this.Ws=new RegExp(`^firestore_clients_${x}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${x}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${x}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(B){return`firestore_bundle_loaded_${B}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const i=yield e.syncEngine.pn();for(const g of i){if(g===e.Ls)continue;const b=e.getItem(Kp(e.persistenceKey,g));if(b){const x=fd.$s(g,b);x&&(e.qs=e.qs.insert(x.clientId,x))}}e.Ys();const u=e.storage.getItem(e.Hs);if(u){const g=e.Xs(u);g&&e.Zs(g)}for(const g of e.Ks)e.Us(g);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let i=!1;return this.qs.forEach((u,g)=>{g.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,i,u){this.ei(e,i,u),this.ni(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(Bl(this.persistenceKey,e));if(u){const g=Lc.$s(e,u);g&&(i=g.state)}}return this.si.Fs(e),this.Ys(),i}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bl(this.persistenceKey,e))}updateQueryState(e,i,u){this.ii(e,i,u)}handleUserChange(e,i,u){i.forEach(g=>{this.ni(g)}),this.currentUser=e,u.forEach(g=>{this.addPendingMutation(g)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const i=this.storage.getItem(e);return un("SharedClientState","READ",e,i),i}setItem(e,i){un("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){un("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var i=this;const u=e;if(u.storageArea===this.storage){if(un("SharedClientState","EVENT",u.key,u.newValue),u.key===this.js)return void ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ye.Z)(function*(){if(i.started){if(null!==u.key)if(i.Ws.test(u.key)){if(null==u.newValue){const g=i.ai(u.key);return i.ci(g,null)}{const g=i.ui(u.key,u.newValue);if(g)return i.ci(g.clientId,g)}}else if(i.Gs.test(u.key)){if(null!==u.newValue){const g=i.hi(u.key,u.newValue);if(g)return i.li(g)}}else if(i.zs.test(u.key)){if(null!==u.newValue){const g=i.fi(u.key,u.newValue);if(g)return i.di(g)}}else if(u.key===i.Hs){if(null!==u.newValue){const g=i.Xs(u.newValue);if(g)return i.Zs(g)}}else if(u.key===i.Qs){const g=function(b){let x=ss.T;if(null!=b)try{const B=JSON.parse(b);$n("number"==typeof B),x=B}catch(B){ui("SharedClientState","Failed to read sequence number from WebStorage",B)}return x}(u.newValue);g!==ss.T&&i.sequenceNumberHandler(g)}else if(u.key===i.Js)return i.syncEngine.wi()}else i.Ks.push(u)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,i,u){const g=new hd(this.currentUser,e,i,u),b=f_(this.persistenceKey,this.currentUser,e);this.setItem(b,g.Os())}ni(e){const i=f_(this.persistenceKey,this.currentUser,e);this.removeItem(i)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,i,u){const g=Bl(this.persistenceKey,e),b=new Lc(e,i,u);this.setItem(g,b.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const i=this.Ws.exec(e);return i?i[1]:null}ui(e,i){const u=this.ai(e);return fd.$s(u,i)}hi(e,i){const u=this.Gs.exec(e),g=Number(u[1]);return hd.$s(new mi(void 0!==u[2]?u[2]:null),g,i)}fi(e,i){const u=this.zs.exec(e),g=Number(u[1]);return Lc.$s(g,i)}Xs(e){return mm.$s(e)}li(e){var i=this;return(0,ye.Z)(function*(){if(e.user.uid===i.currentUser.uid)return i.syncEngine._i(e.batchId,e.state,e.error);un("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,i){const u=i?this.qs.insert(e,i):this.qs.remove(e),g=this.ti(this.qs),b=this.ti(u),x=[],B=[];return b.forEach(ee=>{g.has(ee)||x.push(ee)}),g.forEach(ee=>{b.has(ee)||B.push(ee)}),this.syncEngine.gi(x,B).then(()=>{this.qs=u})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let i=Vd();return e.forEach((u,g)=>{i=i.unionWith(g.activeTargetIds)}),i}}class p_{constructor(){this.yi=new Yp,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,u){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,i,u){this.pi[e]=i}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Yp,Promise.resolve()}handleUserChange(e,i,u){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class g_{Ti(e){}shutdown(){}}class _m{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){un("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){un("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ym={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Qp{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class es extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,i,u,g){const b=this.Bi(e,i);un("RestConnection","Sending: ",b,u);const x={};return this.Ui(x,g),this.qi(e,b,x,u).then(B=>(un("RestConnection","Received: ",B),B),B=>{throw is("RestConnection",`${e} failed with error: `,B,"url: ",b,"request:",u),B})}Ki(e,i,u,g){return this.Li(e,i,u,g)}Ui(e,i){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Vi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i)for(const u in i.authHeaders)i.authHeaders.hasOwnProperty(u)&&(e[u]=i.authHeaders[u])}Bi(e,i){return`${this.Fi}/v1/${i}:${ym[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,i,u,g){return new Promise((b,x)=>{const B=new ya;B.listenOnce(Ba.COMPLETE,()=>{try{switch(B.getLastErrorCode()){case hl.NO_ERROR:const ve=B.getResponseJson();un("Connection","XHR received:",JSON.stringify(ve)),b(ve);break;case hl.TIMEOUT:un("Connection",'RPC "'+e+'" timed out'),x(new zt(St.DEADLINE_EXCEEDED,"Request time out"));break;case hl.HTTP_ERROR:const Fe=B.getStatus();if(un("Connection",'RPC "'+e+'" failed with status:',Fe,"response text:",B.getResponseText()),Fe>0){const ut=B.getResponseJson().error;if(ut&&ut.status&&ut.message){const Ut=function(Xt){const wn=Xt.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(wn)>=0?wn:St.UNKNOWN}(ut.status);x(new zt(Ut,ut.message))}else x(new zt(St.UNKNOWN,"Server responded with status "+B.getStatus()))}else x(new zt(St.UNAVAILABLE,"Connection failed."));break;default:Mn()}}finally{un("Connection",'RPC "'+e+'" completed.')}});const ee=JSON.stringify(g);B.send(i,"POST",ee,u,15)})}ji(e,i){const u=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=ru(),b=rs(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new iu({})),this.Ui(x.initMessageHeaders,i),(0,ce.uI)()||(0,ce.b$)()||(0,ce.d)()||(0,ce.w1)()||(0,ce.Mn)()||(0,ce.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const B=u.join("");un("Connection","Creating WebChannel: "+B,x);const ee=g.createWebChannel(B,x);let ve=!1,Fe=!1;const ut=new Qp({vi:Xt=>{Fe?un("Connection","Not sending because WebChannel is closed:",Xt):(ve||(un("Connection","Opening WebChannel transport."),ee.open(),ve=!0),un("Connection","WebChannel sending:",Xt),ee.send(Xt))},Vi:()=>ee.close()}),Ut=(Xt,wn,er)=>{Xt.listen(wn,kr=>{try{er(kr)}catch(io){setTimeout(()=>{throw io},0)}})};return Ut(ee,oa.EventType.OPEN,()=>{Fe||un("Connection","WebChannel transport opened.")}),Ut(ee,oa.EventType.CLOSE,()=>{Fe||(Fe=!0,un("Connection","WebChannel transport closed"),ut.$i())}),Ut(ee,oa.EventType.ERROR,Xt=>{Fe||(Fe=!0,is("Connection","WebChannel transport errored:",Xt),ut.$i(new zt(St.UNAVAILABLE,"The operation could not be completed")))}),Ut(ee,oa.EventType.MESSAGE,Xt=>{var wn;if(!Fe){const er=Xt.data[0];$n(!!er);const kr=er,io=kr.error||(null===(wn=kr[0])||void 0===wn?void 0:wn.error);if(io){un("Connection","WebChannel received error:",io);const qu=io.status;let _c=function(Wc){const Gg=$s[Wc];if(void 0!==Gg)return Fd(Gg)}(qu),qc=io.message;void 0===_c&&(_c=St.INTERNAL,qc="Unknown error status: "+qu+" with message "+io.message),Fe=!0,ut.$i(new zt(_c,qc)),ee.close()}else un("Connection","WebChannel received:",er),ut.Oi(er)}}),Ut(b,fl.STAT_EVENT,Xt=>{Xt.stat===_a.PROXY?un("Connection","Detected buffering proxy"):Xt.stat===_a.NOPROXY&&un("Connection","Detected no buffering proxy")}),setTimeout(()=>{ut.ki()},0),ut}}function Vh(){return"undefined"!=typeof window?window:null}function Bh(){return"undefined"!=typeof document?document:null}function mu(a){return new sd(a,!0)}class Jp{constructor(e,i,u=1e3,g=1.5,b=6e4){this.Oe=e,this.timerId=i,this.Qi=u,this.Wi=g,this.Gi=b,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const i=Math.floor(this.zi+this.Zi()),u=Math.max(0,Date.now()-this.Ji),g=Math.max(0,i-u);g>0&&un("ExponentialBackoff",`Backing off for ${g} ms (base delay: ${this.zi} ms, delay with jitter: ${i} ms, last attempt: ${u} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,g,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Xp{constructor(e,i,u,g,b,x){this.Oe=e,this.er=u,this.nr=g,this.credentialsProvider=b,this.listener=x,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Jp(e,i)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,ye.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,ye.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,i){var u=this;return(0,ye.Z)(function*(){u._r(),u.rr.cancel(),u.sr++,3!==e?u.rr.reset():i&&i.code===St.RESOURCE_EXHAUSTED?(ui(i.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),u.rr.Yi()):i&&i.code===St.UNAUTHENTICATED&&u.credentialsProvider.invalidateToken(),null!==u.stream&&(u.mr(),u.stream.close(),u.stream=null),u.state=e,yield u.listener.Ci(i)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),i=this.sr;this.credentialsProvider.getToken().then(u=>{this.sr===i&&this.yr(u)},u=>{e(()=>{const g=new zt(St.UNKNOWN,"Fetching auth token failed: "+u.message);return this.pr(g)})})}yr(e){const i=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{i(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(u=>{i(()=>this.pr(u))}),this.stream.onMessage(u=>{i(()=>this.onMessage(u))})}ur(){var e=this;this.state=4,this.rr.Xi((0,ye.Z)(function*(){e.state=0,e.start()}))}pr(e){return un("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return i=>{this.Oe.enqueueAndForget(()=>this.sr===e?i():(un("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vm extends Xp{constructor(e,i,u,g,b){super(e,"listen_stream_connection_backoff","listen_stream_idle",i,u,b),this.N=g}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const i=function(a,e){let i;if("targetChange"in e){const u="NO_CHANGE"===(ee=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===ee?1:"REMOVE"===ee?2:"CURRENT"===ee?3:"RESET"===ee?4:Mn(),g=e.targetChange.targetIds||[],b=function(ee,ve){return ee.D?($n(void 0===ve||"string"==typeof ve),M.fromBase64String(ve||"")):($n(void 0===ve||ve instanceof Uint8Array),M.fromUint8Array(ve||new Uint8Array))}(a,e.targetChange.resumeToken),x=e.targetChange.cause,B=x&&function(ee){const ve=void 0===ee.code?St.UNKNOWN:Fd(ee.code);return new zt(ve,ee.message||"")}(x);i=new Xu(u,g,b,B||null)}else if("documentChange"in e){const u=e.documentChange,g=Xa(a,u.document.name),b=yi(u.document.updateTime),x=new Ci({mapValue:{fields:u.document.fields}}),B=Ni.newFoundDocument(g,b,x);i=new qo(u.targetIds||[],u.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const u=e.documentDelete,g=Xa(a,u.document),b=u.readTime?yi(u.readTime):Hn.min(),x=Ni.newNoDocument(g,b);i=new qo([],u.removedTargetIds||[],x.key,x)}else if("documentRemove"in e){const u=e.documentRemove,g=Xa(a,u.document);i=new qo([],u.removedTargetIds||[],g,null)}else{if(!("filter"in e))return Mn();{const u=e.filter,b=new xh(u.count||0);i=new du(u.targetId,b)}}var ee;return i}(this.N,e),u=function(g){if(!("targetChange"in g))return Hn.min();const b=g.targetChange;return b.targetIds&&b.targetIds.length?Hn.min():b.readTime?yi(b.readTime):Hn.min()}(e);return this.listener.Er(i,u)}Ir(e){const i={};i.database=Lu(this.N),i.addTarget=function(g,b){let x;const B=b.target;return x=Wa(B)?{documents:Zd(g,B)}:{query:Gd(g,B)},x.targetId=b.targetId,b.resumeToken.approximateByteSize()>0?x.resumeToken=Mu(g,b.resumeToken):b.snapshotVersion.compareTo(Hn.min())>0&&(x.readTime=Cl(g,b.snapshotVersion.toTimestamp())),x}(this.N,e);const u=function(a,e){const i=function(u,g){switch(g){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mn()}}(0,e.purpose);return null==i?null:{"goog-listen-tags":i}}(0,e);u&&(i.labels=u),this.wr(i)}Ar(e){const i={};i.database=Lu(this.N),i.removeTarget=e,this.wr(i)}}class Em extends Xp{constructor(e,i,u,g,b){super(e,"write_stream_connection_backoff","write_stream_idle",i,u,b),this.N=g,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if($n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const i=function(a,e){return a&&a.length>0?($n(void 0!==e),a.map(i=>function(u,g){let b=yi(u.updateTime?u.updateTime:g);return b.isEqual(Hn.min())&&(b=yi(g)),new Jg(b,u.transformResults||[])}(i,e))):[]}(e.writeResults,e.commitTime),u=yi(e.commitTime);return this.listener.vr(u,i)}return $n(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Lu(this.N),this.wr(e)}Pr(e){const i={streamToken:this.lastStreamToken,writes:e.map(u=>Tl(this.N,u))};this.wr(i)}}class jl extends class{}{constructor(e,i,u){super(),this.credentials=e,this.nr=i,this.N=u,this.Dr=!1}Cr(){if(this.Dr)throw new zt(St.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,i,u){return this.Cr(),this.credentials.getToken().then(g=>this.nr.Li(e,i,u,g)).catch(g=>{throw"FirebaseError"===g.name?(g.code===St.UNAUTHENTICATED&&this.credentials.invalidateToken(),g):new zt(St.UNKNOWN,g.toString())})}Ki(e,i,u){return this.Cr(),this.credentials.getToken().then(g=>this.nr.Ki(e,i,u,g)).catch(g=>{throw"FirebaseError"===g.name?(g.code===St.UNAUTHENTICATED&&this.credentials.invalidateToken(),g):new zt(St.UNKNOWN,g.toString())})}terminate(){this.Dr=!0}}class m_{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const i=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(ui(i),this.$r=!1):un("OnlineStateTracker",i)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class bm{constructor(e,i,u,g,b){var x=this;this.localStore=e,this.datastore=i,this.asyncQueue=u,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=b,this.Qr.Ti(B=>{u.enqueueAndForget((0,ye.Z)(function*(){var ee;Ra(x)&&(un("RemoteStore","Restarting streams for network reachability change."),yield(ee=(0,ye.Z)(function*(ve){const Fe=pn(ve);Fe.Kr.add(4),yield $l(Fe),Fe.Wr.set("Unknown"),Fe.Kr.delete(4),yield eg(Fe)}),function(ve){return ee.apply(this,arguments)})(x))}))}),this.Wr=new m_(u,g)}}function eg(a){return zf.apply(this,arguments)}function zf(){return(zf=(0,ye.Z)(function*(a){if(Ra(a))for(const e of a.jr)yield e(!0)})).apply(this,arguments)}function $l(a){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,ye.Z)(function*(a){for(const e of a.jr)yield e(!1)})).apply(this,arguments)}function tg(a,e){const i=pn(a);i.qr.has(e.targetId)||(i.qr.set(e.targetId,e),$h(i)?eh(i):Pa(i).cr()&&jh(i,e))}function pd(a,e){const i=pn(a),u=Pa(i);i.qr.delete(e),u.cr()&&sc(i,e),0===i.qr.size&&(u.cr()?u.lr():Ra(i)&&i.Wr.set("Unknown"))}function jh(a,e){a.Gr.Y(e.targetId),Pa(a).Ir(e)}function sc(a,e){a.Gr.Y(e),Pa(a).Ar(e)}function eh(a){a.Gr=new Cc({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>a.qr.get(e)||null}),Pa(a).start(),a.Wr.Or()}function $h(a){return Ra(a)&&!Pa(a).ar()&&a.qr.size>0}function Ra(a){return 0===pn(a).Kr.size}function Hh(a){a.Gr=void 0}function ng(a){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,ye.Z)(function*(a){a.qr.forEach((e,i)=>{jh(a,e)})})).apply(this,arguments)}function Yf(a,e){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,ye.Z)(function*(a,e){Hh(a),$h(a)?(a.Wr.Lr(e),eh(a)):a.Wr.set("Unknown")})).apply(this,arguments)}function Jf(a,e,i){return rg.apply(this,arguments)}function rg(){return(rg=(0,ye.Z)(function*(a,e,i){if(a.Wr.set("Online"),e instanceof Xu&&2===e.state&&e.cause)try{yield(u=(0,ye.Z)(function*(g,b){const x=b.cause;for(const B of b.targetIds)g.qr.has(B)&&(yield g.remoteSyncer.rejectListen(B,x),g.qr.delete(B),g.Gr.removeTarget(B))}),function(g,b){return u.apply(this,arguments)})(a,e)}catch(u){un("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),u),yield Zh(a,u)}else if(e instanceof qo?a.Gr.rt(e):e instanceof du?a.Gr.ft(e):a.Gr.ct(e),!i.isEqual(Hn.min()))try{const u=yield hm(a.localStore);i.compareTo(u)>=0&&(yield function(g,b){const x=g.Gr._t(b);return x.targetChanges.forEach((B,ee)=>{if(B.resumeToken.approximateByteSize()>0){const ve=g.qr.get(ee);ve&&g.qr.set(ee,ve.withResumeToken(B.resumeToken,b))}}),x.targetMismatches.forEach(B=>{const ee=g.qr.get(B);if(!ee)return;g.qr.set(B,ee.withResumeToken(M.EMPTY_BYTE_STRING,ee.snapshotVersion)),sc(g,B);const ve=new ad(ee.target,B,1,ee.sequenceNumber);jh(g,ve)}),g.remoteSyncer.applyRemoteEvent(x)}(a,i))}catch(u){un("RemoteStore","Failed to raise snapshot:",u),yield Zh(a,u)}var u})).apply(this,arguments)}function Zh(a,e,i){return gd.apply(this,arguments)}function gd(){return(gd=(0,ye.Z)(function*(a,e,i){if(!fu(e))throw e;a.Kr.add(1),yield $l(a),a.Wr.set("Offline"),i||(i=()=>hm(a.localStore)),a.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){un("RemoteStore","Retrying IndexedDB access"),yield i(),a.Kr.delete(1),yield eg(a)}))})).apply(this,arguments)}function oc(a,e){return e().catch(i=>Zh(a,i,e))}function _u(a){return md.apply(this,arguments)}function md(){return(md=(0,ye.Z)(function*(a){const e=pn(a),i=Oa(e);let u=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;Xf(e);)try{const g=yield Il(e.localStore,u);if(null===g){0===e.Ur.length&&i.lr();break}u=g.batchId,ac(e,g)}catch(g){yield Zh(e,g)}Gh(e)&&ep(e)})).apply(this,arguments)}function Xf(a){return Ra(a)&&a.Ur.length<10}function ac(a,e){a.Ur.push(e);const i=Oa(a);i.cr()&&i.br&&i.Pr(e.mutations)}function Gh(a){return Ra(a)&&!Oa(a).ar()&&a.Ur.length>0}function ep(a){Oa(a).start()}function tp(a){return yu.apply(this,arguments)}function yu(){return(yu=(0,ye.Z)(function*(a){Oa(a).Sr()})).apply(this,arguments)}function qh(a){return _d.apply(this,arguments)}function _d(){return(_d=(0,ye.Z)(function*(a){const e=Oa(a);for(const i of a.Ur)e.Pr(i.mutations)})).apply(this,arguments)}function np(a,e,i){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,ye.Z)(function*(a,e,i){const u=a.Ur.shift(),g=Vl.from(u,e,i);yield oc(a,()=>a.remoteSyncer.applySuccessfulWrite(g)),yield _u(a)})).apply(this,arguments)}function ig(a,e){return lc.apply(this,arguments)}function lc(){return(lc=(0,ye.Z)(function*(a,e){var i;e&&Oa(a).br&&(yield(i=(0,ye.Z)(function*(u,g){if(Tf(b=g.code)&&b!==St.ABORTED){const x=u.Ur.shift();Oa(u).hr(),yield oc(u,()=>u.remoteSyncer.rejectFailedWrite(x.batchId,g)),yield _u(u)}var b}),function(u,g){return i.apply(this,arguments)})(a,e)),Gh(a)&&ep(a)})).apply(this,arguments)}function Wh(a,e){return zh.apply(this,arguments)}function zh(){return(zh=(0,ye.Z)(function*(a,e){const i=pn(a);e?(i.Kr.delete(2),yield eg(i)):e||(i.Kr.add(2),yield $l(i),i.Wr.set("Unknown"))})).apply(this,arguments)}function Pa(a){return a.zr||(a.zr=function(e,i,u){const g=pn(e);return g.Cr(),new vm(i,g.nr,g.credentials,g.N,u)}(a.datastore,a.asyncQueue,{Si:ng.bind(null,a),Ci:Yf.bind(null,a),Er:Jf.bind(null,a)}),a.jr.push(function(){var e=(0,ye.Z)(function*(i){i?(a.zr.hr(),$h(a)?eh(a):a.Wr.set("Unknown")):(yield a.zr.stop(),Hh(a))});return function(i){return e.apply(this,arguments)}}())),a.zr}function Oa(a){return a.Hr||(a.Hr=function(e,i,u){const g=pn(e);return g.Cr(),new Em(i,g.nr,g.credentials,g.N,u)}(a.datastore,a.asyncQueue,{Si:tp.bind(null,a),Ci:ig.bind(null,a),Vr:qh.bind(null,a),vr:np.bind(null,a)}),a.jr.push(function(){var e=(0,ye.Z)(function*(i){i?(a.Hr.hr(),yield _u(a)):(yield a.Hr.stop(),a.Ur.length>0&&(un("RemoteStore",`Stopping write stream with ${a.Ur.length} pending writes`),a.Ur=[]))});return function(i){return e.apply(this,arguments)}}())),a.Hr}class yd{constructor(e,i,u,g,b){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=u,this.op=g,this.removalCallback=b,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(x=>{})}static createAndSchedule(e,i,u,g,b){const x=Date.now()+u,B=new yd(e,i,x,g,b);return B.start(u),B}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zt(St.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function th(a,e){if(ui("AsyncQueue",`${e}: ${a}`),fu(a))return new zt(St.UNAVAILABLE,`${e}: ${a}`);throw a}class po{constructor(e){this.comparator=e?(i,u)=>e(i,u)||Tn.comparator(i.key,u.key):(i,u)=>Tn.comparator(i.key,u.key),this.keyedMap=Ld(),this.sortedSet=new Mi(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,u)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),u=e.sortedSet.getIterator();for(;i.hasNext();){const g=i.getNext().key,b=u.getNext().key;if(!g.isEqual(b))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){const u=new po;return u.comparator=this.comparator,u.keyedMap=e,u.sortedSet=i,u}}class sg{constructor(){this.Jr=new Mi(Tn.comparator)}track(e){const i=e.doc.key,u=this.Jr.get(i);u?0!==e.type&&3===u.type?this.Jr=this.Jr.insert(i,e):3===e.type&&1!==u.type?this.Jr=this.Jr.insert(i,{type:u.type,doc:e.doc}):2===e.type&&2===u.type?this.Jr=this.Jr.insert(i,{type:2,doc:e.doc}):2===e.type&&0===u.type?this.Jr=this.Jr.insert(i,{type:0,doc:e.doc}):1===e.type&&0===u.type?this.Jr=this.Jr.remove(i):1===e.type&&2===u.type?this.Jr=this.Jr.insert(i,{type:1,doc:u.doc}):0===e.type&&1===u.type?this.Jr=this.Jr.insert(i,{type:2,doc:e.doc}):Mn():this.Jr=this.Jr.insert(i,e)}Yr(){const e=[];return this.Jr.inorderTraversal((i,u)=>{e.push(u)}),e}}class uc{constructor(e,i,u,g,b,x,B,ee){this.query=e,this.docs=i,this.oldDocs=u,this.docChanges=g,this.mutatedKeys=b,this.fromCache=x,this.syncStateChanged=B,this.excludesMetadataChanges=ee}static fromInitialDocuments(e,i,u,g){const b=[];return i.forEach(x=>{b.push({type:0,doc:x})}),new uc(e,i,po.emptySet(i),b,u,g,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ka(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,u=e.docChanges;if(i.length!==u.length)return!1;for(let g=0;g<i.length;g++)if(i[g].type!==u[g].type||!i[g].doc.isEqual(u[g].doc))return!1;return!0}}class og{constructor(){this.Xr=void 0,this.listeners=[]}}class wy{constructor(){this.queries=new cd(e=>Ia(e),Ka),this.onlineState="Unknown",this.Zr=new Set}}function nh(a,e){return wm.apply(this,arguments)}function wm(){return(wm=(0,ye.Z)(function*(a,e){const i=pn(a),u=e.query;let g=!1,b=i.queries.get(u);if(b||(g=!0,b=new og),g)try{b.Xr=yield i.onListen(u)}catch(x){const B=th(x,`Initialization of query '${Xc(e.query)}' failed`);return void e.onError(B)}i.queries.set(u,b),b.listeners.push(e),e.eo(i.onlineState),b.Xr&&e.no(b.Xr)&&ih(i)})).apply(this,arguments)}function rp(a,e){return rh.apply(this,arguments)}function rh(){return(rh=(0,ye.Z)(function*(a,e){const i=pn(a),u=e.query;let g=!1;const b=i.queries.get(u);if(b){const x=b.listeners.indexOf(e);x>=0&&(b.listeners.splice(x,1),g=0===b.listeners.length)}if(g)return i.queries.delete(u),i.onUnlisten(u)})).apply(this,arguments)}function nl(a,e){const i=pn(a);let u=!1;for(const g of e){const x=i.queries.get(g.query);if(x){for(const B of x.listeners)B.no(g)&&(u=!0);x.Xr=g}}u&&ih(i)}function ag(a,e,i){const u=pn(a),g=u.queries.get(e);if(g)for(const b of g.listeners)b.onError(i);u.queries.delete(e)}function ih(a){a.Zr.forEach(e=>{e.next()})}class lg{constructor(e,i,u){this.query=e,this.so=i,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=u||{}}no(e){if(!this.options.includeMetadataChanges){const u=[];for(const g of e.docChanges)3!==g.type&&u.push(g);e=new uc(e.query,e.docs,e.oldDocs,u,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let i=!1;return this.io?this.oo(e)&&(this.so.next(e),i=!0):this.ao(e,this.onlineState)&&(this.co(e),i=!0),this.ro=e,i}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let i=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),i=!0),i}ao(e,i){return!e.fromCache||!(this.options.uo&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Cm{constructor(e,i){this.payload=e,this.byteLength=i}ho(){return"metadata"in this.payload}}class Tm{constructor(e){this.N=e}zn(e){return Xa(this.N,e)}Hn(e){return e.metadata.exists?Ji(this.N,e.document,!1):Ni.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return yi(e)}}class Kh{constructor(e,i,u){this.lo=e,this.localStore=i,this.N=u,this.queries=[],this.documents=[],this.progress=Yh(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i),i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}wo(e){const i=new Map,u=new Tm(this.N);for(const g of e)if(g.metadata.queries){const b=u.zn(g.metadata.name);for(const x of g.metadata.queries){const B=(i.get(x)||Xr()).add(b);i.set(x,B)}}return i}complete(){var e=this;return(0,ye.Z)(function*(){const i=yield function(a,e,i,u){return wr.apply(this,arguments)}(e.localStore,new Tm(e.N),e.documents,e.lo.id),u=e.wo(e.documents);for(const g of e.queries)yield qp(e.localStore,g,u.get(g.name));return e.progress.taskState="Success",new by(Object.assign({},e.progress),i)})()}}function Yh(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class ug{constructor(e){this.key=e}}class ip{constructor(e){this.key=e}}class cg{constructor(e,i){this.query=e,this._o=i,this.mo=null,this.current=!1,this.yo=Xr(),this.mutatedKeys=Xr(),this.po=Sa(e),this.To=new po(this.po)}get Eo(){return this._o}Io(e,i){const u=i?i.Ao:new sg,g=i?i.To:this.To;let b=i?i.mutatedKeys:this.mutatedKeys,x=g,B=!1;const ee=au(this.query)&&g.size===this.query.limit?g.last():null,ve=za(this.query)&&g.size===this.query.limit?g.first():null;if(e.inorderTraversal((Fe,ut)=>{const Ut=g.get(Fe),Xt=Wu(this.query,ut)?ut:null,wn=!!Ut&&this.mutatedKeys.has(Ut.key),er=!!Xt&&(Xt.hasLocalMutations||this.mutatedKeys.has(Xt.key)&&Xt.hasCommittedMutations);let kr=!1;Ut&&Xt?Ut.data.isEqual(Xt.data)?wn!==er&&(u.track({type:3,doc:Xt}),kr=!0):this.Ro(Ut,Xt)||(u.track({type:2,doc:Xt}),kr=!0,(ee&&this.po(Xt,ee)>0||ve&&this.po(Xt,ve)<0)&&(B=!0)):!Ut&&Xt?(u.track({type:0,doc:Xt}),kr=!0):Ut&&!Xt&&(u.track({type:1,doc:Ut}),kr=!0,(ee||ve)&&(B=!0)),kr&&(Xt?(x=x.add(Xt),b=er?b.add(Fe):b.delete(Fe)):(x=x.delete(Fe),b=b.delete(Fe)))}),au(this.query)||za(this.query))for(;x.size>this.query.limit;){const Fe=au(this.query)?x.last():x.first();x=x.delete(Fe.key),b=b.delete(Fe.key),u.track({type:1,doc:Fe})}return{To:x,Ao:u,Ln:B,mutatedKeys:b}}Ro(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,u){const g=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const b=e.Ao.Yr();b.sort((ve,Fe)=>function(ut,Ut){const Xt=wn=>{switch(wn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mn()}};return Xt(ut)-Xt(Ut)}(ve.type,Fe.type)||this.po(ve.doc,Fe.doc)),this.bo(u);const x=i?this.Po():[],B=0===this.yo.size&&this.current?1:0,ee=B!==this.mo;return this.mo=B,0!==b.length||ee?{snapshot:new uc(this.query,e.To,g,b,e.mutatedKeys,0===B,ee,!1),vo:x}:{vo:x}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new sg,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(i=>this._o=this._o.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this._o=this._o.delete(i)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Xr(),this.To.forEach(u=>{this.Vo(u.key)&&(this.yo=this.yo.add(u.key))});const i=[];return e.forEach(u=>{this.yo.has(u)||i.push(new ip(u))}),this.yo.forEach(u=>{e.has(u)||i.push(new ug(u))}),i}So(e){this._o=e.Gn,this.yo=Xr();const i=this.Io(e.documents);return this.applyChanges(i,!0)}Do(){return uc.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class dg{constructor(e,i,u){this.query=e,this.targetId=i,this.view=u}}class vu{constructor(e){this.key=e,this.Co=!1}}class hg{constructor(e,i,u,g,b,x){this.localStore=e,this.remoteStore=i,this.eventManager=u,this.sharedClientState=g,this.currentUser=b,this.maxConcurrentLimboResolutions=x,this.No={},this.xo=new cd(B=>Ia(B),Ka),this.ko=new Map,this.$o=new Set,this.Oo=new Mi(Tn.comparator),this.Fo=new Map,this.Mo=new zo,this.Lo={},this.Bo=new Map,this.Uo=nc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function __(a,e){return fg.apply(this,arguments)}function fg(){return(fg=(0,ye.Z)(function*(a,e){const i=Sg(a);let u,g;const b=i.xo.get(e);if(b)u=b.targetId,i.sharedClientState.addLocalQueryTarget(u),g=b.view.Do();else{const x=yield gu(i.localStore,Ta(e)),B=i.sharedClientState.addLocalQueryTarget(x.targetId);u=x.targetId,g=yield Im(i,e,u,"current"===B),i.isPrimaryClient&&tg(i.remoteStore,x)}return g})).apply(this,arguments)}function Im(a,e,i,u){return sp.apply(this,arguments)}function sp(){return(sp=(0,ye.Z)(function*(a,e,i,u){a.Ko=(Fe,ut,Ut)=>{return(Xt=(0,ye.Z)(function*(wn,er,kr,io){let qu=er.view.Io(kr);qu.Ln&&(qu=yield Zf(wn.localStore,er.query,!1).then(({documents:Wc})=>er.view.Io(Wc,qu)));const _c=io&&io.targetChanges.get(er.targetId),qc=er.view.applyChanges(qu,wn.isPrimaryClient,_c);return bg(wn,er.targetId,qc.vo),qc.snapshot}),function(wn,er,kr,io){return Xt.apply(this,arguments)})(a,Fe,ut,Ut);var Xt};const g=yield Zf(a.localStore,e,!0),b=new cg(e,g.Gn),x=b.Io(g.documents),B=Nu.createSynthesizedTargetChangeForCurrentChange(i,u&&"Offline"!==a.onlineState),ee=b.applyChanges(x,a.isPrimaryClient,B);bg(a,i,ee.vo);const ve=new dg(e,i,b);return a.xo.set(e,ve),a.ko.has(i)?a.ko.get(i).push(e):a.ko.set(i,[e]),ee.snapshot})).apply(this,arguments)}function op(a,e){return pg.apply(this,arguments)}function pg(){return(pg=(0,ye.Z)(function*(a,e){const i=pn(a),u=i.xo.get(e),g=i.ko.get(u.targetId);if(g.length>1)return i.ko.set(u.targetId,g.filter(b=>!Ka(b,e))),void i.xo.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(u.targetId),i.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Jd(i.localStore,u.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(u.targetId),pd(i.remoteStore,u.targetId),Vc(i,u.targetId)}).catch(Mc))):(Vc(i,u.targetId),yield Jd(i.localStore,u.targetId,!0))})).apply(this,arguments)}function Ed(){return(Ed=(0,ye.Z)(function*(a,e,i){const u=fp(a);try{const g=yield function(b,x){const B=pn(b),ee=hr.now(),ve=x.reduce((ut,Ut)=>ut.add(Ut.key),Xr());let Fe;return B.persistence.runTransaction("Locally write mutations","readwrite",ut=>B.Qn.Pn(ut,ve).next(Ut=>{Fe=Ut;const Xt=[];for(const wn of x){const er=uu(wn,Fe.get(wn.key));null!=er&&Xt.push(new Ja(wn.key,er,ou(er.value.mapValue),Bi.exists(!0)))}return B.In.addMutationBatch(ut,ee,Xt,x)})).then(ut=>(ut.applyToLocalDocumentSet(Fe),{batchId:ut.batchId,changes:Fe}))}(u.localStore,e);u.sharedClientState.addPendingMutation(g.batchId),function(b,x,B){let ee=b.Lo[b.currentUser.toKey()];ee||(ee=new Mi(gr)),ee=ee.insert(x,B),b.Lo[b.currentUser.toKey()]=ee}(u,g.batchId,i),yield Ko(u,g.changes),yield _u(u.remoteStore)}catch(g){const b=th(g,"Failed to persist write");i.reject(b)}})).apply(this,arguments)}function ap(a,e){return sh.apply(this,arguments)}function sh(){return(sh=(0,ye.Z)(function*(a,e){const i=pn(a);try{const u=yield Fc(i.localStore,e);e.targetChanges.forEach((g,b)=>{const x=i.Fo.get(b);x&&($n(g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size<=1),g.addedDocuments.size>0?x.Co=!0:g.modifiedDocuments.size>0?$n(x.Co):g.removedDocuments.size>0&&($n(x.Co),x.Co=!1))}),yield Ko(i,u,e)}catch(u){yield Mc(u)}})).apply(this,arguments)}function Qh(a,e,i){const u=pn(a);if(u.isPrimaryClient&&0===i||!u.isPrimaryClient&&1===i){const g=[];u.xo.forEach((b,x)=>{const B=x.view.eo(e);B.snapshot&&g.push(B.snapshot)}),function(b,x){const B=pn(b);B.onlineState=x;let ee=!1;B.queries.forEach((ve,Fe)=>{for(const ut of Fe.listeners)ut.eo(x)&&(ee=!0)}),ee&&ih(B)}(u.eventManager,e),g.length&&u.No.Er(g),u.onlineState=e,u.isPrimaryClient&&u.sharedClientState.setOnlineState(e)}}function gg(a,e,i){return mg.apply(this,arguments)}function mg(){return(mg=(0,ye.Z)(function*(a,e,i){const u=pn(a);u.sharedClientState.updateQueryState(e,"rejected",i);const g=u.Fo.get(e),b=g&&g.key;if(b){let x=new Mi(Tn.comparator);x=x.insert(b,Ni.newNoDocument(b,Hn.min()));const B=Xr().add(b),ee=new wl(Hn.min(),new Map,new os(gr),x,B);yield ap(u,ee),u.Oo=u.Oo.remove(b),u.Fo.delete(e),wg(u)}else yield Jd(u.localStore,e,!1).then(()=>Vc(u,e,i)).catch(Mc)})).apply(this,arguments)}function _g(a,e){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,ye.Z)(function*(a,e){const i=pn(a),u=e.batch.batchId;try{const g=yield dm(i.localStore,e);vg(i,u,null),Xh(i,u),i.sharedClientState.updateMutationState(u,"acknowledged"),yield Ko(i,g)}catch(g){yield Mc(g)}})).apply(this,arguments)}function lp(a,e,i){return yg.apply(this,arguments)}function yg(){return(yg=(0,ye.Z)(function*(a,e,i){const u=pn(a);try{const g=yield function(b,x){const B=pn(b);return B.persistence.runTransaction("Reject batch","readwrite-primary",ee=>{let ve;return B.In.lookupMutationBatch(ee,x).next(Fe=>($n(null!==Fe),ve=Fe.keys(),B.In.removeMutationBatch(ee,Fe))).next(()=>B.In.performConsistencyCheck(ee)).next(()=>B.Qn.Pn(ee,ve))})}(u.localStore,e);vg(u,e,i),Xh(u,e),u.sharedClientState.updateMutationState(e,"rejected",i),yield Ko(u,g)}catch(g){yield Mc(g)}})).apply(this,arguments)}function bd(){return(bd=(0,ye.Z)(function*(a,e){const i=pn(a);Ra(i.remoteStore)||un("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const u=yield function(b){const x=pn(b);return x.persistence.runTransaction("Get highest unacknowledged batch id","readonly",B=>x.In.getHighestUnacknowledgedBatchId(B))}(i.localStore);if(-1===u)return void e.resolve();const g=i.Bo.get(u)||[];g.push(e),i.Bo.set(u,g)}catch(u){const g=th(u,"Initialization of waitForPendingWrites() operation failed");e.reject(g)}})).apply(this,arguments)}function Xh(a,e){(a.Bo.get(e)||[]).forEach(i=>{i.resolve()}),a.Bo.delete(e)}function vg(a,e,i){const u=pn(a);let g=u.Lo[u.currentUser.toKey()];if(g){const b=g.get(e);b&&(i?b.reject(i):b.resolve(),g=g.remove(e)),u.Lo[u.currentUser.toKey()]=g}}function Vc(a,e,i=null){a.sharedClientState.removeLocalQueryTarget(e);for(const u of a.ko.get(e))a.xo.delete(u),i&&a.No.jo(u,i);a.ko.delete(e),a.isPrimaryClient&&a.Mo.cs(e).forEach(u=>{a.Mo.containsKey(u)||Eg(a,u)})}function Eg(a,e){a.$o.delete(e.path.canonicalString());const i=a.Oo.get(e);null!==i&&(pd(a.remoteStore,i),a.Oo=a.Oo.remove(e),a.Fo.delete(i),wg(a))}function bg(a,e,i){for(const u of i)u instanceof ug?(a.Mo.addReference(u.key,e),cp(a,u)):u instanceof ip?(un("SyncEngine","Document no longer in limbo: "+u.key),a.Mo.removeReference(u.key,e),a.Mo.containsKey(u.key)||Eg(a,u.key)):Mn()}function cp(a,e){const i=e.key,u=i.path.canonicalString();a.Oo.get(i)||a.$o.has(u)||(un("SyncEngine","New document in limbo: "+i),a.$o.add(u),wg(a))}function wg(a){for(;a.$o.size>0&&a.Oo.size<a.maxConcurrentLimboResolutions;){const e=a.$o.values().next().value;a.$o.delete(e);const i=new Tn(br.fromString(e)),u=a.Uo.next();a.Fo.set(u,new vu(i)),a.Oo=a.Oo.insert(i,u),tg(a.remoteStore,new ad(Ta(To(i.path)),u,2,ss.T))}}function Ko(a,e,i){return ef.apply(this,arguments)}function ef(){return(ef=(0,ye.Z)(function*(a,e,i){const u=pn(a),g=[],b=[],x=[];var B;u.xo.isEmpty()||(u.xo.forEach((B,ee)=>{x.push(u.Ko(ee,e,i).then(ve=>{if(ve){u.isPrimaryClient&&u.sharedClientState.updateQueryState(ee.targetId,ve.fromCache?"not-current":"current"),g.push(ve);const Fe=$f.kn(ee.targetId,ve);b.push(Fe)}}))}),yield Promise.all(x),u.No.Er(g),yield(B=(0,ye.Z)(function*(ee,ve){const Fe=pn(ee);try{yield Fe.persistence.runTransaction("notifyLocalViewChanges","readwrite",ut=>tn.forEach(ve,Ut=>tn.forEach(Ut.Nn,Xt=>Fe.persistence.referenceDelegate.addReference(ut,Ut.targetId,Xt)).next(()=>tn.forEach(Ut.xn,Xt=>Fe.persistence.referenceDelegate.removeReference(ut,Ut.targetId,Xt)))))}catch(ut){if(!fu(ut))throw ut;un("LocalStore","Failed to update sequence numbers: "+ut)}for(const ut of ve){const Ut=ut.targetId;if(!ut.fromCache){const Xt=Fe.Un.get(Ut),er=Xt.withLastLimboFreeSnapshotVersion(Xt.snapshotVersion);Fe.Un=Fe.Un.insert(Ut,er)}}}),function(ee,ve){return B.apply(this,arguments)})(u.localStore,b))})).apply(this,arguments)}function y_(a,e){return Cg.apply(this,arguments)}function Cg(){return(Cg=(0,ye.Z)(function*(a,e){const i=pn(a);if(!i.currentUser.isEqual(e)){un("SyncEngine","User change. New user:",e.toKey());const u=yield jp(i.localStore,e);i.currentUser=e,(g=i).Bo.forEach(x=>{x.forEach(B=>{B.reject(new zt(St.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),g.Bo.clear(),i.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),yield Ko(i,u.Wn)}var g})).apply(this,arguments)}function v_(a,e){const i=pn(a),u=i.Fo.get(e);if(u&&u.Co)return Xr().add(u.key);{let g=Xr();const b=i.ko.get(e);if(!b)return g;for(const x of b){const B=i.xo.get(x);g=g.unionWith(B.view.Eo)}return g}}function Bc(a,e){return tf.apply(this,arguments)}function tf(){return(tf=(0,ye.Z)(function*(a,e){const i=pn(a),u=yield Zf(i.localStore,e.query,!0),g=e.view.So(u);return i.isPrimaryClient&&bg(i,e.targetId,g.vo),g})).apply(this,arguments)}function nf(a){return wd.apply(this,arguments)}function wd(){return(wd=(0,ye.Z)(function*(a){const e=pn(a);return Zp(e.localStore).then(i=>Ko(e,i))})).apply(this,arguments)}function E_(a,e,i,u){return rf.apply(this,arguments)}function rf(){return(rf=(0,ye.Z)(function*(a,e,i,u){const g=pn(a),b=yield function(x,B){const ee=pn(x),ve=pn(ee.In);return ee.persistence.runTransaction("Lookup mutation documents","readonly",Fe=>ve.Xt(Fe,B).next(ut=>ut?ee.Qn.Pn(Fe,ut):tn.resolve(null)))}(g.localStore,e);var B;null!==b?("pending"===i?yield _u(g.remoteStore):"acknowledged"===i||"rejected"===i?(vg(g,e,u||null),Xh(g,e),B=e,pn(pn(g.localStore).In).te(B)):Mn(),yield Ko(g,b)):un("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function dp(){return(dp=(0,ye.Z)(function*(a,e){const i=pn(a);if(Sg(i),fp(i),!0===e&&!0!==i.qo){const u=i.sharedClientState.getAllActiveQueryTargets(),g=yield Tg(i,u.toArray());i.qo=!0,yield Wh(i.remoteStore,!0);for(const b of g)tg(i.remoteStore,b)}else if(!1===e&&!1!==i.qo){const u=[];let g=Promise.resolve();i.ko.forEach((b,x)=>{i.sharedClientState.isLocalQueryTarget(x)?u.push(x):g=g.then(()=>(Vc(i,x),Jd(i.localStore,x,!0))),pd(i.remoteStore,x)}),yield g,yield Tg(i,u),function(b){const x=pn(b);x.Fo.forEach((B,ee)=>{pd(x.remoteStore,ee)}),x.Mo.us(),x.Fo=new Map,x.Oo=new Mi(Tn.comparator)}(i),i.qo=!1,yield Wh(i.remoteStore,!1)}})).apply(this,arguments)}function Tg(a,e,i){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ye.Z)(function*(a,e,i){const u=pn(a),g=[],b=[];for(const x of e){let B;const ee=u.ko.get(x);if(ee&&0!==ee.length){B=yield gu(u.localStore,Ta(ee[0]));for(const ve of ee){const Fe=u.xo.get(ve),ut=yield Bc(u,Fe);ut.snapshot&&b.push(ut.snapshot)}}else{const ve=yield fm(u.localStore,x);B=yield gu(u.localStore,ve),yield Im(u,sf(ve),x,!1)}g.push(B)}return u.No.Er(b),g})).apply(this,arguments)}function sf(a){return Ds(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function b_(a){const e=pn(a);return pn(pn(e.localStore).persistence).pn()}function Am(a,e,i,u){return af.apply(this,arguments)}function af(){return(af=(0,ye.Z)(function*(a,e,i,u){const g=pn(a);if(g.qo)un("SyncEngine","Ignoring unexpected query state notification.");else if(g.ko.has(e))switch(i){case"current":case"not-current":{const b=yield Zp(g.localStore),x=wl.createSynthesizedRemoteEventForCurrentChange(e,"current"===i);yield Ko(g,b,x);break}case"rejected":yield Jd(g.localStore,e,!0),Vc(g,e,u);break;default:Mn()}})).apply(this,arguments)}function oh(a,e,i){return hp.apply(this,arguments)}function hp(){return(hp=(0,ye.Z)(function*(a,e,i){const u=Sg(a);if(u.qo){for(const g of e){if(u.ko.has(g)){un("SyncEngine","Adding an already active target "+g);continue}const b=yield fm(u.localStore,g),x=yield gu(u.localStore,b);yield Im(u,sf(b),x.targetId,!1),tg(u.remoteStore,x)}for(const g of i)u.ko.has(g)&&(yield Jd(u.localStore,g,!1).then(()=>{pd(u.remoteStore,g),Vc(u,g)}).catch(Mc))}})).apply(this,arguments)}function Sg(a){const e=pn(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=ap.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gg.bind(null,e),e.No.Er=nl.bind(null,e.eventManager),e.No.jo=ag.bind(null,e.eventManager),e}function fp(a){const e=pn(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_g.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lp.bind(null,e),e}class Sl{constructor(){this.synchronizeTabs=!1}initialize(e){var i=this;return(0,ye.Z)(function*(){i.N=mu(e.databaseInfo.databaseId),i.sharedClientState=i.Wo(e),i.persistence=i.Go(e),yield i.persistence.start(),i.gcScheduler=i.zo(e),i.localStore=i.Ho(e)})()}zo(e){return null}Ho(e){return cm(this.persistence,new Hf,e.initialUser,this.N)}Go(e){return new zp(gm.Ns,this.N)}Wo(e){return new p_}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pp extends Sl{constructor(e,i,u){super(),this.Jo=e,this.cacheSizeBytes=i,this.forceOwnership=u,this.synchronizeTabs=!1}initialize(e){var i=()=>super.initialize,u=this;return(0,ye.Z)(function*(){yield i().call(u,e),yield function(a){return Gp.apply(this,arguments)}(u.localStore),yield u.Jo.initialize(u,e),yield fp(u.Jo.syncEngine),yield _u(u.Jo.remoteStore),yield u.persistence.nn(()=>(u.gcScheduler&&!u.gcScheduler.started&&u.gcScheduler.start(u.localStore),Promise.resolve()))})()}Ho(e){return cm(this.persistence,new Hf,e.initialUser,this.N)}zo(e){return new Up(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const i=jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?ga.withCacheSize(this.cacheSizeBytes):ga.DEFAULT;return new Fh(this.synchronizeTabs,i,e.clientId,u,e.asyncQueue,Vh(),Bh(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new p_}}class lf extends pp{constructor(e,i){super(e,i,!1),this.Jo=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){var i=()=>super.initialize,u=this;return(0,ye.Z)(function*(){yield i().call(u,e);const g=u.Jo.syncEngine;u.sharedClientState instanceof Wf&&(u.sharedClientState.syncEngine={_i:E_.bind(null,g),mi:Am.bind(null,g),gi:oh.bind(null,g),pn:b_.bind(null,g),wi:nf.bind(null,g)},yield u.sharedClientState.start()),yield u.persistence.nn(function(){var b=(0,ye.Z)(function*(x){yield function(a,e){return dp.apply(this,arguments)}(u.Jo.syncEngine,x),u.gcScheduler&&(x&&!u.gcScheduler.started?u.gcScheduler.start(u.localStore):x||u.gcScheduler.stop())});return function(x){return b.apply(this,arguments)}}())})()}Wo(e){const i=Vh();if(!Wf.bt(i))throw new zt(St.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const u=jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wf(i,e.asyncQueue,u,e.clientId,e.initialUser)}}class uf{initialize(e,i){var u=this;return(0,ye.Z)(function*(){u.localStore||(u.localStore=e.localStore,u.sharedClientState=e.sharedClientState,u.datastore=u.createDatastore(i),u.remoteStore=u.createRemoteStore(i),u.eventManager=u.createEventManager(i),u.syncEngine=u.createSyncEngine(i,!e.synchronizeTabs),u.sharedClientState.onlineStateHandler=g=>Qh(u.syncEngine,g,1),u.remoteStore.remoteSyncer.handleCredentialChange=y_.bind(null,u.syncEngine),yield Wh(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wy}createDatastore(e){const i=mu(e.databaseInfo.databaseId),u=new es(e.databaseInfo);return new jl(e.credentials,u,i)}createRemoteStore(e){return i=this.localStore,u=this.datastore,g=e.asyncQueue,b=B=>Qh(this.syncEngine,B,0),x=_m.bt()?new _m:new g_,new bm(i,u,g,b,x);var i,u,g,b,x}createSyncEngine(e,i){return function(u,g,b,x,B,ee,ve){const Fe=new hg(u,g,b,x,B,ee);return ve&&(Fe.qo=!0),Fe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return(e=(0,ye.Z)(function*(i){const u=pn(i);un("RemoteStore","RemoteStore shutting down."),u.Kr.add(5),yield $l(u),u.Qr.shutdown(),u.Wr.set("Unknown")}),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function w_(a,e=10240){let i=0;return{read:()=>(0,ye.Z)(function*(){if(i<a.byteLength){const u={value:a.slice(i,i+e),done:!1};return i+=e,u}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}class mp{constructor(e,i){this.Zo=e,this.N=i,this.metadata=new _i,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(u=>{u&&u.ho()?this.metadata.resolve(u.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==u?void 0:u.payload)}`))},u=>this.metadata.reject(u))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,ye.Z)(function*(){const i=yield e.na();if(null===i)return null;const u=e.ta.decode(i),g=Number(u);isNaN(g)&&e.sa(`length string (${u}) is not valid number`);const b=yield e.ia(g);return new Cm(JSON.parse(b),i.length+g)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,ye.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const i=e.ra();i<0&&e.sa("Reached the end of bundle when a length string is expected.");const u=e.buffer.slice(0,i);return e.buffer=e.buffer.slice(i),u})()}ia(e){var i=this;return(0,ye.Z)(function*(){for(;i.buffer.length<e;)(yield i.oa())&&i.sa("Reached the end of bundle when more is expected.");const u=i.ta.decode(i.buffer.slice(0,e));return i.buffer=i.buffer.slice(e),u})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,ye.Z)(function*(){const i=yield e.Zo.read();if(!i.done){const u=new Uint8Array(e.buffer.length+i.value.length);u.set(e.buffer),u.set(i.value,e.buffer.length),e.buffer=u}return i.done})()}}class Rs{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var i=this;return(0,ye.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new zt(St.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield(g=(0,ye.Z)(function*(b,x){const B=pn(b),ee=Lu(B.N)+"/documents",ve={documents:x.map(Xt=>ku(B.N,Xt))},Fe=yield B.Ki("BatchGetDocuments",ee,ve),ut=new Map;Fe.forEach(Xt=>{const wn=function(a,e){return"found"in e?function(i,u){$n(!!u.found);const g=Xa(i,u.found.name),b=yi(u.found.updateTime),x=new Ci({mapValue:{fields:u.found.fields}});return Ni.newFoundDocument(g,b,x)}(a,e):"missing"in e?function(i,u){$n(!!u.missing),$n(!!u.readTime);const g=Xa(i,u.missing),b=yi(u.readTime);return Ni.newNoDocument(g,b)}(a,e):Mn()}(B.N,Xt);ut.set(wn.key.toString(),wn)});const Ut=[];return x.forEach(Xt=>{const wn=ut.get(Xt.toString());$n(!!wn),Ut.push(wn)}),Ut}),function(b,x){return g.apply(this,arguments)})(i.datastore,e);var g;return u.forEach(g=>i.recordVersion(g)),u})()}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(e.toString())}delete(e){this.write(new rd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;var u;e.mutations.forEach(u=>{i.delete(u.key.toString())}),i.forEach((u,g)=>{const b=Tn.fromPath(g);e.mutations.push(new So(b,e.precondition(b)))}),yield(u=(0,ye.Z)(function*(g,b){const x=pn(g),B=Lu(x.N)+"/documents",ee={writes:b.map(ve=>Tl(x.N,ve))};yield x.Li("Commit",B,ee)}),function(g,b){return u.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw Mn();i=Hn.min()}const u=this.readVersions.get(e.key.toString());if(u){if(!i.isEqual(u))throw new zt(St.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){const i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?Bi.updateTime(i):Bi.none()}preconditionForUpdate(e){const i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(Hn.min()))throw new zt(St.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bi.updateTime(i)}return Bi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ag{constructor(e,i,u,g){this.asyncQueue=e,this.datastore=i,this.updateFunction=u,this.deferred=g,this.aa=5,this.rr=new Jp(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,ye.Z)(function*(){const i=new Rs(e.datastore),u=e.ua(i);u&&u.then(g=>{e.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{e.deferred.resolve(g)}).catch(b=>{e.ha(b)}))}).catch(g=>{e.ha(g)})}))}ua(e){try{const i=this.updateFunction(e);return!Zn(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const i=e.code;return"aborted"===i||"failed-precondition"===i||!Tf(i)}return!1}}class Dg{constructor(e,i,u){var g=this;this.credentials=e,this.asyncQueue=i,this.databaseInfo=u,this.user=mi.UNAUTHENTICATED,this.clientId=Ha.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(i,function(){var b=(0,ye.Z)(function*(x){un("FirestoreClient","Received user=",x.uid),yield g.credentialListener(x),g.user=x});return function(x){return b.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zt(St.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const i=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),i.resolve()}catch(u){const g=th(u,"Failed to shutdown persistence");i.reject(g)}})),i.promise}}function Bu(a,e){return lh.apply(this,arguments)}function lh(){return(lh=(0,ye.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),un("FirestoreClient","Initializing OfflineComponentProvider");const i=yield a.getConfiguration();yield e.initialize(i);let u=i.initialUser;a.setCredentialChangeListener(function(){var g=(0,ye.Z)(function*(b){u.isEqual(b)||(yield jp(e.localStore,b),u=b)});return function(b){return g.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a.offlineComponents=e})).apply(this,arguments)}function cf(a,e){return xg.apply(this,arguments)}function xg(){return(xg=(0,ye.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const i=yield uh(a);un("FirestoreClient","Initializing OnlineComponentProvider");const u=yield a.getConfiguration();yield e.initialize(i,u),a.setCredentialChangeListener(g=>{return(b=(0,ye.Z)(function*(x,B){const ee=pn(x);ee.asyncQueue.verifyOperationInProgress(),un("RemoteStore","RemoteStore received new credentials");const ve=Ra(ee);ee.Kr.add(3),yield $l(ee),ve&&ee.Wr.set("Unknown"),yield ee.remoteSyncer.handleCredentialChange(B),ee.Kr.delete(3),yield eg(ee)}),function(x,B){return b.apply(this,arguments)})(e.remoteStore,g);var b}),a.onlineComponents=e})).apply(this,arguments)}function uh(a){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,ye.Z)(function*(a){return a.offlineComponents||(un("FirestoreClient","Using default OfflineComponentProvider"),yield Bu(a,new Sl)),a.offlineComponents})).apply(this,arguments)}function ma(a){return cc.apply(this,arguments)}function cc(){return(cc=(0,ye.Z)(function*(a){return a.onlineComponents||(un("FirestoreClient","Using default OnlineComponentProvider"),yield cf(a,new uf)),a.onlineComponents})).apply(this,arguments)}function Rg(a){return uh(a).then(e=>e.persistence)}function _p(a){return uh(a).then(e=>e.localStore)}function Pg(a){return ma(a).then(e=>e.remoteStore)}function Og(a){return ma(a).then(e=>e.syncEngine)}function Eu(a){return jc.apply(this,arguments)}function jc(){return(jc=(0,ye.Z)(function*(a){const e=yield ma(a),i=e.eventManager;return i.onListen=__.bind(null,e.syncEngine),i.onUnlisten=op.bind(null,e.syncEngine),i})).apply(this,arguments)}function Mg(a,e,i={}){const u=new _i;return a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(g,b,x,B,ee){const ve=new gp({next:ut=>{b.enqueueAndForget(()=>rp(g,Fe));const Ut=ut.docs.has(x);!Ut&&ut.fromCache?ee.reject(new zt(St.UNAVAILABLE,"Failed to get document because the client is offline.")):Ut&&ut.fromCache&&B&&"server"===B.source?ee.reject(new zt(St.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ee.resolve(ut)},error:ut=>ee.reject(ut)}),Fe=new lg(To(x.path),ve,{includeMetadataChanges:!0,uo:!0});return nh(g,Fe)}(yield Eu(a),a.asyncQueue,e,i,u)})),u.promise}function kg(a,e,i={}){const u=new _i;return a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(g,b,x,B,ee){const ve=new gp({next:ut=>{b.enqueueAndForget(()=>rp(g,Fe)),ut.fromCache&&"server"===B.source?ee.reject(new zt(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ee.resolve(ut)},error:ut=>ee.reject(ut)}),Fe=new lg(x,ve,{includeMetadataChanges:!0,uo:!0});return nh(g,Fe)}(yield Eu(a),a.asyncQueue,e,i,u)})),u.promise}class Om{constructor(e,i,u,g,b,x,B,ee){this.databaseId=e,this.appId=i,this.persistenceKey=u,this.host=g,this.ssl=b,this.forceLongPolling=x,this.autoDetectLongPolling=B,this.useFetchStreams=ee}}class ch{constructor(e,i){this.projectId=e,this.database=i||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ch&&e.projectId===this.projectId&&e.database===this.database}}const Fg=new Map;function vp(a,e,i){if(!i)throw new zt(St.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Nm(a,e,i,u){if(!0===e&&!0===u)throw new zt(St.INVALID_ARGUMENT,`${a} and ${i} cannot be used together.`)}function Cd(a){if(!Tn.isDocumentKey(a))throw new zt(St.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Ep(a){if(Tn.isDocumentKey(a))throw new zt(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function df(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(i=a).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof a?"a function":Mn()}function ci(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new zt(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=df(a);throw new zt(St.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return a}function S_(a,e){if(e<=0)throw new zt(St.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class Al{constructor(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new zt(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zt(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Nm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bp{constructor(e,i){this._credentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Al({}),this._settingsFrozen=!1,e instanceof ch?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new zt(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ch(u.options.projectId)}(e))}get app(){if(!this._app)throw new zt(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zt(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Al(e),void 0!==e.credentials&&(this._credentials=function(i){if(!i)return new aa;switch(i.type){case"gapi":const u=i.client;return $n(!("object"!=typeof u||null===u||!u.auth||!u.auth.getAuthHeaderValueForFirstParty)),new pl(u,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new zt(St.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Fg.get(e);i&&(un("ComponentProvider","Removing Datastore"),Fg.delete(e),i.terminate())}(this),Promise.resolve()}}class ys{constructor(e,i,u){this.converter=i,this._key=u,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ys(this.firestore,e,this._key)}}class Fo{constructor(e,i,u){this.converter=i,this._query=u,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class bu extends Fo{constructor(e,i,u){super(e,i,To(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ys(this.firestore,null,new Tn(e))}withConverter(e){return new bu(this.firestore,e,this._path)}}function Lg(a,e,...i){if(a=(0,ce.m9)(a),vp("collection","path",e),a instanceof bp){const u=br.fromString(e,...i);return Ep(u),new bu(a,null,u)}{if(!(a instanceof ys||a instanceof bu))throw new zt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=a._path.child(br.fromString(e,...i));return Ep(u),new bu(a.firestore,null,u)}}function wp(a,e,...i){if(a=(0,ce.m9)(a),1===arguments.length&&(e=Ha.I()),vp("doc","path",e),a instanceof bp){const u=br.fromString(e,...i);return Cd(u),new ys(a,null,new Tn(u))}{if(!(a instanceof ys||a instanceof bu))throw new zt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=a._path.child(br.fromString(e,...i));return Cd(u),new ys(a.firestore,a instanceof bu?a.converter:null,new Tn(u))}}function Mm(a,e){return a=(0,ce.m9)(a),e=(0,ce.m9)(e),(a instanceof ys||a instanceof bu)&&(e instanceof ys||e instanceof bu)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function hf(a,e){return a=(0,ce.m9)(a),e=(0,ce.m9)(e),a instanceof Fo&&e instanceof Fo&&a.firestore===e.firestore&&Ka(a._query,e._query)&&a.converter===e.converter}class D_{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Jp(this,"async_queue_retry"),this.Ta=()=>{const i=Bh();i&&un("AsyncQueue","Visibility state changed to "+i.visibilityState),this.rr.tr()};const e=Bh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const i=Bh();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const i=new _i;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,ye.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(i){if(!fu(i))throw i;un("AsyncQueue","Operation failed with retryable error: "+i)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const i=this.fa.then(()=>(this.ga=!0,e().catch(u=>{throw this.ma=u,this.ga=!1,ui("INTERNAL UNHANDLED ERROR: ",function(b){let x=b.message||"";return b.stack&&(x=b.stack.includes(b.message)?b.stack:b.message+"\n"+b.stack),x}(u)),u}).then(u=>(this.ga=!1,u))));return this.fa=i,i}enqueueAfterDelay(e,i,u){this.Ea(),this.pa.indexOf(e)>-1&&(i=0);const g=yd.createAndSchedule(this,e,i,u,b=>this.Ra(b));return this._a.push(g),g}Ea(){this.ma&&Mn()}verifyOperationInProgress(){}ba(){var e=this;return(0,ye.Z)(function*(){let i;do{i=e.fa,yield i}while(i!==e.fa)})()}Pa(e){for(const i of this._a)if(i.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((i,u)=>i.targetTimeMs-u.targetTimeMs);for(const i of this._a)if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const i=this._a.indexOf(e);this._a.splice(i,1)}}function ff(a){return function(e,i){if("object"!=typeof e||null===e)return!1;const u=e;for(const g of["next","error","complete"])if(g in u&&"function"==typeof u[g])return!0;return!1}(a)}class km{constructor(){this._progressObserver={},this._taskCompletionResolver=new _i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,u){this._progressObserver={next:e,error:i,complete:u}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qs extends bp{constructor(e,i){super(e,i),this.type="firestore",this._queue=new D_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dh(this),this._firestoreClient.terminate()}}function Ws(a){return a._firestoreClient||dh(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function dh(a){var e;const i=a._freezeSettings(),u=(b=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new Om(a._databaseId,b,a._persistenceKey,(B=i).host,B.ssl,B.experimentalForceLongPolling,B.experimentalAutoDetectLongPolling,B.useFetchStreams));var b,B;a._firestoreClient=new Dg(a._credentials,a._queue,u)}function Hl(a,e,i){const u=new _i;return a.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Bu(a,i),yield cf(a,e),u.resolve()}catch(g){if(!("FirebaseError"===(b=g).name?b.code===St.FAILED_PRECONDITION||b.code===St.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&b instanceof DOMException)||22===b.code||20===b.code||11===b.code))throw g;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+g),u.reject(g)}var b})).then(()=>u.promise)}function hc(a){if(a._initialized||a._terminated)throw new zt(St.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dl{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new zt(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new P(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gl(M.fromBase64String(e))}catch(i){throw new zt(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Gl(M.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wu{constructor(e){this._methodName=e}}class fc{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new zt(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new zt(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gr(this._lat,e._lat)||gr(this._long,e._long)}}const fh=/^__.*__$/;class c{constructor(e,i,u){this.data=e,this.fieldMask=i,this.fieldTransforms=u}toMutation(e,i){return null!==this.fieldMask?new Ja(e,this.data,this.fieldMask,i,this.fieldTransforms):new Ju(e,this.data,i,this.fieldTransforms)}}class o{constructor(e,i,u){this.data=e,this.fieldMask=i,this.fieldTransforms=u}toMutation(e,i){return new Ja(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function s(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mn()}}class h{constructor(e,i,u,g,b,x){this.settings=e,this.databaseId=i,this.N=u,this.ignoreUndefinedProperties=g,void 0===b&&this.Sa(),this.fieldTransforms=b||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new h(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var i;const u=null===(i=this.path)||void 0===i?void 0:i.child(e),g=this.Ca({path:u,xa:!1});return g.ka(e),g}$a(e){var i;const u=null===(i=this.path)||void 0===i?void 0:i.child(e),g=this.Ca({path:u,xa:!1});return g.Sa(),g}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Do(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(s(this.Da)&&fh.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class _{constructor(e,i,u){this.databaseId=e,this.ignoreUndefinedProperties=i,this.N=u||mu(e)}Ba(e,i,u,g=!1){return new h({Da:e,methodName:i,La:u,path:P.emptyPath(),xa:!1,Ma:g},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function w(a){const e=a._freezeSettings(),i=mu(a._databaseId);return new _(a._databaseId,!!e.ignoreUndefinedProperties,i)}function D(a,e,i,u,g,b={}){const x=a.Ba(b.merge||b.mergeFields?2:0,e,i,g);vs("Data must be an object, but it was:",x,u);const B=xi(u,x);let ee,ve;if(b.merge)ee=new S(x.fieldMask),ve=x.fieldTransforms;else if(b.mergeFields){const Fe=[];for(const ut of b.mergeFields){const Ut=ro(e,ut,i);if(!x.contains(Ut))throw new zt(St.INVALID_ARGUMENT,`Field '${Ut}' is specified in your field mask but missing from your input data.`);ju(Fe,Ut)||Fe.push(Ut)}ee=new S(Fe),ve=x.fieldTransforms.filter(ut=>ee.covers(ut.field))}else ee=null,ve=x.fieldTransforms;return new c(new Ci(B),ee,ve)}class U extends wu{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof U}}function Y(a,e,i){return new h({Da:3,La:e.settings.La,methodName:a._methodName,xa:i},e.databaseId,e.N,e.ignoreUndefinedProperties)}class ae extends wu{_toFieldTransform(e){return new Yu(e.path,new co)}isEqual(e){return e instanceof ae}}class $e extends wu{constructor(e,i){super(e),this.Ua=i}_toFieldTransform(e){const i=Y(this,e,!0),u=this.Ua.map(b=>Yn(b,i)),g=new Ya(u);return new Yu(e.path,g)}isEqual(e){return this===e}}class tt extends wu{constructor(e,i){super(e),this.Ua=i}_toFieldTransform(e){const i=Y(this,e,!0),u=this.Ua.map(b=>Yn(b,i)),g=new zu(u);return new Yu(e.path,g)}isEqual(e){return this===e}}class wt extends wu{constructor(e,i){super(e),this.qa=i}_toFieldTransform(e){const i=new Qa(e.N,ed(e.N,this.qa));return new Yu(e.path,i)}isEqual(e){return this===e}}function sn(a,e,i,u){const g=a.Ba(1,e,i);vs("Data must be an object, but it was:",g,u);const b=[],x=Ci.empty();Co(u,(ee,ve)=>{const Fe=ql(e,ee,i);ve=(0,ce.m9)(ve);const ut=g.$a(Fe);if(ve instanceof U)b.push(Fe);else{const Ut=Yn(ve,ut);null!=Ut&&(b.push(Fe),x.set(Fe,Ut))}});const B=new S(b);return new o(x,B,g.fieldTransforms)}function nn(a,e,i,u,g,b){const x=a.Ba(1,e,i),B=[ro(e,u,i)],ee=[g];if(b.length%2!=0)throw new zt(St.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ut=0;Ut<b.length;Ut+=2)B.push(ro(e,b[Ut])),ee.push(b[Ut+1]);const ve=[],Fe=Ci.empty();for(let Ut=B.length-1;Ut>=0;--Ut)if(!ju(ve,B[Ut])){const Xt=B[Ut];let wn=ee[Ut];wn=(0,ce.m9)(wn);const er=x.$a(Xt);if(wn instanceof U)ve.push(Xt);else{const kr=Yn(wn,er);null!=kr&&(ve.push(Xt),Fe.set(Xt,kr))}}const ut=new S(ve);return new o(Fe,ut,x.fieldTransforms)}function Dn(a,e,i,u=!1){return Yn(i,a.Ba(u?4:3,e))}function Yn(a,e){if(vi(a=(0,ce.m9)(a)))return vs("Unsupported field value:",e,a),xi(a,e);if(a instanceof wu)return function(i,u){if(!s(u.Da))throw u.Fa(`${i._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Fa(`${i._methodName}() is not currently supported inside arrays`);const g=i._toFieldTransform(u);g&&u.fieldTransforms.push(g)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(i,u){const g=[];let b=0;for(const x of i){let B=Yn(x,u.Oa(b));null==B&&(B={nullValue:"NULL_VALUE"}),g.push(B),b++}return{arrayValue:{values:g}}}(a,e)}return function(i,u){if(null===(i=(0,ce.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return ed(u.N,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const g=hr.fromDate(i);return{timestampValue:Cl(u.N,g)}}if(i instanceof hr){const g=new hr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cl(u.N,g)}}if(i instanceof fc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gl)return{bytesValue:Mu(u.N,i._byteString)};if(i instanceof ys){const g=u.databaseId,b=i.firestore._databaseId;if(!b.isEqual(g))throw u.Fa(`Document reference is for database ${b.projectId}/${b.database} but should be for database ${g.projectId}/${g.database}`);return{referenceValue:jd(i.firestore._databaseId||u.databaseId,i._key.path)}}throw u.Fa(`Unsupported field value: ${df(i)}`)}(a,e)}function xi(a,e){const i={};return ml(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(a,(u,g)=>{const b=Yn(g,e.Na(u));null!=b&&(i[u]=b)}),{mapValue:{fields:i}}}function vi(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof hr||a instanceof fc||a instanceof Gl||a instanceof ys||a instanceof wu)}function vs(a,e,i){if(!vi(i)||"object"!=typeof(u=i)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const u=df(i);throw e.Fa("an object"===u?a+" a custom object":a+" "+u)}var u}function ro(a,e,i){if((e=(0,ce.m9)(e))instanceof Dl)return e._internalPath;if("string"==typeof e)return ql(a,e);throw Do("Field path arguments must be of type string or FieldPath.",a,!1,void 0,i)}const mf=new RegExp("[~\\*/\\[\\]]");function ql(a,e,i){if(e.search(mf)>=0)throw Do(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,i);try{return new Dl(...e.split("."))._internalPath}catch(u){throw Do(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,i)}}function Do(a,e,i,u,g){const b=u&&!u.isEmpty(),x=void 0!==g;let B=`Function ${e}() called with invalid data`;i&&(B+=" (via `toFirestore()`)"),B+=". ";let ee="";return(b||x)&&(ee+=" (found",b&&(ee+=` in field ${u}`),x&&(ee+=` in document ${g}`),ee+=")"),new zt(St.INVALID_ARGUMENT,B+a+ee)}function ju(a,e){return a.some(i=>i.isEqual(e))}class rl{constructor(e,i,u,g,b){this._firestore=e,this._userDataWriter=i,this._key=u,this._document=g,this._converter=b}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(_f("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class pc extends rl{data(){return super.data()}}function _f(a,e){return"string"==typeof e?ql(a,e):e instanceof Dl?e._internalPath:e._delegate._internalPath}class $u{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Na extends rl{constructor(e,i,u,g,b,x){super(e,i,u,g,x),this._firestore=e,this._firestoreImpl=e,this.metadata=b}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const u=this._document.data.field(_f("DocumentSnapshot.get",e));if(null!==u)return this._userDataWriter.convertValue(u,i.serverTimestamps)}}}class Td extends Na{data(e={}){return super.data(e)}}class $c{constructor(e,i,u,g){this._firestore=e,this._userDataWriter=i,this._snapshot=g,this.metadata=new $u(g.hasPendingWrites,g.fromCache),this.query=u}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(u=>{e.call(i,new Td(this._firestore,this._userDataWriter,u.key,u,new $u(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new zt(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(u,g){if(u._snapshot.oldDocs.isEmpty()){let b=0;return u._snapshot.docChanges.map(x=>({type:"added",doc:new Td(u._firestore,u._userDataWriter,x.doc.key,x.doc,new $u(u._snapshot.mutatedKeys.has(x.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:b++}))}{let b=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(x=>g||3!==x.type).map(x=>{const B=new Td(u._firestore,u._userDataWriter,x.doc.key,x.doc,new $u(u._snapshot.mutatedKeys.has(x.doc.key),u._snapshot.fromCache),u.query.converter);let ee=-1,ve=-1;return 0!==x.type&&(ee=b.indexOf(x.doc.key),b=b.delete(x.doc.key)),1!==x.type&&(b=b.add(x.doc),ve=b.indexOf(x.doc.key)),{type:Gn(x.type),doc:B,oldIndex:ee,newIndex:ve}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function Gn(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mn()}}function dr(a,e){return a instanceof Na&&e instanceof Na?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof $c&&e instanceof $c&&a._firestore===e._firestore&&hf(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}function Ir(a){if(za(a)&&0===a.explicitOrderBy.length)throw new zt(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ti{}function Es(a,...e){for(const i of e)a=i._apply(a);return a}class Hu extends ti{constructor(e,i,u){super(),this.Ka=e,this.ja=i,this.Qa=u,this.type="where"}_apply(e){const i=w(e.firestore),u=function(g,b,x,B,ee,ve,Fe){let ut;if(ee.isKeyField()){if("array-contains"===ve||"array-contains-any"===ve)throw new zt(St.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ve}' queries on FieldPath.documentId().`);if("in"===ve||"not-in"===ve){k_(Fe,ve);const Xt=[];for(const wn of Fe)Xt.push(Sy(B,g,wn));ut={arrayValue:{values:Xt}}}else ut=Sy(B,g,Fe)}else"in"!==ve&&"not-in"!==ve&&"array-contains-any"!==ve||k_(Fe,ve),ut=Dn(x,"where",Fe,"in"===ve||"not-in"===ve);const Ut=qi.create(ee,ve,ut);return function(Xt,wn){if(wn.v()){const kr=Io(Xt);if(null!==kr&&!kr.isEqual(wn.field))throw new zt(St.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${kr.toString()}' and '${wn.field.toString()}'`);const io=Oo(Xt);null!==io&&Bg(0,wn.field,io)}const er=function(kr,io){for(const qu of kr.filters)if(io.indexOf(qu.op)>=0)return qu.op;return null}(Xt,function(kr){switch(kr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(wn.op));if(null!==er)throw new zt(St.INVALID_ARGUMENT,er===wn.op?`Invalid query. You cannot use more than one '${wn.op.toString()}' filter.`:`Invalid query. You cannot use '${wn.op.toString()}' filters with '${er.toString()}' filters.`)}(g,Ut),Ut}(e._query,0,i,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Fo(e.firestore,e.converter,function(g,b){const x=g.filters.concat([b]);return new As(g.path,g.collectionGroup,g.explicitOrderBy.slice(),x,g.limit,g.limitType,g.startAt,g.endAt)}(e._query,u))}}class Zu extends ti{constructor(e,i){super(),this.Ka=e,this.Wa=i,this.type="orderBy"}_apply(e){const i=function(u,g,b){if(null!==u.startAt)throw new zt(St.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new zt(St.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const x=new hn(g,b);return function(B,ee){if(null===Oo(B)){const ve=Io(B);null!==ve&&Bg(0,ve,ee.field)}}(u,x),x}(e._query,this.Ka,this.Wa);return new Fo(e.firestore,e.converter,function(u,g){const b=u.explicitOrderBy.concat([g]);return new As(u.path,u.collectionGroup,b,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,i))}}class N_ extends ti{constructor(e,i,u){super(),this.type=e,this.Ga=i,this.za=u}_apply(e){return new Fo(e.firestore,e.converter,Th(e._query,this.Ga,this.za))}}class yf extends ti{constructor(e,i,u){super(),this.type=e,this.Ha=i,this.Ja=u}_apply(e){const i=M_(e,this.type,this.Ha,this.Ja);return new Fo(e.firestore,e.converter,(g=i,new As((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,g,u.endAt)));var u,g}}class Iy extends ti{constructor(e,i,u){super(),this.type=e,this.Ha=i,this.Ja=u}_apply(e){const i=M_(e,this.type,this.Ha,this.Ja);return new Fo(e.firestore,e.converter,(g=i,new As((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,g)));var u,g}}function M_(a,e,i,u){if(i[0]=(0,ce.m9)(i[0]),i[0]instanceof rl)return function(g,b,x,B,ee){if(!B)throw new zt(St.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${x}().`);const ve=[];for(const Fe of Wi(g))if(Fe.field.isKeyField())ve.push(Za(b,B.key));else{const ut=B.data.field(Fe.field);if(Lt(ut))throw new zt(St.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Fe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ut){const Ut=Fe.field.canonicalString();throw new zt(St.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ut}' (used as the orderBy) does not exist.`)}ve.push(ut)}return new Jt(ve,ee)}(a._query,a.firestore._databaseId,e,i[0]._document,u);{const g=w(a.firestore);return function(b,x,B,ee,ve,Fe){const ut=b.explicitOrderBy;if(ve.length>ut.length)throw new zt(St.INVALID_ARGUMENT,`Too many arguments provided to ${ee}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ut=[];for(let Xt=0;Xt<ve.length;Xt++){const wn=ve[Xt];if(ut[Xt].field.isKeyField()){if("string"!=typeof wn)throw new zt(St.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${ee}(), but got a ${typeof wn}`);if(!Pu(b)&&-1!==wn.indexOf("/"))throw new zt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${ee}() must be a plain document ID, but '${wn}' contains a slash.`);const er=b.path.child(br.fromString(wn));if(!Tn.isDocumentKey(er))throw new zt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${ee}() must result in a valid document path, but '${er}' is not because it contains an odd number of segments.`);const kr=new Tn(er);Ut.push(Za(x,kr))}else{const er=Dn(B,ee,wn);Ut.push(er)}}return new Jt(Ut,Fe)}(a._query,a.firestore._databaseId,g,e,i,u)}}function Sy(a,e,i){if("string"==typeof(i=(0,ce.m9)(i))){if(""===i)throw new zt(St.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pu(e)&&-1!==i.indexOf("/"))throw new zt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const u=e.path.child(br.fromString(i));if(!Tn.isDocumentKey(u))throw new zt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return Za(a,new Tn(u))}if(i instanceof ys)return Za(a,i._key);throw new zt(St.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(i)}.`)}function k_(a,e){if(!Array.isArray(a)||0===a.length)throw new zt(St.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(a.length>10)throw new zt(St.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Bg(a,e,i){if(!i.isEqual(e))throw new zt(St.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class F_{convertValue(e,i="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Ke(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw Mn()}}convertObject(e,i){const u={};return Co(e.fields,(g,b)=>{u[g]=this.convertValue(b,i)}),u}convertGeoPoint(e){return new fc(we(e.latitude),we(e.longitude))}convertArray(e,i){return(e.values||[]).map(u=>this.convertValue(u,i))}convertServerTimestamp(e,i){switch(i){case"previous":const u=In(e);return null==u?null:this.convertValue(u,i);case"estimate":return this.convertTimestamp(Or(e));default:return null}}convertTimestamp(e){const i=se(e);return new hr(i.seconds,i.nanos)}convertDocumentKey(e,i){const u=br.fromString(e);$n(Ll(u));const g=new ch(u.get(1),u.get(3)),b=new Tn(u.popFirst(5));return g.isEqual(i)||ui(`Document ${b} contains a document reference within a different database (${g.projectId}/${g.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),b}}function jg(a,e,i){let u;return u=a?i&&(i.merge||i.mergeFields)?a.toFirestore(e,i):a.toFirestore(e):e,u}class Iv extends F_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,i)}}class Ay{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=w(e)}set(e,i,u){this._verifyNotCommitted();const g=ph(e,this._firestore),b=jg(g.converter,i,u),x=D(this._dataReader,"WriteBatch.set",g._key,b,null!==g.converter,u);return this._mutations.push(x.toMutation(g._key,Bi.none())),this}update(e,i,u,...g){this._verifyNotCommitted();const b=ph(e,this._firestore);let x;return x="string"==typeof(i=(0,ce.m9)(i))||i instanceof Dl?nn(this._dataReader,"WriteBatch.update",b._key,i,u,g):sn(this._dataReader,"WriteBatch.update",b._key,i),this._mutations.push(x.toMutation(b._key,Bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=ph(e,this._firestore);return this._mutations=this._mutations.concat(new rd(i._key,Bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zt(St.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ph(a,e){if((a=(0,ce.m9)(a)).firestore!==e)throw new zt(St.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class vf extends F_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gl(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,i)}}function Dv(a,e,i){a=ci(a,ys);const u=ci(a.firestore,qs),g=jg(a.converter,e,i);return gh(u,[D(w(u),"setDoc",a._key,g,null!==a.converter,i).toMutation(a._key,Bi.none())])}function Lm(a,e,i,...u){a=ci(a,ys);const g=ci(a.firestore,qs),b=w(g);let x;return x="string"==typeof(e=(0,ce.m9)(e))||e instanceof Dl?nn(b,"updateDoc",a._key,e,i,u):sn(b,"updateDoc",a._key,e),gh(g,[x.toMutation(a._key,Bi.exists(!0))])}function Ip(a,...e){var i,u,g;a=(0,ce.m9)(a);let b={includeMetadataChanges:!1},x=0;"object"!=typeof e[x]||ff(e[x])||(b=e[x],x++);const B={includeMetadataChanges:b.includeMetadataChanges};if(ff(e[x])){const ut=e[x];e[x]=null===(i=ut.next)||void 0===i?void 0:i.bind(ut),e[x+1]=null===(u=ut.error)||void 0===u?void 0:u.bind(ut),e[x+2]=null===(g=ut.complete)||void 0===g?void 0:g.bind(ut)}let ee,ve,Fe;if(a instanceof ys)ve=ci(a.firestore,qs),Fe=To(a._key.path),ee={next:ut=>{e[x]&&e[x]($g(ve,a,ut))},error:e[x+1],complete:e[x+2]};else{const ut=ci(a,Fo);ve=ci(ut.firestore,qs),Fe=ut._query;const Ut=new vf(ve);ee={next:Xt=>{e[x]&&e[x](new $c(ve,Ut,ut,Xt))},error:e[x+1],complete:e[x+2]},Ir(a._query)}return function(ut,Ut,Xt,wn){const er=new gp(wn),kr=new lg(Ut,er,Xt);return ut.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return nh(yield Eu(ut),kr)})),()=>{er.Xo(),ut.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return rp(yield Eu(ut),kr)}))}}(Ws(ve),Fe,B,ee)}function gh(a,e){return function(i,u){const g=new _i;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(a,e,i){return Ed.apply(this,arguments)}(yield Og(i),u,g)})),g.promise}(Ws(a),e)}function $g(a,e,i){const u=i.docs.get(e._key),g=new vf(a);return new Na(a,g,e._key,u,new $u(i.hasPendingWrites,i.fromCache),e.converter)}class Pv extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=w(e)}get(e){const i=ph(e,this._firestore),u=new Iv(this._firestore);return this._transaction.lookup([i._key]).then(g=>{if(!g||1!==g.length)return Mn();const b=g[0];if(b.isFoundDocument())return new rl(this._firestore,u,b.key,b,i.converter);if(b.isNoDocument())return new rl(this._firestore,u,i._key,null,i.converter);throw Mn()})}set(e,i,u){const g=ph(e,this._firestore),b=jg(g.converter,i,u),x=D(this._dataReader,"Transaction.set",g._key,b,null!==g.converter,u);return this._transaction.set(g._key,x),this}update(e,i,u,...g){const b=ph(e,this._firestore);let x;return x="string"==typeof(i=(0,ce.m9)(i))||i instanceof Dl?nn(this._dataReader,"Transaction.update",b._key,i,u,g):sn(this._dataReader,"Transaction.update",b._key,i),this._transaction.update(b._key,x),this}delete(e){const i=ph(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){const i=ph(e,this._firestore),u=new vf(this._firestore);return super.get(e).then(g=>new Na(this._firestore,u,i._key,g._document,new $u(!1,!1),i.converter))}}function Um(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new zt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vm(){if("undefined"==typeof Uint8Array)throw new zt("unimplemented","Uint8Arrays are not available in this environment.")}function Bm(){if("undefined"==typeof atob)throw new zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(a){Vi=a})(Qt.SDK_VERSION),(0,Qt._registerComponent)(new De.wA("firestore",(a,{options:e})=>{const i=a.getProvider("app").getImmediate(),u=new qs(i,new Du(a.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),u._setSettings(e),u},"PUBLIC")),(0,Qt.registerVersion)(su,"3.1.1",void 0),(0,Qt.registerVersion)(su,"3.1.1","esm2017");class Sp{constructor(e){this._delegate=e}static fromBase64String(e){return Bm(),new Sp(Gl.fromBase64String(e))}static fromUint8Array(e){return Vm(),new Sp(Gl.fromUint8Array(e))}toBase64(){return Bm(),this._delegate.toBase64()}toUint8Array(){return Vm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $_(a){return function(a,e){if("object"!=typeof a||null===a)return!1;const i=a;for(const u of["next","error","complete"])if(u in i&&"function"==typeof i[u])return!0;return!1}(a)}class ky{enableIndexedDbPersistence(e,i){return function(a,e){hc(a=ci(a,qs));const i=Ws(a),u=a._freezeSettings(),g=new uf;return Hl(i,g,new pp(g,u.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return function(a){hc(a=ci(a,qs));const e=Ws(a),i=a._freezeSettings(),u=new uf;return Hl(e,u,new lf(u,i.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(a){if(a._initialized&&!a._terminated)throw new zt(St.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _i;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(i=(0,ye.Z)(function*(u){if(!zi.bt())return Promise.resolve();const g=u+"main";yield zi.delete(g)}),function(u){return i.apply(this,arguments)})(jf(a._databaseId,a._persistenceKey)),e.resolve()}catch(i){e.reject(i)}var i})),e.promise}(e._delegate)}}class jm{constructor(e,i,u){this._delegate=i,this._persistenceProvider=u,this.INTERNAL={delete:()=>this.terminate()},e instanceof ch||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}useEmulator(e,i,u={}){!function(a,e,i,u={}){var g;const b=(a=ci(a,bp))._getSettings();if("firestore.googleapis.com"!==b.host&&b.host!==e&&is("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},b),{host:`${e}:${i}`,ssl:!1})),u.mockUserToken){let x,B;if("string"==typeof u.mockUserToken)x=u.mockUserToken,B=mi.MOCK_USER;else{x=(0,ce.Sg)(u.mockUserToken,null===(g=a._app)||void 0===g?void 0:g.options.projectId);const ee=u.mockUserToken.sub||u.mockUserToken.user_id;if(!ee)throw new zt(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");B=new mi(ee)}a._credentials=new va(new Ec(x,B))}}(this._delegate,e,i,u)}enableNetwork(){return function(a){return function(a){return a.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Rg(a),i=yield Pg(a);return e.setNetworkEnabled(!0),function(u){const g=pn(u);return g.Kr.delete(0),eg(g)}(i)}))}(Ws(a=ci(a,qs)))}(this._delegate)}disableNetwork(){return function(a){return function(a){return a.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Rg(a),i=yield Pg(a);return e.setNetworkEnabled(!1),(u=(0,ye.Z)(function*(g){const b=pn(g);b.Kr.add(0),yield $l(b),b.Wr.set("Offline")}),function(g){return u.apply(this,arguments)})(i);var u}))}(Ws(a=ci(a,qs)))}(this._delegate)}enablePersistence(e){let i=!1,u=!1;return e&&(i=!!e.synchronizeTabs,u=!!e.experimentalForceOwningTab,Nm("synchronizeTabs",i,"experimentalForceOwningTab",u)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,u)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(a){return function(e){const i=new _i;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(a,e){return bd.apply(this,arguments)}(yield Og(e),i)})),i.promise}(Ws(a=ci(a,qs)))}(this._delegate)}onSnapshotsInSync(e){return function(a,e){return function(a,e){const i=new gp(e);return a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return u=yield Eu(a),g=i,pn(u).Zr.add(g),void g.next();var u,g})),()=>{i.Xo(),a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return u=yield Eu(a),g=i,void pn(u).Zr.delete(g);var u,g}))}}(Ws(a=ci(a,qs)),ff(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zg(this,Lg(this._delegate,e))}catch(i){throw il(i,"collection()","Firestore.collection()")}}doc(e){try{return new Wl(this,wp(this._delegate,e))}catch(i){throw il(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sl(this,function(a,e){if(a=ci(a,bp),vp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zt(St.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fo(a,null,(i=e,new As(br.emptyPath(),i)));var i}(this._delegate,e))}catch(i){throw il(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(a,e){return function(a,e){const i=new _i;return a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const u=yield(g=a,ma(g).then(b=>b.datastore));var g;new Ag(a.asyncQueue,u,e,i).run()})),i.promise}(Ws(a),i=>e(new Pv(a,i)))}(this._delegate,i=>e(new Fy(this,i)))}batch(){return Ws(this._delegate),new Ly(new Ay(this._delegate,e=>gh(this._delegate,e)))}loadBundle(e){return function(a,e){const i=Ws(a=ci(a,qs)),u=new km;return function(a,e,i,u){const g=function(b,x){let B;return B="string"==typeof b?(new TextEncoder).encode(b):b,ee=function(ee,ve){if(ee instanceof Uint8Array)return w_(ee,void 0);if(ee instanceof ArrayBuffer)return w_(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(B),new mp(ee,x);var ee}(i,mu(e));a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function(a,e,i){const u=pn(a);var g;(g=(0,ye.Z)(function*(b,x,B){try{const ee=yield x.getMetadata();if(yield function(Ut,Xt){const wn=pn(Ut),er=yi(Xt.createTime);return wn.persistence.runTransaction("hasNewerBundle","readonly",kr=>wn.Je.getBundleMetadata(kr,Xt.id)).then(kr=>!!kr&&kr.createTime.compareTo(er)>=0)}(b.localStore,ee))return yield x.close(),void B._completeWith((Ut=ee,{taskState:"Success",documentsLoaded:Ut.totalDocuments,bytesLoaded:Ut.totalBytes,totalDocuments:Ut.totalDocuments,totalBytes:Ut.totalBytes}));B._updateProgress(Yh(ee));const ve=new Kh(ee,b.localStore,x.N);let Fe=yield x.Qo();for(;Fe;){const Ut=yield ve.fo(Fe);Ut&&B._updateProgress(Ut),Fe=yield x.Qo()}const ut=yield ve.complete();yield Ko(b,ut.En,void 0),yield function(Ut,Xt){const wn=pn(Ut);return wn.persistence.runTransaction("Save bundle","readwrite",er=>wn.Je.saveBundleMetadata(er,Xt))}(b.localStore,ee),B._completeWith(ut.progress)}catch(ee){is("SyncEngine",`Loading bundle failed with ${ee}`),B._failWith(ee)}var Ut}),function(b,x,B){return g.apply(this,arguments)})(u,e,i).then(()=>{u.sharedClientState.notifyBundleLoaded()})}(yield Og(a),g,u)}))}(i,a._databaseId,e,u),u}(this._delegate,e)}namedQuery(e){return function(a,e){return function(a,e){return a.asyncQueue.enqueue((0,ye.Z)(function*(){return function(i,u){const g=pn(i);return g.persistence.runTransaction("Get named query","readonly",b=>g.Je.getNamedQuery(b,u))}(yield _p(a),e)}))}(Ws(a=ci(a,qs)),e).then(i=>i?new Fo(a,null,i.query):null)}(this._delegate,e).then(i=>i?new sl(this,i):null)}}class Hg extends F_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(new Gl(e))}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return Wl.forKey(i,this.firestore,null)}}class Fy{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new Hg(e)}get(e){const i=Ef(e);return this._delegate.get(i).then(u=>new Ap(this._firestore,new Na(this._firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,i.converter)))}set(e,i,u){const g=Ef(e);return u?(Um("Transaction.set",u),this._delegate.set(g,i,u)):this._delegate.set(g,i),this}update(e,i,u,...g){const b=Ef(e);return 2===arguments.length?this._delegate.update(b,i):this._delegate.update(b,i,u,...g),this}delete(e){const i=Ef(e);return this._delegate.delete(i),this}}class Ly{constructor(e){this._delegate=e}set(e,i,u){const g=Ef(e);return u?(Um("WriteBatch.set",u),this._delegate.set(g,i,u)):this._delegate.set(g,i),this}update(e,i,u,...g){const b=Ef(e);return 2===arguments.length?this._delegate.update(b,i):this._delegate.update(b,i,u,...g),this}delete(e){const i=Ef(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class mh{constructor(e,i,u){this._firestore=e,this._userDataWriter=i,this._delegate=u}fromFirestore(e,i){const u=new Td(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dp(this._firestore,u),null!=i?i:{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){const u=mh.INSTANCES;let g=u.get(e);g||(g=new WeakMap,u.set(e,g));let b=g.get(i);return b||(b=new mh(e,new Hg(e),i),g.set(i,b)),b}}mh.INSTANCES=new WeakMap;class Wl{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Hg(e)}static forPath(e,i,u){if(e.length%2!=0)throw new zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wl(i,new ys(i._delegate,u,new Tn(e)))}static forKey(e,i,u){return new Wl(i,new ys(i._delegate,u,e))}get id(){return this._delegate.id}get parent(){return new Zg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zg(this.firestore,Lg(this._delegate,e))}catch(i){throw il(i,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ce.m9)(e))instanceof ys&&Mm(this._delegate,e)}set(e,i){i=Um("DocumentReference.set",i);try{return i?Dv(this._delegate,e,i):Dv(this._delegate,e)}catch(u){throw il(u,"setDoc()","DocumentReference.set()")}}update(e,i,...u){try{return 1===arguments.length?Lm(this._delegate,e):Lm(this._delegate,e,i,...u)}catch(g){throw il(g,"updateDoc()","DocumentReference.update()")}}delete(){return function(a){return gh(ci(a.firestore,qs),[new rd(a._key,Bi.none())])}(this._delegate)}onSnapshot(...e){const i=H_(e),u=Z_(e,g=>new Ap(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,g._key,g._document,g.metadata,this._delegate.converter)));return Ip(this._delegate,i,u)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function(a){a=ci(a,ys);const e=ci(a.firestore,qs),i=Ws(e),u=new vf(e);return function(a,e){const i=new _i;return a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(u=(0,ye.Z)(function*(g,b,x){try{const B=yield function(ee,ve){const Fe=pn(ee);return Fe.persistence.runTransaction("read document","readonly",ut=>Fe.Qn.An(ut,ve))}(g,b);B.isFoundDocument()?x.resolve(B):B.isNoDocument()?x.resolve(null):x.reject(new zt(St.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(B){const ee=th(B,`Failed to get document '${b} from cache`);x.reject(ee)}}),function(g,b,x){return u.apply(this,arguments)})(yield _p(a),e,i);var u})),i.promise}(i,a._key).then(g=>new Na(e,u,a._key,g,new $u(null!==g&&g.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(a){a=ci(a,ys);const e=ci(a.firestore,qs);return Mg(Ws(e),a._key,{source:"server"}).then(i=>$g(e,a,i))}(this._delegate):function(a){a=ci(a,ys);const e=ci(a.firestore,qs);return Mg(Ws(e),a._key).then(i=>$g(e,a,i))}(this._delegate),i.then(u=>new Ap(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)))}withConverter(e){return new Wl(this.firestore,this._delegate.withConverter(e?mh.getInstance(this.firestore,e):null))}}function il(a,e,i){return a.message=a.message.replace(e,i),a}function H_(a){for(const e of a)if("object"==typeof e&&!$_(e))return e;return{}}function Z_(a,e){var i,u;let g;return g=$_(a[0])?a[0]:$_(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:b=>{g.next&&g.next(e(b))},error:null===(i=g.error)||void 0===i?void 0:i.bind(g),complete:null===(u=g.complete)||void 0===u?void 0:u.bind(g)}}class Ap{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new Wl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return dr(this._delegate,e._delegate)}}class Dp extends Ap{data(e){const i=this._delegate.data(e);return function(a,e){a||Mn()}(void 0!==i),i}}class sl{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Hg(e)}where(e,i,u){try{return new sl(this.firestore,Es(this._delegate,function(a,e,i){const u=e,g=_f("where",a);return new Hu(g,u,i)}(e,i,u)))}catch(g){throw il(g,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new sl(this.firestore,Es(this._delegate,function(a,e="asc"){const i=e,u=_f("orderBy",a);return new Zu(u,i)}(e,i)))}catch(u){throw il(u,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sl(this.firestore,Es(this._delegate,function(a){return S_("limit",a),new N_("limit",a,"F")}(e)))}catch(i){throw il(i,"limit()","Query.limit()")}}limitToLast(e){try{return new sl(this.firestore,Es(this._delegate,function(a){return S_("limitToLast",a),new N_("limitToLast",a,"L")}(e)))}catch(i){throw il(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sl(this.firestore,Es(this._delegate,function(...a){return new yf("startAt",a,!0)}(...e)))}catch(i){throw il(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sl(this.firestore,Es(this._delegate,function(...a){return new yf("startAfter",a,!1)}(...e)))}catch(i){throw il(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sl(this.firestore,Es(this._delegate,function(...a){return new Iy("endBefore",a,!0)}(...e)))}catch(i){throw il(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sl(this.firestore,Es(this._delegate,function(...a){return new Iy("endAt",a,!1)}(...e)))}catch(i){throw il(i,"endAt()","Query.endAt()")}}isEqual(e){return hf(this._delegate,e._delegate)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function(a){a=ci(a,Fo);const e=ci(a.firestore,qs),i=Ws(e),u=new vf(e);return function(a,e){const i=new _i;return a.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(u=(0,ye.Z)(function*(g,b,x){try{const B=yield Zf(g,b,!0),ee=new cg(b,B.Gn),ve=ee.Io(B.documents),Fe=ee.applyChanges(ve,!1);x.resolve(Fe.snapshot)}catch(B){const ee=th(B,`Failed to execute query '${b} against cache`);x.reject(ee)}}),function(g,b,x){return u.apply(this,arguments)})(yield _p(a),e,i);var u})),i.promise}(i,a._query).then(g=>new $c(e,u,a,g))}(this._delegate):"server"===(null==e?void 0:e.source)?function(a){a=ci(a,Fo);const e=ci(a.firestore,qs),i=Ws(e),u=new vf(e);return kg(i,a._query,{source:"server"}).then(g=>new $c(e,u,a,g))}(this._delegate):function(a){a=ci(a,Fo);const e=ci(a.firestore,qs),i=Ws(e),u=new vf(e);return Ir(a._query),kg(i,a._query).then(g=>new $c(e,u,a,g))}(this._delegate),i.then(u=>new $m(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)))}onSnapshot(...e){const i=H_(e),u=Z_(e,g=>new $m(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,g._snapshot)));return Ip(this._delegate,i,u)}withConverter(e){return new sl(this.firestore,this._delegate.withConverter(e?mh.getInstance(this.firestore,e):null))}}class Uy{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new Dp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $m{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new sl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new Uy(this._firestore,i))}forEach(e,i){this._delegate.forEach(u=>{e.call(i,new Dp(this._firestore,u))})}isEqual(e){return dr(this._delegate,e._delegate)}}class Zg extends sl{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wl(this.firestore,e):null}doc(e){try{return new Wl(this.firestore,void 0===e?wp(this._delegate):wp(this._delegate,e))}catch(i){throw il(i,"doc()","CollectionReference.doc()")}}add(e){return function(a,e){const i=ci(a.firestore,qs),u=wp(a),g=jg(a.converter,e);return gh(i,[D(w(a.firestore),"addDoc",u._key,g,null!==a.converter,{}).toMutation(u._key,Bi.exists(!1))]).then(()=>u)}(this._delegate,e).then(i=>new Wl(this.firestore,i))}isEqual(e){return Mm(this._delegate,e._delegate)}withConverter(e){return new Zg(this.firestore,this._delegate.withConverter(e?mh.getInstance(this.firestore,e):null))}}function Ef(a){return ci(a,ys)}class G_{constructor(...e){this._delegate=new Dl(...e)}static documentId(){return new G_(P.keyField().canonicalString())}isEqual(e){return(e=(0,ce.m9)(e))instanceof Dl&&this._delegate._internalPath.isEqual(e._internalPath)}}class _h{constructor(e){this._delegate=e}static serverTimestamp(){const e=new ae("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new _h(e)}static delete(){const e=new U("deleteField");return e._methodName="FieldValue.delete",new _h(e)}static arrayUnion(...e){const i=function(...a){return new $e("arrayUnion",a)}(...e);return i._methodName="FieldValue.arrayUnion",new _h(i)}static arrayRemove(...e){const i=function(...a){return new tt("arrayRemove",a)}(...e);return i._methodName="FieldValue.arrayRemove",new _h(i)}static increment(e){const i=function(a){return new wt("increment",a)}(e);return i._methodName="FieldValue.increment",new _h(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const kv={Firestore:jm,GeoPoint:fc,Timestamp:hr,Blob:Sp,Transaction:Fy,WriteBatch:Ly,DocumentReference:Wl,DocumentSnapshot:Ap,Query:sl,QueryDocumentSnapshot:Dp,QuerySnapshot:$m,CollectionReference:Zg,FieldPath:G_,FieldValue:_h,setLogLevel:function(a){!function(a){Ms.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function(a){(function(a,e){a.INTERNAL.registerComponent(new De.wA("firestore-compat",i=>((e,i)=>new jm(e,i,new ky))(i.getProvider("app-compat").getImmediate(),i.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},kv)))})(a),a.registerVersion("@firebase/firestore-compat","0.1.4")}(Xe.Z);var yh=N(4421),Fv=N(2965),By=N(7841);function q_(a,e){return function(a,e=v.z){return new J.y(i=>{let u;return null!=e?e.schedule(()=>{u=a.onSnapshot({includeMetadataChanges:!0},i)}):u=a.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=u&&u()}})}(a,e)}function vh(a,e){return q_(a,e).pipe((0,je.U)(i=>({payload:i,type:"query"})))}function Hm(a,e){return vh(a,e).pipe(te(void 0),be(),(0,je.U)(([i,u])=>{const g=u.payload.docChanges(),b=g.map(x=>({type:x.type,payload:x}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((x,B)=>{const ee=g.find(Fe=>Fe.doc.ref.isEqual(x.ref)),ve=null==i?void 0:i.payload.docs.find(Fe=>Fe.ref.isEqual(x.ref));ee&&JSON.stringify(ee.doc.metadata)===JSON.stringify(x.metadata)||!ee&&ve&&JSON.stringify(ve.metadata)===JSON.stringify(x.metadata)||b.push({type:"modified",payload:{oldIndex:B,newIndex:B,type:"modified",doc:x}})}),b}))}function $y(a,e,i){return Hm(a,i).pipe((0,Oe.R)((u,g)=>function(a,e,i){return e.forEach(u=>{i.indexOf(u.type)>-1&&(a=function(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return W_(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=a.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return W_(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return W_(a,e.oldIndex,1)}return a}(a,u))}),a}(u,g.map(b=>b.payload),e),[]),(0,Ye.x)(),(0,je.U)(u=>u.map(g=>({type:g.type,payload:g}))))}function W_(a,e,i,...u){const g=a.slice();return g.splice(e,i,...u),g}function Uv(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Zm{constructor(e,i,u){this.ref=e,this.query=i,this.afs=u}stateChanges(e){let i=Hm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,je.U)(u=>u.filter(g=>e.indexOf(g.type)>-1)))),i.pipe(te(void 0),be(),(0,Qe.h)(([u,g])=>g.length>0||!u),(0,je.U)(([u,g])=>g),ue.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Oe.R)((i,u)=>[...i,...u],[]))}snapshotChanges(e){const i=Uv(e);return $y(this.query,i,this.afs.schedulers.outsideAngular).pipe(ue.iC)}valueChanges(e={}){return vh(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(i=>i.payload.docs.map(u=>e.idField?Object.assign(Object.assign({},u.data()),{[e.idField]:u.id}):u.data())),ue.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ue.iC)}add(e){return this.ref.add(e)}doc(e){return new Gm(this.ref.doc(e),this.afs)}}class Gm{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const u=this.ref.collection(e),{ref:g,query:b}=Gu(u,i);return new Zm(g,b,this.afs)}snapshotChanges(){return function(a,e){return q_(a,e).pipe(te(void 0),be(),(0,je.U)(([i,u])=>u.exists?(null==i?void 0:i.exists)?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ue.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,je.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,me.D)(this.ref.get(e)).pipe(ue.iC)}}class Zc{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?Hm(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(i=>i.filter(u=>e.indexOf(u.type)>-1)),(0,Qe.h)(i=>i.length>0),ue.iC):Hm(this.query,this.afs.schedulers.outsideAngular).pipe(ue.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Oe.R)((i,u)=>[...i,...u],[]))}snapshotChanges(e){const i=Uv(e);return $y(this.query,i,this.afs.schedulers.outsideAngular).pipe(ue.iC)}valueChanges(e={}){return vh(this.query,this.afs.schedulers.outsideAngular).pipe((0,je.U)(u=>u.payload.docs.map(g=>e.idField?Object.assign({[e.idField]:g.id},g.data()):g.data())),ue.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ue.iC)}}const Gy=new f.OlP("angularfire2.enableFirestorePersistence"),z_=new f.OlP("angularfire2.firestore.persistenceSettings"),Gc=new f.OlP("angularfire2.firestore.settings"),mc=new f.OlP("angularfire2.firestore.use-emulator");function Gu(a,e=(i=>i)){return{query:e(a),ref:a}}let K_=(()=>{class a{constructor(i,u,g,b,x,B,ee,ve,Fe,ut,Ut,Xt,wn,er,kr,io,qu){this.schedulers=ee;const _c=(0,it.on)(i,B,u),qc=Fe;ut&&(0,yh.nw)(_c,B,Ut,wn,er,kr,Xt,io),[this.firestore,this.persistenceEnabled$]=(0,it.cc)(`${_c.name}.firestore`,"AngularFirestore",_c.name,()=>{const Wc=B.runOutsideAngular(()=>_c.firestore());if(b&&Wc.settings(b),qc&&Wc.useEmulator(...qc),g&&!(0,nt.PM)(x)){const Gg=()=>{try{return(0,me.D)(Wc.enablePersistence(ve||void 0).then(()=>!0,()=>!1))}catch(Wy){return"undefined"!=typeof console&&console.warn(Wy),(0,le.of)(!1)}};return[Wc,B.runOutsideAngular(Gg)]}return[Wc,(0,le.of)(!1)]},[b,qc,g])}collection(i,u){let g;g="string"==typeof i?this.firestore.collection(i):i;const{ref:b,query:x}=Gu(g,u),B=this.schedulers.ngZone.run(()=>b);return new Zm(B,x,this)}collectionGroup(i,u){const g=u||(x=>x),b=this.firestore.collectionGroup(i);return new Zc(g(b),this)}doc(i){let u;u="string"==typeof i?this.firestore.doc(i):i;const g=this.schedulers.ngZone.run(()=>u);return new Gm(g,this)}createId(){return this.firestore.collection("_").doc().id}}return a.\u0275fac=function(i){return new(i||a)(f.LFG(it.Dh),f.LFG(it.xv,8),f.LFG(Gy,8),f.LFG(Gc,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ue.HU),f.LFG(z_,8),f.LFG(mc,8),f.LFG(yh.zQ,8),f.LFG(yh.Qv,8),f.LFG(yh.L6,8),f.LFG(yh._Q,8),f.LFG(yh.rT,8),f.LFG(yh.lh,8),f.LFG(yh.f7,8),f.LFG(Fv.nm,8))},a.\u0275prov=f.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),qy=(()=>{class a{constructor(){By.Z.registerVersion("angularfire",ue.q4.full,"fst-compat")}static enablePersistence(i){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:z_,useValue:i}]}}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=f.oAB({type:a}),a.\u0275inj=f.cJS({providers:[K_]}),a})()},9751:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Q1:()=>Wr,TE:()=>Bs});var f=N(1827),v=N(4323),J=N(1179),me=N(4346),le=N(3201),ue=N(1894),Me=N(6885),ge=N(1926),K=N(8797),Z=N(639),te=N(8939),de=N(4486),be=N(8239),je=N(5452),Oe=N(3854),Ye=N(6034),Qe=(()=>{return(Q=Qe||(Qe={}))[Q.NO_ERROR=0]="NO_ERROR",Q[Q.NETWORK_ERROR=1]="NETWORK_ERROR",Q[Q.ABORT=2]="ABORT",Qe;var Q})();const it="firebasestorage.googleapis.com",nt="storageBucket";class ye extends Oe.ZR{constructor(G,pe){super(Qt(G),`Firebase Storage: ${pe} (${Qt(G)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ye.prototype)}_codeEquals(G){return Qt(G)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(G){this.customData.serverResponse=G,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Qt(Q){return"storage/"+Q}function De(){return new ye("unknown","An unknown error occurred, please check the error payload for server response.")}function Te(){return new ye("canceled","User canceled the upload/download.")}function Zt(){return new ye("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function pr(){return new ye("no-download-url","The given file does not have any download URLs.")}function vn(Q){return new ye("invalid-argument",Q)}function Et(){return new ye("app-deleted","The Firebase app was deleted.")}function Dt(Q){return new ye("invalid-root-operation","The operation '"+Q+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function at(Q,G){return new ye("invalid-format","String does not match format '"+Q+"': "+G)}function Ve(Q){throw new ye("internal-error","Internal error: "+Q)}class bt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Qe.NO_ERROR,this.sendPromise_=new Promise(G=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qe.ABORT,G()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qe.NETWORK_ERROR,G()}),this.xhr_.addEventListener("load",()=>{G()})})}send(G,pe,Le,We){if(this.sent_)throw Ve("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(pe,G,!0),void 0!==We)for(const xt in We)We.hasOwnProperty(xt)&&this.xhr_.setRequestHeader(xt,We[xt].toString());return void 0!==Le?this.xhr_.send(Le):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ve("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ve("cannot .getStatus() before sending");try{return this.xhr_.status}catch(G){return-1}}getResponseText(){if(!this.sent_)throw Ve("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(G){return this.xhr_.getResponseHeader(G)}addUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",G)}removeUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",G)}}class rt{createConnection(){return new bt}}class Se{constructor(G,pe){this.bucket=G,this.path_=pe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const G=encodeURIComponent;return"/b/"+G(this.bucket)+"/o/"+G(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(G,pe){let Le;try{Le=Se.makeFromUrl(G,pe)}catch(We){return new Se(G,"")}if(""===Le.path)return Le;throw new ye("invalid-default-bucket","Invalid default bucket '"+G+"'.")}static makeFromUrl(G,pe){let Le=null;const We="([A-Za-z0-9.\\-_]+)",en=new RegExp("^gs://"+We+"(/(.*))?$","i");function zn(wi){wi.path_=decodeURIComponent(wi.path)}const Oi=pe.replace(/[.]/g,"\\."),ai=[{regex:en,indices:{bucket:1,path:3},postModify:function(wi){"/"===wi.path.charAt(wi.path.length-1)&&(wi.path_=wi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Oi}/v[A-Za-z0-9_]+/b/${We}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:zn},{regex:new RegExp(`^https?://${pe===it?"(?:storage.googleapis.com|storage.cloud.google.com)":pe}/${We}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:zn}];for(let wi=0;wi<ai.length;wi++){const Pr=ai[wi],gs=Pr.regex.exec(G);if(gs){let Js=gs[Pr.indices.path];Js||(Js=""),Le=new Se(gs[Pr.indices.bucket],Js),Pr.postModify(Le);break}}if(null==Le)throw new ye("invalid-url","Invalid URL '"+G+"'.");return Le}}class et{constructor(G){this.promise_=Promise.reject(G)}getPromise(){return this.promise_}cancel(G=!1){}}function gn(Q){return"string"==typeof Q||Q instanceof String}function qn(Q){return Tt()&&Q instanceof Blob}function Tt(){return"undefined"!=typeof Blob}function on(Q,G,pe,Le){if(Le<G)throw vn(`Invalid value for '${Q}'. Expected ${G} or greater.`);if(Le>pe)throw vn(`Invalid value for '${Q}'. Expected ${pe} or less.`)}function mt(Q,G,pe){let Le=G;return null==pe&&(Le=`https://${G}`),`${pe}://${Le}/v0${Q}`}function Je(Q){const G=encodeURIComponent;let pe="?";for(const Le in Q)Q.hasOwnProperty(Le)&&(pe=pe+(G(Le)+"=")+G(Q[Le])+"&");return pe=pe.slice(0,-1),pe}class Kt{constructor(G,pe,Le,We,xt,Wt,en,bn,zn,mr,Oi){this.url_=G,this.method_=pe,this.headers_=Le,this.body_=We,this.successCodes_=xt,this.additionalRetryCodes_=Wt,this.callback_=en,this.errorCallback_=bn,this.timeout_=zn,this.progressCallback_=mr,this.pool_=Oi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Mr,Fn)=>{this.resolve_=Mr,this.reject_=Fn,this.start_()})}start_(){const pe=(Le,We)=>{const xt=this.resolve_,Wt=this.reject_,en=We.connection;if(We.wasSuccessCode)try{const bn=this.callback_(en,en.getResponseText());void 0!==bn?xt(bn):xt()}catch(bn){Wt(bn)}else if(null!==en){const bn=De();bn.serverResponse=en.getResponseText(),Wt(this.errorCallback_?this.errorCallback_(en,bn):bn)}else Wt(We.canceled?this.appDelete_?Et():Te():new ye("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?pe(0,new cn(!1,null,!0)):this.backoffId_=function(Q,G,pe){let Le=1,We=null,xt=!1,Wt=0;function en(){return 2===Wt}let bn=!1;function zn(...jr){bn||(bn=!0,G.apply(null,jr))}function mr(jr){We=setTimeout(()=>{We=null,Q(Oi,en())},jr)}function Oi(jr,...Bt){if(bn)return;if(jr)return void zn.call(null,jr,...Bt);if(en()||xt)return void zn.call(null,jr,...Bt);let Ai;Le<64&&(Le*=2),1===Wt?(Wt=2,Ai=0):Ai=1e3*(Le+Math.random()),mr(Ai)}let Mr=!1;function Fn(jr){Mr||(Mr=!0,!bn&&(null!==We?(jr||(Wt=2),clearTimeout(We),mr(0)):jr||(Wt=1)))}return mr(0),setTimeout(()=>{xt=!0,Fn(!0)},pe),Fn}((Le,We)=>{if(We)return void Le(!1,new cn(!1,null,!0));const xt=this.pool_.createConnection();this.pendingConnection_=xt;const Wt=en=>{null!==this.progressCallback_&&this.progressCallback_(en.loaded,en.lengthComputable?en.total:-1)};null!==this.progressCallback_&&xt.addUploadProgressListener(Wt),xt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&xt.removeUploadProgressListener(Wt),this.pendingConnection_=null;const en=xt.getErrorCode()===Qe.NO_ERROR,bn=xt.getStatus();if(!en||this.isRetryStatusCode_(bn)){const mr=xt.getErrorCode()===Qe.ABORT;return void Le(!1,new cn(!1,null,mr))}const zn=-1!==this.successCodes_.indexOf(bn);Le(!0,new cn(zn,xt))})},pe,this.timeout_)}getPromise(){return this.promise_}cancel(G){this.canceled_=!0,this.appDelete_=G||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(G){const pe=G>=500&&G<600,We=-1!==[408,429].indexOf(G),xt=-1!==this.additionalRetryCodes_.indexOf(G);return pe||We||xt}}class cn{constructor(G,pe,Le){this.wasSuccessCode=G,this.connection=pe,this.canceled=!!Le}}function Sr(...Q){const G="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==G){const pe=new G;for(let Le=0;Le<Q.length;Le++)pe.append(Q[Le]);return pe.getBlob()}if(Tt())return new Blob(Q);throw new ye("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ue{constructor(G,pe){this.data=G,this.contentType=pe||null}}function qe(Q,G){switch(Q){case Gr.RAW:return new Ue(He(G));case Gr.BASE64:case Gr.BASE64URL:return new Ue(_t(Q,G));case Gr.DATA_URL:return new Ue(function(Q){const G=new rn(Q);return G.base64?_t(Gr.BASE64,G.rest):function(Q){let G;try{G=decodeURIComponent(Q)}catch(pe){throw at(Gr.DATA_URL,"Malformed data URL.")}return He(G)}(G.rest)}(G),function(Q){return new rn(Q).contentType}(G))}throw De()}function He(Q){const G=[];for(let pe=0;pe<Q.length;pe++){let Le=Q.charCodeAt(pe);Le<=127?G.push(Le):Le<=2047?G.push(192|Le>>6,128|63&Le):55296==(64512&Le)?pe<Q.length-1&&56320==(64512&Q.charCodeAt(pe+1))?(Le=65536|(1023&Le)<<10|1023&Q.charCodeAt(++pe),G.push(240|Le>>18,128|Le>>12&63,128|Le>>6&63,128|63&Le)):G.push(239,191,189):56320==(64512&Le)?G.push(239,191,189):G.push(224|Le>>12,128|Le>>6&63,128|63&Le)}return new Uint8Array(G)}function _t(Q,G){switch(Q){case Gr.BASE64:{const We=-1!==G.indexOf("-"),xt=-1!==G.indexOf("_");if(We||xt)throw at(Q,"Invalid character '"+(We?"-":"_")+"' found: is it base64url encoded?");break}case Gr.BASE64URL:{const We=-1!==G.indexOf("+"),xt=-1!==G.indexOf("/");if(We||xt)throw at(Q,"Invalid character '"+(We?"+":"/")+"' found: is it base64 encoded?");G=G.replace(/-/g,"+").replace(/_/g,"/");break}}let pe;try{pe=function(Q){return atob(Q)}(G)}catch(We){throw at(Q,"Invalid character found")}const Le=new Uint8Array(pe.length);for(let We=0;We<pe.length;We++)Le[We]=pe.charCodeAt(We);return Le}class rn{constructor(G){this.base64=!1,this.contentType=null;const pe=G.match(/^data:([^,]+)?,/);if(null===pe)throw at(Gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Le=pe[1]||null;null!=Le&&(this.base64=function(Q,G){return Q.length>=G.length&&Q.substring(Q.length-G.length)===G}(Le,";base64"),this.contentType=this.base64?Le.substring(0,Le.length-";base64".length):Le),this.rest=G.substring(G.indexOf(",")+1)}}class Sn{constructor(G,pe){let Le=0,We="";qn(G)?(this.data_=G,Le=G.size,We=G.type):G instanceof ArrayBuffer?(pe?this.data_=new Uint8Array(G):(this.data_=new Uint8Array(G.byteLength),this.data_.set(new Uint8Array(G))),Le=this.data_.length):G instanceof Uint8Array&&(pe?this.data_=G:(this.data_=new Uint8Array(G.length),this.data_.set(G)),Le=G.length),this.size_=Le,this.type_=We}size(){return this.size_}type(){return this.type_}slice(G,pe){if(qn(this.data_)){const We=function(Q,G,pe){return Q.webkitSlice?Q.webkitSlice(G,pe):Q.mozSlice?Q.mozSlice(G,pe):Q.slice?Q.slice(G,pe):null}(this.data_,G,pe);return null===We?null:new Sn(We)}{const Le=new Uint8Array(this.data_.buffer,G,pe-G);return new Sn(Le,!0)}}static getBlob(...G){if(Tt()){const pe=G.map(Le=>Le instanceof Sn?Le.data_:Le);return new Sn(Sr.apply(null,pe))}{const pe=G.map(Wt=>gn(Wt)?qe(Gr.RAW,Wt).data:Wt.data_);let Le=0;pe.forEach(Wt=>{Le+=Wt.byteLength});const We=new Uint8Array(Le);let xt=0;return pe.forEach(Wt=>{for(let en=0;en<Wt.length;en++)We[xt++]=Wt[en]}),new Sn(We,!0)}}uploadData(){return this.data_}}function _r(Q){let G;try{G=JSON.parse(Q)}catch(pe){return null}return function(Q){return"object"==typeof Q&&!Array.isArray(Q)}(G)?G:null}function Kr(Q){const G=Q.lastIndexOf("/",Q.length-2);return-1===G?Q:Q.slice(G+1)}function bi(Q,G){return G}class rr{constructor(G,pe,Le,We){this.server=G,this.local=pe||G,this.writable=!!Le,this.xform=We||bi}}let ki=null;function Ii(){if(ki)return ki;const Q=[];Q.push(new rr("bucket")),Q.push(new rr("generation")),Q.push(new rr("metageneration")),Q.push(new rr("name","fullPath",!0));const pe=new rr("name");pe.xform=function(xt,Wt){return function(Q){return!gn(Q)||Q.length<2?Q:Kr(Q)}(Wt)},Q.push(pe);const We=new rr("size");return We.xform=function(xt,Wt){return void 0!==Wt?Number(Wt):Wt},Q.push(We),Q.push(new rr("timeCreated")),Q.push(new rr("updated")),Q.push(new rr("md5Hash",null,!0)),Q.push(new rr("cacheControl",null,!0)),Q.push(new rr("contentDisposition",null,!0)),Q.push(new rr("contentEncoding",null,!0)),Q.push(new rr("contentLanguage",null,!0)),Q.push(new rr("contentType",null,!0)),Q.push(new rr("metadata","customMetadata",!0)),ki=Q,ki}function xr(Q,G,pe){const Le=_r(G);return null===Le?null:function(Q,G,pe){const Le={type:"file"},We=pe.length;for(let xt=0;xt<We;xt++){const Wt=pe[xt];Le[Wt.local]=Wt.xform(Le,G[Wt.server])}return function(Q,G){Object.defineProperty(Q,"ref",{get:function(){const xt=new Se(Q.bucket,Q.fullPath);return G._makeStorageReference(xt)}})}(Le,Q),Le}(Q,Le,pe)}function Fi(Q,G){const pe={},Le=G.length;for(let We=0;We<Le;We++){const xt=G[We];xt.writable&&(pe[xt.server]=Q[xt.local])}return JSON.stringify(pe)}const Yi="prefixes";class lr{constructor(G,pe,Le,We){this.url=G,this.method=pe,this.handler=Le,this.timeout=We,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yr(Q){if(!Q)throw De()}function Er(Q,G){return function(Le,We){const xt=xr(Q,We,G);return Yr(null!==xt),xt}}function On(Q){return function(pe,Le){let We;return We=401===pe.getStatus()?pe.getResponseText().includes("Firebase App Check token is invalid")?new ye("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ye("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===pe.getStatus()?function(Q){return new ye("quota-exceeded","Quota for bucket '"+Q+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Q.bucket):403===pe.getStatus()?function(Q){return new ye("unauthorized","User does not have permission to access '"+Q+"'.")}(Q.path):Le,We.serverResponse=Le.serverResponse,We}}function qt(Q){const G=On(Q);return function(Le,We){let xt=G(Le,We);return 404===Le.getStatus()&&(xt=function(Q){return new ye("object-not-found","Object '"+Q+"' does not exist.")}(Q.path)),xt.serverResponse=We.serverResponse,xt}}function jn(Q,G,pe){const We=mt(G.fullServerUrl(),Q.host,Q._protocol),Wt=Q.maxOperationRetryTime,en=new lr(We,"GET",Er(Q,pe),Wt);return en.errorHandler=qt(G),en}function yr(Q,G,pe,Le,We){const xt={};xt.prefix=G.isRoot?"":G.path+"/",pe&&pe.length>0&&(xt.delimiter=pe),Le&&(xt.pageToken=Le),We&&(xt.maxResults=We);const en=mt(G.bucketOnlyServerUrl(),Q.host,Q._protocol),zn=Q.maxOperationRetryTime,mr=new lr(en,"GET",function(Q,G){return function(Le,We){const xt=function(Q,G,pe){const Le=_r(pe);return null===Le?null:function(Q,G,pe){const Le={prefixes:[],items:[],nextPageToken:pe.nextPageToken};if(pe[Yi])for(const We of pe[Yi]){const xt=We.replace(/\/$/,""),Wt=Q._makeStorageReference(new Se(G,xt));Le.prefixes.push(Wt)}if(pe.items)for(const We of pe.items){const xt=Q._makeStorageReference(new Se(G,We.name));Le.items.push(xt)}return Le}(Q,G,Le)}(Q,G,We);return Yr(null!==xt),xt}}(Q,G.bucket),zn);return mr.urlParams=xt,mr.errorHandler=On(G),mr}function st(Q,G,pe){const We=mt(G.fullServerUrl(),Q.host,Q._protocol),Wt=Q.maxOperationRetryTime,en=new lr(We,"GET",function(Q,G){return function(Le,We){const xt=xr(Q,We,G);return Yr(null!==xt),function(Q,G,pe,Le){const We=_r(G);if(null===We||!gn(We.downloadTokens))return null;const xt=We.downloadTokens;if(0===xt.length)return null;const Wt=encodeURIComponent;return xt.split(",").map(zn=>{const Oi=Q.fullPath;return mt("/b/"+Wt(Q.bucket)+"/o/"+Wt(Oi),pe,Le)+Je({alt:"media",token:zn})})[0]}(xt,We,Q.host,Q._protocol)}}(Q,pe),Wt);return en.errorHandler=qt(G),en}function ze(Q,G,pe,Le){const xt=mt(G.fullServerUrl(),Q.host,Q._protocol),en=Fi(pe,Le),zn=Q.maxOperationRetryTime,mr=new lr(xt,"PATCH",Er(Q,Le),zn);return mr.headers={"Content-Type":"application/json; charset=utf-8"},mr.body=en,mr.errorHandler=qt(G),mr}function Ce(Q,G){const Le=mt(G.fullServerUrl(),Q.host,Q._protocol),en=new lr(Le,"DELETE",function(bn,zn){},Q.maxOperationRetryTime);return en.successCodes=[200,204],en.errorHandler=qt(G),en}function Pt(Q,G,pe){const Le=Object.assign({},pe);return Le.fullPath=Q.path,Le.size=G.size(),Le.contentType||(Le.contentType=function(Q,G){return G&&G.type()||"application/octet-stream"}(0,G)),Le}class Un{constructor(G,pe,Le,We){this.current=G,this.total=pe,this.finalized=!!Le,this.metadata=We||null}}function Cn(Q,G){let pe=null;try{pe=Q.getResponseHeader("X-Goog-Upload-Status")}catch(We){Yr(!1)}return Yr(!!pe&&-1!==(G||["active"]).indexOf(pe)),pe}const Br={STATE_CHANGED:"state_changed"},pt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yt(Q){switch(Q){case"running":case"pausing":case"canceling":return pt.RUNNING;case"paused":return pt.PAUSED;case"success":return pt.SUCCESS;case"canceled":return pt.CANCELED;case"error":default:return pt.ERROR}}class At{constructor(G,pe,Le){if("function"==typeof G||null!=pe||null!=Le)this.next=G,this.error=null!=pe?pe:void 0,this.complete=null!=Le?Le:void 0;else{const xt=G;this.next=xt.next,this.error=xt.error,this.complete=xt.complete}}}function Gt(Q){return(...G)=>{Promise.resolve().then(()=>Q(...G))}}class yn{constructor(G,pe,Le=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=G,this._blob=pe,this._metadata=Le,this._mappings=Ii(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=We=>{this._request=void 0,this._chunkMultiplier=1,We._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=We,this._transition("error"))},this._metadataErrorHandler=We=>{this._request=void 0,We._codeEquals("canceled")?this.completeTransitions_():(this._error=We,this._transition("error"))},this._promise=new Promise((We,xt)=>{this._resolve=We,this._reject=xt,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const G=this._transferred;return pe=>this._updateProgress(G+pe)}_shouldDoResumable(G){return G.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(G){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([pe,Le])=>{switch(this._state){case"running":G(pe,Le);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((G,pe)=>{const Le=function(Q,G,pe,Le,We){const xt=G.bucketOnlyServerUrl(),Wt=Pt(G,Le,We),en={name:Wt.fullPath},bn=mt(xt,Q.host,Q._protocol),mr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Le.size()}`,"X-Goog-Upload-Header-Content-Type":Wt.contentType,"Content-Type":"application/json; charset=utf-8"},Oi=Fi(Wt,pe),jr=new lr(bn,"POST",function(Bt){let ur;Cn(Bt);try{ur=Bt.getResponseHeader("X-Goog-Upload-URL")}catch(Ai){Yr(!1)}return Yr(gn(ur)),ur},Q.maxUploadRetryTime);return jr.urlParams=en,jr.headers=mr,jr.body=Oi,jr.errorHandler=On(G),jr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),We=this._ref.storage._makeRequest(Le,G,pe);this._request=We,We.getPromise().then(xt=>{this._request=void 0,this._uploadUrl=xt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const G=this._uploadUrl;this._resolveToken((pe,Le)=>{const We=function(Q,G,pe,Le){const bn=new lr(pe,"POST",function(zn){const mr=Cn(zn,["active","final"]);let Oi=null;try{Oi=zn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Fn){Yr(!1)}Oi||Yr(!1);const Mr=Number(Oi);return Yr(!isNaN(Mr)),new Un(Mr,Le.size(),"final"===mr)},Q.maxUploadRetryTime);return bn.headers={"X-Goog-Upload-Command":"query"},bn.errorHandler=On(G),bn}(this._ref.storage,this._ref._location,G,this._blob),xt=this._ref.storage._makeRequest(We,pe,Le);this._request=xt,xt.getPromise().then(Wt=>{Wt=Wt,this._request=void 0,this._updateProgress(Wt.current),this._needToFetchStatus=!1,Wt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const G=262144*this._chunkMultiplier,pe=new Un(this._transferred,this._blob.size()),Le=this._uploadUrl;this._resolveToken((We,xt)=>{let Wt;try{Wt=function(Q,G,pe,Le,We,xt,Wt,en){const bn=new Un(0,0);if(Wt?(bn.current=Wt.current,bn.total=Wt.total):(bn.current=0,bn.total=Le.size()),Le.size()!==bn.total)throw new ye("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const zn=bn.total-bn.current;let mr=zn;We>0&&(mr=Math.min(mr,We));const Oi=bn.current,jr={"X-Goog-Upload-Command":mr===zn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${bn.current}`},Bt=Le.slice(Oi,Oi+mr);if(null===Bt)throw Zt();const ai=new lr(pe,"POST",function(wi,Pr){const gs=Cn(wi,["active","final"]),Qs=bn.current+mr,Js=Le.size();let xl;return xl="final"===gs?Er(G,xt)(wi,Pr):null,new Un(Qs,Js,"final"===gs,xl)},G.maxUploadRetryTime);return ai.headers=jr,ai.body=Bt.uploadData(),ai.progressCallback=en||null,ai.errorHandler=On(Q),ai}(this._ref._location,this._ref.storage,Le,this._blob,G,this._mappings,pe,this._makeProgressCallback())}catch(bn){return this._error=bn,void this._transition("error")}const en=this._ref.storage._makeRequest(Wt,We,xt);this._request=en,en.getPromise().then(bn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(bn.current),bn.finalized?(this._metadata=bn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((G,pe)=>{const Le=jn(this._ref.storage,this._ref._location,this._mappings),We=this._ref.storage._makeRequest(Le,G,pe);this._request=We,We.getPromise().then(xt=>{this._request=void 0,this._metadata=xt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((G,pe)=>{const Le=function(Q,G,pe,Le,We){const xt=G.bucketOnlyServerUrl(),Wt={"X-Goog-Upload-Protocol":"multipart"},bn=function(){let ai="";for(let wi=0;wi<2;wi++)ai+=Math.random().toString().slice(2);return ai}();Wt["Content-Type"]="multipart/related; boundary="+bn;const zn=Pt(G,Le,We),mr=Fi(zn,pe),Fn=Sn.getBlob("--"+bn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+mr+"\r\n--"+bn+"\r\nContent-Type: "+zn.contentType+"\r\n\r\n",Le,"\r\n--"+bn+"--");if(null===Fn)throw Zt();const jr={name:zn.fullPath},Bt=mt(xt,Q.host,Q._protocol),Ai=Q.maxUploadRetryTime,Fr=new lr(Bt,"POST",Er(Q,pe),Ai);return Fr.urlParams=jr,Fr.headers=Wt,Fr.body=Fn.uploadData(),Fr.errorHandler=On(G),Fr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),We=this._ref.storage._makeRequest(Le,G,pe);this._request=We,We.getPromise().then(xt=>{this._request=void 0,this._metadata=xt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(G){const pe=this._transferred;this._transferred=G,this._transferred!==pe&&this._notifyObservers()}_transition(G){if(this._state!==G)switch(G){case"canceling":case"pausing":this._state=G,void 0!==this._request&&this._request.cancel();break;case"running":const pe="paused"===this._state;this._state=G,pe&&(this._notifyObservers(),this._start());break;case"paused":this._state=G,this._notifyObservers();break;case"canceled":this._error=Te(),this._state=G,this._notifyObservers();break;case"error":case"success":this._state=G,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const G=yt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:G,metadata:this._metadata,task:this,ref:this._ref}}on(G,pe,Le,We){const xt=new At(pe||void 0,Le||void 0,We||void 0);return this._addObserver(xt),()=>{this._removeObserver(xt)}}then(G,pe){return this._promise.then(G,pe)}catch(G){return this.then(null,G)}_addObserver(G){this._observers.push(G),this._notifyObserver(G)}_removeObserver(G){const pe=this._observers.indexOf(G);-1!==pe&&this._observers.splice(pe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(pe=>{this._notifyObserver(pe)})}_finishPromise(){if(void 0!==this._resolve){let G=!0;switch(yt(this._state)){case pt.SUCCESS:Gt(this._resolve.bind(null,this.snapshot))();break;case pt.CANCELED:case pt.ERROR:Gt(this._reject.bind(null,this._error))();break;default:G=!1}G&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(G){switch(yt(this._state)){case pt.RUNNING:case pt.PAUSED:G.next&&Gt(G.next.bind(G,this.snapshot))();break;case pt.SUCCESS:G.complete&&Gt(G.complete.bind(G))();break;case pt.CANCELED:case pt.ERROR:G.error&&Gt(G.error.bind(G,this._error))();break;default:G.error&&Gt(G.error.bind(G,this._error))()}}resume(){const G="paused"===this._state||"pausing"===this._state;return G&&this._transition("running"),G}pause(){const G="running"===this._state;return G&&this._transition("pausing"),G}cancel(){const G="running"===this._state||"pausing"===this._state;return G&&this._transition("canceling"),G}}class Ln{constructor(G,pe){this._service=G,this._location=pe instanceof Se?pe:Se.makeFromUrl(pe,G.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(G,pe){return new Ln(G,pe)}get root(){const G=new Se(this._location.bucket,"");return this._newRef(this._service,G)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kr(this._location.path)}get storage(){return this._service}get parent(){const G=function(Q){if(0===Q.length)return null;const G=Q.lastIndexOf("/");return-1===G?"":Q.slice(0,G)}(this._location.path);if(null===G)return null;const pe=new Se(this._location.bucket,G);return new Ln(this._service,pe)}_throwIfRoot(G){if(""===this._location.path)throw Dt(G)}}function oi(Q,G,pe){return sr.apply(this,arguments)}function sr(){return(sr=(0,be.Z)(function*(Q,G,pe){const We=yield Uo(Q,{pageToken:pe});G.prefixes.push(...We.prefixes),G.items.push(...We.items),null!=We.nextPageToken&&(yield oi(Q,G,We.nextPageToken))})).apply(this,arguments)}function Uo(Q,G){return hi.apply(this,arguments)}function hi(){return(hi=(0,be.Z)(function*(Q,G){null!=G&&"number"==typeof G.maxResults&&on("options.maxResults",1,1e3,G.maxResults);const pe=G||{},Le=yr(Q.storage,Q._location,"/",pe.pageToken,pe.maxResults);return(yield Q.storage.makeRequestWithTokens(Le)).getPromise()})).apply(this,arguments)}function Ps(){return(Ps=(0,be.Z)(function*(Q){Q._throwIfRoot("getMetadata");const G=jn(Q.storage,Q._location,Ii());return(yield Q.storage.makeRequestWithTokens(G)).getPromise()})).apply(this,arguments)}function cs(){return(cs=(0,be.Z)(function*(Q,G){Q._throwIfRoot("updateMetadata");const pe=ze(Q.storage,Q._location,G,Ii());return(yield Q.storage.makeRequestWithTokens(pe)).getPromise()})).apply(this,arguments)}function ri(){return(ri=(0,be.Z)(function*(Q){Q._throwIfRoot("getDownloadURL");const G=st(Q.storage,Q._location,Ii());return(yield Q.storage.makeRequestWithTokens(G)).getPromise().then(pe=>{if(null===pe)throw pr();return pe})})).apply(this,arguments)}function go(){return(go=(0,be.Z)(function*(Q){Q._throwIfRoot("deleteObject");const G=Ce(Q.storage,Q._location);return(yield Q.storage.makeRequestWithTokens(G)).getPromise()})).apply(this,arguments)}function mo(Q,G){const pe=function(Q,G){const pe=G.split("/").filter(Le=>Le.length>0).join("/");return 0===Q.length?pe:Q+"/"+pe}(Q._location.path,G),Le=new Se(Q._location.bucket,pe);return new Ln(Q.storage,Le)}function ks(Q,G){if(Q instanceof Ks){const pe=Q;if(null==pe._bucket)throw new ye("no-default-bucket","No default bucket found. Did you set the '"+nt+"' property when initializing the app?");const Le=new Ln(pe,pe._bucket);return null!=G?ks(Le,G):Le}return void 0!==G?mo(Q,G):Q}function Jo(Q,G){if(G&&function(Q){return/^[A-Za-z]+:\/\//.test(Q)}(G)){if(Q instanceof Ks)return function(Q,G){return new Ln(Q,G)}(Q,G);throw vn("To use ref(service, url), the first argument must be a Storage instance.")}return ks(Q,G)}function hs(Q,G){const pe=null==G?void 0:G[nt];return null==pe?null:Se.makeFromBucketSpec(pe,Q)}class Ks{constructor(G,pe,Le,We,xt,Wt){this.app=G,this._authProvider=pe,this._appCheckProvider=Le,this._pool=We,this._url=xt,this._firebaseVersion=Wt,this._bucket=null,this._host=it,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=xt?Se.makeFromBucketSpec(xt,this._host):hs(this._host,this.app.options)}get host(){return this._host}set host(G){this._host=G,this._bucket=null!=this._url?Se.makeFromBucketSpec(this._url,G):hs(G,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(G){on("time",0,Number.POSITIVE_INFINITY,G),this._maxUploadRetryTime=G}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(G){on("time",0,Number.POSITIVE_INFINITY,G),this._maxOperationRetryTime=G}_getAuthToken(){var G=this;return(0,be.Z)(function*(){if(G._overrideAuthToken)return G._overrideAuthToken;const pe=G._authProvider.getImmediate({optional:!0});if(pe){const Le=yield pe.getToken();if(null!==Le)return Le.accessToken}return null})()}_getAppCheckToken(){var G=this;return(0,be.Z)(function*(){const pe=G._appCheckProvider.getImmediate({optional:!0});return pe?(yield pe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(G=>G.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(G){return new Ln(this,G)}_makeRequest(G,pe,Le){if(this._deleted)return new et(Et());{const We=function(Q,G,pe,Le,We,xt){const Wt=Je(Q.urlParams),en=Q.url+Wt,bn=Object.assign({},Q.headers);return function(Q,G){G&&(Q["X-Firebase-GMPID"]=G)}(bn,G),function(Q,G){null!==G&&G.length>0&&(Q.Authorization="Firebase "+G)}(bn,pe),function(Q,G){Q["X-Firebase-Storage-Version"]="webjs/"+(null!=G?G:"AppManager")}(bn,xt),function(Q,G){null!==G&&(Q["X-Firebase-AppCheck"]=G)}(bn,Le),new Kt(en,Q.method,bn,Q.body,Q.successCodes,Q.additionalRetryCodes,Q.handler,Q.errorHandler,Q.timeout,Q.progressCallback,We)}(G,this._appId,pe,Le,this._pool,this._firebaseVersion);return this._requests.add(We),We.getPromise().then(()=>this._requests.delete(We),()=>this._requests.delete(We)),We}}makeRequestWithTokens(G){var pe=this;return(0,be.Z)(function*(){const[Le,We]=yield Promise.all([pe._getAuthToken(),pe._getAppCheckToken()]);return pe._makeRequest(G,Le,We)})()}}const Li="@firebase/storage";function Ui(Q,G){return Jo(Q=(0,Oe.m9)(Q),G)}(0,je._registerComponent)(new Ye.wA("storage",function(Q,{instanceIdentifier:G}){const pe=Q.getProvider("app").getImmediate(),Le=Q.getProvider("auth-internal"),We=Q.getProvider("app-check-internal");return new Ks(pe,Le,We,new rt,G,je.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,je.registerVersion)(Li,"0.8.4",""),(0,je.registerVersion)(Li,"0.8.4","esm2017");class oo{constructor(G,pe,Le){this._delegate=G,this.task=pe,this.ref=Le}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ys{constructor(G,pe){this._delegate=G,this._ref=pe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oo(this._delegate.snapshot,this,this._ref)}then(G,pe){return this._delegate.then(Le=>{if(G)return G(new oo(Le,this,this._ref))},pe)}on(G,pe,Le,We){let xt;return pe&&(xt="function"==typeof pe?Wt=>pe(new oo(Wt,this,this._ref)):{next:pe.next?Wt=>pe.next(new oo(Wt,this,this._ref)):void 0,complete:pe.complete||void 0,error:pe.error||void 0}),this._delegate.on(G,xt,Le||void 0,We||void 0)}}class Cs{constructor(G,pe){this._delegate=G,this._service=pe}get prefixes(){return this._delegate.prefixes.map(G=>new Si(G,this._service))}get items(){return this._delegate.items.map(G=>new Si(G,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Si{constructor(G,pe){this._delegate=G,this.storage=pe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(G){const pe=function(Q,G){return mo(Q,G)}(this._delegate,G);return new Si(pe,this.storage)}get root(){return new Si(this._delegate.root,this.storage)}get parent(){const G=this._delegate.parent;return null==G?null:new Si(G,this.storage)}put(G,pe){return this._throwIfRoot("put"),new Ys(function(Q,G,pe){return function(Q,G,pe){return Q._throwIfRoot("uploadBytesResumable"),new yn(Q,new Sn(G),pe)}(Q=(0,Oe.m9)(Q),G,pe)}(this._delegate,G,pe),this)}putString(G,pe=Gr.RAW,Le){this._throwIfRoot("putString");const We=qe(pe,G),xt=Object.assign({},Le);return null==xt.contentType&&null!=We.contentType&&(xt.contentType=We.contentType),new Ys(new yn(this._delegate,new Sn(We.data,!0),xt),this)}listAll(){return(Q=this._delegate,function(Q){const G={prefixes:[],items:[]};return oi(Q,G).then(()=>G)}(Q=(0,Oe.m9)(Q))).then(G=>new Cs(G,this.storage));var Q}list(G){return function(Q,G){return Uo(Q=(0,Oe.m9)(Q),G)}(this._delegate,G||void 0).then(pe=>new Cs(pe,this.storage))}getMetadata(){return function(Q){return Ps.apply(this,arguments)}((0,Oe.m9)(this._delegate))}updateMetadata(G){return function(Q,G){return function(Q,G){return cs.apply(this,arguments)}(Q=(0,Oe.m9)(Q),G)}(this._delegate,G)}getDownloadURL(){return function(Q){return ri.apply(this,arguments)}((0,Oe.m9)(this._delegate))}delete(){return this._throwIfRoot("delete"),function(Q){return go.apply(this,arguments)}((0,Oe.m9)(this._delegate))}_throwIfRoot(G){if(""===this._delegate._location.path)throw Dt(G)}}class j{constructor(G,pe){this.app=G,this._delegate=pe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(G){if(ne(G))throw vn("ref() expected a child path but got a URL, use refFromURL instead.");return new Si(Ui(this._delegate,G),this)}refFromURL(G){if(!ne(G))throw vn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Se.makeFromUrl(G,this._delegate.host)}catch(pe){throw vn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Si(Ui(this._delegate,G),this)}setMaxUploadRetryTime(G){this._delegate.maxUploadRetryTime=G}setMaxOperationRetryTime(G){this._delegate.maxOperationRetryTime=G}useEmulator(G,pe,Le={}){!function(Q,G,pe,Le={}){!function(Q,G,pe,Le={}){Q.host=`${G}:${pe}`,Q._protocol="http";const{mockUserToken:We}=Le;We&&(Q._overrideAuthToken="string"==typeof We?We:(0,Oe.Sg)(We,Q.app.options.projectId))}(Q,G,pe,Le)}(this._delegate,G,pe,Le)}}function ne(Q){return/^[A-Za-z]+:\/\//.test(Q)}function gt(Q,{instanceIdentifier:G}){const pe=Q.getProvider("app-compat").getImmediate(),Le=Q.getProvider("storage").getImmediate({identifier:G});return new j(pe,Le)}!function(Q){const G={TaskState:pt,TaskEvent:Br,StringFormat:Gr,Storage:j,Reference:Si};Q.INTERNAL.registerComponent(new Ye.wA("storage-compat",gt,"PUBLIC").setServiceProps(G).setMultipleInstances(!0)),Q.registerVersion("@firebase/storage-compat","0.1.4")}(de.Z);var L=N(2965),k=N(7841);function X(Q){const G=function(Q){return new f.y(G=>{const pe=Wt=>G.next(Wt);pe(Q.snapshot);const xt=Q.on("state_changed",pe);return Q.then(Wt=>{pe(Wt),G.complete()},Wt=>{pe(Q.snapshot),(Wt=>{G.error(Wt)})(Wt)}),function(){xt()}}).pipe(function(Q,G=me.z){return(0,le.e)((pe,Le)=>{let We=null,xt=null,Wt=null;const en=()=>{if(We){We.unsubscribe(),We=null;const zn=xt;xt=null,Le.next(zn)}};function bn(){const zn=Wt+Q,mr=G.now();if(mr<zn)return We=this.schedule(void 0,zn-mr),void Le.add(We);en()}pe.subscribe(new ue.Q(Le,zn=>{xt=zn,Wt=G.now(),We||(We=G.schedule(bn,Q),Le.add(We))},()=>{en(),Le.complete()},void 0,()=>{xt=We=null}))})}(0))}(Q);return{task:Q,then:Q.then.bind(Q),catch:Q.catch.bind(Q),pause:Q.pause.bind(Q),cancel:Q.cancel.bind(Q),resume:Q.resume.bind(Q),snapshotChanges:()=>G,percentageChanges:()=>G.pipe((0,Me.U)(pe=>pe.bytesTransferred/pe.totalBytes*100))}}function dt(Q){return{getDownloadURL:()=>(0,v.of)(void 0).pipe(K.fc,(0,ge.w)(()=>Q.getDownloadURL()),K.iC),getMetadata:()=>(0,v.of)(void 0).pipe(K.fc,(0,ge.w)(()=>Q.getMetadata()),K.iC),delete:()=>(0,J.D)(Q.delete()),child:G=>dt(Q.child(G)),updateMetadata:G=>(0,J.D)(Q.updateMetadata(G)),put:(G,pe)=>X(Q.put(G,pe)),putString:(G,pe,Le)=>X(Q.putString(G,pe,Le)),list:G=>(0,J.D)(Q.list(G)),listAll:()=>(0,J.D)(Q.listAll())}}const Ft=new Z.OlP("angularfire2.storageBucket"),an=new Z.OlP("angularfire2.storage.maxUploadRetryTime"),Xn=new Z.OlP("angularfire2.storage.maxOperationRetryTime"),ii=new Z.OlP("angularfire2.storage.use-emulator");let Wr=(()=>{class Q{constructor(pe,Le,We,xt,Wt,en,bn,zn,mr,Oi){const Mr=(0,te.on)(pe,Wt,Le);this.storage=(0,te.cc)(`${Mr.name}.storage.${We}`,"AngularFireStorage",Mr.name,()=>{const Fn=Wt.runOutsideAngular(()=>Mr.storage(We||void 0)),jr=mr;return jr&&Fn.useEmulator(...jr),bn&&Fn.setMaxUploadRetryTime(bn),zn&&Fn.setMaxOperationRetryTime(zn),Fn},[bn,zn])}ref(pe){return dt(this.storage.ref(pe))}refFromURL(pe){return dt(this.storage.refFromURL(pe))}upload(pe,Le,We){return dt(this.storage.ref(pe)).put(Le,We)}}return Q.\u0275fac=function(pe){return new(pe||Q)(Z.LFG(te.Dh),Z.LFG(te.xv,8),Z.LFG(Ft,8),Z.LFG(Z.Lbi),Z.LFG(Z.R0b),Z.LFG(K.HU),Z.LFG(an,8),Z.LFG(Xn,8),Z.LFG(ii,8),Z.LFG(L.nm,8))},Q.\u0275prov=Z.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"any"}),Q})(),ps=(()=>{class Q{}return Q.\u0275fac=function(pe){return new(pe||Q)},Q.\u0275mod=Z.oAB({type:Q}),Q.\u0275inj=Z.cJS({}),Q})(),Bs=(()=>{class Q{constructor(){k.Z.registerVersion("angularfire",K.q4.full,"gcs-compat")}}return Q.\u0275fac=function(pe){return new(pe||Q)},Q.\u0275mod=Z.oAB({type:Q}),Q.\u0275inj=Z.cJS({providers:[Wr],imports:[ps]}),Q})()},8939:(Vt,Ie,N)=>{"use strict";N.d(Ie,{hO:()=>de,xv:()=>ge,Dh:()=>Me,GT:()=>ue,cc:()=>be,on:()=>K,pX:()=>le});var f=N(639),v=N(7841),J=N(8797);Vt=N.hmd(Vt);const me=["ngOnDestroy"],le=(Qe,it,nt,Ze={})=>new Proxy(Qe,{get:(Xe,ye)=>nt.runOutsideAngular(()=>{var Qt;if(Qe[ye])return(null===(Qt=null==Ze?void 0:Ze.spy)||void 0===Qt?void 0:Qt.get)&&Ze.spy.get(ye,Qe[ye]),Qe[ye];if(me.indexOf(ye)>-1)return()=>{};const De=it.toPromise().then(Ge=>{const ce=Ge&&Ge[ye];return"function"==typeof ce?ce.bind(Ge):ce&&ce.then?ce.then(Ne=>nt.run(()=>Ne)):nt.run(()=>ce)});return new Proxy(()=>{},{get:(Ge,ce)=>De[ce],apply:(Ge,ce,Ne)=>De.then(Re=>{var _e;const ct=Re&&Re(...Ne);return(null===(_e=null==Ze?void 0:Ze.spy)||void 0===_e?void 0:_e.apply)&&Ze.spy.apply(ye,Ne,ct),ct})})})}),ue=(Qe,it)=>{it.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Ze=>{Object.defineProperty(Qe.prototype,Ze,Object.getOwnPropertyDescriptor(nt.prototype||nt,Ze))})})};class Ae{constructor(it){return it}}const Me=new f.OlP("angularfire2.app.options"),ge=new f.OlP("angularfire2.app.name");function K(Qe,it,nt){const Xe="object"==typeof nt&&nt||{};Xe.name=Xe.name||"string"==typeof nt&&nt||"[DEFAULT]";const Qt=v.Z.apps.filter(De=>De&&De.name===Xe.name)[0]||it.runOutsideAngular(()=>v.Z.initializeApp(Qe,Xe));try{JSON.stringify(Qe)!==JSON.stringify(Qt.options)&&Z("error",`${Qt.name} Firebase App already initialized with different options${Vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(De){}return new Ae(Qt)}const Z=(Qe,...it)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Qe](...it)},te={provide:Ae,useFactory:K,deps:[Me,f.R0b,[new f.FiY,ge]]};let de=(()=>{class Qe{constructor(nt){v.Z.registerVersion("angularfire",J.q4.full,"core"),v.Z.registerVersion("angularfire",J.q4.full,"app-compat"),v.Z.registerVersion("angular",f.q4F.full,nt.toString())}static initializeApp(nt,Ze){return{ngModule:Qe,providers:[{provide:Me,useValue:nt},{provide:ge,useValue:Ze}]}}}return Qe.\u0275fac=function(nt){return new(nt||Qe)(f.LFG(f.Lbi))},Qe.\u0275mod=f.oAB({type:Qe}),Qe.\u0275inj=f.cJS({providers:[te]}),Qe})();function be(Qe,it,nt,Ze,Xe){const[,ye,Qt]=globalThis.\u0275AngularfireInstanceCache.find(De=>De[0]===Qe)||[];if(ye)return function(Qe,it){try{return Qe.toString()===it.toString()}catch(nt){return Qe===it}}(Xe,Qt)||(Ye("error",`${it} was already initialized on the ${nt} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:Xe,was:Qt})),ye;{const De=Ze();return globalThis.\u0275AngularfireInstanceCache.push([Qe,De,Xe]),De}}const Oe=!!Vt.hot,Ye=(Qe,...it)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Qe](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8797:(Vt,Ie,N)=>{"use strict";N.d(Ie,{q4:()=>Ss,iC:()=>qi,fc:()=>to,HU:()=>wh,vb:()=>Go,JM:()=>Ga});var f=N(639),v=N(2329),J=N(8239),me=N(5452),le=N(3854),ue=N(6034),Ae=N(5601),Me=N(6676);const ge="@firebase/installations",K="0.5.2",te=`w:${K}`,de="FIS_v2",it=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(F){return F instanceof le.ZR&&F.code.includes("request-failed")}function Ze({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function Xe(F){return{token:F.token,requestStatus:2,expiresIn:Re(F.expiresIn),creationTime:Date.now()}}function ye(F,H){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,J.Z)(function*(F,H){const xe=(yield H.json()).error;return it.create("request-failed",{requestName:F,serverCode:xe.code,serverMessage:xe.message,serverStatus:xe.status})})).apply(this,arguments)}function De({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function Ge(F,{refreshToken:H}){const oe=De(F);return oe.append("Authorization",function(F){return`${de} ${F}`}(H)),oe}function ce(F){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,J.Z)(function*(F){const H=yield F();return H.status>=500&&H.status<600?F():H})).apply(this,arguments)}function Re(F){return Number(F.replace("s","000"))}function ct(F,H){return Te.apply(this,arguments)}function Te(){return(Te=(0,J.Z)(function*(F,{fid:H}){const oe=Ze(F),Rt={method:"POST",headers:De(F),body:JSON.stringify({fid:H,authVersion:de,appId:F.appId,sdkVersion:te})},Jt=yield ce(()=>fetch(oe,Rt));if(Jt.ok){const An=yield Jt.json();return{fid:An.fid||H,registrationStatus:2,refreshToken:An.refreshToken,authToken:Xe(An.authToken)}}throw yield ye("Create Installation",Jt)})).apply(this,arguments)}function jt(F){return new Promise(H=>{setTimeout(H,F)})}const Bn=/^[cdef][\w-]{21}$/;function xn(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const oe=function(F){return function(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return Bn.test(oe)?oe:""}catch(F){return""}}function vn(F){return`${F.appName}!${F.appId}`}const Et=new Map;function Dt(F,H){const oe=vn(F);bt(oe,H),function(F,H){const oe=(!rt&&"BroadcastChannel"in self&&(rt=new BroadcastChannel("[Firebase] FID Change"),rt.onmessage=F=>{bt(F.data.key,F.data.fid)}),rt);oe&&oe.postMessage({key:F,fid:H}),0===Et.size&&rt&&(rt.close(),rt=null)}(oe,H)}function bt(F,H){const oe=Et.get(F);if(oe)for(const xe of oe)xe(H)}let rt=null;const dn="firebase-installations-store";let En=null;function Jn(){return En||(En=(0,Me.openDb)("firebase-installations-database",1,F=>{switch(F.oldVersion){case 0:F.createObjectStore(dn)}})),En}function gn(F,H){return qn.apply(this,arguments)}function qn(){return(qn=(0,J.Z)(function*(F,H){const oe=vn(F),ft=(yield Jn()).transaction(dn,"readwrite"),Rt=ft.objectStore(dn),Jt=yield Rt.get(oe);return yield Rt.put(H,oe),yield ft.complete,(!Jt||Jt.fid!==H.fid)&&Dt(F,H.fid),H})).apply(this,arguments)}function Tt(F){return on.apply(this,arguments)}function on(){return(on=(0,J.Z)(function*(F){const H=vn(F),xe=(yield Jn()).transaction(dn,"readwrite");yield xe.objectStore(dn).delete(H),yield xe.complete})).apply(this,arguments)}function mt(F,H){return Je.apply(this,arguments)}function Je(){return(Je=(0,J.Z)(function*(F,H){const oe=vn(F),ft=(yield Jn()).transaction(dn,"readwrite"),Rt=ft.objectStore(dn),Jt=yield Rt.get(oe),An=H(Jt);return void 0===An?yield Rt.delete(oe):yield Rt.put(An,oe),yield ft.complete,An&&(!Jt||Jt.fid!==An.fid)&&Dt(F,An.fid),An})).apply(this,arguments)}function Kt(F){return cn.apply(this,arguments)}function cn(){return(cn=(0,J.Z)(function*(F){let H;const oe=yield mt(F,xe=>{const ft=kt(xe),Rt=ln(F,ft);return H=Rt.registrationPromise,Rt.installationEntry});return""===oe.fid?{installationEntry:yield H}:{installationEntry:oe,registrationPromise:H}})).apply(this,arguments)}function kt(F){return ni(F||{fid:xn(),registrationStatus:0})}function ln(F,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(it.create("app-offline"))};const oe={fid:H.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:oe,registrationPromise:function(F,H){return re.apply(this,arguments)}(F,oe)}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:tr(F)}:{installationEntry:H}}function re(){return(re=(0,J.Z)(function*(F,H){try{return gn(F,yield ct(F,H))}catch(oe){throw nt(oe)&&409===oe.customData.serverCode?yield Tt(F):yield gn(F,{fid:H.fid,registrationStatus:0}),oe}})).apply(this,arguments)}function tr(F){return ar.apply(this,arguments)}function ar(){return(ar=(0,J.Z)(function*(F){let H=yield Sr(F);for(;1===H.registrationStatus;)yield jt(100),H=yield Sr(F);if(0===H.registrationStatus){const{installationEntry:oe,registrationPromise:xe}=yield Kt(F);return xe||oe}return H})).apply(this,arguments)}function Sr(F){return mt(F,H=>{if(!H)throw it.create("installation-not-found");return ni(H)})}function ni(F){return function(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function Gr(F,H){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,J.Z)(function*({appConfig:F,platformLoggerProvider:H},oe){const xe=qe(F,oe),ft=Ge(F,oe),Rt=H.getImmediate({optional:!0});Rt&&ft.append("x-firebase-client",Rt.getPlatformInfoString());const An={method:"POST",headers:ft,body:JSON.stringify({installation:{sdkVersion:te}})},hn=yield ce(()=>fetch(xe,An));if(hn.ok)return Xe(yield hn.json());throw yield ye("Generate Auth Token",hn)})).apply(this,arguments)}function qe(F,{fid:H}){return`${Ze(F)}/${H}/authTokens:generate`}function He(F){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,J.Z)(function*(F,H=!1){let oe;const xe=yield mt(F.appConfig,Rt=>{if(!Sn(Rt))throw it.create("not-registered");const Jt=Rt.authToken;if(!H&&_r(Jt))return Rt;if(1===Jt.requestStatus)return oe=_t(F,H),Rt;{if(!navigator.onLine)throw it.create("app-offline");const An=qr(Rt);return oe=vr(F,An),An}});return oe?yield oe:xe.authToken})).apply(this,arguments)}function _t(F,H){return rn.apply(this,arguments)}function rn(){return(rn=(0,J.Z)(function*(F,H){let oe=yield Vn(F.appConfig);for(;1===oe.authToken.requestStatus;)yield jt(100),oe=yield Vn(F.appConfig);const xe=oe.authToken;return 0===xe.requestStatus?He(F,H):xe})).apply(this,arguments)}function Vn(F){return mt(F,H=>{if(!Sn(H))throw it.create("not-registered");return function(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function vr(F,H){return ir.apply(this,arguments)}function ir(){return(ir=(0,J.Z)(function*(F,H){try{const oe=yield Gr(F,H),xe=Object.assign(Object.assign({},H),{authToken:oe});return yield gn(F.appConfig,xe),oe}catch(oe){if(!nt(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const xe=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield gn(F.appConfig,xe)}else yield Tt(F.appConfig);throw oe}})).apply(this,arguments)}function Sn(F){return void 0!==F&&2===F.registrationStatus}function _r(F){return 2===F.requestStatus&&!function(F){const H=Date.now();return H<F.creationTime||F.creationTime+F.expiresIn<H+36e5}(F)}function qr(F){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:H})}function rr(){return(rr=(0,J.Z)(function*(F){const H=F,{installationEntry:oe,registrationPromise:xe}=yield Kt(H.appConfig);return xe?xe.catch(console.error):He(H).catch(console.error),oe.fid})).apply(this,arguments)}function ji(){return(ji=(0,J.Z)(function*(F,H=!1){const oe=F;return yield Ii(oe.appConfig),(yield He(oe,H)).token})).apply(this,arguments)}function Ii(F){return di.apply(this,arguments)}function di(){return(di=(0,J.Z)(function*(F){const{registrationPromise:H}=yield Kt(F);H&&(yield H)})).apply(this,arguments)}function lr(F){return it.create("missing-app-config-values",{valueName:F})}const Yr="installations";(0,me._registerComponent)(new ue.wA(Yr,F=>{const H=F.getProvider("app").getImmediate();return{app:H,appConfig:function(F){if(!F||!F.options)throw lr("App Configuration");if(!F.name)throw lr("App Name");const H=["projectId","apiKey","appId"];for(const oe of H)if(!F.options[oe])throw lr(oe);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(H),platformLoggerProvider:(0,me._getProvider)(H,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,me._registerComponent)(new ue.wA("installations-internal",F=>{const H=F.getProvider("app").getImmediate(),oe=(0,me._getProvider)(H,Yr).getImmediate();return{getId:()=>function(F){return rr.apply(this,arguments)}(oe),getToken:ft=>function(F){return ji.apply(this,arguments)}(oe,ft)}},"PRIVATE")),(0,me.registerVersion)(ge,K),(0,me.registerVersion)(ge,K,"esm2017");const qt="@firebase/remote-config",Ce=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $i{constructor(H,oe,xe,ft){this.client=H,this.storage=oe,this.storageCache=xe,this.logger=ft}isCachedDataFresh(H,oe){if(!oe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const xe=Date.now()-oe,ft=xe<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${xe}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${ft}.`),ft}fetch(H){var oe=this;return(0,J.Z)(function*(){const[xe,ft]=yield Promise.all([oe.storage.getLastSuccessfulFetchTimestampMillis(),oe.storage.getLastSuccessfulFetchResponse()]);if(ft&&oe.isCachedDataFresh(H.cacheMaxAgeMillis,xe))return ft;H.eTag=ft&&ft.eTag;const Rt=yield oe.client.fetch(H),Jt=[oe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&Jt.push(oe.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(Jt),Rt})()}}function oi(F=navigator){return F.languages&&F.languages[0]||F.language}class sr{constructor(H,oe,xe,ft,Rt,Jt){this.firebaseInstallations=H,this.sdkVersion=oe,this.namespace=xe,this.projectId=ft,this.apiKey=Rt,this.appId=Jt}fetch(H){var oe=this;return(0,J.Z)(function*(){const[xe,ft]=yield Promise.all([oe.firebaseInstallations.getId(),oe.firebaseInstallations.getToken()]),Jt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${oe.projectId}/namespaces/${oe.namespace}:fetch?key=${oe.apiKey}`,An={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},hn={sdk_version:oe.sdkVersion,app_instance_id:xe,app_instance_id_token:ft,app_id:oe.appId,language_code:oi()},fr={method:"POST",headers:An,body:JSON.stringify(hn)},zr=fetch(Jt,fr),no=new Promise((Oo,Io)=>{H.signal.addEventListener(()=>{const Pu=new Error("The operation was aborted.");Pu.name="AbortError",Io(Pu)})});let As;try{yield Promise.race([zr,no]),As=yield zr}catch(Oo){let Io="fetch-client-network";throw"AbortError"===Oo.name&&(Io="fetch-timeout"),Ce.create(Io,{originalErrorMessage:Oo.message})}let Ds=As.status;const To=As.headers.get("ETag")||void 0;let au,za;if(200===As.status){let Oo;try{Oo=yield As.json()}catch(Io){throw Ce.create("fetch-client-parse",{originalErrorMessage:Io.message})}au=Oo.entries,za=Oo.state}if("INSTANCE_STATE_UNSPECIFIED"===za?Ds=500:"NO_CHANGE"===za?Ds=304:("NO_TEMPLATE"===za||"EMPTY_CONFIG"===za)&&(au={}),304!==Ds&&200!==Ds)throw Ce.create("fetch-status",{httpStatus:Ds});return{status:Ds,eTag:To,config:au}})()}}class fi{constructor(H,oe){this.client=H,this.storage=oe}fetch(H){var oe=this;return(0,J.Z)(function*(){const xe=(yield oe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return oe.attemptFetch(H,xe)})()}attemptFetch(H,{throttleEndTimeMillis:oe,backoffCount:xe}){var ft=this;return(0,J.Z)(function*(){yield function(F,H){return new Promise((oe,xe)=>{const ft=Math.max(H-Date.now(),0),Rt=setTimeout(oe,ft);F.addEventListener(()=>{clearTimeout(Rt),xe(Ce.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,oe);try{const Rt=yield ft.client.fetch(H);return yield ft.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function(F){if(!(F instanceof le.ZR&&F.customData))return!1;const H=Number(F.customData.httpStatus);return 429===H||500===H||503===H||504===H}(Rt))throw Rt;const Jt={throttleEndTimeMillis:Date.now()+(0,le.$s)(xe),backoffCount:xe+1};return yield ft.storage.setThrottleMetadata(Jt),ft.attemptFetch(H,Jt)}})()}}class cs{constructor(H,oe,xe,ft,Rt){this.app=H,this._client=oe,this._storageCache=xe,this._storage=ft,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ri(F,H){const oe=F.target.error||void 0;return Ce.create(H,{originalErrorMessage:oe&&oe.message})}const ri="app_namespace_store";class Ro{constructor(H,oe,xe,ft=function(){return new Promise((F,H)=>{try{const oe=indexedDB.open("firebase_remote_config",1);oe.onerror=xe=>{H(Ri(xe,"storage-open"))},oe.onsuccess=xe=>{F(xe.target.result)},oe.onupgradeneeded=xe=>{const ft=xe.target.result;switch(xe.oldVersion){case 0:ft.createObjectStore(ri,{keyPath:"compositeKey"})}}}catch(oe){H(Ce.create("storage-open",{originalErrorMessage:oe}))}})}()){this.appId=H,this.appName=oe,this.namespace=xe,this.openDbPromise=ft}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var oe=this;return(0,J.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((ft,Rt)=>{const An=xe.transaction([ri],"readonly").objectStore(ri),hn=oe.createCompositeKey(H);try{const fr=An.get(hn);fr.onerror=zr=>{Rt(Ri(zr,"storage-get"))},fr.onsuccess=zr=>{const no=zr.target.result;ft(no?no.value:void 0)}}catch(fr){Rt(Ce.create("storage-get",{originalErrorMessage:fr&&fr.message}))}})})()}set(H,oe){var xe=this;return(0,J.Z)(function*(){const ft=yield xe.openDbPromise;return new Promise((Rt,Jt)=>{const hn=ft.transaction([ri],"readwrite").objectStore(ri),fr=xe.createCompositeKey(H);try{const zr=hn.put({compositeKey:fr,value:oe});zr.onerror=no=>{Jt(Ri(no,"storage-set"))},zr.onsuccess=()=>{Rt()}}catch(zr){Jt(Ce.create("storage-set",{originalErrorMessage:zr&&zr.message}))}})})()}delete(H){var oe=this;return(0,J.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((ft,Rt)=>{const An=xe.transaction([ri],"readwrite").objectStore(ri),hn=oe.createCompositeKey(H);try{const fr=An.delete(hn);fr.onerror=zr=>{Rt(Ri(zr,"storage-delete"))},fr.onsuccess=()=>{ft()}}catch(fr){Rt(Ce.create("storage-delete",{originalErrorMessage:fr&&fr.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class ds{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,J.Z)(function*(){const oe=H.storage.getLastFetchStatus(),xe=H.storage.getLastSuccessfulFetchTimestampMillis(),ft=H.storage.getActiveConfig(),Rt=yield oe;Rt&&(H.lastFetchStatus=Rt);const Jt=yield xe;Jt&&(H.lastSuccessfulFetchTimestampMillis=Jt);const An=yield ft;An&&(H.activeConfig=An)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function so(){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,J.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(F){return!1}})).apply(this,arguments)}(0,me._registerComponent)(new ue.wA("remote-config",function(H,{instanceIdentifier:oe}){const xe=H.getProvider("app").getImmediate(),ft=H.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ce.create("registration-window");if(!(0,le.hl)())throw Ce.create("indexed-db-unavailable");const{projectId:Rt,apiKey:Jt,appId:An}=xe.options;if(!Rt)throw Ce.create("registration-project-id");if(!Jt)throw Ce.create("registration-api-key");if(!An)throw Ce.create("registration-app-id");const hn=new Ro(An,xe.name,oe=oe||"firebase"),fr=new ds(hn),zr=new Ae.Yd(qt);zr.logLevel=Ae.in.ERROR;const no=new sr(ft,me.SDK_VERSION,oe,Rt,Jt,An),As=new fi(no,hn),Ds=new $i(As,hn,fr,zr),To=new cs(xe,Ds,fr,hn,zr);return function(F){const H=(0,le.m9)(F);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(To),To},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(qt,"0.3.1"),(0,me.registerVersion)(qt,"0.3.1","esm2017");const Li="/firebase-messaging-sw.js",Fs="/firebase-cloud-messaging-push-scope",Pi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xo="google.c.a.c_id",Bo="google.c.a.c_l",ea="google.c.a.ts",fs="google.c.a.e";var Ls=(()=>{return(F=Ls||(Ls={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Ls;var F})();function Hi(F){const H=new Uint8Array(F);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fa(F){const oe=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),xe=atob(oe),ft=new Uint8Array(xe.length);for(let Rt=0;Rt<xe.length;++Rt)ft[Rt]=xe.charCodeAt(Rt);return ft}const Ui="fcm_token_details_db",_o="fcm_token_object_Store";function Us(F){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,J.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Rt=>Rt.name).includes(Ui))return null;let H=null;return(yield(0,Me.openDb)(Ui,5,function(){var xe=(0,J.Z)(function*(ft){var Rt;if(ft.oldVersion<2||!ft.objectStoreNames.contains(_o))return;const Jt=ft.transaction.objectStore(_o),An=yield Jt.index("fcmSenderId").get(F);if(yield Jt.clear(),An)if(2===ft.oldVersion){const hn=An;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;H={token:hn.fcmToken,createTime:null!==(Rt=hn.createTime)&&void 0!==Rt?Rt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:Hi(hn.vapidKey)}}}else if(3===ft.oldVersion){const hn=An;H={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Hi(hn.auth),p256dh:Hi(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Hi(hn.vapidKey)}}}else if(4===ft.oldVersion){const hn=An;H={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:Hi(hn.auth),p256dh:Hi(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:Hi(hn.vapidKey)}}}});return function(ft){return xe.apply(this,arguments)}}())).close(),yield(0,Me.deleteDb)(Ui),yield(0,Me.deleteDb)("fcm_vapid_details_db"),yield(0,Me.deleteDb)("undefined"),Vs(H)?H:null})).apply(this,arguments)}function Vs(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:H}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const Cs="firebase-messaging-store";let Si=null;function j(){return Si||(Si=(0,Me.openDb)("firebase-messaging-database",1,F=>{switch(F.oldVersion){case 0:F.createObjectStore(Cs)}})),Si}function ne(F){return $.apply(this,arguments)}function $(){return($=(0,J.Z)(function*(F){const H=L(F),xe=yield(yield j()).transaction(Cs).objectStore(Cs).get(H);if(xe)return xe;{const ft=yield Us(F.appConfig.senderId);if(ft)return yield ie(F,ft),ft}})).apply(this,arguments)}function ie(F,H){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,J.Z)(function*(F,H){const oe=L(F),ft=(yield j()).transaction(Cs,"readwrite");return yield ft.objectStore(Cs).put(H,oe),yield ft.complete,H})).apply(this,arguments)}function gt(F){return $t.apply(this,arguments)}function $t(){return($t=(0,J.Z)(function*(F){const H=L(F),xe=(yield j()).transaction(Cs,"readwrite");yield xe.objectStore(Cs).delete(H),yield xe.complete})).apply(this,arguments)}function L({appConfig:F}){return F.appId}const O=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function X(F,H){return dt.apply(this,arguments)}function dt(){return(dt=(0,J.Z)(function*(F,H){const oe=yield Ur(F),xe=Bs(H),ft={method:"POST",headers:oe,body:JSON.stringify(xe)};let Rt;try{Rt=yield(yield fetch(Wr(F.appConfig),ft)).json()}catch(Jt){throw O.create("token-subscribe-failed",{errorInfo:Jt})}if(Rt.error)throw O.create("token-subscribe-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw O.create("token-subscribe-no-token");return Rt.token})).apply(this,arguments)}function Ft(F,H){return an.apply(this,arguments)}function an(){return(an=(0,J.Z)(function*(F,H){const oe=yield Ur(F),xe=Bs(H.subscriptionOptions),ft={method:"PATCH",headers:oe,body:JSON.stringify(xe)};let Rt;try{Rt=yield(yield fetch(`${Wr(F.appConfig)}/${H.token}`,ft)).json()}catch(Jt){throw O.create("token-update-failed",{errorInfo:Jt})}if(Rt.error)throw O.create("token-update-failed",{errorInfo:Rt.error.message});if(!Rt.token)throw O.create("token-update-no-token");return Rt.token})).apply(this,arguments)}function Xn(F,H){return ii.apply(this,arguments)}function ii(){return(ii=(0,J.Z)(function*(F,H){const xe={method:"DELETE",headers:yield Ur(F)};try{const Rt=yield(yield fetch(`${Wr(F.appConfig)}/${H}`,xe)).json();if(Rt.error)throw O.create("token-unsubscribe-failed",{errorInfo:Rt.error.message})}catch(ft){throw O.create("token-unsubscribe-failed",{errorInfo:ft})}})).apply(this,arguments)}function Wr({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function Ur(F){return ps.apply(this,arguments)}function ps(){return(ps=(0,J.Z)(function*({appConfig:F,installations:H}){const oe=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${oe}`})})).apply(this,arguments)}function Bs({p256dh:F,auth:H,endpoint:oe,vapidKey:xe}){const ft={web:{endpoint:oe,auth:H,p256dh:F}};return xe!==Pi&&(ft.web.applicationPubKey=xe),ft}const Q=6048e5;function G(F){return pe.apply(this,arguments)}function pe(){return(pe=(0,J.Z)(function*(F){const H=yield zn(F.swRegistration,F.vapidKey),oe={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:H.endpoint,auth:Hi(H.getKey("auth")),p256dh:Hi(H.getKey("p256dh"))},xe=yield ne(F.firebaseDependencies);if(xe){if(Oi(xe.subscriptionOptions,oe))return Date.now()>=xe.createTime+Q?xt(F,{token:xe.token,createTime:Date.now(),subscriptionOptions:oe}):xe.token;try{yield Xn(F.firebaseDependencies,xe.token)}catch(ft){console.warn(ft)}return en(F.firebaseDependencies,oe)}return en(F.firebaseDependencies,oe)})).apply(this,arguments)}function Le(F){return We.apply(this,arguments)}function We(){return(We=(0,J.Z)(function*(F){const H=yield ne(F.firebaseDependencies);H&&(yield Xn(F.firebaseDependencies,H.token),yield gt(F.firebaseDependencies));const oe=yield F.swRegistration.pushManager.getSubscription();return!oe||oe.unsubscribe()})).apply(this,arguments)}function xt(F,H){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,J.Z)(function*(F,H){try{const oe=yield Ft(F.firebaseDependencies,H),xe=Object.assign(Object.assign({},H),{token:oe,createTime:Date.now()});return yield ie(F.firebaseDependencies,xe),oe}catch(oe){throw yield Le(F),oe}})).apply(this,arguments)}function en(F,H){return bn.apply(this,arguments)}function bn(){return(bn=(0,J.Z)(function*(F,H){const xe={token:yield X(F,H),createTime:Date.now(),subscriptionOptions:H};return yield ie(F,xe),xe.token})).apply(this,arguments)}function zn(F,H){return mr.apply(this,arguments)}function mr(){return(mr=(0,J.Z)(function*(F,H){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fa(H)})})).apply(this,arguments)}function Oi(F,H){return H.vapidKey===F.vapidKey&&H.endpoint===F.endpoint&&H.auth===F.auth&&H.p256dh===F.p256dh}function Mr(F){const H={from:F.from,collapseKey:F.collapse_key,messageId:F.fcm_message_id};return function(F,H){if(!H.notification)return;F.notification={};const oe=H.notification.title;oe&&(F.notification.title=oe);const xe=H.notification.body;xe&&(F.notification.body=xe);const ft=H.notification.image;ft&&(F.notification.image=ft)}(H,F),function(F,H){!H.data||(F.data=H.data)}(H,F),function(F,H){if(!H.fcmOptions)return;F.fcmOptions={};const oe=H.fcmOptions.link;oe&&(F.fcmOptions.link=oe);const xe=H.fcmOptions.analytics_label;xe&&(F.fcmOptions.analyticsLabel=xe)}(H,F),H}function ur(F){return"object"==typeof F&&!!F&&Xo in F}function Ai(F,H){const oe=[];for(let xe=0;xe<F.length;xe++)oe.push(F.charAt(xe)),xe<H.length&&oe.push(H.charAt(xe));return oe.join("")}function ai(F){return O.create("missing-app-config-values",{valueName:F})}Ai("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ai("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wi{constructor(H,oe,xe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ft=function(F){if(!F||!F.options)throw ai("App Configuration Object");if(!F.name)throw ai("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:oe}=F;for(const xe of H)if(!oe[xe])throw ai(xe);return{appName:F.name,projectId:oe.projectId,apiKey:oe.apiKey,appId:oe.appId,senderId:oe.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:ft,installations:oe,analyticsProvider:xe}}_delete(){return Promise.resolve()}}function Pr(F){return gs.apply(this,arguments)}function gs(){return(gs=(0,J.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(Li,{scope:Fs}),F.swRegistration.update().catch(()=>{})}catch(H){throw O.create("failed-service-worker-registration",{browserErrorMessage:H.message})}})).apply(this,arguments)}function Qs(F,H){return Js.apply(this,arguments)}function Js(){return(Js=(0,J.Z)(function*(F,H){if(!H&&!F.swRegistration&&(yield Pr(F)),H||!F.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw O.create("invalid-sw-registration");F.swRegistration=H}})).apply(this,arguments)}function xl(F,H){return yo.apply(this,arguments)}function yo(){return(yo=(0,J.Z)(function*(F,H){H?F.vapidKey=H:F.vapidKey||(F.vapidKey=Pi)})).apply(this,arguments)}function ns(){return(ns=(0,J.Z)(function*(F,H){if(!navigator)throw O.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw O.create("permission-blocked");return yield xl(F,null==H?void 0:H.vapidKey),yield Qs(F,null==H?void 0:H.serviceWorkerRegistration),G(F)})).apply(this,arguments)}function $r(F,H,oe){return na.apply(this,arguments)}function na(){return(na=(0,J.Z)(function*(F,H,oe){const xe=ll(H);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(xe,{message_id:oe[Xo],message_name:oe[Bo],message_time:oe[ea],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ll(F){switch(F){case Ls.NOTIFICATION_CLICKED:return"notification_open";case Ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ul(){return(ul=(0,J.Z)(function*(F,H){const oe=H.data;if(!oe.isFirebaseMessaging)return;F.onMessageHandler&&oe.messageType===Ls.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(Mr(oe)):F.onMessageHandler.next(Mr(oe)));const xe=oe.data;ur(xe)&&"1"===xe[fs]&&(yield $r(F,oe.messageType,xe))})).apply(this,arguments)}const Yl="@firebase/messaging";function Rl(){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,J.Z)(function*(){return"undefined"!=typeof window&&(0,le.hl)()&&(yield(0,le.eu)())&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,me._registerComponent)(new ue.wA("messaging",F=>{const H=new wi(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",oe=>function(F,H){return ul.apply(this,arguments)}(H,oe)),H},"PUBLIC")),(0,me._registerComponent)(new ue.wA("messaging-internal",F=>{const H=F.getProvider("messaging").getImmediate();return{getToken:xe=>function(F,H){return ns.apply(this,arguments)}(H,xe)}},"PRIVATE")),(0,me.registerVersion)(Yl,"0.9.2"),(0,me.registerVersion)(Yl,"0.9.2","esm2017");const tu="analytics",Ua="firebase_id",gi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Su="https://www.googletagmanager.com/gtag/js",Is=new Ae.Yd("@firebase/analytics");function nu(F){return Promise.all(F.map(H=>H.catch(oe=>oe)))}function cl(F,H){const oe=document.createElement("script");oe.src=`${Su}?l=${F}&id=${H}`,oe.async=!0,document.head.appendChild(oe)}function sa(F,H,oe,xe,ft,Rt){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,J.Z)(function*(F,H,oe,xe,ft,Rt){const Jt=xe[ft];try{if(Jt)yield H[Jt];else{const hn=(yield nu(oe)).find(fr=>fr.measurementId===ft);hn&&(yield H[hn.appId])}}catch(An){Is.error(An)}F("config",ft,Rt)})).apply(this,arguments)}function $o(F,H,oe,xe,ft){return bo.apply(this,arguments)}function bo(){return(bo=(0,J.Z)(function*(F,H,oe,xe,ft){try{let Rt=[];if(ft&&ft.send_to){let Jt=ft.send_to;Array.isArray(Jt)||(Jt=[Jt]);const An=yield nu(oe);for(const hn of Jt){const fr=An.find(no=>no.measurementId===hn),zr=fr&&H[fr.appId];if(!zr){Rt=[];break}Rt.push(zr)}}0===Rt.length&&(Rt=Object.values(H)),yield Promise.all(Rt),F("event",xe,ft||{})}catch(Rt){Is.error(Rt)}})).apply(this,arguments)}function Qc(){const F=window.document.getElementsByTagName("script");for(const H of Object.values(F))if(H.src&&H.src.includes(Su))return H;return null}const ms=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wo=new class{constructor(H={},oe=1e3){this.throttleMetadata=H,this.intervalMillis=oe}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,oe){this.throttleMetadata[H]=oe}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function ru(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function rs(F){return hl.apply(this,arguments)}function hl(){return(hl=(0,J.Z)(function*(F){var H;const{appId:oe,apiKey:xe}=F,ft={method:"GET",headers:ru(xe)},Rt=gi.replace("{app-id}",oe),Jt=yield fetch(Rt,ft);if(200!==Jt.status&&304!==Jt.status){let An="";try{const hn=yield Jt.json();(null===(H=hn.error)||void 0===H?void 0:H.message)&&(An=hn.error.message)}catch(hn){}throw ms.create("config-fetch-failed",{httpStatus:Jt.status,responseMessage:An})}return Jt.json()})).apply(this,arguments)}function Ba(F){return fl.apply(this,arguments)}function fl(){return(fl=(0,J.Z)(function*(F,H=wo,oe){const{appId:xe,apiKey:ft,measurementId:Rt}=F.options;if(!xe)throw ms.create("no-app-id");if(!ft){if(Rt)return{measurementId:Rt,appId:xe};throw ms.create("no-api-key")}const Jt=H.getThrottleMetadata(xe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},An=new su;return setTimeout((0,J.Z)(function*(){An.abort()}),void 0!==oe?oe:6e4),_a({appId:xe,apiKey:ft,measurementId:Rt},Jt,An,H)})).apply(this,arguments)}function _a(F,H,oe){return iu.apply(this,arguments)}function iu(){return(iu=(0,J.Z)(function*(F,{throttleEndTimeMillis:H,backoffCount:oe},xe,ft=wo){const{appId:Rt,measurementId:Jt}=F;try{yield oa(xe,H)}catch(An){if(Jt)return Is.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Jt} provided in the "measurementId" field in the local Firebase config. [${An.message}]`),{appId:Rt,measurementId:Jt};throw An}try{const An=yield rs(F);return ft.deleteThrottleMetadata(Rt),An}catch(An){if(!ya(An)){if(ft.deleteThrottleMetadata(Rt),Jt)return Is.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Jt} provided in the "measurementId" field in the local Firebase config. [${An.message}]`),{appId:Rt,measurementId:Jt};throw An}const hn=503===Number(An.customData.httpStatus)?(0,le.$s)(oe,ft.intervalMillis,30):(0,le.$s)(oe,ft.intervalMillis),fr={throttleEndTimeMillis:Date.now()+hn,backoffCount:oe+1};return ft.setThrottleMetadata(Rt,fr),Is.debug(`Calling attemptFetch again in ${hn} millis`),_a(F,fr,xe,ft)}})).apply(this,arguments)}function oa(F,H){return new Promise((oe,xe)=>{const ft=Math.max(H-Date.now(),0),Rt=setTimeout(oe,ft);F.addEventListener(()=>{clearTimeout(Rt),xe(ms.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function ya(F){if(!(F instanceof le.ZR&&F.customData))return!1;const H=Number(F.customData.httpStatus);return 429===H||500===H||503===H||504===H}class su{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}function mi(){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,J.Z)(function*(){if(!(0,le.hl)())return Is.warn(ms.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(F){return Is.warn(ms.create("indexeddb-unavailable",{errorInfo:F}).message),!1}return!0})).apply(this,arguments)}function lo(){return(lo=(0,J.Z)(function*(F,H,oe,xe,ft,Rt,Jt){var An;const hn=Ba(F);hn.then(Ds=>{oe[Ds.measurementId]=Ds.appId,F.options.measurementId&&Ds.measurementId!==F.options.measurementId&&Is.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${Ds.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ds=>Is.error(Ds)),H.push(hn);const fr=mi().then(Ds=>{if(Ds)return xe.getId()}),[zr,no]=yield Promise.all([hn,fr]);Qc()||cl(Rt,zr.measurementId),ft("js",new Date);const As=null!==(An=null==Jt?void 0:Jt.config)&&void 0!==An?An:{};return As.origin="firebase",As.update=!0,null!=no&&(As[Ua]=no),ft("config",zr.measurementId,As),zr.measurementId})).apply(this,arguments)}class Ol{constructor(H){this.app=H}_delete(){return delete un[this.app.options.appId],Promise.resolve()}}let un={},ui=[];const is={};let $n,Ho,ja="dataLayer",pn=!1;function _i(F,H,oe){!function(){const F=[];if((0,le.ru)()&&F.push("This is a browser extension environment."),(0,le.zI)()||F.push("Cookies are not available."),F.length>0){const H=F.map((xe,ft)=>`(${ft+1}) ${xe}`).join(" "),oe=ms.create("invalid-analytics-context",{errorInfo:H});Is.warn(oe.message)}}();const xe=F.options.appId;if(!xe)throw ms.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw ms.create("no-api-key");Is.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=un[xe])throw ms.create("already-exists",{id:xe});if(!pn){!function(F){let H=[];Array.isArray(window[F])?H=window[F]:window[F]=H}(ja);const{wrappedGtag:Rt,gtagCore:Jt}=function(F,H,oe,xe,ft){let Rt=function(...Jt){window[xe].push(arguments)};return window[ft]&&"function"==typeof window[ft]&&(Rt=window[ft]),window[ft]=function(F,H,oe,xe){function Rt(){return(Rt=(0,J.Z)(function*(Jt,An,hn){try{"event"===Jt?yield $o(F,H,oe,An,hn):"config"===Jt?yield sa(F,H,oe,xe,An,hn):F("set",An)}catch(fr){Is.error(fr)}})).apply(this,arguments)}return function(Jt,An,hn){return Rt.apply(this,arguments)}}(Rt,F,H,oe),{gtagCore:Rt,wrappedGtag:window[ft]}}(un,ui,is,ja,"gtag");Ho=Rt,$n=Jt,pn=!0}return un[xe]=function(F,H,oe,xe,ft,Rt,Jt){return lo.apply(this,arguments)}(F,ui,is,H,$n,ja,oe),new Ol(F)}function aa(){return(aa=(0,J.Z)(function*(F,H,oe,xe,ft){if(ft&&ft.global)F("event",oe,xe);else{const Rt=yield H;F("event",oe,Object.assign(Object.assign({},xe),{send_to:Rt}))}})).apply(this,arguments)}function hr(){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,J.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(F){return!1}})).apply(this,arguments)}const xu="@firebase/analytics",P="0.7.2";(0,me._registerComponent)(new ue.wA(tu,(H,{options:oe})=>_i(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),oe),"PUBLIC")),(0,me._registerComponent)(new ue.wA("analytics-internal",function(H){try{const oe=H.getProvider(tu).getImmediate();return{logEvent:(xe,ft,Rt)=>function(F,H,oe,xe){F=(0,le.m9)(F),function(F,H,oe,xe,ft){return aa.apply(this,arguments)}(Ho,un[F.app.options.appId],H,oe,xe).catch(ft=>Is.error(ft))}(oe,xe,ft,Rt)}}catch(oe){throw ms.create("interop-component-reg-failed",{reason:oe})}},"PRIVATE")),(0,me.registerVersion)(xu,P),(0,me.registerVersion)(xu,P,"esm2017");var T=N(504);class M extends T.o{constructor(H,oe){super(H,oe),this.scheduler=H,this.work=oe}schedule(H,oe=0){return oe>0?super.schedule(H,oe):(this.delay=oe,this.state=H,this.scheduler.flush(this),this)}execute(H,oe){return oe>0||this.closed?super.execute(H,oe):this._execute(H,oe)}requestAsyncId(H,oe,xe=0){return null!=xe&&xe>0||null==xe&&this.delay>0?super.requestAsyncId(H,oe,xe):H.flush(this)}}var q=N(9713);class se extends q.v{}const we=new se(M);var Lt=N(4346),In=N(6361),Or=N(3201),Zn=N(1894),Jr=N(576),Tn=N(8341),js=N(8127);const Ss=new f.GfV("7.1.0"),_s="__angularfire_symbol__analyticsIsSupported",si="__angularfire_symbol__remoteConfigIsSupported",Za="__angularfire_symbol__messagingIsSupported";function Ga(F,H,oe){if(H){if(1===H.length)return H[0];const Rt=H.filter(Jt=>Jt.app===oe);if(1===Rt.length)return Rt[0]}return oe.container.getProvider(F).getImmediate({optional:!0})}globalThis[_s]||(globalThis[_s]=hr().then(F=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=F)),globalThis[Za]||(globalThis[Za]=Rl().then(F=>globalThis.__angularfire_symbol__messagingIsSupportedValue=F)),globalThis[si]||(globalThis[si]=so().then(F=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=F));const Go=(F,H)=>{const oe=H?[H]:(0,v.C6)(),xe=[];return oe.forEach(ft=>{ft.container.getProvider(F).instances.forEach(Jt=>{xe.includes(Jt)||xe.push(Jt)})}),xe};function Ci(){}class ou{constructor(H,oe=we){this.zone=H,this.delegate=oe}now(){return this.delegate.now()}schedule(H,oe,xe){const ft=this.zone;return this.delegate.schedule(function(Jt){ft.runGuarded(()=>{H.apply(this,[Jt])})},oe,xe)}}class Ni{constructor(H){this.zone=H,this.task=null}call(H,oe){const xe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ci,{},Ci,Ci)),oe.pipe(function(F,H,oe){const xe=(0,In.m)(F)?{next:F,error:H,complete:undefined}:F;return xe?(0,Or.e)((ft,Rt)=>{var Jt;null===(Jt=xe.subscribe)||void 0===Jt||Jt.call(xe);let An=!0;ft.subscribe(new Zn.Q(Rt,hn=>{var fr;null===(fr=xe.next)||void 0===fr||fr.call(xe,hn),Rt.next(hn)},()=>{var hn;An=!1,null===(hn=xe.complete)||void 0===hn||hn.call(xe),Rt.complete()},hn=>{var fr;An=!1,null===(fr=xe.error)||void 0===fr||fr.call(xe,hn),Rt.error(hn)},()=>{var hn,fr;An&&(null===(hn=xe.unsubscribe)||void 0===hn||hn.call(xe)),null===(fr=xe.finalize)||void 0===fr||fr.call(xe)}))}):Jr.y}({next:xe,complete:xe,error:xe})).subscribe(H).add(xe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wh=(()=>{class F{constructor(oe){this.ngZone=oe,this.outsideAngular=oe.runOutsideAngular(()=>new ou(Zone.current)),this.insideAngular=oe.run(()=>new ou(Zone.current,Lt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(oe){return new(oe||F)(f.LFG(f.R0b))},F.\u0275prov=f.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function vl(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function to(F){return F.pipe((0,Tn.Q)(vl().outsideAngular))}function qi(F){return vl(),function(F){return function(oe){return(oe=oe.lift(new Ni(F.ngZone))).pipe((0,js.R)(F.outsideAngular),(0,Tn.Q)(F.insideAngular))}}(vl())(F)}},1827:(Vt,Ie,N)=>{"use strict";N.d(Ie,{y:()=>K});var f=N(2515),v=N(2669),J=N(7328),me=N(576);var Ae=N(5960),Me=N(6361),ge=N(776);let K=(()=>{class be{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const Ye=new be;return Ye.source=this,Ye.operator=Oe,Ye}subscribe(Oe,Ye,Qe){const it=function(be){return be&&be instanceof f.Lv||function(be){return be&&(0,Me.m)(be.next)&&(0,Me.m)(be.error)&&(0,Me.m)(be.complete)}(be)&&(0,v.Nn)(be)}(Oe)?Oe:new f.Hp(Oe,Ye,Qe);return(0,ge.x)(()=>{const{operator:nt,source:Ze}=this;it.add(nt?nt.call(it,Ze):Ze?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(Ye){Oe.error(Ye)}}forEach(Oe,Ye){return new(Ye=Z(Ye))((Qe,it)=>{let nt;nt=this.subscribe(Ze=>{try{Oe(Ze)}catch(Xe){it(Xe),null==nt||nt.unsubscribe()}},it,Qe)})}_subscribe(Oe){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Oe)}[J.L](){return this}pipe(...Oe){return function(be){return 0===be.length?me.y:1===be.length?be[0]:function(Oe){return be.reduce((Ye,Qe)=>Qe(Ye),Oe)}}(Oe)(this)}toPromise(Oe){return new(Oe=Z(Oe))((Ye,Qe)=>{let it;this.subscribe(nt=>it=nt,nt=>Qe(nt),()=>Ye(it))})}}return be.create=je=>new be(je),be})();function Z(be){var je;return null!==(je=null!=be?be:Ae.v.Promise)&&void 0!==je?je:Promise}},3842:(Vt,Ie,N)=>{"use strict";N.d(Ie,{x:()=>Ae});var f=N(1827),v=N(2669);const me=(0,N(9753).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=N(8208),ue=N(776);let Ae=(()=>{class ge extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const te=new Me(this,this);return te.operator=Z,te}_throwIfClosed(){if(this.closed)throw new me}next(Z){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const de of te)de.next(Z)}})}error(Z){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:te}=this;for(;te.length;)te.shift().error(Z)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:te,isStopped:de,observers:be}=this;return te||de?v.Lc:(be.push(Z),new v.w0(()=>(0,le.P)(be,Z)))}_checkFinalizedStatuses(Z){const{hasError:te,thrownError:de,isStopped:be}=this;te?Z.error(de):be&&Z.complete()}asObservable(){const Z=new f.y;return Z.source=this,Z}}return ge.create=(K,Z)=>new Me(K,Z),ge})();class Me extends Ae{constructor(K,Z){super(),this.destination=K,this.source=Z}next(K){var Z,te;null===(te=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===te||te.call(Z,K)}error(K){var Z,te;null===(te=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===te||te.call(Z,K)}complete(){var K,Z;null===(Z=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Z||Z.call(K)}_subscribe(K){var Z,te;return null!==(te=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(K))&&void 0!==te?te:v.Lc}}},2515:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Hp:()=>de,Lv:()=>te});var f=N(6361),v=N(2669),J=N(5960),me=N(9249),le=N(9361);const ue=(()=>ge("C",void 0,void 0))();function ge(Qe,it,nt){return{kind:Qe,value:it,error:nt}}var K=N(2487),Z=N(776);class te extends v.w0{constructor(it){super(),this.isStopped=!1,it?(this.destination=it,(0,v.Nn)(it)&&it.add(this)):this.destination=Ye}static create(it,nt,Ze){return new de(it,nt,Ze)}next(it){this.isStopped?Oe(ge("N",it,void 0),this):this._next(it)}error(it){this.isStopped?Oe(ge("E",void 0,it),this):(this.isStopped=!0,this._error(it))}complete(){this.isStopped?Oe(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(it){this.destination.next(it)}_error(it){try{this.destination.error(it)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class de extends te{constructor(it,nt,Ze){let Xe;if(super(),(0,f.m)(it))Xe=it;else if(it){let ye;({next:Xe,error:nt,complete:Ze}=it),this&&J.v.useDeprecatedNextContext?(ye=Object.create(it),ye.unsubscribe=()=>this.unsubscribe()):ye=it,Xe=null==Xe?void 0:Xe.bind(ye),nt=null==nt?void 0:nt.bind(ye),Ze=null==Ze?void 0:Ze.bind(ye)}this.destination={next:Xe?be(Xe):le.Z,error:be(null!=nt?nt:je),complete:Ze?be(Ze):le.Z}}}function be(Qe,it){return(...nt)=>{try{Qe(...nt)}catch(Ze){J.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Ze):(0,me.h)(Ze)}}}function je(Qe){throw Qe}function Oe(Qe,it){const{onStoppedNotification:nt}=J.v;nt&&K.z.setTimeout(()=>nt(Qe,it))}const Ye={closed:!0,next:le.Z,error:je,complete:le.Z}},2669:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Lc:()=>ue,w0:()=>le,Nn:()=>Ae});var f=N(6361);const J=(0,N(9753).d)(ge=>function(Z){ge(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((te,de)=>`${de+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var me=N(8208);class le{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const be of Z)be.remove(this);else Z.remove(this);const{initialTeardown:te}=this;if((0,f.m)(te))try{te()}catch(be){K=be instanceof J?be.errors:[be]}const{_teardowns:de}=this;if(de){this._teardowns=null;for(const be of de)try{Me(be)}catch(je){K=null!=K?K:[],je instanceof J?K=[...K,...je.errors]:K.push(je)}}if(K)throw new J(K)}}add(K){var Z;if(K&&K!==this)if(this.closed)Me(K);else{if(K instanceof le){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._teardowns=null!==(Z=this._teardowns)&&void 0!==Z?Z:[]).push(K)}}_hasParent(K){const{_parentage:Z}=this;return Z===K||Array.isArray(Z)&&Z.includes(K)}_addParent(K){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(K),Z):Z?[Z,K]:K}_removeParent(K){const{_parentage:Z}=this;Z===K?this._parentage=null:Array.isArray(Z)&&(0,me.P)(Z,K)}remove(K){const{_teardowns:Z}=this;Z&&(0,me.P)(Z,K),K instanceof le&&K._removeParent(this)}}le.EMPTY=(()=>{const ge=new le;return ge.closed=!0,ge})();const ue=le.EMPTY;function Ae(ge){return ge instanceof le||ge&&"closed"in ge&&(0,f.m)(ge.remove)&&(0,f.m)(ge.add)&&(0,f.m)(ge.unsubscribe)}function Me(ge){(0,f.m)(ge)?ge():ge.unsubscribe()}},5960:(Vt,Ie,N)=>{"use strict";N.d(Ie,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8351:(Vt,Ie,N)=>{"use strict";N.d(Ie,{E:()=>v});const v=new(N(1827).y)(le=>le.complete())},1179:(Vt,Ie,N)=>{"use strict";N.d(Ie,{D:()=>Xe});var f=N(3413),v=N(8341),J=N(8127),ue=N(1827),Me=N(6384),ge=N(6361),K=N(768);function te(ye,Qt){if(!ye)throw new Error("Iterable cannot be null");return new ue.y(De=>{(0,K.f)(De,Qt,()=>{const Ge=ye[Symbol.asyncIterator]();(0,K.f)(De,Qt,()=>{Ge.next().then(ce=>{ce.done?De.complete():De.next(ce.value)})},0,!0)})})}var de=N(8312),be=N(3707),je=N(9049),Oe=N(5729),Ye=N(7153),Qe=N(5611),it=N(837);function Xe(ye,Qt){return Qt?function(ye,Qt){if(null!=ye){if((0,de.c)(ye))return function(ye,Qt){return(0,f.Xf)(ye).pipe((0,J.R)(Qt),(0,v.Q)(Qt))}(ye,Qt);if((0,je.z)(ye))return function(ye,Qt){return new ue.y(De=>{let Ge=0;return Qt.schedule(function(){Ge===ye.length?De.complete():(De.next(ye[Ge++]),De.closed||this.schedule())})})}(ye,Qt);if((0,be.t)(ye))return function(ye,Qt){return(0,f.Xf)(ye).pipe((0,J.R)(Qt),(0,v.Q)(Qt))}(ye,Qt);if((0,Ye.D)(ye))return te(ye,Qt);if((0,Oe.T)(ye))return function(ye,Qt){return new ue.y(De=>{let Ge;return(0,K.f)(De,Qt,()=>{Ge=ye[Me.h](),(0,K.f)(De,Qt,()=>{let ce,Ne;try{({value:ce,done:Ne}=Ge.next())}catch(Re){return void De.error(Re)}Ne?De.complete():De.next(ce)},0,!0)}),()=>(0,ge.m)(null==Ge?void 0:Ge.return)&&Ge.return()})}(ye,Qt);if((0,it.L)(ye))return function(ye,Qt){return te((0,it.Q)(ye),Qt)}(ye,Qt)}throw(0,Qe.z)(ye)}(ye,Qt):(0,f.Xf)(ye)}},3413:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Xf:()=>de});var f=N(9517),v=N(9049),J=N(3707),me=N(1827),le=N(8312),ue=N(7153),Ae=N(5611),Me=N(5729),ge=N(837),K=N(6361),Z=N(9249),te=N(7328);function de(Ze){if(Ze instanceof me.y)return Ze;if(null!=Ze){if((0,le.c)(Ze))return function(Ze){return new me.y(Xe=>{const ye=Ze[te.L]();if((0,K.m)(ye.subscribe))return ye.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ze);if((0,v.z)(Ze))return function(Ze){return new me.y(Xe=>{for(let ye=0;ye<Ze.length&&!Xe.closed;ye++)Xe.next(Ze[ye]);Xe.complete()})}(Ze);if((0,J.t)(Ze))return function(Ze){return new me.y(Xe=>{Ze.then(ye=>{Xe.closed||(Xe.next(ye),Xe.complete())},ye=>Xe.error(ye)).then(null,Z.h)})}(Ze);if((0,ue.D)(Ze))return Qe(Ze);if((0,Me.T)(Ze))return function(Ze){return new me.y(Xe=>{for(const ye of Ze)if(Xe.next(ye),Xe.closed)return;Xe.complete()})}(Ze);if((0,ge.L)(Ze))return function(Ze){return Qe((0,ge.Q)(Ze))}(Ze)}throw(0,Ae.z)(Ze)}function Qe(Ze){return new me.y(Xe=>{(function(Ze,Xe){var ye,Qt,De,Ge;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ye=(0,f.KL)(Ze);!(Qt=yield ye.next()).done;)if(Xe.next(Qt.value),Xe.closed)return}catch(ce){De={error:ce}}finally{try{Qt&&!Qt.done&&(Ge=ye.return)&&(yield Ge.call(ye))}finally{if(De)throw De.error}}Xe.complete()})})(Ze,Xe).catch(ye=>Xe.error(ye))})}},1755:(Vt,Ie,N)=>{"use strict";N.d(Ie,{T:()=>ue});var f=N(2253),v=N(3413),J=N(8351),me=N(7375),le=N(1179);function ue(...Ae){const Me=(0,me.yG)(Ae),ge=(0,me._6)(Ae,1/0),K=Ae;return K.length?1===K.length?(0,v.Xf)(K[0]):(0,f.J)(ge)((0,le.D)(K,Me)):J.E}},4323:(Vt,Ie,N)=>{"use strict";N.d(Ie,{of:()=>J});var f=N(7375),v=N(1179);function J(...me){const le=(0,f.yG)(me);return(0,v.D)(me,le)}},1894:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Q:()=>v});var f=N(2515);class v extends f.Lv{constructor(me,le,ue,Ae,Me){super(me),this.onFinalize=Me,this._next=le?function(ge){try{le(ge)}catch(K){me.error(K)}}:super._next,this._error=Ae?function(ge){try{Ae(ge)}catch(K){me.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(ge){me.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;const{closed:le}=this;super.unsubscribe(),!le&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}},5488:(Vt,Ie,N)=>{"use strict";N.d(Ie,{x:()=>me});var f=N(576),v=N(3201),J=N(1894);function me(ue,Ae=f.y){return ue=null!=ue?ue:le,(0,v.e)((Me,ge)=>{let K,Z=!0;Me.subscribe(new J.Q(ge,te=>{const de=Ae(te);(Z||!ue(K,de))&&(Z=!1,K=de,ge.next(te))}))})}function le(ue,Ae){return ue===Ae}},1971:(Vt,Ie,N)=>{"use strict";N.d(Ie,{h:()=>J});var f=N(3201),v=N(1894);function J(me,le){return(0,f.e)((ue,Ae)=>{let Me=0;ue.subscribe(new v.Q(Ae,ge=>me.call(le,ge,Me++)&&Ae.next(ge)))})}},6885:(Vt,Ie,N)=>{"use strict";N.d(Ie,{U:()=>J});var f=N(3201),v=N(1894);function J(me,le){return(0,f.e)((ue,Ae)=>{let Me=0;ue.subscribe(new v.Q(Ae,ge=>{Ae.next(me.call(le,ge,Me++))}))})}},2253:(Vt,Ie,N)=>{"use strict";N.d(Ie,{J:()=>K});var f=N(6885),v=N(3413),J=N(3201),le=(N(768),N(1894)),Ae=N(6361);function Me(Z,te,de=1/0){return(0,Ae.m)(te)?Me((be,je)=>(0,f.U)((Oe,Ye)=>te(be,Oe,je,Ye))((0,v.Xf)(Z(be,je))),de):("number"==typeof te&&(de=te),(0,J.e)((be,je)=>function(Z,te,de,be,je,Oe,Ye,Qe){const it=[];let nt=0,Ze=0,Xe=!1;const ye=()=>{Xe&&!it.length&&!nt&&te.complete()},Qt=Ge=>nt<be?De(Ge):it.push(Ge),De=Ge=>{nt++;let ce=!1;(0,v.Xf)(de(Ge,Ze++)).subscribe(new le.Q(te,Ne=>{te.next(Ne)},()=>{ce=!0},void 0,()=>{if(ce)try{for(nt--;it.length&&nt<be;){const Ne=it.shift();De(Ne)}ye()}catch(Ne){te.error(Ne)}}))};return Z.subscribe(new le.Q(te,Qt,()=>{Xe=!0,ye()})),()=>{}}(be,je,Z,de)))}var ge=N(576);function K(Z=1/0){return Me(ge.y,Z)}},8341:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Q:()=>me});var f=N(768),v=N(3201),J=N(1894);function me(le,ue=0){return(0,v.e)((Ae,Me)=>{Ae.subscribe(new J.Q(Me,ge=>(0,f.f)(Me,le,()=>Me.next(ge),ue),()=>(0,f.f)(Me,le,()=>Me.complete(),ue),ge=>(0,f.f)(Me,le,()=>Me.error(ge),ue)))})}},3117:(Vt,Ie,N)=>{"use strict";N.d(Ie,{R:()=>me});var f=N(3201),v=N(1894);function J(le,ue,Ae,Me,ge){return(K,Z)=>{let te=Ae,de=ue,be=0;K.subscribe(new v.Q(Z,je=>{const Oe=be++;de=te?le(de,je,Oe):(te=!0,je),Me&&Z.next(de)},ge&&(()=>{te&&Z.next(de),Z.complete()})))}}function me(le,ue){return(0,f.e)(J(le,ue,arguments.length>=2,!0))}},784:(Vt,Ie,N)=>{"use strict";N.d(Ie,{B:()=>ue});var f=N(1179),v=N(1054),J=N(3842),me=N(2515),le=N(3201);function ue(Me={}){const{connector:ge=(()=>new J.x),resetOnError:K=!0,resetOnComplete:Z=!0,resetOnRefCountZero:te=!0}=Me;return de=>{let be=null,je=null,Oe=null,Ye=0,Qe=!1,it=!1;const nt=()=>{null==je||je.unsubscribe(),je=null},Ze=()=>{nt(),be=Oe=null,Qe=it=!1},Xe=()=>{const ye=be;Ze(),null==ye||ye.unsubscribe()};return(0,le.e)((ye,Qt)=>{Ye++,!it&&!Qe&&nt();const De=Oe=null!=Oe?Oe:ge();Qt.add(()=>{Ye--,0===Ye&&!it&&!Qe&&(je=Ae(Xe,te))}),De.subscribe(Qt),be||(be=new me.Hp({next:Ge=>De.next(Ge),error:Ge=>{it=!0,nt(),je=Ae(Ze,K,Ge),De.error(Ge)},complete:()=>{Qe=!0,nt(),je=Ae(Ze,Z),De.complete()}}),(0,f.D)(ye).subscribe(be))})(de)}}function Ae(Me,ge,...K){return!0===ge?(Me(),null):!1===ge?null:ge(...K).pipe((0,v.q)(1)).subscribe(()=>Me())}},8127:(Vt,Ie,N)=>{"use strict";N.d(Ie,{R:()=>v});var f=N(3201);function v(J,me=0){return(0,f.e)((le,ue)=>{ue.add(J.schedule(()=>le.subscribe(ue),me))})}},1926:(Vt,Ie,N)=>{"use strict";N.d(Ie,{w:()=>me});var f=N(3413),v=N(3201),J=N(1894);function me(le,ue){return(0,v.e)((Ae,Me)=>{let ge=null,K=0,Z=!1;const te=()=>Z&&!ge&&Me.complete();Ae.subscribe(new J.Q(Me,de=>{null==ge||ge.unsubscribe();let be=0;const je=K++;(0,f.Xf)(le(de,je)).subscribe(ge=new J.Q(Me,Oe=>Me.next(ue?ue(de,Oe,je,be++):Oe),()=>{ge=null,te()}))},()=>{Z=!0,te()}))})}},1054:(Vt,Ie,N)=>{"use strict";N.d(Ie,{q:()=>me});var f=N(8351),v=N(3201),J=N(1894);function me(le){return le<=0?()=>f.E:(0,v.e)((ue,Ae)=>{let Me=0;ue.subscribe(new J.Q(Ae,ge=>{++Me<=le&&(Ae.next(ge),le<=Me&&Ae.complete())}))})}},504:(Vt,Ie,N)=>{"use strict";N.d(Ie,{o:()=>le});var f=N(2669);class v extends f.w0{constructor(Ae,Me){super()}schedule(Ae,Me=0){return this}}const J={setInterval(...ue){const{delegate:Ae}=J;return((null==Ae?void 0:Ae.setInterval)||setInterval)(...ue)},clearInterval(ue){const{delegate:Ae}=J;return((null==Ae?void 0:Ae.clearInterval)||clearInterval)(ue)},delegate:void 0};var me=N(8208);class le extends v{constructor(Ae,Me){super(Ae,Me),this.scheduler=Ae,this.work=Me,this.pending=!1}schedule(Ae,Me=0){if(this.closed)return this;this.state=Ae;const ge=this.id,K=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(K,ge,Me)),this.pending=!0,this.delay=Me,this.id=this.id||this.requestAsyncId(K,this.id,Me),this}requestAsyncId(Ae,Me,ge=0){return J.setInterval(Ae.flush.bind(Ae,this),ge)}recycleAsyncId(Ae,Me,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return Me;J.clearInterval(Me)}execute(Ae,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(Ae,Me);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,Me){let K,ge=!1;try{this.work(Ae)}catch(Z){ge=!0,K=Z||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:Me}=this,{actions:ge}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(ge,this),null!=Ae&&(this.id=this.recycleAsyncId(Me,Ae,null)),this.delay=null,super.unsubscribe()}}}},9713:(Vt,Ie,N)=>{"use strict";N.d(Ie,{v:()=>J});var f=N(1373);class v{constructor(le,ue=v.now){this.schedulerActionCtor=le,this.now=ue}schedule(le,ue=0,Ae){return new this.schedulerActionCtor(this,le).schedule(Ae,ue)}}v.now=f.l.now;class J extends v{constructor(le,ue=v.now){super(le,ue),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ue}=this;if(this._active)return void ue.push(le);let Ae;this._active=!0;do{if(Ae=le.execute(le.state,le.delay))break}while(le=ue.shift());if(this._active=!1,Ae){for(;le=ue.shift();)le.unsubscribe();throw Ae}}}},4346:(Vt,Ie,N)=>{"use strict";N.d(Ie,{z:()=>J});var f=N(504);const J=new(N(9713).v)(f.o)},1373:(Vt,Ie,N)=>{"use strict";N.d(Ie,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},2487:(Vt,Ie,N)=>{"use strict";N.d(Ie,{z:()=>f});const f={setTimeout(...v){const{delegate:J}=f;return((null==J?void 0:J.setTimeout)||setTimeout)(...v)},clearTimeout(v){const{delegate:J}=f;return((null==J?void 0:J.clearTimeout)||clearTimeout)(v)},delegate:void 0}},6384:(Vt,Ie,N)=>{"use strict";function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}N.d(Ie,{h:()=>v});const v=f()},7328:(Vt,Ie,N)=>{"use strict";N.d(Ie,{L:()=>f});const f=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},7375:(Vt,Ie,N)=>{"use strict";N.d(Ie,{_6:()=>ue,jO:()=>me,yG:()=>le});var f=N(6361);function J(Ae){return Ae[Ae.length-1]}function me(Ae){return(0,f.m)(J(Ae))?Ae.pop():void 0}function le(Ae){return function(Ae){return Ae&&(0,f.m)(Ae.schedule)}(J(Ae))?Ae.pop():void 0}function ue(Ae,Me){return"number"==typeof J(Ae)?Ae.pop():Me}},8208:(Vt,Ie,N)=>{"use strict";function f(v,J){if(v){const me=v.indexOf(J);0<=me&&v.splice(me,1)}}N.d(Ie,{P:()=>f})},9753:(Vt,Ie,N)=>{"use strict";function f(v){const me=v(le=>{Error.call(le),le.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}N.d(Ie,{d:()=>f})},776:(Vt,Ie,N)=>{"use strict";N.d(Ie,{x:()=>J,O:()=>me});var f=N(5960);let v=null;function J(le){if(f.v.useDeprecatedSynchronousErrorHandling){const ue=!v;if(ue&&(v={errorThrown:!1,error:null}),le(),ue){const{errorThrown:Ae,error:Me}=v;if(v=null,Ae)throw Me}}else le()}function me(le){f.v.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=le)}},768:(Vt,Ie,N)=>{"use strict";function f(v,J,me,le=0,ue=!1){const Ae=J.schedule(function(){me(),ue?v.add(this.schedule(null,le)):this.unsubscribe()},le);if(v.add(Ae),!ue)return Ae}N.d(Ie,{f:()=>f})},576:(Vt,Ie,N)=>{"use strict";function f(v){return v}N.d(Ie,{y:()=>f})},9049:(Vt,Ie,N)=>{"use strict";N.d(Ie,{z:()=>f});const f=v=>v&&"number"==typeof v.length&&"function"!=typeof v},7153:(Vt,Ie,N)=>{"use strict";N.d(Ie,{D:()=>v});var f=N(6361);function v(J){return Symbol.asyncIterator&&(0,f.m)(null==J?void 0:J[Symbol.asyncIterator])}},6361:(Vt,Ie,N)=>{"use strict";function f(v){return"function"==typeof v}N.d(Ie,{m:()=>f})},8312:(Vt,Ie,N)=>{"use strict";N.d(Ie,{c:()=>J});var f=N(7328),v=N(6361);function J(me){return(0,v.m)(me[f.L])}},5729:(Vt,Ie,N)=>{"use strict";N.d(Ie,{T:()=>J});var f=N(6384),v=N(6361);function J(me){return(0,v.m)(null==me?void 0:me[f.h])}},3707:(Vt,Ie,N)=>{"use strict";N.d(Ie,{t:()=>v});var f=N(6361);function v(J){return(0,f.m)(null==J?void 0:J.then)}},837:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Q:()=>J,L:()=>me});var f=N(9517),v=N(6361);function J(le){return(0,f.FC)(this,arguments,function*(){const Ae=le.getReader();try{for(;;){const{value:Me,done:ge}=yield(0,f.qq)(Ae.read());if(ge)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Me)}}finally{Ae.releaseLock()}})}function me(le){return(0,v.m)(null==le?void 0:le.getReader)}},3201:(Vt,Ie,N)=>{"use strict";N.d(Ie,{e:()=>J});var f=N(6361);function J(me){return le=>{if(function(me){return(0,f.m)(null==me?void 0:me.lift)}(le))return le.lift(function(ue){try{return me(ue,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},9361:(Vt,Ie,N)=>{"use strict";function f(){}N.d(Ie,{Z:()=>f})},9249:(Vt,Ie,N)=>{"use strict";N.d(Ie,{h:()=>J});var f=N(5960),v=N(2487);function J(me){v.z.setTimeout(()=>{const{onUnhandledError:le}=f.v;if(!le)throw me;le(me)})}},5611:(Vt,Ie,N)=>{"use strict";function f(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ie,{z:()=>f})},665:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Fj:()=>Qe,qu:()=>gt,u:()=>Vo,sg:()=>hi,u5:()=>$,JU:()=>te,JJ:()=>on,JL:()=>mt,F:()=>st,On:()=>Qi,wV:()=>yt,UX:()=>ie,kI:()=>Qt,_Y:()=>Br});var f=N(639),v=N(8583),J=N(7574),me=N(9796),le=N(8002),ue=N(1555),Ae=N(4402);function ge(L,k){return new J.y(O=>{const X=L.length;if(0===X)return void O.complete();const dt=new Array(X);let Ft=0,an=0;for(let Xn=0;Xn<X;Xn++){const ii=(0,Ae.D)(L[Xn]);let Wr=!1;O.add(ii.subscribe({next:Ur=>{Wr||(Wr=!0,an++),dt[Xn]=Ur},error:Ur=>O.error(Ur),complete:()=>{Ft++,(Ft===X||!Wr)&&(an===X&&O.next(k?k.reduce((Ur,ps,Bs)=>(Ur[ps]=dt[Bs],Ur),{}):dt),O.complete())}}))}})}let K=(()=>{class L{constructor(O,X){this._renderer=O,this._elementRef=X,this.onChange=dt=>{},this.onTouched=()=>{}}setProperty(O,X){this._renderer.setProperty(this._elementRef.nativeElement,O,X)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(f.Qsj),f.Y36(f.SBq))},L.\u0275dir=f.lG2({type:L}),L})(),Z=(()=>{class L extends K{}return L.\u0275fac=function(){let k;return function(X){return(k||(k=f.n5z(L)))(X||L)}}(),L.\u0275dir=f.lG2({type:L,features:[f.qOj]}),L})();const te=new f.OlP("NgValueAccessor"),je={provide:te,useExisting:(0,f.Gpc)(()=>Qe),multi:!0},Ye=new f.OlP("CompositionEventMode");let Qe=(()=>{class L extends K{constructor(O,X,dt){super(O,X),this._compositionMode=dt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const L=(0,v.q)()?(0,v.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Ye,8))},L.\u0275dir=f.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,X){1&O&&f.NdJ("input",function(Ft){return X._handleInput(Ft.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(Ft){return X._compositionEnd(Ft.target.value)})},features:[f._Bn([je]),f.qOj]}),L})();function it(L){return null==L||0===L.length}function nt(L){return null!=L&&"number"==typeof L.length}const Ze=new f.OlP("NgValidators"),Xe=new f.OlP("NgAsyncValidators"),ye=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qt{static min(k){return L=k,k=>{if(it(k.value)||it(L))return null;const O=parseFloat(k.value);return!isNaN(O)&&O<L?{min:{min:L,actual:k.value}}:null};var L}static max(k){return L=k,k=>{if(it(k.value)||it(L))return null;const O=parseFloat(k.value);return!isNaN(O)&&O>L?{max:{max:L,actual:k.value}}:null};var L}static required(k){return it(k.value)?{required:!0}:null}static requiredTrue(k){return!0===k.value?null:{required:!0}}static email(k){return it((L=k).value)||ye.test(L.value)?null:{email:!0};var L}static minLength(k){return L=k,k=>it(k.value)||!nt(k.value)?null:k.value.length<L?{minlength:{requiredLength:L,actualLength:k.value.length}}:null;var L}static maxLength(k){return L=k,k=>nt(k.value)&&k.value.length>L?{maxlength:{requiredLength:L,actualLength:k.value.length}}:null;var L}static pattern(k){return function(L){if(!L)return jt;let k,O;return"string"==typeof L?(O="","^"!==L.charAt(0)&&(O+="^"),O+=L,"$"!==L.charAt(L.length-1)&&(O+="$"),k=new RegExp(O)):(O=L.toString(),k=L),X=>{if(it(X.value))return null;const dt=X.value;return k.test(dt)?null:{pattern:{requiredPattern:O,actualValue:dt}}}}(k)}static nullValidator(k){return null}static compose(k){return Et(k)}static composeAsync(k){return at(k)}}function jt(L){return null}function mn(L){return null!=L}function Bn(L){const k=(0,f.QGY)(L)?(0,Ae.D)(L):L;return(0,f.CqO)(k),k}function Zt(L){let k={};return L.forEach(O=>{k=null!=O?Object.assign(Object.assign({},k),O):k}),0===Object.keys(k).length?null:k}function xn(L,k){return k.map(O=>O(L))}function vn(L){return L.map(k=>function(L){return!L.validate}(k)?k:O=>k.validate(O))}function Et(L){if(!L)return null;const k=L.filter(mn);return 0==k.length?null:function(O){return Zt(xn(O,k))}}function Dt(L){return null!=L?Et(vn(L)):null}function at(L){if(!L)return null;const k=L.filter(mn);return 0==k.length?null:function(O){return function(...L){if(1===L.length){const k=L[0];if((0,me.k)(k))return ge(k,null);if((0,ue.K)(k)&&Object.getPrototypeOf(k)===Object.prototype){const O=Object.keys(k);return ge(O.map(X=>k[X]),O)}}if("function"==typeof L[L.length-1]){const k=L.pop();return ge(L=1===L.length&&(0,me.k)(L[0])?L[0]:L,null).pipe((0,le.U)(O=>k(...O)))}return ge(L,null)}(xn(O,k).map(Bn)).pipe((0,le.U)(Zt))}}function Ve(L){return null!=L?at(vn(L)):null}function bt(L,k){return null===L?[k]:Array.isArray(L)?[...L,k]:[L,k]}function ke(L){return L._rawValidators}function rt(L){return L._rawAsyncValidators}function Se(L){return L?Array.isArray(L)?L:[L]:[]}function et(L,k){return Array.isArray(L)?L.includes(k):L===k}function It(L,k){const O=Se(k);return Se(L).forEach(dt=>{et(O,dt)||O.push(dt)}),O}function Ct(L,k){return Se(k).filter(O=>!et(L,O))}let dn=(()=>{class L{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=Dt(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=Ve(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,X){return!!this.control&&this.control.hasError(O,X)}getError(O,X){return this.control?this.control.getError(O,X):null}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275dir=f.lG2({type:L}),L})(),En=(()=>{class L extends dn{get formDirective(){return null}get path(){return null}}return L.\u0275fac=function(){let k;return function(X){return(k||(k=f.n5z(L)))(X||L)}}(),L.\u0275dir=f.lG2({type:L,features:[f.qOj]}),L})();class Jn extends dn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gn{constructor(k){this._cd=k}is(k){var O,X,dt;return"submitted"===k?!!(null===(O=this._cd)||void 0===O?void 0:O.submitted):!!(null===(dt=null===(X=this._cd)||void 0===X?void 0:X.control)||void 0===dt?void 0:dt[k])}}let on=(()=>{class L extends gn{constructor(O){super(O)}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(Jn,2))},L.\u0275dir=f.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,X){2&O&&f.ekj("ng-untouched",X.is("untouched"))("ng-touched",X.is("touched"))("ng-pristine",X.is("pristine"))("ng-dirty",X.is("dirty"))("ng-valid",X.is("valid"))("ng-invalid",X.is("invalid"))("ng-pending",X.is("pending"))},features:[f.qOj]}),L})(),mt=(()=>{class L extends gn{constructor(O){super(O)}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(En,10))},L.\u0275dir=f.lG2({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,X){2&O&&f.ekj("ng-untouched",X.is("untouched"))("ng-touched",X.is("touched"))("ng-pristine",X.is("pristine"))("ng-dirty",X.is("dirty"))("ng-valid",X.is("valid"))("ng-invalid",X.is("invalid"))("ng-pending",X.is("pending"))("ng-submitted",X.is("submitted"))},features:[f.qOj]}),L})();function Gr(L,k){return[...k.path,L]}function Ue(L,k){_t(L,k),k.valueAccessor.writeValue(L.value),function(L,k){k.valueAccessor.registerOnChange(O=>{L._pendingValue=O,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&ir(L,k)})}(L,k),function(L,k){const O=(X,dt)=>{k.valueAccessor.writeValue(X),dt&&k.viewToModelUpdate(X)};L.registerOnChange(O),k._registerOnDestroy(()=>{L._unregisterOnChange(O)})}(L,k),function(L,k){k.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&ir(L,k),"submit"!==L.updateOn&&L.markAsTouched()})}(L,k),function(L,k){if(k.valueAccessor.setDisabledState){const O=X=>{k.valueAccessor.setDisabledState(X)};L.registerOnDisabledChange(O),k._registerOnDestroy(()=>{L._unregisterOnDisabledChange(O)})}}(L,k)}function qe(L,k,O=!0){const X=()=>{};k.valueAccessor&&(k.valueAccessor.registerOnChange(X),k.valueAccessor.registerOnTouched(X)),rn(L,k),L&&(k._invokeOnDestroyCallbacks(),L._registerOnCollectionChange(()=>{}))}function He(L,k){L.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(k)})}function _t(L,k){const O=ke(L);null!==k.validator?L.setValidators(bt(O,k.validator)):"function"==typeof O&&L.setValidators([O]);const X=rt(L);null!==k.asyncValidator?L.setAsyncValidators(bt(X,k.asyncValidator)):"function"==typeof X&&L.setAsyncValidators([X]);const dt=()=>L.updateValueAndValidity();He(k._rawValidators,dt),He(k._rawAsyncValidators,dt)}function rn(L,k){let O=!1;if(null!==L){if(null!==k.validator){const dt=ke(L);if(Array.isArray(dt)&&dt.length>0){const Ft=dt.filter(an=>an!==k.validator);Ft.length!==dt.length&&(O=!0,L.setValidators(Ft))}}if(null!==k.asyncValidator){const dt=rt(L);if(Array.isArray(dt)&&dt.length>0){const Ft=dt.filter(an=>an!==k.asyncValidator);Ft.length!==dt.length&&(O=!0,L.setAsyncValidators(Ft))}}}const X=()=>{};return He(k._rawValidators,X),He(k._rawAsyncValidators,X),O}function ir(L,k){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),k.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function _r(L,k){_t(L,k)}function bi(L,k){if(!L.hasOwnProperty("model"))return!1;const O=L.model;return!!O.isFirstChange()||!Object.is(k,O.currentValue)}function ki(L,k){L._syncPendingControls(),k.forEach(O=>{const X=O.control;"submit"===X.updateOn&&X._pendingChange&&(O.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}function ji(L,k){if(!k)return null;let O,X,dt;return Array.isArray(k),k.forEach(Ft=>{Ft.constructor===Qe?O=Ft:function(L){return Object.getPrototypeOf(L.constructor)===Z}(Ft)?X=Ft:dt=Ft}),dt||X||O||null}function Ii(L,k){const O=L.indexOf(k);O>-1&&L.splice(O,1)}const Pn="VALID",xr="INVALID",Hr="PENDING",Fi="DISABLED";function bs(L){return(Yr(L)?L.validators:L)||null}function ei(L){return Array.isArray(L)?Dt(L):L||null}function ws(L,k){return(Yr(k)?k.asyncValidators:L)||null}function lr(L){return Array.isArray(L)?Ve(L):L||null}function Yr(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}class Er{constructor(k,O){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=k,this._rawAsyncValidators=O,this._composedValidatorFn=ei(this._rawValidators),this._composedAsyncValidatorFn=lr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(k){this._rawValidators=this._composedValidatorFn=k}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(k){this._rawAsyncValidators=this._composedAsyncValidatorFn=k}get parent(){return this._parent}get valid(){return this.status===Pn}get invalid(){return this.status===xr}get pending(){return this.status==Hr}get disabled(){return this.status===Fi}get enabled(){return this.status!==Fi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(k){this._rawValidators=k,this._composedValidatorFn=ei(k)}setAsyncValidators(k){this._rawAsyncValidators=k,this._composedAsyncValidatorFn=lr(k)}addValidators(k){this.setValidators(It(k,this._rawValidators))}addAsyncValidators(k){this.setAsyncValidators(It(k,this._rawAsyncValidators))}removeValidators(k){this.setValidators(Ct(k,this._rawValidators))}removeAsyncValidators(k){this.setAsyncValidators(Ct(k,this._rawAsyncValidators))}hasValidator(k){return et(this._rawValidators,k)}hasAsyncValidator(k){return et(this._rawAsyncValidators,k)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(k={}){this.touched=!0,this._parent&&!k.onlySelf&&this._parent.markAsTouched(k)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(k=>k.markAllAsTouched())}markAsUntouched(k={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}markAsDirty(k={}){this.pristine=!1,this._parent&&!k.onlySelf&&this._parent.markAsDirty(k)}markAsPristine(k={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}markAsPending(k={}){this.status=Hr,!1!==k.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!k.onlySelf&&this._parent.markAsPending(k)}disable(k={}){const O=this._parentMarkedDirty(k.onlySelf);this.status=Fi,this.errors=null,this._forEachChild(X=>{X.disable(Object.assign(Object.assign({},k),{onlySelf:!0}))}),this._updateValue(),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},k),{skipPristineCheck:O})),this._onDisabledChange.forEach(X=>X(!0))}enable(k={}){const O=this._parentMarkedDirty(k.onlySelf);this.status=Pn,this._forEachChild(X=>{X.enable(Object.assign(Object.assign({},k),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},k),{skipPristineCheck:O})),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(k){this._parent&&!k.onlySelf&&(this._parent.updateValueAndValidity(k),k.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(k){this._parent=k}updateValueAndValidity(k={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pn||this.status===Hr)&&this._runAsyncValidator(k.emitEvent)),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!k.onlySelf&&this._parent.updateValueAndValidity(k)}_updateTreeValidity(k={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(k)),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fi:Pn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(k){if(this.asyncValidator){this.status=Hr,this._hasOwnPendingAsyncValidator=!0;const O=Bn(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:k})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(k,O={}){this.errors=k,this._updateControlsErrors(!1!==O.emitEvent)}get(k){return function(L,k,O){if(null==k||(Array.isArray(k)||(k=k.split(".")),Array.isArray(k)&&0===k.length))return null;let X=L;return k.forEach(dt=>{X=X instanceof ls?X.controls.hasOwnProperty(dt)?X.controls[dt]:null:X instanceof On&&X.at(dt)||null}),X}(this,k)}getError(k,O){const X=O?this.get(O):this;return X&&X.errors?X.errors[k]:null}hasError(k,O){return!!this.getError(k,O)}get root(){let k=this;for(;k._parent;)k=k._parent;return k}_updateControlsErrors(k){this.status=this._calculateStatus(),k&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(k)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Fi:this.errors?xr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hr)?Hr:this._anyControlsHaveStatus(xr)?xr:Pn}_anyControlsHaveStatus(k){return this._anyControls(O=>O.status===k)}_anyControlsDirty(){return this._anyControls(k=>k.dirty)}_anyControlsTouched(){return this._anyControls(k=>k.touched)}_updatePristine(k={}){this.pristine=!this._anyControlsDirty(),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}_updateTouched(k={}){this.touched=this._anyControlsTouched(),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}_isBoxedValue(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}_registerOnCollectionChange(k){this._onCollectionChange=k}_setUpdateStrategy(k){Yr(k)&&null!=k.updateOn&&(this._updateOn=k.updateOn)}_parentMarkedDirty(k){return!k&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Qr extends Er{constructor(k=null,O,X){super(bs(O),ws(X,O)),this._onChange=[],this._applyFormState(k),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(k,O={}){this.value=this._pendingValue=k,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(k,O={}){this.setValue(k,O)}reset(k=null,O={}){this._applyFormState(k),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(k){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(k){this._onChange.push(k)}_unregisterOnChange(k){Ii(this._onChange,k)}registerOnDisabledChange(k){this._onDisabledChange.push(k)}_unregisterOnDisabledChange(k){Ii(this._onDisabledChange,k)}_forEachChild(k){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(k){this._isBoxedValue(k)?(this.value=this._pendingValue=k.value,k.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=k}}class ls extends Er{constructor(k,O,X){super(bs(O),ws(X,O)),this.controls=k,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(k,O){return this.controls[k]?this.controls[k]:(this.controls[k]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(k,O,X={}){this.registerControl(k,O),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(k,O={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(k,O,X={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],O&&this.registerControl(k,O),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(k){return this.controls.hasOwnProperty(k)&&this.controls[k].enabled}setValue(k,O={}){this._checkAllValuesPresent(k),Object.keys(k).forEach(X=>{this._throwIfControlMissing(X),this.controls[X].setValue(k[X],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(k,O={}){null!=k&&(Object.keys(k).forEach(X=>{this.controls[X]&&this.controls[X].patchValue(k[X],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(k={},O={}){this._forEachChild((X,dt)=>{X.reset(k[dt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(k,O,X)=>(k[X]=O instanceof Qr?O.value:O.getRawValue(),k))}_syncPendingControls(){let k=this._reduceChildren(!1,(O,X)=>!!X._syncPendingControls()||O);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_throwIfControlMissing(k){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[k])throw new Error(`Cannot find form control with name: ${k}.`)}_forEachChild(k){Object.keys(this.controls).forEach(O=>{const X=this.controls[O];X&&k(X,O)})}_setUpControls(){this._forEachChild(k=>{k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(k){for(const O of Object.keys(this.controls)){const X=this.controls[O];if(this.contains(O)&&k(X))return!0}return!1}_reduceValue(){return this._reduceChildren({},(k,O,X)=>((O.enabled||this.disabled)&&(k[X]=O.value),k))}_reduceChildren(k,O){let X=k;return this._forEachChild((dt,Ft)=>{X=O(X,dt,Ft)}),X}_allControlsDisabled(){for(const k of Object.keys(this.controls))if(this.controls[k].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(k){this._forEachChild((O,X)=>{if(void 0===k[X])throw new Error(`Must supply a value for form control with name: '${X}'.`)})}}class On extends Er{constructor(k,O,X){super(bs(O),ws(X,O)),this.controls=k,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(k){return this.controls[k]}push(k,O={}){this.controls.push(k),this._registerControl(k),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(k,O,X={}){this.controls.splice(k,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:X.emitEvent})}removeAt(k,O={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),this.controls.splice(k,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(k,O,X={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),this.controls.splice(k,1),O&&(this.controls.splice(k,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(k,O={}){this._checkAllValuesPresent(k),k.forEach((X,dt)=>{this._throwIfControlMissing(dt),this.at(dt).setValue(X,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(k,O={}){null!=k&&(k.forEach((X,dt)=>{this.at(dt)&&this.at(dt).patchValue(X,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(k=[],O={}){this._forEachChild((X,dt)=>{X.reset(k[dt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(k=>k instanceof Qr?k.value:k.getRawValue())}clear(k={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:k.emitEvent}))}_syncPendingControls(){let k=this.controls.reduce((O,X)=>!!X._syncPendingControls()||O,!1);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_throwIfControlMissing(k){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(k))throw new Error(`Cannot find form control at index ${k}`)}_forEachChild(k){this.controls.forEach((O,X)=>{k(O,X)})}_updateValue(){this.value=this.controls.filter(k=>k.enabled||this.disabled).map(k=>k.value)}_anyControls(k){return this.controls.some(O=>O.enabled&&k(O))}_setUpControls(){this._forEachChild(k=>this._registerControl(k))}_checkAllValuesPresent(k){this._forEachChild((O,X)=>{if(void 0===k[X])throw new Error(`Must supply a value for form control at index: ${X}.`)})}_allControlsDisabled(){for(const k of this.controls)if(k.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(k){k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)}}const qt={provide:En,useExisting:(0,f.Gpc)(()=>st)},yr=(()=>Promise.resolve(null))();let st=(()=>{class L extends En{constructor(O,X){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new ls({},Dt(O),Ve(X))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(O){yr.then(()=>{const X=this._findContainer(O.path);O.control=X.registerControl(O.name,O.control),Ue(O.control,O),O.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(O)})}getControl(O){return this.form.get(O.path)}removeControl(O){yr.then(()=>{const X=this._findContainer(O.path);X&&X.removeControl(O.name),Ii(this._directives,O)})}addFormGroup(O){yr.then(()=>{const X=this._findContainer(O.path),dt=new ls({});_r(dt,O),X.registerControl(O.name,dt),dt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(O){yr.then(()=>{const X=this._findContainer(O.path);X&&X.removeControl(O.name)})}getFormGroup(O){return this.form.get(O.path)}updateModel(O,X){yr.then(()=>{this.form.get(O.path).setValue(X)})}setValue(O){this.control.setValue(O)}onSubmit(O){return this.submitted=!0,ki(this.form,this._directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(O){return O.pop(),O.length?this.form.get(O):this.form}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(Ze,10),f.Y36(Xe,10))},L.\u0275dir=f.lG2({type:L,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(O,X){1&O&&f.NdJ("submit",function(Ft){return X.onSubmit(Ft)})("reset",function(){return X.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([qt]),f.qOj]}),L})();const Rr={provide:Jn,useExisting:(0,f.Gpc)(()=>Qi)},us=(()=>Promise.resolve(null))();let Qi=(()=>{class L extends Jn{constructor(O,X,dt,Ft){super(),this.control=new Qr,this._registered=!1,this.update=new f.vpe,this._parent=O,this._setValidators(X),this._setAsyncValidators(dt),this.valueAccessor=ji(0,Ft)}ngOnChanges(O){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in O&&this._updateDisabled(O),bi(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Gr(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ue(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){us.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1})})}_updateDisabled(O){const X=O.isDisabled.currentValue,dt=""===X||X&&"false"!==X;us.then(()=>{dt&&!this.control.disabled?this.control.disable():!dt&&this.control.disabled&&this.control.enable()})}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(En,9),f.Y36(Ze,10),f.Y36(Xe,10),f.Y36(te,10))},L.\u0275dir=f.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([Rr]),f.qOj,f.TTD]}),L})(),Br=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275dir=f.lG2({type:L,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),L})();const pt={provide:te,useExisting:(0,f.Gpc)(()=>yt),multi:!0};let yt=(()=>{class L extends Z{writeValue(O){this.setProperty("value",null==O?"":O)}registerOnChange(O){this.onChange=X=>{O(""==X?null:parseFloat(X))}}}return L.\u0275fac=function(){let k;return function(X){return(k||(k=f.n5z(L)))(X||L)}}(),L.\u0275dir=f.lG2({type:L,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(O,X){1&O&&f.NdJ("input",function(Ft){return X.onChange(Ft.target.value)})("blur",function(){return X.onTouched()})},features:[f._Bn([pt]),f.qOj]}),L})(),yn=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=f.oAB({type:L}),L.\u0275inj=f.cJS({}),L})();const $i=new f.OlP("NgModelWithFormControlWarning"),Uo={provide:En,useExisting:(0,f.Gpc)(()=>hi)};let hi=(()=>{class L extends En{constructor(O,X){super(),this.validators=O,this.asyncValidators=X,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(O),this._setAsyncValidators(X)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const X=this.form.get(O.path);return Ue(X,O),X.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),X}getControl(O){return this.form.get(O.path)}removeControl(O){qe(O.control||null,O,!1),Ii(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,X){this.form.get(O.path).setValue(X)}onSubmit(O){return this.submitted=!0,ki(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const X=O.control,dt=this.form.get(O.path);X!==dt&&(qe(X||null,O),dt instanceof Qr&&(Ue(dt,O),O.control=dt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const X=this.form.get(O.path);_r(X,O),X.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const X=this.form.get(O.path);X&&function(L,k){return rn(L,k)}(X,O)&&X.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_t(this.form,this),this._oldForm&&rn(this._oldForm,this)}_checkFormPresent(){}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(Ze,10),f.Y36(Xe,10))},L.\u0275dir=f.lG2({type:L,selectors:[["","formGroup",""]],hostBindings:function(O,X){1&O&&f.NdJ("submit",function(Ft){return X.onSubmit(Ft)})("reset",function(){return X.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Uo]),f.qOj,f.TTD]}),L})();const ri={provide:Jn,useExisting:(0,f.Gpc)(()=>Vo)};let Vo=(()=>{class L extends Jn{constructor(O,X,dt,Ft,an){super(),this._ngModelWarningConfig=an,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(X),this._setAsyncValidators(dt),this.valueAccessor=ji(0,Ft)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),bi(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return Gr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return L.\u0275fac=function(O){return new(O||L)(f.Y36(En,13),f.Y36(Ze,10),f.Y36(Xe,10),f.Y36(te,10),f.Y36($i,8))},L.\u0275dir=f.lG2({type:L,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([ri]),f.qOj,f.TTD]}),L._ngModelWarningSentOnce=!1,L})(),ne=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=f.oAB({type:L}),L.\u0275inj=f.cJS({imports:[[yn]]}),L})(),$=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=f.oAB({type:L}),L.\u0275inj=f.cJS({imports:[ne]}),L})(),ie=(()=>{class L{static withConfig(O){return{ngModule:L,providers:[{provide:$i,useValue:O.warnOnNgModelWithFormControl}]}}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=f.oAB({type:L}),L.\u0275inj=f.cJS({imports:[ne]}),L})(),gt=(()=>{class L{group(O,X=null){const dt=this._reduceControls(O);let Xn,Ft=null,an=null;return null!=X&&(function(L){return void 0!==L.asyncValidators||void 0!==L.validators||void 0!==L.updateOn}(X)?(Ft=null!=X.validators?X.validators:null,an=null!=X.asyncValidators?X.asyncValidators:null,Xn=null!=X.updateOn?X.updateOn:void 0):(Ft=null!=X.validator?X.validator:null,an=null!=X.asyncValidator?X.asyncValidator:null)),new ls(dt,{asyncValidators:an,updateOn:Xn,validators:Ft})}control(O,X,dt){return new Qr(O,X,dt)}array(O,X,dt){const Ft=O.map(an=>this._createControl(an));return new On(Ft,X,dt)}_reduceControls(O){const X={};return Object.keys(O).forEach(dt=>{X[dt]=this._createControl(O[dt])}),X}_createControl(O){return O instanceof Qr||O instanceof ls||O instanceof On?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275prov=(0,f.Yz7)({factory:function(){return new L},token:L,providedIn:ie}),L})()},9075:(Vt,Ie,N)=>{"use strict";N.d(Ie,{b2:()=>rr,H7:()=>He,q6:()=>Kr,se:()=>rt});var f=N(8583),v=N(639);class J extends f.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends J{static makeCurrent(){(0,f.HT)(new me)}onAndCancel(ze,Ce,ht){return ze.addEventListener(Ce,ht,!1),()=>{ze.removeEventListener(Ce,ht,!1)}}dispatchEvent(ze,Ce){ze.dispatchEvent(Ce)}remove(ze){ze.parentNode&&ze.parentNode.removeChild(ze)}createElement(ze,Ce){return(Ce=Ce||this.getDefaultDocument()).createElement(ze)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ze){return ze.nodeType===Node.ELEMENT_NODE}isShadowRoot(ze){return ze instanceof DocumentFragment}getGlobalEventTarget(ze,Ce){return"window"===Ce?window:"document"===Ce?ze:"body"===Ce?ze.body:null}getBaseHref(ze){const Ce=(le=le||document.querySelector("base"),le?le.getAttribute("href"):null);return null==Ce?null:function(st){Ae=Ae||document.createElement("a"),Ae.setAttribute("href",st);const ze=Ae.pathname;return"/"===ze.charAt(0)?ze:`/${ze}`}(Ce)}resetBaseElement(){le=null}getUserAgent(){return window.navigator.userAgent}getCookie(ze){return(0,f.Mx)(document.cookie,ze)}}let Ae,le=null;const ge=new v.OlP("TRANSITION_ID"),Z=[{provide:v.ip1,useFactory:function(st,ze,Ce){return()=>{Ce.get(v.CZH).donePromise.then(()=>{const ht=(0,f.q)(),Pt=ze.querySelectorAll(`style[ng-transition="${st}"]`);for(let Nn=0;Nn<Pt.length;Nn++)ht.remove(Pt[Nn])})}},deps:[ge,f.K0,v.zs3],multi:!0}];class te{static init(){(0,v.VLi)(new te)}addToWindow(ze){v.dqk.getAngularTestability=(ht,Pt=!0)=>{const Nn=ze.findTestabilityInTree(ht,Pt);if(null==Nn)throw new Error("Could not find testability for element.");return Nn},v.dqk.getAllAngularTestabilities=()=>ze.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>ze.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(ht=>{const Pt=v.dqk.getAllAngularTestabilities();let Nn=Pt.length,Un=!1;const Cn=function(Rr){Un=Un||Rr,Nn--,0==Nn&&ht(Un)};Pt.forEach(function(Rr){Rr.whenStable(Cn)})})}findTestabilityInTree(ze,Ce,ht){if(null==Ce)return null;const Pt=ze.getTestability(Ce);return null!=Pt?Pt:ht?(0,f.q)().isShadowRoot(Ce)?this.findTestabilityInTree(ze,Ce.host,!0):this.findTestabilityInTree(ze,Ce.parentElement,!0):null}}let de=(()=>{class st{build(){return new XMLHttpRequest}}return st.\u0275fac=function(Ce){return new(Ce||st)},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})();const Re=new v.OlP("EventManagerPlugins");let _e=(()=>{class st{constructor(Ce,ht){this._zone=ht,this._eventNameToPlugin=new Map,Ce.forEach(Pt=>Pt.manager=this),this._plugins=Ce.slice().reverse()}addEventListener(Ce,ht,Pt){return this._findPluginFor(ht).addEventListener(Ce,ht,Pt)}addGlobalEventListener(Ce,ht,Pt){return this._findPluginFor(ht).addGlobalEventListener(Ce,ht,Pt)}getZone(){return this._zone}_findPluginFor(Ce){const ht=this._eventNameToPlugin.get(Ce);if(ht)return ht;const Pt=this._plugins;for(let Nn=0;Nn<Pt.length;Nn++){const Un=Pt[Nn];if(Un.supports(Ce))return this._eventNameToPlugin.set(Ce,Un),Un}throw new Error(`No event manager plugin found for event ${Ce}`)}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(Re),v.LFG(v.R0b))},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})();class ct{constructor(ze){this._doc=ze}addGlobalEventListener(ze,Ce,ht){const Pt=(0,f.q)().getGlobalEventTarget(this._doc,ze);if(!Pt)throw new Error(`Unsupported event target ${Pt} for event ${Ce}`);return this.addEventListener(Pt,Ce,ht)}}let Te=(()=>{class st{constructor(){this._stylesSet=new Set}addStyles(Ce){const ht=new Set;Ce.forEach(Pt=>{this._stylesSet.has(Pt)||(this._stylesSet.add(Pt),ht.add(Pt))}),this.onStylesAdded(ht)}onStylesAdded(Ce){}getAllStyles(){return Array.from(this._stylesSet)}}return st.\u0275fac=function(Ce){return new(Ce||st)},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})(),jt=(()=>{class st extends Te{constructor(Ce){super(),this._doc=Ce,this._hostNodes=new Map,this._hostNodes.set(Ce.head,[])}_addStylesToHost(Ce,ht,Pt){Ce.forEach(Nn=>{const Un=this._doc.createElement("style");Un.textContent=Nn,Pt.push(ht.appendChild(Un))})}addHost(Ce){const ht=[];this._addStylesToHost(this._stylesSet,Ce,ht),this._hostNodes.set(Ce,ht)}removeHost(Ce){const ht=this._hostNodes.get(Ce);ht&&ht.forEach(mn),this._hostNodes.delete(Ce)}onStylesAdded(Ce){this._hostNodes.forEach((ht,Pt)=>{this._addStylesToHost(Ce,Pt,ht)})}ngOnDestroy(){this._hostNodes.forEach(Ce=>Ce.forEach(mn))}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(f.K0))},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})();function mn(st){(0,f.q)().remove(st)}const Bn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Zt=/%COMP%/g;function Ve(st,ze,Ce){for(let ht=0;ht<ze.length;ht++){let Pt=ze[ht];Array.isArray(Pt)?Ve(st,Pt,Ce):(Pt=Pt.replace(Zt,st),Ce.push(Pt))}return Ce}function bt(st){return ze=>{if("__ngUnwrap__"===ze)return st;!1===st(ze)&&(ze.preventDefault(),ze.returnValue=!1)}}let rt=(()=>{class st{constructor(Ce,ht,Pt){this.eventManager=Ce,this.sharedStylesHost=ht,this.appId=Pt,this.rendererByCompId=new Map,this.defaultRenderer=new Se(Ce)}createRenderer(Ce,ht){if(!Ce||!ht)return this.defaultRenderer;switch(ht.encapsulation){case v.ifc.Emulated:{let Pt=this.rendererByCompId.get(ht.id);return Pt||(Pt=new dn(this.eventManager,this.sharedStylesHost,ht,this.appId),this.rendererByCompId.set(ht.id,Pt)),Pt.applyToHost(Ce),Pt}case 1:case v.ifc.ShadowDom:return new En(this.eventManager,this.sharedStylesHost,Ce,ht);default:if(!this.rendererByCompId.has(ht.id)){const Pt=Ve(ht.id,ht.styles,[]);this.sharedStylesHost.addStyles(Pt),this.rendererByCompId.set(ht.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(_e),v.LFG(jt),v.LFG(v.AFp))},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})();class Se{constructor(ze){this.eventManager=ze,this.data=Object.create(null)}destroy(){}createElement(ze,Ce){return Ce?document.createElementNS(Bn[Ce]||Ce,ze):document.createElement(ze)}createComment(ze){return document.createComment(ze)}createText(ze){return document.createTextNode(ze)}appendChild(ze,Ce){ze.appendChild(Ce)}insertBefore(ze,Ce,ht){ze&&ze.insertBefore(Ce,ht)}removeChild(ze,Ce){ze&&ze.removeChild(Ce)}selectRootElement(ze,Ce){let ht="string"==typeof ze?document.querySelector(ze):ze;if(!ht)throw new Error(`The selector "${ze}" did not match any elements`);return Ce||(ht.textContent=""),ht}parentNode(ze){return ze.parentNode}nextSibling(ze){return ze.nextSibling}setAttribute(ze,Ce,ht,Pt){if(Pt){Ce=Pt+":"+Ce;const Nn=Bn[Pt];Nn?ze.setAttributeNS(Nn,Ce,ht):ze.setAttribute(Ce,ht)}else ze.setAttribute(Ce,ht)}removeAttribute(ze,Ce,ht){if(ht){const Pt=Bn[ht];Pt?ze.removeAttributeNS(Pt,Ce):ze.removeAttribute(`${ht}:${Ce}`)}else ze.removeAttribute(Ce)}addClass(ze,Ce){ze.classList.add(Ce)}removeClass(ze,Ce){ze.classList.remove(Ce)}setStyle(ze,Ce,ht,Pt){Pt&(v.JOm.DashCase|v.JOm.Important)?ze.style.setProperty(Ce,ht,Pt&v.JOm.Important?"important":""):ze.style[Ce]=ht}removeStyle(ze,Ce,ht){ht&v.JOm.DashCase?ze.style.removeProperty(Ce):ze.style[Ce]=""}setProperty(ze,Ce,ht){ze[Ce]=ht}setValue(ze,Ce){ze.nodeValue=Ce}listen(ze,Ce,ht){return"string"==typeof ze?this.eventManager.addGlobalEventListener(ze,Ce,bt(ht)):this.eventManager.addEventListener(ze,Ce,bt(ht))}}class dn extends Se{constructor(ze,Ce,ht,Pt){super(ze),this.component=ht;const Nn=Ve(Pt+"-"+ht.id,ht.styles,[]);Ce.addStyles(Nn),this.contentAttr="_ngcontent-%COMP%".replace(Zt,Pt+"-"+ht.id),this.hostAttr="_nghost-%COMP%".replace(Zt,Pt+"-"+ht.id)}applyToHost(ze){super.setAttribute(ze,this.hostAttr,"")}createElement(ze,Ce){const ht=super.createElement(ze,Ce);return super.setAttribute(ht,this.contentAttr,""),ht}}class En extends Se{constructor(ze,Ce,ht,Pt){super(ze),this.sharedStylesHost=Ce,this.hostEl=ht,this.shadowRoot=ht.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Nn=Ve(Pt.id,Pt.styles,[]);for(let Un=0;Un<Nn.length;Un++){const Cn=document.createElement("style");Cn.textContent=Nn[Un],this.shadowRoot.appendChild(Cn)}}nodeOrShadowRoot(ze){return ze===this.hostEl?this.shadowRoot:ze}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ze,Ce){return super.appendChild(this.nodeOrShadowRoot(ze),Ce)}insertBefore(ze,Ce,ht){return super.insertBefore(this.nodeOrShadowRoot(ze),Ce,ht)}removeChild(ze,Ce){return super.removeChild(this.nodeOrShadowRoot(ze),Ce)}parentNode(ze){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ze)))}}let Jn=(()=>{class st extends ct{constructor(Ce){super(Ce)}supports(Ce){return!0}addEventListener(Ce,ht,Pt){return Ce.addEventListener(ht,Pt,!1),()=>this.removeEventListener(Ce,ht,Pt)}removeEventListener(Ce,ht,Pt){return Ce.removeEventListener(ht,Pt)}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(f.K0))},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})();const ln=["alt","control","meta","shift"],re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gr={alt:st=>st.altKey,control:st=>st.ctrlKey,meta:st=>st.metaKey,shift:st=>st.shiftKey};let Ue=(()=>{class st extends ct{constructor(Ce){super(Ce)}supports(Ce){return null!=st.parseEventName(Ce)}addEventListener(Ce,ht,Pt){const Nn=st.parseEventName(ht),Un=st.eventCallback(Nn.fullKey,Pt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,f.q)().onAndCancel(Ce,Nn.domEventName,Un))}static parseEventName(Ce){const ht=Ce.toLowerCase().split("."),Pt=ht.shift();if(0===ht.length||"keydown"!==Pt&&"keyup"!==Pt)return null;const Nn=st._normalizeKey(ht.pop());let Un="";if(ln.forEach(Rr=>{const Wn=ht.indexOf(Rr);Wn>-1&&(ht.splice(Wn,1),Un+=Rr+".")}),Un+=Nn,0!=ht.length||0===Nn.length)return null;const Cn={};return Cn.domEventName=Pt,Cn.fullKey=Un,Cn}static getEventFullKey(Ce){let ht="",Pt=function(st){let ze=st.key;if(null==ze){if(ze=st.keyIdentifier,null==ze)return"Unidentified";ze.startsWith("U+")&&(ze=String.fromCharCode(parseInt(ze.substring(2),16)),3===st.location&&tr.hasOwnProperty(ze)&&(ze=tr[ze]))}return re[ze]||ze}(Ce);return Pt=Pt.toLowerCase()," "===Pt?Pt="space":"."===Pt&&(Pt="dot"),ln.forEach(Nn=>{Nn!=Pt&&Gr[Nn](Ce)&&(ht+=Nn+".")}),ht+=Pt,ht}static eventCallback(Ce,ht,Pt){return Nn=>{st.getEventFullKey(Nn)===Ce&&Pt.runGuarded(()=>ht(Nn))}}static _normalizeKey(Ce){switch(Ce){case"esc":return"escape";default:return Ce}}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(f.K0))},st.\u0275prov=v.Yz7({token:st,factory:st.\u0275fac}),st})(),He=(()=>{class st{}return st.\u0275fac=function(Ce){return new(Ce||st)},st.\u0275prov=(0,v.Yz7)({factory:function(){return(0,v.LFG)(_t)},token:st,providedIn:"root"}),st})(),_t=(()=>{class st extends He{constructor(Ce){super(),this._doc=Ce}sanitize(Ce,ht){if(null==ht)return null;switch(Ce){case v.q3G.NONE:return ht;case v.q3G.HTML:return(0,v.qzn)(ht,"HTML")?(0,v.z3N)(ht):(0,v.EiD)(this._doc,String(ht)).toString();case v.q3G.STYLE:return(0,v.qzn)(ht,"Style")?(0,v.z3N)(ht):ht;case v.q3G.SCRIPT:if((0,v.qzn)(ht,"Script"))return(0,v.z3N)(ht);throw new Error("unsafe value used in a script context");case v.q3G.URL:return(0,v.yhl)(ht),(0,v.qzn)(ht,"URL")?(0,v.z3N)(ht):(0,v.mCW)(String(ht));case v.q3G.RESOURCE_URL:if((0,v.qzn)(ht,"ResourceURL"))return(0,v.z3N)(ht);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Ce} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Ce){return(0,v.JVY)(Ce)}bypassSecurityTrustStyle(Ce){return(0,v.L6k)(Ce)}bypassSecurityTrustScript(Ce){return(0,v.eBb)(Ce)}bypassSecurityTrustUrl(Ce){return(0,v.LAX)(Ce)}bypassSecurityTrustResourceUrl(Ce){return(0,v.pB0)(Ce)}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(f.K0))},st.\u0275prov=(0,v.Yz7)({factory:function(){return function(st){return new _t(st.get(f.K0))}((0,v.LFG)(v.gxx))},token:st,providedIn:"root"}),st})();const Kr=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:f.bD},{provide:v.g9A,useValue:function(){me.makeCurrent(),te.init()},multi:!0},{provide:f.K0,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),bi=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:Re,useClass:Jn,multi:!0,deps:[f.K0,v.R0b,v.Lbi]},{provide:Re,useClass:Ue,multi:!0,deps:[f.K0]},[],{provide:rt,useClass:rt,deps:[_e,jt,v.AFp]},{provide:v.FYo,useExisting:rt},{provide:Te,useExisting:jt},{provide:jt,useClass:jt,deps:[f.K0]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:_e,useClass:_e,deps:[Re,v.R0b]},{provide:f.JF,useClass:de,deps:[]},[]];let rr=(()=>{class st{constructor(Ce){if(Ce)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Ce){return{ngModule:st,providers:[{provide:v.AFp,useValue:Ce.appId},{provide:ge,useExisting:v.AFp},Z]}}}return st.\u0275fac=function(Ce){return new(Ce||st)(v.LFG(st,12))},st.\u0275mod=v.oAB({type:st}),st.\u0275inj=v.cJS({providers:bi,imports:[f.ez,v.hGG]}),st})();"undefined"!=typeof window&&window},289:(Vt,Ie,N)=>{"use strict";N.d(Ie,{F0:()=>Vi,Bz:()=>ss,lC:()=>Mn});var f=N(8583),v=N(639),J=N(4869),me=N(6693),le=N(4087);function ue(...P){let S=P[P.length-1];return(0,J.K)(S)?(P.pop(),(0,le.r)(P,S)):(0,me.n)(P)}var Ae=N(7709),Me=N(7971);class ge extends Ae.xQ{constructor(S){super(),this._value=S}get value(){return this.getValue()}_subscribe(S){const T=super._subscribe(S);return T&&!T.closed&&S.next(this._value),T}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Me.N;return this._value}next(S){super.next(this._value=S)}}var K=N(9796),Z=N(5197),te=N(5604);const de={};class je{constructor(S){this.resultSelector=S}call(S,T){return T.subscribe(new Oe(S,this.resultSelector))}}class Oe extends Z.L{constructor(S,T){super(S),this.resultSelector=T,this.active=0,this.values=[],this.observables=[]}_next(S){this.values.push(de),this.observables.push(S)}_complete(){const S=this.observables,T=S.length;if(0===T)this.destination.complete();else{this.active=T,this.toRespond=T;for(let M=0;M<T;M++){const q=S[M];this.add((0,te.D)(this,q,q,M))}}}notifyComplete(S){0==(this.active-=1)&&this.destination.complete()}notifyNext(S,T,M,q,se){const we=this.values,Lt=this.toRespond?we[M]===de?--this.toRespond:this.toRespond:0;we[M]=T,0===Lt&&(this.resultSelector?this._tryResultSelector(we):this.destination.next(we.slice()))}_tryResultSelector(S){let T;try{T=this.resultSelector.apply(this,S)}catch(M){return void this.destination.error(M)}this.destination.next(T)}}const Qe=(()=>{function P(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return P.prototype=Object.create(Error.prototype),P})();var it=N(3282);function Ze(...P){return(0,it.J)(1)(ue(...P))}var Xe=N(7574),ye=N(4402);const Qt=new Xe.y(P=>P.complete());function De(P){return P?function(P){return new Xe.y(S=>P.schedule(()=>S.complete()))}(P):Qt}function ce(P){return new Xe.y(S=>{let T;try{T=P()}catch(q){return void S.error(q)}return(T?(0,ye.D)(T):De()).subscribe(S)})}var Ne=N(2441),Re=N(268),_e=N(8002);function ct(P,S){return"function"==typeof S?T=>T.pipe(ct((M,q)=>(0,ye.D)(P(M,q)).pipe((0,_e.U)((se,we)=>S(M,se,q,we))))):T=>T.lift(new Te(P))}class Te{constructor(S){this.project=S}call(S,T){return T.subscribe(new jt(S,this.project))}}class jt extends Z.L{constructor(S,T){super(S),this.project=T,this.index=0}_next(S){let T;const M=this.index++;try{T=this.project(S,M)}catch(q){return void this.destination.error(q)}this._innerSub(T,S,M)}_innerSub(S,T,M){const q=this.innerSubscription;q&&q.unsubscribe();const se=new Re.d(this,T,M),we=this.destination;we.add(se),this.innerSubscription=(0,te.D)(this,S,void 0,void 0,se),this.innerSubscription!==se&&we.add(this.innerSubscription)}_complete(){const{innerSubscription:S}=this;(!S||S.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(S){this.destination.remove(S),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(S,T,M,q,se){this.destination.next(T)}}var mn=N(7393);const Zt=(()=>{function P(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return P.prototype=Object.create(Error.prototype),P})();function xn(P){return S=>0===P?De():S.lift(new pr(P))}class pr{constructor(S){if(this.total=S,this.total<0)throw new Zt}call(S,T){return T.subscribe(new vn(S,this.total))}}class vn extends mn.L{constructor(S,T){super(S),this.total=T,this.count=0}_next(S){const T=this.total,M=++this.count;M<=T&&(this.destination.next(S),M===T&&(this.destination.complete(),this.unsubscribe()))}}function Dt(P,S){let T=!1;return arguments.length>=2&&(T=!0),function(q){return q.lift(new at(P,S,T))}}class at{constructor(S,T,M=!1){this.accumulator=S,this.seed=T,this.hasSeed=M}call(S,T){return T.subscribe(new Ve(S,this.accumulator,this.seed,this.hasSeed))}}class Ve extends mn.L{constructor(S,T,M,q){super(S),this.accumulator=T,this._seed=M,this.hasSeed=q,this.index=0}get seed(){return this._seed}set seed(S){this.hasSeed=!0,this._seed=S}_next(S){if(this.hasSeed)return this._tryNext(S);this.seed=S,this.destination.next(S)}_tryNext(S){const T=this.index++;let M;try{M=this.accumulator(this.seed,S,T)}catch(q){this.destination.error(q)}this.seed=M,this.destination.next(M)}}function bt(P,S){return function(M){return M.lift(new ke(P,S))}}class ke{constructor(S,T){this.predicate=S,this.thisArg=T}call(S,T){return T.subscribe(new rt(S,this.predicate,this.thisArg))}}class rt extends mn.L{constructor(S,T,M){super(S),this.predicate=T,this.thisArg=M,this.count=0}_next(S){let T;try{T=this.predicate.call(this.thisArg,S,this.count++)}catch(M){return void this.destination.error(M)}T&&this.destination.next(S)}}function Se(P){return function(T){const M=new et(P),q=T.lift(M);return M.caught=q}}class et{constructor(S){this.selector=S}call(S,T){return T.subscribe(new It(S,this.selector,this.caught))}}class It extends Z.L{constructor(S,T,M){super(S),this.selector=T,this.caught=M}error(S){if(!this.isStopped){let T;try{T=this.selector(S,this.caught)}catch(se){return void super.error(se)}this._unsubscribeAndRecycle();const M=new Re.d(this,void 0,void 0);this.add(M);const q=(0,te.D)(this,T,void 0,void 0,M);q!==M&&this.add(q)}}}var Ct=N(9773);function dn(P,S){return(0,Ct.zg)(P,S,1)}function En(P){return function(T){return 0===P?De():T.lift(new Jn(P))}}class Jn{constructor(S){if(this.total=S,this.total<0)throw new Zt}call(S,T){return T.subscribe(new gn(S,this.total))}}class gn extends mn.L{constructor(S,T){super(S),this.total=T,this.ring=new Array,this.count=0}_next(S){const T=this.ring,M=this.total,q=this.count++;T.length<M?T.push(S):T[q%M]=S}_complete(){const S=this.destination;let T=this.count;if(T>0){const M=this.count>=this.total?this.total:this.count,q=this.ring;for(let se=0;se<M;se++){const we=T++%M;S.next(q[we])}}S.complete()}}function qn(P=mt){return S=>S.lift(new Tt(P))}class Tt{constructor(S){this.errorFactory=S}call(S,T){return T.subscribe(new on(S,this.errorFactory))}}class on extends mn.L{constructor(S,T){super(S),this.errorFactory=T,this.hasValue=!1}_next(S){this.hasValue=!0,this.destination.next(S)}_complete(){if(this.hasValue)return this.destination.complete();{let S;try{S=this.errorFactory()}catch(T){S=T}this.destination.error(S)}}}function mt(){return new Qe}function Je(P=null){return S=>S.lift(new Kt(P))}class Kt{constructor(S){this.defaultValue=S}call(S,T){return T.subscribe(new cn(S,this.defaultValue))}}class cn extends mn.L{constructor(S,T){super(S),this.defaultValue=T,this.isEmpty=!0}_next(S){this.isEmpty=!1,this.destination.next(S)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var kt=N(4487);function Ht(P,S){const T=arguments.length>=2;return M=>M.pipe(P?bt((q,se)=>P(q,se,M)):kt.y,xn(1),T?Je(S):qn(()=>new Qe))}function re(){}var tr=N(9105);function ar(P,S,T){return function(q){return q.lift(new Sr(P,S,T))}}class Sr{constructor(S,T,M){this.nextOrObserver=S,this.error=T,this.complete=M}call(S,T){return T.subscribe(new ni(S,this.nextOrObserver,this.error,this.complete))}}class ni extends mn.L{constructor(S,T,M,q){super(S),this._tapNext=re,this._tapError=re,this._tapComplete=re,this._tapError=M||re,this._tapComplete=q||re,(0,tr.m)(T)?(this._context=this,this._tapNext=T):T&&(this._context=T,this._tapNext=T.next||re,this._tapError=T.error||re,this._tapComplete=T.complete||re)}_next(S){try{this._tapNext.call(this._context,S)}catch(T){return void this.destination.error(T)}this.destination.next(S)}_error(S){try{this._tapError.call(this._context,S)}catch(T){return void this.destination.error(T)}this.destination.error(S)}_complete(){try{this._tapComplete.call(this._context)}catch(S){return void this.destination.error(S)}return this.destination.complete()}}var Ti=N(5319);class Ue{constructor(S){this.callback=S}call(S,T){return T.subscribe(new qe(S,this.callback))}}class qe extends mn.L{constructor(S,T){super(S),this.add(new Ti.w(T))}}var He=N(1307);class Nt{constructor(S,T){this.id=S,this.url=T}}class _t extends Nt{constructor(S,T,M="imperative",q=null){super(S,T),this.navigationTrigger=M,this.restoredState=q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rn extends Nt{constructor(S,T,M){super(S,T),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vn extends Nt{constructor(S,T,M){super(S,T),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vr extends Nt{constructor(S,T,M){super(S,T),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ir extends Nt{constructor(S,T,M,q){super(S,T),this.urlAfterRedirects=M,this.state=q}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sn extends Nt{constructor(S,T,M,q){super(S,T),this.urlAfterRedirects=M,this.state=q}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _r extends Nt{constructor(S,T,M,q,se){super(S,T),this.urlAfterRedirects=M,this.state=q,this.shouldActivate=se}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rn extends Nt{constructor(S,T,M,q){super(S,T),this.urlAfterRedirects=M,this.state=q}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qr extends Nt{constructor(S,T,M,q){super(S,T),this.urlAfterRedirects=M,this.state=q}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kr{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bi{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rr{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ki{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ji{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ii{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(S,T,M){this.routerEvent=S,this.position=T,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pn="primary";class xr{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const T=this.params[S];return Array.isArray(T)?T[0]:T}return null}getAll(S){if(this.has(S)){const T=this.params[S];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Hr(P){return new xr(P)}const Fi="ngNavigationCancelingError";function Yi(P){const S=Error("NavigationCancelingError: "+P);return S[Fi]=!0,S}function ei(P,S,T){const M=T.path.split("/");if(M.length>P.length||"full"===T.pathMatch&&(S.hasChildren()||M.length<P.length))return null;const q={};for(let se=0;se<M.length;se++){const we=M[se],Ke=P[se];if(we.startsWith(":"))q[we.substring(1)]=Ke;else if(we!==Ke.path)return null}return{consumed:P.slice(0,M.length),posParams:q}}function lr(P,S){const T=P?Object.keys(P):void 0,M=S?Object.keys(S):void 0;if(!T||!M||T.length!=M.length)return!1;let q;for(let se=0;se<T.length;se++)if(q=T[se],!Yr(P[q],S[q]))return!1;return!0}function Yr(P,S){if(Array.isArray(P)&&Array.isArray(S)){if(P.length!==S.length)return!1;const T=[...P].sort(),M=[...S].sort();return T.every((q,se)=>M[se]===q)}return P===S}function Er(P){return Array.prototype.concat.apply([],P)}function Qr(P){return P.length>0?P[P.length-1]:null}function On(P,S){for(const T in P)P.hasOwnProperty(T)&&S(P[T],T)}function qt(P){return(0,v.CqO)(P)?P:(0,v.QGY)(P)?(0,ye.D)(Promise.resolve(P)):ue(P)}const yr={exact:function ht(P,S,T){if(!Br(P.segments,S.segments)||!Cn(P.segments,S.segments,T)||P.numberOfChildren!==S.numberOfChildren)return!1;for(const M in S.children)if(!P.children[M]||!ht(P.children[M],S.children[M],T))return!1;return!0},subset:Nn},st={exact:function(P,S){return lr(P,S)},subset:function(P,S){return Object.keys(S).length<=Object.keys(P).length&&Object.keys(S).every(T=>Yr(P[T],S[T]))},ignored:()=>!0};function ze(P,S,T){return yr[T.paths](P.root,S.root,T.matrixParams)&&st[T.queryParams](P.queryParams,S.queryParams)&&!("exact"===T.fragment&&P.fragment!==S.fragment)}function Nn(P,S,T){return Un(P,S,S.segments,T)}function Un(P,S,T,M){if(P.segments.length>T.length){const q=P.segments.slice(0,T.length);return!(!Br(q,T)||S.hasChildren()||!Cn(q,T,M))}if(P.segments.length===T.length){if(!Br(P.segments,T)||!Cn(P.segments,T,M))return!1;for(const q in S.children)if(!P.children[q]||!Nn(P.children[q],S.children[q],M))return!1;return!0}{const q=T.slice(0,P.segments.length),se=T.slice(P.segments.length);return!!(Br(P.segments,q)&&Cn(P.segments,q,M)&&P.children[Pn])&&Un(P.children[Pn],S,se,M)}}function Cn(P,S,T){return S.every((M,q)=>st[T](P[q].parameters,M.parameters))}class Rr{constructor(S,T,M){this.root=S,this.queryParams=T,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hr(this.queryParams)),this._queryParamMap}toString(){return Gt.serialize(this)}}class Wn{constructor(S,T){this.segments=S,this.children=T,this.parent=null,On(T,(M,q)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yn(this)}}class us{constructor(S,T){this.path=S,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Hr(this.parameters)),this._parameterMap}toString(){return Uo(this)}}function Br(P,S){return P.length===S.length&&P.every((T,M)=>T.path===S[M].path)}class yt{}class At{parse(S){const T=new go(S);return new Rr(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(S){var P;return`${`/${Ln(S.root,!0)}`}${function(P){const S=Object.keys(P).map(T=>{const M=P[T];return Array.isArray(M)?M.map(q=>`${nr(T)}=${nr(q)}`).join("&"):`${nr(T)}=${nr(M)}`}).filter(T=>!!T);return S.length?`?${S.join("&")}`:""}(S.queryParams)}${"string"==typeof S.fragment?`#${P=S.fragment,encodeURI(P)}`:""}`}}const Gt=new At;function yn(P){return P.segments.map(S=>Uo(S)).join("/")}function Ln(P,S){if(!P.hasChildren())return yn(P);if(S){const T=P.children[Pn]?Ln(P.children[Pn],!1):"",M=[];return On(P.children,(q,se)=>{se!==Pn&&M.push(`${se}:${Ln(q,!1)}`)}),M.length>0?`${T}(${M.join("//")})`:T}{const T=function(P,S){let T=[];return On(P.children,(M,q)=>{q===Pn&&(T=T.concat(S(M,q)))}),On(P.children,(M,q)=>{q!==Pn&&(T=T.concat(S(M,q)))}),T}(P,(M,q)=>q===Pn?[Ln(P.children[Pn],!1)]:[`${q}:${Ln(M,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[Pn]?`${yn(P)}/${T[0]}`:`${yn(P)}/(${T.join("//")})`}}function Tr(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nr(P){return Tr(P).replace(/%3B/gi,";")}function $i(P){return Tr(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oi(P){return decodeURIComponent(P)}function sr(P){return oi(P.replace(/\+/g,"%20"))}function Uo(P){return`${$i(P.path)}${function(P){return Object.keys(P).map(S=>`;${$i(S)}=${$i(P[S])}`).join("")}(P.parameters)}`}const Ps=/^[^\/()?;=#]+/;function Os(P){const S=P.match(Ps);return S?S[0]:""}const cs=/^[^=?&#]+/,ri=/^[^?&#]+/;class go{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(S.length>0||Object.keys(T).length>0)&&(M[Pn]=new Wn(S,T)),M}parseSegment(){const S=Os(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new us(oi(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const T=Os(this.remaining);if(!T)return;this.capture(T);let M="";if(this.consumeOptional("=")){const q=Os(this.remaining);q&&(M=q,this.capture(M))}S[oi(T)]=oi(M)}parseQueryParam(S){const T=function(P){const S=P.match(cs);return S?S[0]:""}(this.remaining);if(!T)return;this.capture(T);let M="";if(this.consumeOptional("=")){const we=function(P){const S=P.match(ri);return S?S[0]:""}(this.remaining);we&&(M=we,this.capture(M))}const q=sr(T),se=sr(M);if(S.hasOwnProperty(q)){let we=S[q];Array.isArray(we)||(we=[we],S[q]=we),we.push(se)}else S[q]=se}parseParens(S){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Os(this.remaining),q=this.remaining[M.length];if("/"!==q&&")"!==q&&";"!==q)throw new Error(`Cannot parse url '${this.url}'`);let se;M.indexOf(":")>-1?(se=M.substr(0,M.indexOf(":")),this.capture(se),this.capture(":")):S&&(se=Pn);const we=this.parseChildren();T[se]=1===Object.keys(we).length?we[Pn]:new Wn([],we),this.consumeOptional("//")}return T}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class mo{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const T=this.pathFromRoot(S);return T.length>1?T[T.length-2]:null}children(S){const T=Ro(S,this._root);return T?T.children.map(M=>M.value):[]}firstChild(S){const T=Ro(S,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(S){const T=ds(S,this._root);return T.length<2?[]:T[T.length-2].children.map(q=>q.value).filter(q=>q!==S)}pathFromRoot(S){return ds(S,this._root).map(T=>T.value)}}function Ro(P,S){if(P===S.value)return S;for(const T of S.children){const M=Ro(P,T);if(M)return M}return null}function ds(P,S){if(P===S.value)return[S];for(const T of S.children){const M=ds(P,T);if(M.length)return M.unshift(S),M}return[]}class ks{constructor(S,T){this.value=S,this.children=T}toString(){return`TreeNode(${this.value})`}}function Jo(P){const S={};return P&&P.children.forEach(T=>S[T.value.outlet]=T),S}class hs extends mo{constructor(S,T){super(S),this.snapshot=T,Bo(this,S)}toString(){return this.snapshot.toString()}}function so(P,S){const T=function(P,S){const we=new Ns([],{},{},"",{},Pn,S,null,P.root,-1,{});return new Xo("",new ks(we,[]))}(P,S),M=new ge([new us("",{})]),q=new ge({}),se=new ge({}),we=new ge({}),Ke=new ge(""),Lt=new Li(M,q,we,Ke,se,Pn,S,T.root);return Lt.snapshot=T.root,new hs(new ks(Lt,[]),T)}class Li{constructor(S,T,M,q,se,we,Ke,Lt){this.url=S,this.params=T,this.queryParams=M,this.fragment=q,this.data=se,this.outlet=we,this.component=Ke,this._futureSnapshot=Lt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_e.U)(S=>Hr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_e.U)(S=>Hr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fs(P,S="emptyOnly"){const T=P.pathFromRoot;let M=0;if("always"!==S)for(M=T.length-1;M>=1;){const q=T[M],se=T[M-1];if(q.routeConfig&&""===q.routeConfig.path)M--;else{if(se.component)break;M--}}return function(P){return P.reduce((S,T)=>({params:Object.assign(Object.assign({},S.params),T.params),data:Object.assign(Object.assign({},S.data),T.data),resolve:Object.assign(Object.assign({},S.resolve),T._resolvedData)}),{params:{},data:{},resolve:{}})}(T.slice(M))}class Ns{constructor(S,T,M,q,se,we,Ke,Lt,In,Or,Zn){this.url=S,this.params=T,this.queryParams=M,this.fragment=q,this.data=se,this.outlet=we,this.component=Ke,this.routeConfig=Lt,this._urlSegment=In,this._lastPathIndex=Or,this._resolve=Zn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xo extends mo{constructor(S,T){super(T),this.url=S,Bo(this,T)}toString(){return ea(this._root)}}function Bo(P,S){S.value._routerState=P,S.children.forEach(T=>Bo(P,T))}function ea(P){const S=P.children.length>0?` { ${P.children.map(ea).join(", ")} } `:"";return`${P.value}${S}`}function fs(P){if(P.snapshot){const S=P.snapshot,T=P._futureSnapshot;P.snapshot=T,lr(S.queryParams,T.queryParams)||P.queryParams.next(T.queryParams),S.fragment!==T.fragment&&P.fragment.next(T.fragment),lr(S.params,T.params)||P.params.next(T.params),function(P,S){if(P.length!==S.length)return!1;for(let T=0;T<P.length;++T)if(!lr(P[T],S[T]))return!1;return!0}(S.url,T.url)||P.url.next(T.url),lr(S.data,T.data)||P.data.next(T.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function jo(P,S){return lr(P.params,S.params)&&function(P,S){return Br(P,S)&&P.every((T,M)=>lr(T.parameters,S[M].parameters))}(P.url,S.url)&&!(!P.parent!=!S.parent)&&(!P.parent||jo(P.parent,S.parent))}function Hi(P,S,T){if(T&&P.shouldReuseRoute(S.value,T.value.snapshot)){const M=T.value;M._futureSnapshot=S.value;const q=function(P,S,T){return S.children.map(M=>{for(const q of T.children)if(P.shouldReuseRoute(M.value,q.value.snapshot))return Hi(P,M,q);return Hi(P,M)})}(P,S,T);return new ks(M,q)}{if(P.shouldAttach(S.value)){const se=P.retrieve(S.value);if(null!==se){const we=se.route;return Fa(S,we),we}}const M=function(P){return new Li(new ge(P.url),new ge(P.params),new ge(P.queryParams),new ge(P.fragment),new ge(P.data),P.outlet,P.component,P)}(S.value),q=S.children.map(se=>Hi(P,se));return new ks(M,q)}}function Fa(P,S){if(P.value.routeConfig!==S.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(P.children.length!==S.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");S.value._futureSnapshot=P.value;for(let T=0;T<P.children.length;++T)Fa(P.children[T],S.children[T])}function Us(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function Zi(P){return"object"==typeof P&&null!=P&&P.outlets}function Vs(P,S,T,M,q){let se={};return M&&On(M,(we,Ke)=>{se[Ke]=Array.isArray(we)?we.map(Lt=>`${Lt}`):`${we}`}),new Rr(T.root===P?S:oo(T.root,P,S),se,q)}function oo(P,S,T){const M={};return On(P.children,(q,se)=>{M[se]=q===S?T:oo(q,S,T)}),new Wn(P.segments,M)}class Ys{constructor(S,T,M){if(this.isAbsolute=S,this.numberOfDoubleDots=T,this.commands=M,S&&M.length>0&&Us(M[0]))throw new Error("Root segment cannot have matrix parameters");const q=M.find(Zi);if(q&&q!==Qr(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Si{constructor(S,T,M){this.segmentGroup=S,this.processChildren=T,this.index=M}}function ie(P,S,T){if(P||(P=new Wn([],{})),0===P.segments.length&&P.hasChildren())return Pe(P,S,T);const M=function(P,S,T){let M=0,q=S;const se={match:!1,pathIndex:0,commandIndex:0};for(;q<P.segments.length;){if(M>=T.length)return se;const we=P.segments[q],Ke=T[M];if(Zi(Ke))break;const Lt=`${Ke}`,In=M<T.length-1?T[M+1]:null;if(q>0&&void 0===Lt)break;if(Lt&&In&&"object"==typeof In&&void 0===In.outlets){if(!O(Lt,In,we))return se;M+=2}else{if(!O(Lt,{},we))return se;M++}q++}return{match:!0,pathIndex:q,commandIndex:M}}(P,S,T),q=T.slice(M.commandIndex);if(M.match&&M.pathIndex<P.segments.length){const se=new Wn(P.segments.slice(0,M.pathIndex),{});return se.children[Pn]=new Wn(P.segments.slice(M.pathIndex),P.children),Pe(se,0,q)}return M.match&&0===q.length?new Wn(P.segments,{}):M.match&&!P.hasChildren()?$t(P,S,T):M.match?Pe(P,0,q):$t(P,S,T)}function Pe(P,S,T){if(0===T.length)return new Wn(P.segments,{});{const M=function(P){return Zi(P[0])?P[0].outlets:{[Pn]:P}}(T),q={};return On(M,(se,we)=>{"string"==typeof se&&(se=[se]),null!==se&&(q[we]=ie(P.children[we],S,se))}),On(P.children,(se,we)=>{void 0===M[we]&&(q[we]=se)}),new Wn(P.segments,q)}}function $t(P,S,T){const M=P.segments.slice(0,S);let q=0;for(;q<T.length;){const se=T[q];if(Zi(se)){const Lt=L(se.outlets);return new Wn(M,Lt)}if(0===q&&Us(T[0])){M.push(new us(P.segments[S].path,k(T[0]))),q++;continue}const we=Zi(se)?se.outlets[Pn]:`${se}`,Ke=q<T.length-1?T[q+1]:null;we&&Ke&&Us(Ke)?(M.push(new us(we,k(Ke))),q+=2):(M.push(new us(we,{})),q++)}return new Wn(M,{})}function L(P){const S={};return On(P,(T,M)=>{"string"==typeof T&&(T=[T]),null!==T&&(S[M]=$t(new Wn([],{}),0,T))}),S}function k(P){const S={};return On(P,(T,M)=>S[M]=`${T}`),S}function O(P,S,T){return P==T.path&&lr(S,T.parameters)}class dt{constructor(S,T,M,q){this.routeReuseStrategy=S,this.futureState=T,this.currState=M,this.forwardEvent=q}activate(S){const T=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,M,S),fs(this.futureState.root),this.activateChildRoutes(T,M,S)}deactivateChildRoutes(S,T,M){const q=Jo(T);S.children.forEach(se=>{const we=se.value.outlet;this.deactivateRoutes(se,q[we],M),delete q[we]}),On(q,(se,we)=>{this.deactivateRouteAndItsChildren(se,M)})}deactivateRoutes(S,T,M){const q=S.value,se=T?T.value:null;if(q===se)if(q.component){const we=M.getContext(q.outlet);we&&this.deactivateChildRoutes(S,T,we.children)}else this.deactivateChildRoutes(S,T,M);else se&&this.deactivateRouteAndItsChildren(T,M)}deactivateRouteAndItsChildren(S,T){this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,T):this.deactivateRouteAndOutlet(S,T)}detachAndStoreRouteSubtree(S,T){const M=T.getContext(S.value.outlet);if(M&&M.outlet){const q=M.outlet.detach(),se=M.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:q,route:S,contexts:se})}}deactivateRouteAndOutlet(S,T){const M=T.getContext(S.value.outlet),q=M&&S.value.component?M.children:T,se=Jo(S);for(const we of Object.keys(se))this.deactivateRouteAndItsChildren(se[we],q);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(S,T,M){const q=Jo(T);S.children.forEach(se=>{this.activateRoutes(se,q[se.value.outlet],M),this.forwardEvent(new Ii(se.value.snapshot))}),S.children.length&&this.forwardEvent(new ki(S.value.snapshot))}activateRoutes(S,T,M){const q=S.value,se=T?T.value:null;if(fs(q),q===se)if(q.component){const we=M.getOrCreateContext(q.outlet);this.activateChildRoutes(S,T,we.children)}else this.activateChildRoutes(S,T,M);else if(q.component){const we=M.getOrCreateContext(q.outlet);if(this.routeReuseStrategy.shouldAttach(q.snapshot)){const Ke=this.routeReuseStrategy.retrieve(q.snapshot);this.routeReuseStrategy.store(q.snapshot,null),we.children.onOutletReAttached(Ke.contexts),we.attachRef=Ke.componentRef,we.route=Ke.route.value,we.outlet&&we.outlet.attach(Ke.componentRef,Ke.route.value),Ft(Ke.route)}else{const Ke=function(P){for(let S=P.parent;S;S=S.parent){const T=S.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig;if(T&&T.component)return null}return null}(q.snapshot),Lt=Ke?Ke.module.componentFactoryResolver:null;we.attachRef=null,we.route=q,we.resolver=Lt,we.outlet&&we.outlet.activateWith(q,Lt),this.activateChildRoutes(S,null,we.children)}}else this.activateChildRoutes(S,null,M)}}function Ft(P){fs(P.value),P.children.forEach(Ft)}class Xn{constructor(S,T){this.routes=S,this.module=T}}function ii(P){return"function"==typeof P}function Ur(P){return P instanceof Rr}const pe=Symbol("INITIAL_VALUE");function Le(){return ct(P=>function(...P){let S=null,T=null;return(0,J.K)(P[P.length-1])&&(T=P.pop()),"function"==typeof P[P.length-1]&&(S=P.pop()),1===P.length&&(0,K.k)(P[0])&&(P=P[0]),(0,me.n)(P,T).lift(new je(S))}(P.map(S=>S.pipe(xn(1),function(...P){const S=P[P.length-1];return(0,J.K)(S)?(P.pop(),T=>Ze(P,T,S)):T=>Ze(P,T)}(pe)))).pipe(Dt((S,T)=>{let M=!1;return T.reduce((q,se,we)=>q!==pe?q:(se===pe&&(M=!0),M||!1!==se&&we!==T.length-1&&!Ur(se)?q:se),S)},pe),bt(S=>S!==pe),(0,_e.U)(S=>Ur(S)?S:!0===S),xn(1)))}let We=(()=>{class P{}return P.\u0275fac=function(T){return new(T||P)},P.\u0275cmp=v.Xpm({type:P,selectors:[["ng-component"]],decls:1,vars:0,template:function(T,M){1&T&&v._UZ(0,"router-outlet")},directives:function(){return[Mn]},encapsulation:2}),P})();function xt(P,S=""){for(let T=0;T<P.length;T++){const M=P[T];Wt(M,en(S,M))}}function Wt(P,S){P.children&&xt(P.children,S)}function en(P,S){return S?P||S.path?P&&!S.path?`${P}/`:!P&&S.path?S.path:`${P}/${S.path}`:"":P}function bn(P){const S=P.children&&P.children.map(bn),T=S?Object.assign(Object.assign({},P),{children:S}):Object.assign({},P);return!T.component&&(S||T.loadChildren)&&T.outlet&&T.outlet!==Pn&&(T.component=We),T}function zn(P){return P.outlet||Pn}function mr(P,S){const T=P.filter(M=>zn(M)===S);return T.push(...P.filter(M=>zn(M)!==S)),T}const Oi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Mr(P,S,T){var M;if(""===S.path)return"full"===S.pathMatch&&(P.hasChildren()||T.length>0)?Object.assign({},Oi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const se=(S.matcher||ei)(T,P,S);if(!se)return Object.assign({},Oi);const we={};On(se.posParams,(Lt,In)=>{we[In]=Lt.path});const Ke=se.consumed.length>0?Object.assign(Object.assign({},we),se.consumed[se.consumed.length-1].parameters):we;return{matched:!0,consumedSegments:se.consumed,lastChild:se.consumed.length,parameters:Ke,positionalParamSegments:null!==(M=se.posParams)&&void 0!==M?M:{}}}function Fn(P,S,T,M,q="corrected"){if(T.length>0&&function(P,S,T){return T.some(M=>Fr(P,S,M)&&zn(M)!==Pn)}(P,T,M)){const we=new Wn(S,function(P,S,T,M){const q={};q[Pn]=M,M._sourceSegment=P,M._segmentIndexShift=S.length;for(const se of T)if(""===se.path&&zn(se)!==Pn){const we=new Wn([],{});we._sourceSegment=P,we._segmentIndexShift=S.length,q[zn(se)]=we}return q}(P,S,M,new Wn(T,P.children)));return we._sourceSegment=P,we._segmentIndexShift=S.length,{segmentGroup:we,slicedSegments:[]}}if(0===T.length&&function(P,S,T){return T.some(M=>Fr(P,S,M))}(P,T,M)){const we=new Wn(P.segments,function(P,S,T,M,q,se){const we={};for(const Ke of M)if(Fr(P,T,Ke)&&!q[zn(Ke)]){const Lt=new Wn([],{});Lt._sourceSegment=P,Lt._segmentIndexShift="legacy"===se?P.segments.length:S.length,we[zn(Ke)]=Lt}return Object.assign(Object.assign({},q),we)}(P,S,T,M,P.children,q));return we._sourceSegment=P,we._segmentIndexShift=S.length,{segmentGroup:we,slicedSegments:T}}const se=new Wn(P.segments,P.children);return se._sourceSegment=P,se._segmentIndexShift=S.length,{segmentGroup:se,slicedSegments:T}}function Fr(P,S,T){return(!(P.hasChildren()||S.length>0)||"full"!==T.pathMatch)&&""===T.path}function ai(P,S,T,M){return!!(zn(P)===M||M!==Pn&&Fr(S,T,P))&&("**"===P.path||Mr(S,P,T).matched)}function wi(P,S,T){return 0===S.length&&!P.children[T]}class Pr{constructor(S){this.segmentGroup=S||null}}class gs{constructor(S){this.urlTree=S}}function Qs(P){return new Xe.y(S=>S.error(new Pr(P)))}function Js(P){return new Xe.y(S=>S.error(new gs(P)))}function xl(P){return new Xe.y(S=>S.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${P}'`)))}class ns{constructor(S,T,M,q,se){this.configLoader=T,this.urlSerializer=M,this.urlTree=q,this.config=se,this.allowRedirects=!0,this.ngModule=S.get(v.h0i)}apply(){const S=Fn(this.urlTree.root,[],[],this.config).segmentGroup,T=new Wn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,T,Pn).pipe((0,_e.U)(se=>this.createUrlTree(na(se),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Se(se=>{if(se instanceof gs)return this.allowRedirects=!1,this.match(se.urlTree);throw se instanceof Pr?this.noMatchError(se):se}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,Pn).pipe((0,_e.U)(q=>this.createUrlTree(na(q),S.queryParams,S.fragment))).pipe(Se(q=>{throw q instanceof Pr?this.noMatchError(q):q}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,T,M){const q=S.segments.length>0?new Wn([],{[Pn]:S}):S;return new Rr(q,T,M)}expandSegmentGroup(S,T,M,q){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(S,T,M).pipe((0,_e.U)(se=>new Wn([],se))):this.expandSegment(S,M,T,M.segments,q,!0)}expandChildren(S,T,M){const q=[];for(const se of Object.keys(M.children))"primary"===se?q.unshift(se):q.push(se);return(0,ye.D)(q).pipe(dn(se=>{const we=M.children[se],Ke=mr(T,se);return this.expandSegmentGroup(S,Ke,we,se).pipe((0,_e.U)(Lt=>({segment:Lt,outlet:se})))}),Dt((se,we)=>(se[we.outlet]=we.segment,se),{}),function(P,S){const T=arguments.length>=2;return M=>M.pipe(P?bt((q,se)=>P(q,se,M)):kt.y,En(1),T?Je(S):qn(()=>new Qe))}())}expandSegment(S,T,M,q,se,we){return(0,ye.D)(M).pipe(dn(Ke=>this.expandSegmentAgainstRoute(S,T,M,Ke,q,se,we).pipe(Se(In=>{if(In instanceof Pr)return ue(null);throw In}))),Ht(Ke=>!!Ke),Se((Ke,Lt)=>{if(Ke instanceof Qe||"EmptyError"===Ke.name){if(wi(T,q,se))return ue(new Wn([],{}));throw new Pr(T)}throw Ke}))}expandSegmentAgainstRoute(S,T,M,q,se,we,Ke){return ai(q,T,se,we)?void 0===q.redirectTo?this.matchSegmentAgainstRoute(S,T,q,se,we):Ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,T,M,q,se,we):Qs(T):Qs(T)}expandSegmentAgainstRouteUsingRedirect(S,T,M,q,se,we){return"**"===q.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,M,q,we):this.expandRegularSegmentAgainstRouteUsingRedirect(S,T,M,q,se,we)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,T,M,q){const se=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Js(se):this.lineralizeSegments(M,se).pipe((0,Ct.zg)(we=>{const Ke=new Wn(we,{});return this.expandSegment(S,Ke,T,we,q,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,T,M,q,se,we){const{matched:Ke,consumedSegments:Lt,lastChild:In,positionalParamSegments:Or}=Mr(T,q,se);if(!Ke)return Qs(T);const Zn=this.applyRedirectCommands(Lt,q.redirectTo,Or);return q.redirectTo.startsWith("/")?Js(Zn):this.lineralizeSegments(q,Zn).pipe((0,Ct.zg)(Jr=>this.expandSegment(S,T,M,Jr.concat(se.slice(In)),we,!1)))}matchSegmentAgainstRoute(S,T,M,q,se){if("**"===M.path)return M.loadChildren?(M._loadedConfig?ue(M._loadedConfig):this.configLoader.load(S.injector,M)).pipe((0,_e.U)(Jr=>(M._loadedConfig=Jr,new Wn(q,{})))):ue(new Wn(q,{}));const{matched:we,consumedSegments:Ke,lastChild:Lt}=Mr(T,M,q);if(!we)return Qs(T);const In=q.slice(Lt);return this.getChildConfig(S,M,q).pipe((0,Ct.zg)(Zn=>{const Jr=Zn.module,Ar=Zn.routes,{segmentGroup:Tn,slicedSegments:js}=Fn(T,Ke,In,Ar),Ss=new Wn(Tn.segments,Tn.children);if(0===js.length&&Ss.hasChildren())return this.expandChildren(Jr,Ar,Ss).pipe((0,_e.U)(si=>new Wn(Ke,si)));if(0===Ar.length&&0===js.length)return ue(new Wn(Ke,{}));const wa=zn(M)===se;return this.expandSegment(Jr,Ss,Ar,js,wa?Pn:se,!0).pipe((0,_e.U)(Zo=>new Wn(Ke.concat(Zo.segments),Zo.children)))}))}getChildConfig(S,T,M){return T.children?ue(new Xn(T.children,S)):T.loadChildren?void 0!==T._loadedConfig?ue(T._loadedConfig):this.runCanLoadGuards(S.injector,T,M).pipe((0,Ct.zg)(q=>{return q?this.configLoader.load(S.injector,T).pipe((0,_e.U)(se=>(T._loadedConfig=se,se))):(P=T,new Xe.y(S=>S.error(Yi(`Cannot load children because the guard of the route "path: '${P.path}'" returned false`))));var P})):ue(new Xn([],S))}runCanLoadGuards(S,T,M){const q=T.canLoad;return q&&0!==q.length?ue(q.map(we=>{const Ke=S.get(we);let Lt;if((P=Ke)&&ii(P.canLoad))Lt=Ke.canLoad(T,M);else{if(!ii(Ke))throw new Error("Invalid CanLoad guard");Lt=Ke(T,M)}var P;return qt(Lt)})).pipe(Le(),ar(we=>{if(!Ur(we))return;const Ke=Yi(`Redirecting to "${this.urlSerializer.serialize(we)}"`);throw Ke.url=we,Ke}),(0,_e.U)(we=>!0===we)):ue(!0)}lineralizeSegments(S,T){let M=[],q=T.root;for(;;){if(M=M.concat(q.segments),0===q.numberOfChildren)return ue(M);if(q.numberOfChildren>1||!q.children[Pn])return xl(S.redirectTo);q=q.children[Pn]}}applyRedirectCommands(S,T,M){return this.applyRedirectCreatreUrlTree(T,this.urlSerializer.parse(T),S,M)}applyRedirectCreatreUrlTree(S,T,M,q){const se=this.createSegmentGroup(S,T.root,M,q);return new Rr(se,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(S,T){const M={};return On(S,(q,se)=>{if("string"==typeof q&&q.startsWith(":")){const Ke=q.substring(1);M[se]=T[Ke]}else M[se]=q}),M}createSegmentGroup(S,T,M,q){const se=this.createSegments(S,T.segments,M,q);let we={};return On(T.children,(Ke,Lt)=>{we[Lt]=this.createSegmentGroup(S,Ke,M,q)}),new Wn(se,we)}createSegments(S,T,M,q){return T.map(se=>se.path.startsWith(":")?this.findPosParam(S,se,q):this.findOrReturn(se,M))}findPosParam(S,T,M){const q=M[T.path.substring(1)];if(!q)throw new Error(`Cannot redirect to '${S}'. Cannot find '${T.path}'.`);return q}findOrReturn(S,T){let M=0;for(const q of T){if(q.path===S.path)return T.splice(M),q;M++}return S}}function na(P){const S={};for(const M of Object.keys(P.children)){const se=na(P.children[M]);(se.segments.length>0||se.hasChildren())&&(S[M]=se)}return function(P){if(1===P.numberOfChildren&&P.children[Pn]){const S=P.children[Pn];return new Wn(P.segments.concat(S.segments),S.children)}return P}(new Wn(P.segments,S))}class ra{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class ul{constructor(S,T){this.component=S,this.route=T}}function Yl(P,S,T){const M=P._root;return vo(M,S?S._root:null,T,[M.value])}function ia(P,S,T){const M=function(P){if(!P)return null;for(let S=P.parent;S;S=S.parent){const T=S.routeConfig;if(T&&T._loadedConfig)return T._loadedConfig}return null}(S);return(M?M.module.injector:T).get(P)}function vo(P,S,T,M,q={canDeactivateChecks:[],canActivateChecks:[]}){const se=Jo(S);return P.children.forEach(we=>{(function(P,S,T,M,q={canDeactivateChecks:[],canActivateChecks:[]}){const se=P.value,we=S?S.value:null,Ke=T?T.getContext(P.value.outlet):null;if(we&&se.routeConfig===we.routeConfig){const Lt=function(P,S,T){if("function"==typeof T)return T(P,S);switch(T){case"pathParamsChange":return!Br(P.url,S.url);case"pathParamsOrQueryParamsChange":return!Br(P.url,S.url)||!lr(P.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jo(P,S)||!lr(P.queryParams,S.queryParams);case"paramsChange":default:return!jo(P,S)}}(we,se,se.routeConfig.runGuardsAndResolvers);Lt?q.canActivateChecks.push(new ra(M)):(se.data=we.data,se._resolvedData=we._resolvedData),vo(P,S,se.component?Ke?Ke.children:null:T,M,q),Lt&&Ke&&Ke.outlet&&Ke.outlet.isActivated&&q.canDeactivateChecks.push(new ul(Ke.outlet.component,we))}else we&&ao(S,Ke,q),q.canActivateChecks.push(new ra(M)),vo(P,null,se.component?Ke?Ke.children:null:T,M,q)})(we,se[we.value.outlet],T,M.concat([we.value]),q),delete se[we.value.outlet]}),On(se,(we,Ke)=>ao(we,T.getContext(Ke),q)),q}function ao(P,S,T){const M=Jo(P),q=P.value;On(M,(se,we)=>{ao(se,q.component?S?S.children.getContext(we):null:S,T)}),T.canDeactivateChecks.push(new ul(q.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,q))}class Ua{}function pi(P){return new Xe.y(S=>S.error(P))}class gi{constructor(S,T,M,q,se,we){this.rootComponentType=S,this.config=T,this.urlTree=M,this.url=q,this.paramsInheritanceStrategy=se,this.relativeLinkResolution=we}recognize(){const S=Fn(this.urlTree.root,[],[],this.config.filter(we=>void 0===we.redirectTo),this.relativeLinkResolution).segmentGroup,T=this.processSegmentGroup(this.config,S,Pn);if(null===T)return null;const M=new Ns([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pn,this.rootComponentType,null,this.urlTree.root,-1,{}),q=new ks(M,T),se=new Xo(this.url,q);return this.inheritParamsAndData(se._root),se}inheritParamsAndData(S){const T=S.value,M=Fs(T,this.paramsInheritanceStrategy);T.params=Object.freeze(M.params),T.data=Object.freeze(M.data),S.children.forEach(q=>this.inheritParamsAndData(q))}processSegmentGroup(S,T,M){return 0===T.segments.length&&T.hasChildren()?this.processChildren(S,T):this.processSegment(S,T,T.segments,M)}processChildren(S,T){const M=[];for(const se of Object.keys(T.children)){const we=T.children[se],Ke=mr(S,se),Lt=this.processSegmentGroup(Ke,we,se);if(null===Lt)return null;M.push(...Lt)}const q=cl(M);return q.sort((S,T)=>S.value.outlet===Pn?-1:T.value.outlet===Pn?1:S.value.outlet.localeCompare(T.value.outlet)),q}processSegment(S,T,M,q){for(const se of S){const we=this.processSegmentAgainstRoute(se,T,M,q);if(null!==we)return we}return wi(T,M,q)?[]:null}processSegmentAgainstRoute(S,T,M,q){if(S.redirectTo||!ai(S,T,M,q))return null;let se,we=[],Ke=[];if("**"===S.path){const Ar=M.length>0?Qr(M).parameters:{};se=new Ns(M,Ar,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$o(S),zn(S),S.component,S,sa(T),Xs(T)+M.length,bo(S))}else{const Ar=Mr(T,S,M);if(!Ar.matched)return null;we=Ar.consumedSegments,Ke=M.slice(Ar.lastChild),se=new Ns(we,Ar.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$o(S),zn(S),S.component,S,sa(T),Xs(T)+we.length,bo(S))}const Lt=(P=S).children?P.children:P.loadChildren?P._loadedConfig.routes:[],{segmentGroup:In,slicedSegments:Or}=Fn(T,we,Ke,Lt.filter(Ar=>void 0===Ar.redirectTo),this.relativeLinkResolution);var P;if(0===Or.length&&In.hasChildren()){const Ar=this.processChildren(Lt,In);return null===Ar?null:[new ks(se,Ar)]}if(0===Lt.length&&0===Or.length)return[new ks(se,[])];const Zn=zn(S)===q,Jr=this.processSegment(Lt,In,Or,Zn?Pn:q);return null===Jr?null:[new ks(se,Jr)]}}function nu(P){const S=P.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function cl(P){const S=[],T=new Set;for(const M of P){if(!nu(M)){S.push(M);continue}const q=S.find(se=>M.value.routeConfig===se.value.routeConfig);void 0!==q?(q.children.push(...M.children),T.add(q)):S.push(M)}for(const M of T){const q=cl(M.children);S.push(new ks(M.value,q))}return S.filter(M=>!T.has(M))}function sa(P){let S=P;for(;S._sourceSegment;)S=S._sourceSegment;return S}function Xs(P){let S=P,T=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,T+=S._segmentIndexShift?S._segmentIndexShift:0;return T-1}function $o(P){return P.data||{}}function bo(P){return P.resolve||{}}function Gi(P){return ct(S=>{const T=P(S);return T?(0,ye.D)(T).pipe((0,_e.U)(()=>S)):ue(S)})}class wo extends class{shouldDetach(S){return!1}store(S,T){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,T){return S.routeConfig===T.routeConfig}}{}const ru=new v.OlP("ROUTES");class rs{constructor(S,T,M,q){this.loader=S,this.compiler=T,this.onLoadStartListener=M,this.onLoadEndListener=q}load(S,T){if(T._loader$)return T._loader$;this.onLoadStartListener&&this.onLoadStartListener(T);const q=this.loadModuleFactory(T.loadChildren).pipe((0,_e.U)(se=>{this.onLoadEndListener&&this.onLoadEndListener(T);const we=se.create(S);return new Xn(Er(we.injector.get(ru,void 0,v.XFs.Self|v.XFs.Optional)).map(bn),we)}),Se(se=>{throw T._loader$=void 0,se}));return T._loader$=new Ne.c(q,()=>new Ae.xQ).pipe((0,He.x)()),T._loader$}loadModuleFactory(S){return"string"==typeof S?(0,ye.D)(this.loader.load(S)):qt(S()).pipe((0,Ct.zg)(T=>T instanceof v.YKP?ue(T):(0,ye.D)(this.compiler.compileModuleAsync(T))))}}class hl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ba,this.attachRef=null}}class Ba{constructor(){this.contexts=new Map}onChildOutletCreated(S,T){const M=this.getOrCreateContext(S);M.outlet=T,this.contexts.set(S,M)}onChildOutletDestroyed(S){const T=this.getContext(S);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let T=this.getContext(S);return T||(T=new hl,this.contexts.set(S,T)),T}getContext(S){return this.contexts.get(S)||null}}class _a{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,T){return S}}function iu(P){throw P}function oa(P,S,T){return S.parse("/")}function ya(P,S){return ue(null)}const su={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vi=(()=>{class P{constructor(T,M,q,se,we,Ke,Lt,In){this.rootComponentType=T,this.urlSerializer=M,this.rootContexts=q,this.location=se,this.config=In,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ae.xQ,this.errorHandler=iu,this.malformedUriErrorHandler=oa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ya,afterPreactivation:ya},this.urlHandlingStrategy=new _a,this.routeReuseStrategy=new wo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=we.get(v.h0i),this.console=we.get(v.c2e);const Jr=we.get(v.R0b);this.isNgZoneEnabled=Jr instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(In),this.currentUrlTree=new Rr(new Wn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rs(Ke,Lt,Ar=>this.triggerEvent(new Kr(Ar)),Ar=>this.triggerEvent(new bi(Ar))),this.routerState=so(this.currentUrlTree,this.rootComponentType),this.transitions=new ge({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const M=this.events;return T.pipe(bt(q=>0!==q.id),(0,_e.U)(q=>Object.assign(Object.assign({},q),{extractedUrl:this.urlHandlingStrategy.extract(q.rawUrl)})),ct(q=>{let se=!1,we=!1;return ue(q).pipe(ar(Ke=>{this.currentNavigation={id:Ke.id,initialUrl:Ke.currentRawUrl,extractedUrl:Ke.extractedUrl,trigger:Ke.source,extras:Ke.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ct(Ke=>{const Lt=this.browserUrlTree.toString(),In=!this.navigated||Ke.extractedUrl.toString()!==Lt||Lt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||In)&&this.urlHandlingStrategy.shouldProcessUrl(Ke.rawUrl))return lo(Ke.source)&&(this.browserUrlTree=Ke.extractedUrl),ue(Ke).pipe(ct(Zn=>{const Jr=this.transitions.getValue();return M.next(new _t(Zn.id,this.serializeUrl(Zn.extractedUrl),Zn.source,Zn.restoredState)),Jr!==this.transitions.getValue()?Qt:Promise.resolve(Zn)}),function(P,S,T,M){return ct(q=>function(P,S,T,M,q){return new ns(P,S,T,M,q).apply()}(P,S,T,q.extractedUrl,M).pipe((0,_e.U)(se=>Object.assign(Object.assign({},q),{urlAfterRedirects:se}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ar(Zn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Zn.urlAfterRedirects})}),function(P,S,T,M,q){return(0,Ct.zg)(se=>function(P,S,T,M,q="emptyOnly",se="legacy"){try{const we=new gi(P,S,T,M,q,se).recognize();return null===we?pi(new Ua):ue(we)}catch(we){return pi(we)}}(P,S,se.urlAfterRedirects,T(se.urlAfterRedirects),M,q).pipe((0,_e.U)(we=>Object.assign(Object.assign({},se),{targetSnapshot:we}))))}(this.rootComponentType,this.config,Zn=>this.serializeUrl(Zn),this.paramsInheritanceStrategy,this.relativeLinkResolution),ar(Zn=>{"eager"===this.urlUpdateStrategy&&(Zn.extras.skipLocationChange||this.setBrowserUrl(Zn.urlAfterRedirects,Zn),this.browserUrlTree=Zn.urlAfterRedirects);const Jr=new ir(Zn.id,this.serializeUrl(Zn.extractedUrl),this.serializeUrl(Zn.urlAfterRedirects),Zn.targetSnapshot);M.next(Jr)}));if(In&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Jr,extractedUrl:Ar,source:Tn,restoredState:js,extras:Ss}=Ke,wa=new _t(Jr,this.serializeUrl(Ar),Tn,js);M.next(wa);const _s=so(Ar,this.rootComponentType).snapshot;return ue(Object.assign(Object.assign({},Ke),{targetSnapshot:_s,urlAfterRedirects:Ar,extras:Object.assign(Object.assign({},Ss),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ke.rawUrl,this.browserUrlTree=Ke.urlAfterRedirects,Ke.resolve(null),Qt}),Gi(Ke=>{const{targetSnapshot:Lt,id:In,extractedUrl:Or,rawUrl:Zn,extras:{skipLocationChange:Jr,replaceUrl:Ar}}=Ke;return this.hooks.beforePreactivation(Lt,{navigationId:In,appliedUrlTree:Or,rawUrlTree:Zn,skipLocationChange:!!Jr,replaceUrl:!!Ar})}),ar(Ke=>{const Lt=new Sn(Ke.id,this.serializeUrl(Ke.extractedUrl),this.serializeUrl(Ke.urlAfterRedirects),Ke.targetSnapshot);this.triggerEvent(Lt)}),(0,_e.U)(Ke=>Object.assign(Object.assign({},Ke),{guards:Yl(Ke.targetSnapshot,Ke.currentSnapshot,this.rootContexts)})),function(P,S){return(0,Ct.zg)(T=>{const{targetSnapshot:M,currentSnapshot:q,guards:{canActivateChecks:se,canDeactivateChecks:we}}=T;return 0===we.length&&0===se.length?ue(Object.assign(Object.assign({},T),{guardsResult:!0})):function(P,S,T,M){return(0,ye.D)(P).pipe((0,Ct.zg)(q=>function(P,S,T,M,q){const se=S&&S.routeConfig?S.routeConfig.canDeactivate:null;return se&&0!==se.length?ue(se.map(Ke=>{const Lt=ia(Ke,S,q);let In;if(function(P){return P&&ii(P.canDeactivate)}(Lt))In=qt(Lt.canDeactivate(P,S,T,M));else{if(!ii(Lt))throw new Error("Invalid CanDeactivate guard");In=qt(Lt(P,S,T,M))}return In.pipe(Ht())})).pipe(Le()):ue(!0)}(q.component,q.route,T,S,M)),Ht(q=>!0!==q,!0))}(we,M,q,P).pipe((0,Ct.zg)(Ke=>Ke&&function(P){return"boolean"==typeof P}(Ke)?function(P,S,T,M){return(0,ye.D)(S).pipe(dn(q=>Ze(function(P,S){return null!==P&&S&&S(new rr(P)),ue(!0)}(q.route.parent,M),function(P,S){return null!==P&&S&&S(new ji(P)),ue(!0)}(q.route,M),function(P,S,T){const M=S[S.length-1],se=S.slice(0,S.length-1).reverse().map(we=>function(P){const S=P.routeConfig?P.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:P,guards:S}:null}(we)).filter(we=>null!==we).map(we=>ce(()=>ue(we.guards.map(Lt=>{const In=ia(Lt,we.node,T);let Or;if(function(P){return P&&ii(P.canActivateChild)}(In))Or=qt(In.canActivateChild(M,P));else{if(!ii(In))throw new Error("Invalid CanActivateChild guard");Or=qt(In(M,P))}return Or.pipe(Ht())})).pipe(Le())));return ue(se).pipe(Le())}(P,q.path,T),function(P,S,T){const M=S.routeConfig?S.routeConfig.canActivate:null;return M&&0!==M.length?ue(M.map(se=>ce(()=>{const we=ia(se,S,T);let Ke;if(function(P){return P&&ii(P.canActivate)}(we))Ke=qt(we.canActivate(S,P));else{if(!ii(we))throw new Error("Invalid CanActivate guard");Ke=qt(we(S,P))}return Ke.pipe(Ht())}))).pipe(Le()):ue(!0)}(P,q.route,T))),Ht(q=>!0!==q,!0))}(M,se,P,S):ue(Ke)),(0,_e.U)(Ke=>Object.assign(Object.assign({},T),{guardsResult:Ke})))})}(this.ngModule.injector,Ke=>this.triggerEvent(Ke)),ar(Ke=>{if(Ur(Ke.guardsResult)){const In=Yi(`Redirecting to "${this.serializeUrl(Ke.guardsResult)}"`);throw In.url=Ke.guardsResult,In}const Lt=new _r(Ke.id,this.serializeUrl(Ke.extractedUrl),this.serializeUrl(Ke.urlAfterRedirects),Ke.targetSnapshot,!!Ke.guardsResult);this.triggerEvent(Lt)}),bt(Ke=>!!Ke.guardsResult||(this.restoreHistory(Ke),this.cancelNavigationTransition(Ke,""),!1)),Gi(Ke=>{if(Ke.guards.canActivateChecks.length)return ue(Ke).pipe(ar(Lt=>{const In=new Rn(Lt.id,this.serializeUrl(Lt.extractedUrl),this.serializeUrl(Lt.urlAfterRedirects),Lt.targetSnapshot);this.triggerEvent(In)}),ct(Lt=>{let In=!1;return ue(Lt).pipe(function(P,S){return(0,Ct.zg)(T=>{const{targetSnapshot:M,guards:{canActivateChecks:q}}=T;if(!q.length)return ue(T);let se=0;return(0,ye.D)(q).pipe(dn(we=>function(P,S,T,M){return function(P,S,T,M){const q=Object.keys(P);if(0===q.length)return ue({});const se={};return(0,ye.D)(q).pipe((0,Ct.zg)(we=>function(P,S,T,M){const q=ia(P,S,M);return qt(q.resolve?q.resolve(S,T):q(S,T))}(P[we],S,T,M).pipe(ar(Ke=>{se[we]=Ke}))),En(1),(0,Ct.zg)(()=>Object.keys(se).length===q.length?ue(se):Qt))}(P._resolve,P,S,M).pipe((0,_e.U)(se=>(P._resolvedData=se,P.data=Object.assign(Object.assign({},P.data),Fs(P,T).resolve),null)))}(we.route,M,P,S)),ar(()=>se++),En(1),(0,Ct.zg)(we=>se===q.length?ue(T):Qt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ar({next:()=>In=!0,complete:()=>{In||(this.restoreHistory(Lt),this.cancelNavigationTransition(Lt,"At least one route resolver didn't emit any value."))}}))}),ar(Lt=>{const In=new qr(Lt.id,this.serializeUrl(Lt.extractedUrl),this.serializeUrl(Lt.urlAfterRedirects),Lt.targetSnapshot);this.triggerEvent(In)}))}),Gi(Ke=>{const{targetSnapshot:Lt,id:In,extractedUrl:Or,rawUrl:Zn,extras:{skipLocationChange:Jr,replaceUrl:Ar}}=Ke;return this.hooks.afterPreactivation(Lt,{navigationId:In,appliedUrlTree:Or,rawUrlTree:Zn,skipLocationChange:!!Jr,replaceUrl:!!Ar})}),(0,_e.U)(Ke=>{const Lt=function(P,S,T){const M=Hi(P,S._root,T?T._root:void 0);return new hs(M,S)}(this.routeReuseStrategy,Ke.targetSnapshot,Ke.currentRouterState);return Object.assign(Object.assign({},Ke),{targetRouterState:Lt})}),ar(Ke=>{this.currentUrlTree=Ke.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ke.urlAfterRedirects,Ke.rawUrl),this.routerState=Ke.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ke.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ke),this.browserUrlTree=Ke.urlAfterRedirects)}),((P,S,T)=>(0,_e.U)(M=>(new dt(S,M.targetRouterState,M.currentRouterState,T).activate(P),M)))(this.rootContexts,this.routeReuseStrategy,Ke=>this.triggerEvent(Ke)),ar({next(){se=!0},complete(){se=!0}}),function(P){return S=>S.lift(new Ue(P))}(()=>{if(!se&&!we){const Ke=`Navigation ID ${q.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(q),this.cancelNavigationTransition(q,Ke)):this.cancelNavigationTransition(q,Ke)}this.currentNavigation=null}),Se(Ke=>{if(we=!0,function(P){return P&&P[Fi]}(Ke)){const Lt=Ur(Ke.url);Lt||(this.navigated=!0,this.restoreHistory(q,!0));const In=new Vn(q.id,this.serializeUrl(q.extractedUrl),Ke.message);M.next(In),Lt?setTimeout(()=>{const Or=this.urlHandlingStrategy.merge(Ke.url,this.rawUrlTree),Zn={skipLocationChange:q.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lo(q.source)};this.scheduleNavigation(Or,"imperative",null,Zn,{resolve:q.resolve,reject:q.reject,promise:q.promise})},0):q.resolve(!1)}else{this.restoreHistory(q,!0);const Lt=new vr(q.id,this.serializeUrl(q.extractedUrl),Ke);M.next(Lt);try{q.resolve(this.errorHandler(Ke))}catch(In){q.reject(In)}}return Qt}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}getTransition(){const T=this.transitions.value;return T.urlAfterRedirects=this.browserUrlTree,T}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const M=this.extractLocationChangeInfoFromEvent(T);this.shouldScheduleNavigation(this.lastLocationChangeInfo,M)&&setTimeout(()=>{const{source:q,state:se,urlTree:we}=M,Ke={replaceUrl:!0};if(se){const Lt=Object.assign({},se);delete Lt.navigationId,delete Lt.\u0275routerPageId,0!==Object.keys(Lt).length&&(Ke.state=Lt)}this.scheduleNavigation(we,q,se,Ke)},0),this.lastLocationChangeInfo=M}))}extractLocationChangeInfoFromEvent(T){var M;return{source:"popstate"===T.type?"popstate":"hashchange",urlTree:this.parseUrl(T.url),state:(null===(M=T.state)||void 0===M?void 0:M.navigationId)?T.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(T,M){if(!T)return!0;const q=M.urlTree.toString()===T.urlTree.toString();return M.transitionId!==T.transitionId||!q||!("hashchange"===M.source&&"popstate"===T.source||"popstate"===M.source&&"hashchange"===T.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){xt(T),this.config=T.map(bn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,M={}){const{relativeTo:q,queryParams:se,fragment:we,queryParamsHandling:Ke,preserveFragment:Lt}=M,In=q||this.routerState.root,Or=Lt?this.currentUrlTree.fragment:we;let Zn=null;switch(Ke){case"merge":Zn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),se);break;case"preserve":Zn=this.currentUrlTree.queryParams;break;default:Zn=se||null}return null!==Zn&&(Zn=this.removeEmptyProps(Zn)),function(P,S,T,M,q){if(0===T.length)return Vs(S.root,S.root,S,M,q);const se=function(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new Ys(!0,0,P);let S=0,T=!1;const M=P.reduce((q,se,we)=>{if("object"==typeof se&&null!=se){if(se.outlets){const Ke={};return On(se.outlets,(Lt,In)=>{Ke[In]="string"==typeof Lt?Lt.split("/"):Lt}),[...q,{outlets:Ke}]}if(se.segmentPath)return[...q,se.segmentPath]}return"string"!=typeof se?[...q,se]:0===we?(se.split("/").forEach((Ke,Lt)=>{0==Lt&&"."===Ke||(0==Lt&&""===Ke?T=!0:".."===Ke?S++:""!=Ke&&q.push(Ke))}),q):[...q,se]},[]);return new Ys(T,S,M)}(T);if(se.toRoot())return Vs(S.root,new Wn([],{}),S,M,q);const we=function(P,S,T){if(P.isAbsolute)return new Si(S.root,!0,0);if(-1===T.snapshot._lastPathIndex){const se=T.snapshot._urlSegment;return new Si(se,se===S.root,0)}const M=Us(P.commands[0])?0:1;return function(P,S,T){let M=P,q=S,se=T;for(;se>q;){if(se-=q,M=M.parent,!M)throw new Error("Invalid number of '../'");q=M.segments.length}return new Si(M,!1,q-se)}(T.snapshot._urlSegment,T.snapshot._lastPathIndex+M,P.numberOfDoubleDots)}(se,S,P),Ke=we.processChildren?Pe(we.segmentGroup,we.index,se.commands):ie(we.segmentGroup,we.index,se.commands);return Vs(we.segmentGroup,Ke,S,M,q)}(In,this.currentUrlTree,T,Zn,null!=Or?Or:null)}navigateByUrl(T,M={skipLocationChange:!1}){const q=Ur(T)?T:this.parseUrl(T),se=this.urlHandlingStrategy.merge(q,this.rawUrlTree);return this.scheduleNavigation(se,"imperative",null,M)}navigate(T,M={skipLocationChange:!1}){return function(P){for(let S=0;S<P.length;S++){const T=P[S];if(null==T)throw new Error(`The requested path contains ${T} segment at index ${S}`)}}(T),this.navigateByUrl(this.createUrlTree(T,M),M)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let M;try{M=this.urlSerializer.parse(T)}catch(q){M=this.malformedUriErrorHandler(q,this.urlSerializer,T)}return M}isActive(T,M){let q;if(q=!0===M?Object.assign({},su):!1===M?Object.assign({},mi):M,Ur(T))return ze(this.currentUrlTree,T,q);const se=this.parseUrl(T);return ze(this.currentUrlTree,se,q)}removeEmptyProps(T){return Object.keys(T).reduce((M,q)=>{const se=T[q];return null!=se&&(M[q]=se),M},{})}processNavigations(){this.navigations.subscribe(T=>{this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new rn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,M,q,se,we){var Ke,Lt;if(this.disposed)return Promise.resolve(!1);const In=this.getTransition(),Or=lo(M)&&In&&!lo(In.source),Ar=(this.lastSuccessfulId===In.id||this.currentNavigation?In.rawUrl:In.urlAfterRedirects).toString()===T.toString();if(Or&&Ar)return Promise.resolve(!0);let Tn,js,Ss;we?(Tn=we.resolve,js=we.reject,Ss=we.promise):Ss=new Promise((Zo,si)=>{Tn=Zo,js=si});const wa=++this.navigationId;let _s;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(q=this.location.getState()),_s=q&&q.\u0275routerPageId?q.\u0275routerPageId:se.replaceUrl||se.skipLocationChange?null!==(Ke=this.browserPageId)&&void 0!==Ke?Ke:0:(null!==(Lt=this.browserPageId)&&void 0!==Lt?Lt:0)+1):_s=0,this.setTransition({id:wa,targetPageId:_s,source:M,restoredState:q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:se,resolve:Tn,reject:js,promise:Ss,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ss.catch(Zo=>Promise.reject(Zo))}setBrowserUrl(T,M){const q=this.urlSerializer.serialize(T),se=Object.assign(Object.assign({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo(q)||M.extras.replaceUrl?this.location.replaceState(q,"",se):this.location.go(q,"",se)}restoreHistory(T,M=!1){var q,se;if("computed"===this.canceledNavigationResolution){const we=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)||0===we?this.currentUrlTree===(null===(se=this.currentNavigation)||void 0===se?void 0:se.finalUrl)&&0===we&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(we)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,M){const q=new Vn(T.id,this.serializeUrl(T.extractedUrl),M);this.triggerEvent(q),T.resolve(!1)}generateNgRouterState(T,M){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:M}:{navigationId:T}}}return P.\u0275fac=function(T){return new(T||P)(v.LFG(v.DyG),v.LFG(yt),v.LFG(Ba),v.LFG(f.Ye),v.LFG(v.zs3),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(void 0))},P.\u0275prov=v.Yz7({token:P,factory:P.\u0275fac}),P})();function lo(P){return"imperative"!==P}let Mn=(()=>{class P{constructor(T,M,q,se,we){this.parentContexts=T,this.location=M,this.resolver=q,this.changeDetector=we,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.name=se||Pn,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,T}attach(T,M){this.activated=T,this._activatedRoute=M,this.location.insert(T.hostView)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;const we=(M=M||this.resolver).resolveComponentFactory(T._futureSnapshot.routeConfig.component),Ke=this.parentContexts.getOrCreateContext(this.name).children,Lt=new $n(T,Ke,this.location.injector);this.activated=this.location.createComponent(we,this.location.length,Lt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(T){return new(T||P)(v.Y36(Ba),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},P.\u0275dir=v.lG2({type:P,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),P})();class $n{constructor(S,T,M){this.route=S,this.childContexts=T,this.parent=M}get(S,T){return S===Li?this.route:S===Ba?this.childContexts:this.parent.get(S,T)}}class Ho{}class St{preload(S,T){return ue(null)}}let zt=(()=>{class P{constructor(T,M,q,se,we){this.router=T,this.injector=se,this.preloadingStrategy=we,this.loader=new rs(M,q,In=>T.triggerEvent(new Kr(In)),In=>T.triggerEvent(new bi(In)))}setUpPreloading(){this.subscription=this.router.events.pipe(bt(T=>T instanceof rn),dn(()=>this.preload())).subscribe(()=>{})}preload(){const T=this.injector.get(v.h0i);return this.processRoutes(T,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,M){const q=[];for(const se of M)if(se.loadChildren&&!se.canLoad&&se._loadedConfig){const we=se._loadedConfig;q.push(this.processRoutes(we.module,we.routes))}else se.loadChildren&&!se.canLoad?q.push(this.preloadConfig(T,se)):se.children&&q.push(this.processRoutes(T,se.children));return(0,ye.D)(q).pipe((0,it.J)(),(0,_e.U)(se=>{}))}preloadConfig(T,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?ue(M._loadedConfig):this.loader.load(T.injector,M)).pipe((0,Ct.zg)(se=>(M._loadedConfig=se,this.processRoutes(se.module,se.routes)))))}}return P.\u0275fac=function(T){return new(T||P)(v.LFG(Vi),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(Ho))},P.\u0275prov=v.Yz7({token:P,factory:P.\u0275fac}),P})(),_i=(()=>{class P{constructor(T,M,q={}){this.router=T,this.viewportScroller=M,this.options=q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},q.scrollPositionRestoration=q.scrollPositionRestoration||"disabled",q.anchorScrolling=q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof _t?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof rn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof di&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,M){this.router.triggerEvent(new di(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return P.\u0275fac=function(T){return new(T||P)(v.LFG(Vi),v.LFG(f.EM),v.LFG(void 0))},P.\u0275prov=v.Yz7({token:P,factory:P.\u0275fac}),P})();const aa=new v.OlP("ROUTER_CONFIGURATION"),va=new v.OlP("ROUTER_FORROOT_GUARD"),bc=[f.Ye,{provide:yt,useClass:At},{provide:Vi,useFactory:function(P,S,T,M,q,se,we,Ke={},Lt,In){const Or=new Vi(null,P,S,T,M,q,se,Er(we));return Lt&&(Or.urlHandlingStrategy=Lt),In&&(Or.routeReuseStrategy=In),function(P,S){P.errorHandler&&(S.errorHandler=P.errorHandler),P.malformedUriErrorHandler&&(S.malformedUriErrorHandler=P.malformedUriErrorHandler),P.onSameUrlNavigation&&(S.onSameUrlNavigation=P.onSameUrlNavigation),P.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=P.paramsInheritanceStrategy),P.relativeLinkResolution&&(S.relativeLinkResolution=P.relativeLinkResolution),P.urlUpdateStrategy&&(S.urlUpdateStrategy=P.urlUpdateStrategy)}(Ke,Or),Ke.enableTracing&&Or.events.subscribe(Zn=>{var Jr,Ar;null===(Jr=console.group)||void 0===Jr||Jr.call(console,`Router Event: ${Zn.constructor.name}`),console.log(Zn.toString()),console.log(Zn),null===(Ar=console.groupEnd)||void 0===Ar||Ar.call(console)}),Or},deps:[yt,Ba,f.Ye,v.zs3,v.v3s,v.Sil,ru,aa,[class{},new v.FiY],[class{},new v.FiY]]},Ba,{provide:Li,useFactory:function(P){return P.routerState.root},deps:[Vi]},{provide:v.v3s,useClass:v.EAV},zt,St,class{preload(S,T){return T().pipe(Se(()=>ue(null)))}},{provide:aa,useValue:{enableTracing:!1}}];function pl(){return new v.PXZ("Router",Vi)}let ss=(()=>{class P{constructor(T,M){}static forRoot(T,M){return{ngModule:P,providers:[bc,Ea(T),{provide:va,useFactory:gr,deps:[[Vi,new v.FiY,new v.tp0]]},{provide:aa,useValue:M||{}},{provide:f.S$,useFactory:Ha,deps:[f.lw,[new v.tBr(f.mr),new v.FiY],aa]},{provide:_i,useFactory:$a,deps:[Vi,f.EM,aa]},{provide:Ho,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:St},{provide:v.PXZ,multi:!0,useFactory:pl},[ba,{provide:v.ip1,multi:!0,useFactory:Co,deps:[ba]},{provide:Po,useFactory:ml,deps:[ba]},{provide:v.tb,multi:!0,useExisting:Po}]]}}static forChild(T){return{ngModule:P,providers:[Ea(T)]}}}return P.\u0275fac=function(T){return new(T||P)(v.LFG(va,8),v.LFG(Vi,8))},P.\u0275mod=v.oAB({type:P}),P.\u0275inj=v.cJS({}),P})();function $a(P,S,T){return T.scrollOffset&&S.setOffset(T.scrollOffset),new _i(P,S,T)}function Ha(P,S,T={}){return T.useHash?new f.Do(P,S):new f.b0(P,S)}function gr(P){return"guarded"}function Ea(P){return[{provide:v.deG,multi:!0,useValue:P},{provide:ru,multi:!0,useValue:P}]}let ba=(()=>{class P{constructor(T){this.injector=T,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ae.xQ}appInitializer(){return this.injector.get(f.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const q=new Promise(Ke=>M=Ke),se=this.injector.get(Vi),we=this.injector.get(aa);return"disabled"===we.initialNavigation?(se.setUpLocationChangeListener(),M(!0)):"enabled"===we.initialNavigation||"enabledBlocking"===we.initialNavigation?(se.hooks.afterPreactivation=()=>this.initNavigation?ue(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),se.initialNavigation()):M(!0),q})}bootstrapListener(T){const M=this.injector.get(aa),q=this.injector.get(zt),se=this.injector.get(_i),we=this.injector.get(Vi),Ke=this.injector.get(v.z2F);T===Ke.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&we.initialNavigation(),q.setUpPreloading(),se.init(),we.resetRootComponentType(Ke.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return P.\u0275fac=function(T){return new(T||P)(v.LFG(v.zs3))},P.\u0275prov=v.Yz7({token:P,factory:P.\u0275fac}),P})();function Co(P){return P.appInitializer.bind(P)}function ml(P){return P.bootstrapListener.bind(P)}const Po=new v.OlP("Router Initializer")},4486:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Z:()=>je});var f=N(3854),v=N(6034),J=N(5452),me=N(5601);class le{constructor(Ye,Qe){this._delegate=Ye,this.firebase=Qe,(0,J._addComponent)(Ye,new v.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(Ye,Qe=J._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(Ye);return!nt.isInitialized()&&"EXPLICIT"===(null===(it=nt.getComponent())||void 0===it?void 0:it.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:Qe})}_removeServiceInstance(Ye,Qe=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(Qe)}_addComponent(Ye){(0,J._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,J._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ge(){const Oe=function(Oe){const Ye={},Qe={__esModule:!0,initializeApp:function(De,Ge={}){const ce=J.initializeApp(De,Ge);if((0,f.r3)(Ye,ce.name))return Ye[ce.name];const Ne=new Oe(ce,Qe);return Ye[ce.name]=Ne,Ne},app:nt,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function(De){const Ge=De.name,ce=Ge.replace("-compat","");if(J._registerComponent(De)&&"PUBLIC"===De.type){const Ne=(Re=nt())=>{if("function"!=typeof Re[ce])throw Ae.create("invalid-app-argument",{appName:Ge});return Re[ce]()};void 0!==De.serviceProps&&(0,f.ZB)(Ne,De.serviceProps),Qe[ce]=Ne,Oe.prototype[ce]=function(...Re){return this._getService.bind(this,Ge).apply(this,De.multipleInstances?Re:[])}}return"PUBLIC"===De.type?Qe[ce]:null},removeApp:function(De){delete Ye[De]},useAsService:function(De,Ge){return"serverAuth"===Ge?null:Ge},modularAPIs:J}};function nt(De){if(!(0,f.r3)(Ye,De=De||J._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:De});return Ye[De]}return Qe.default=Qe,Object.defineProperty(Qe,"apps",{get:function(){return Object.keys(Ye).map(De=>Ye[De])}}),nt.App=Oe,Qe}(le);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function(Qe){(0,f.ZB)(Oe,Qe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Oe}(),Z=new me.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const je=K;(0,J.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(Vt,Ie,N)=>{"use strict";N.r(Ie),N.d(Ie,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>et,_DEFAULT_ENTRY_NAME:()=>Bn,_addComponent:()=>vn,_addOrOverwriteComponent:()=>Et,_apps:()=>xn,_clearComponents:()=>bt,_components:()=>pr,_getProvider:()=>at,_registerComponent:()=>Dt,_removeServiceInstance:()=>Ve,deleteApp:()=>En,getApp:()=>Ct,getApps:()=>dn,initializeApp:()=>It,onLog:()=>qn,registerVersion:()=>gn,setLogLevel:()=>Tt});var f=N(8239),v=N(6034),J=N(5601),me=N(3854);class le{constructor(Je){this.container=Je}getPlatformInfoString(){return this.container.getProviders().map(Kt=>{if(function(mt){const Je=mt.getComponent();return"VERSION"===(null==Je?void 0:Je.type)}(Kt)){const cn=Kt.getImmediate();return`${cn.library}/${cn.version}`}return null}).filter(Kt=>Kt).join(" ")}}const Ae="@firebase/app",ge=new J.Yd("@firebase/app"),Bn="[DEFAULT]",Zt={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xn=new Map,pr=new Map;function vn(mt,Je){try{mt.container.addComponent(Je)}catch(Kt){ge.debug(`Component ${Je.name} failed to register with FirebaseApp ${mt.name}`,Kt)}}function Et(mt,Je){mt.container.addOrOverwriteComponent(Je)}function Dt(mt){const Je=mt.name;if(pr.has(Je))return ge.debug(`There were multiple attempts to register component ${Je}.`),!1;pr.set(Je,mt);for(const Kt of xn.values())vn(Kt,mt);return!0}function at(mt,Je){return mt.container.getProvider(Je)}function Ve(mt,Je,Kt=Bn){at(mt,Je).clearInstance(Kt)}function bt(){pr.clear()}const rt=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Se{constructor(Je,Kt,cn){this._isDeleted=!1,this._options=Object.assign({},Je),this._config=Object.assign({},Kt),this._name=Kt.name,this._automaticDataCollectionEnabled=Kt.automaticDataCollectionEnabled,this._container=cn,this.container.addComponent(new v.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this.checkDestroyed(),this._automaticDataCollectionEnabled=Je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Je){this._isDeleted=Je}checkDestroyed(){if(this.isDeleted)throw rt.create("app-deleted",{appName:this._name})}}const et="9.1.3";function It(mt,Je={}){"object"!=typeof Je&&(Je={name:Je});const Kt=Object.assign({name:Bn,automaticDataCollectionEnabled:!1},Je),cn=Kt.name;if("string"!=typeof cn||!cn)throw rt.create("bad-app-name",{appName:String(cn)});const kt=xn.get(cn);if(kt){if((0,me.vZ)(mt,kt.options)&&(0,me.vZ)(Kt,kt.config))return kt;throw rt.create("duplicate-app",{appName:cn})}const ln=new v.H0(cn);for(const re of pr.values())ln.addComponent(re);const Ht=new Se(mt,Kt,ln);return xn.set(cn,Ht),Ht}function Ct(mt=Bn){const Je=xn.get(mt);if(!Je)throw rt.create("no-app",{appName:mt});return Je}function dn(){return Array.from(xn.values())}function En(mt){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(mt){const Je=mt.name;xn.has(Je)&&(xn.delete(Je),yield Promise.all(mt.container.getProviders().map(Kt=>Kt.delete())),mt.isDeleted=!0)})).apply(this,arguments)}function gn(mt,Je,Kt){var cn;let kt=null!==(cn=Zt[mt])&&void 0!==cn?cn:mt;Kt&&(kt+=`-${Kt}`);const ln=kt.match(/\s|\//),Ht=Je.match(/\s|\//);if(ln||Ht){const re=[`Unable to register library "${kt}" with version "${Je}":`];return ln&&re.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),ln&&Ht&&re.push("and"),Ht&&re.push(`version name "${Je}" contains illegal characters (whitespace or "/")`),void ge.warn(re.join(" "))}Dt(new v.wA(`${kt}-version`,()=>({library:kt,version:Je}),"VERSION"))}function qn(mt,Je){if(null!==mt&&"function"!=typeof mt)throw rt.create("invalid-log-argument");(0,J.Am)(mt,Je)}function Tt(mt){(0,J.Ub)(mt)}Dt(new v.wA("platform-logger",Je=>new le(Je),"PRIVATE")),gn(Ae,"0.7.4",""),gn(Ae,"0.7.4","esm2017"),gn("fire-js","")},6034:(Vt,Ie,N)=>{"use strict";N.d(Ie,{wA:()=>J,H0:()=>Me,zt:()=>le});var f=N(4762),v=N(3854),J=function(){function ge(K,Z,te){this.name=K,this.instanceFactory=Z,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ge.prototype.setInstantiationMode=function(K){return this.instantiationMode=K,this},ge.prototype.setMultipleInstances=function(K){return this.multipleInstances=K,this},ge.prototype.setServiceProps=function(K){return this.serviceProps=K,this},ge.prototype.setInstanceCreatedCallback=function(K){return this.onInstanceCreated=K,this},ge}(),me="[DEFAULT]",le=function(){function ge(K,Z){this.name=K,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ge.prototype.get=function(K){var Z=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Z)){var te=new v.BH;if(this.instancesDeferred.set(Z,te),this.isInitialized(Z)||this.shouldAutoInitialize())try{var de=this.getOrInitializeService({instanceIdentifier:Z});de&&te.resolve(de)}catch(be){}}return this.instancesDeferred.get(Z).promise},ge.prototype.getImmediate=function(K){var Z,te=this.normalizeInstanceIdentifier(null==K?void 0:K.identifier),de=null!==(Z=null==K?void 0:K.optional)&&void 0!==Z&&Z;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(de)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(be){if(de)return null;throw be}},ge.prototype.getComponent=function(){return this.component},ge.prototype.setComponent=function(K){var Z,te;if(K.name!==this.name)throw Error("Mismatching Component "+K.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=K,this.shouldAutoInitialize()){if(function(ge){return"EAGER"===ge.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:me})}catch(nt){}try{for(var de=(0,f.XA)(this.instancesDeferred.entries()),be=de.next();!be.done;be=de.next()){var je=(0,f.CR)(be.value,2),Ye=je[1],Qe=this.normalizeInstanceIdentifier(je[0]);try{var it=this.getOrInitializeService({instanceIdentifier:Qe});Ye.resolve(it)}catch(nt){}}}catch(nt){Z={error:nt}}finally{try{be&&!be.done&&(te=de.return)&&te.call(de)}finally{if(Z)throw Z.error}}}},ge.prototype.clearInstance=function(K){void 0===K&&(K=me),this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)},ge.prototype.delete=function(){return(0,f.mG)(this,void 0,void 0,function(){var K;return(0,f.Jh)(this,function(Z){switch(Z.label){case 0:return K=Array.from(this.instances.values()),[4,Promise.all((0,f.ev)((0,f.ev)([],(0,f.CR)(K.filter(function(te){return"INTERNAL"in te}).map(function(te){return te.INTERNAL.delete()}))),(0,f.CR)(K.filter(function(te){return"_delete"in te}).map(function(te){return te._delete()}))))];case 1:return Z.sent(),[2]}})})},ge.prototype.isComponentSet=function(){return null!=this.component},ge.prototype.isInitialized=function(K){return void 0===K&&(K=me),this.instances.has(K)},ge.prototype.getOptions=function(K){return void 0===K&&(K=me),this.instancesOptions.get(K)||{}},ge.prototype.initialize=function(K){var Z,te;void 0===K&&(K={});var de=K.options,be=void 0===de?{}:de,je=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(je))throw Error(this.name+"("+je+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Oe=this.getOrInitializeService({instanceIdentifier:je,options:be});try{for(var Ye=(0,f.XA)(this.instancesDeferred.entries()),Qe=Ye.next();!Qe.done;Qe=Ye.next()){var it=(0,f.CR)(Qe.value,2),Ze=it[1];je===this.normalizeInstanceIdentifier(it[0])&&Ze.resolve(Oe)}}catch(ye){Z={error:ye}}finally{try{Qe&&!Qe.done&&(te=Ye.return)&&te.call(Ye)}finally{if(Z)throw Z.error}}return Oe},ge.prototype.onInit=function(K,Z){var te,de=this.normalizeInstanceIdentifier(Z),be=null!==(te=this.onInitCallbacks.get(de))&&void 0!==te?te:new Set;be.add(K),this.onInitCallbacks.set(de,be);var je=this.instances.get(de);return je&&K(je,de),function(){be.delete(K)}},ge.prototype.invokeOnInitCallbacks=function(K,Z){var te,de,be=this.onInitCallbacks.get(Z);if(be)try{for(var je=(0,f.XA)(be),Oe=je.next();!Oe.done;Oe=je.next()){var Ye=Oe.value;try{Ye(K,Z)}catch(Qe){}}}catch(Qe){te={error:Qe}}finally{try{Oe&&!Oe.done&&(de=je.return)&&de.call(je)}finally{if(te)throw te.error}}},ge.prototype.getOrInitializeService=function(K){var Z=K.instanceIdentifier,te=K.options,de=void 0===te?{}:te,be=this.instances.get(Z);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:ue(Z),options:de}),this.instances.set(Z,be),this.instancesOptions.set(Z,de),this.invokeOnInitCallbacks(be,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,be)}catch(je){}return be||null},ge.prototype.normalizeInstanceIdentifier=function(K){return void 0===K&&(K=me),this.component?this.component.multipleInstances?K:me:K},ge.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ge}();function ue(ge){return ge===me?void 0:ge}var Me=function(){function ge(K){this.name=K,this.providers=new Map}return ge.prototype.addComponent=function(K){var Z=this.getProvider(K.name);if(Z.isComponentSet())throw new Error("Component "+K.name+" has already been registered with "+this.name);Z.setComponent(K)},ge.prototype.addOrOverwriteComponent=function(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)},ge.prototype.getProvider=function(K){if(this.providers.has(K))return this.providers.get(K);var Z=new le(K,this);return this.providers.set(K,Z),Z},ge.prototype.getProviders=function(){return Array.from(this.providers.values())},ge}()},5601:(Vt,Ie,N)=>{"use strict";N.d(Ie,{in:()=>v,Yd:()=>Ae,Ub:()=>Me,Am:()=>ge});const f=[];var v=(()=>{return(K=v||(v={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",v;var K})();const J={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},me=v.INFO,le={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},ue=(K,Z,...te)=>{if(Z<K.logLevel)return;const de=(new Date).toISOString(),be=le[Z];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[be](`[${de}]  ${K.name}:`,...te)};class Ae{constructor(Z){this.name=Z,this._logLevel=me,this._logHandler=ue,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in v))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?J[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...Z),this._logHandler(this,v.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...Z),this._logHandler(this,v.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,v.INFO,...Z),this._logHandler(this,v.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,v.WARN,...Z),this._logHandler(this,v.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...Z),this._logHandler(this,v.ERROR,...Z)}}function Me(K){f.forEach(Z=>{Z.setLogLevel(K)})}function ge(K,Z){for(const te of f){let de=null;Z&&Z.level&&(de=J[Z.level]),te.userLogHandler=null===K?null:(be,je,...Oe)=>{const Ye=Oe.map(Qe=>{if(null==Qe)return null;if("string"==typeof Qe)return Qe;if("number"==typeof Qe||"boolean"==typeof Qe)return Qe.toString();if(Qe instanceof Error)return Qe.message;try{return JSON.stringify(Qe)}catch(it){return null}}).filter(Qe=>Qe).join(" ");je>=(null!=de?de:be.logLevel)&&K({level:v[je].toLowerCase(),message:Ye,args:Oe,type:be.name})}}}},3854:(Vt,Ie,N)=>{"use strict";N.d(Ie,{BH:()=>de,LL:()=>Te,ZR:()=>ct,gQ:()=>dn,zI:()=>Ne,hu:()=>v,g5:()=>J,US:()=>ue,tV:()=>ge,h$:()=>Ae,$s:()=>Sr,r3:()=>at,Sg:()=>be,ne:()=>En,p$:()=>K,vZ:()=>rt,ZB:()=>Z,gK:()=>mt,pd:()=>Ct,m9:()=>Gr,z$:()=>je,GJ:()=>Dt,jU:()=>Qe,ru:()=>it,d:()=>Ze,xb:()=>bt,w1:()=>Xe,hl:()=>Ge,uI:()=>Oe,UG:()=>Ye,Yr:()=>Qt,b$:()=>nt,G6:()=>De,Mn:()=>ye,w9:()=>Et,cI:()=>Bn,UI:()=>ke,xO:()=>et,zd:()=>It,DV:()=>Ve,ug:()=>ln,dS:()=>kt,Pz:()=>Zt,Dv:()=>on,Wj:()=>Kt,lb:()=>cn,eu:()=>ce});const v=function(Ue,qe){if(!Ue)throw J(qe)},J=function(Ue){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ue)},me=function(Ue){const qe=[];let He=0;for(let Nt=0;Nt<Ue.length;Nt++){let _t=Ue.charCodeAt(Nt);_t<128?qe[He++]=_t:_t<2048?(qe[He++]=_t>>6|192,qe[He++]=63&_t|128):55296==(64512&_t)&&Nt+1<Ue.length&&56320==(64512&Ue.charCodeAt(Nt+1))?(_t=65536+((1023&_t)<<10)+(1023&Ue.charCodeAt(++Nt)),qe[He++]=_t>>18|240,qe[He++]=_t>>12&63|128,qe[He++]=_t>>6&63|128,qe[He++]=63&_t|128):(qe[He++]=_t>>12|224,qe[He++]=_t>>6&63|128,qe[He++]=63&_t|128)}return qe},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ue,qe){if(!Array.isArray(Ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=qe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Nt=[];for(let _t=0;_t<Ue.length;_t+=3){const rn=Ue[_t],Vn=_t+1<Ue.length,vr=Vn?Ue[_t+1]:0,ir=_t+2<Ue.length,Sn=ir?Ue[_t+2]:0;let qr=(15&vr)<<2|Sn>>6,Kr=63&Sn;ir||(Kr=64,Vn||(qr=64)),Nt.push(He[rn>>2],He[(3&rn)<<4|vr>>4],He[qr],He[Kr])}return Nt.join("")},encodeString(Ue,qe){return this.HAS_NATIVE_SUPPORT&&!qe?btoa(Ue):this.encodeByteArray(me(Ue),qe)},decodeString(Ue,qe){return this.HAS_NATIVE_SUPPORT&&!qe?atob(Ue):function(Ue){const qe=[];let He=0,Nt=0;for(;He<Ue.length;){const _t=Ue[He++];if(_t<128)qe[Nt++]=String.fromCharCode(_t);else if(_t>191&&_t<224){const rn=Ue[He++];qe[Nt++]=String.fromCharCode((31&_t)<<6|63&rn)}else if(_t>239&&_t<365){const ir=((7&_t)<<18|(63&Ue[He++])<<12|(63&Ue[He++])<<6|63&Ue[He++])-65536;qe[Nt++]=String.fromCharCode(55296+(ir>>10)),qe[Nt++]=String.fromCharCode(56320+(1023&ir))}else{const rn=Ue[He++],Vn=Ue[He++];qe[Nt++]=String.fromCharCode((15&_t)<<12|(63&rn)<<6|63&Vn)}}return qe.join("")}(this.decodeStringToByteArray(Ue,qe))},decodeStringToByteArray(Ue,qe){this.init_();const He=qe?this.charToByteMapWebSafe_:this.charToByteMap_,Nt=[];for(let _t=0;_t<Ue.length;){const rn=He[Ue.charAt(_t++)],vr=_t<Ue.length?He[Ue.charAt(_t)]:0;++_t;const Sn=_t<Ue.length?He[Ue.charAt(_t)]:64;++_t;const Rn=_t<Ue.length?He[Ue.charAt(_t)]:64;if(++_t,null==rn||null==vr||null==Sn||null==Rn)throw Error();Nt.push(rn<<2|vr>>4),64!==Sn&&(Nt.push(vr<<4&240|Sn>>2),64!==Rn&&Nt.push(Sn<<6&192|Rn))}return Nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ue=0;Ue<this.ENCODED_VALS.length;Ue++)this.byteToCharMap_[Ue]=this.ENCODED_VALS.charAt(Ue),this.charToByteMap_[this.byteToCharMap_[Ue]]=Ue,this.byteToCharMapWebSafe_[Ue]=this.ENCODED_VALS_WEBSAFE.charAt(Ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ue]]=Ue,Ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ue)]=Ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ue)]=Ue)}}},Ae=function(Ue){const qe=me(Ue);return ue.encodeByteArray(qe,!0)},Me=function(Ue){return Ae(Ue).replace(/\./g,"")},ge=function(Ue){try{return ue.decodeString(Ue,!0)}catch(qe){console.error("base64Decode failed: ",qe)}return null};function K(Ue){return Z(void 0,Ue)}function Z(Ue,qe){if(!(qe instanceof Object))return qe;switch(qe.constructor){case Date:return new Date(qe.getTime());case Object:void 0===Ue&&(Ue={});break;case Array:Ue=[];break;default:return qe}for(const He in qe)!qe.hasOwnProperty(He)||!te(He)||(Ue[He]=Z(Ue[He],qe[He]));return Ue}function te(Ue){return"__proto__"!==Ue}class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((qe,He)=>{this.resolve=qe,this.reject=He})}wrapCallback(qe){return(He,Nt)=>{He?this.reject(He):this.resolve(Nt),"function"==typeof qe&&(this.promise.catch(()=>{}),1===qe.length?qe(He):qe(He,Nt))}}}function be(Ue,qe){if(Ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Nt=qe||"demo-project",_t=Ue.iat||0,rn=Ue.sub||Ue.user_id;if(!rn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Vn=Object.assign({iss:`https://securetoken.google.com/${Nt}`,aud:Nt,iat:_t,exp:_t+3600,auth_time:_t,sub:rn,user_id:rn,firebase:{sign_in_provider:"custom",identities:{}}},Ue);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Vn)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ue){return!1}}function Qe(){return"object"==typeof self&&self.self===self}function it(){const Ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ue&&void 0!==Ue.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){return je().indexOf("Electron/")>=0}function Xe(){const Ue=je();return Ue.indexOf("MSIE ")>=0||Ue.indexOf("Trident/")>=0}function ye(){return je().indexOf("MSAppHost/")>=0}function Qt(){return!1}function De(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function ce(){return new Promise((Ue,qe)=>{try{let He=!0;const Nt="validate-browser-context-for-indexeddb-analytics-module",_t=self.indexedDB.open(Nt);_t.onsuccess=()=>{_t.result.close(),He||self.indexedDB.deleteDatabase(Nt),Ue(!0)},_t.onupgradeneeded=()=>{He=!1},_t.onerror=()=>{var rn;qe((null===(rn=_t.error)||void 0===rn?void 0:rn.message)||"")}}catch(He){qe(He)}})}function Ne(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ct extends Error{constructor(qe,He,Nt){super(He),this.code=qe,this.customData=Nt,this.name="FirebaseError",Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Te.prototype.create)}}class Te{constructor(qe,He,Nt){this.service=qe,this.serviceName=He,this.errors=Nt}create(qe,...He){const Nt=He[0]||{},_t=`${this.service}/${qe}`,rn=this.errors[qe],Vn=rn?function(Ue,qe){return Ue.replace(mn,(He,Nt)=>{const _t=qe[Nt];return null!=_t?String(_t):`<${Nt}?>`})}(rn,Nt):"Error";return new ct(_t,`${this.serviceName}: ${Vn} (${_t}).`,Nt)}}const mn=/\{\$([^}]+)}/g;function Bn(Ue){return JSON.parse(Ue)}function Zt(Ue){return JSON.stringify(Ue)}const xn=function(Ue){let qe={},He={},Nt={},_t="";try{const rn=Ue.split(".");qe=Bn(ge(rn[0])||""),He=Bn(ge(rn[1])||""),_t=rn[2],Nt=He.d||{},delete He.d}catch(rn){}return{header:qe,claims:He,data:Nt,signature:_t}},Et=function(Ue){const He=xn(Ue).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},Dt=function(Ue){const qe=xn(Ue).claims;return"object"==typeof qe&&!0===qe.admin};function at(Ue,qe){return Object.prototype.hasOwnProperty.call(Ue,qe)}function Ve(Ue,qe){if(Object.prototype.hasOwnProperty.call(Ue,qe))return Ue[qe]}function bt(Ue){for(const qe in Ue)if(Object.prototype.hasOwnProperty.call(Ue,qe))return!1;return!0}function ke(Ue,qe,He){const Nt={};for(const _t in Ue)Object.prototype.hasOwnProperty.call(Ue,_t)&&(Nt[_t]=qe.call(He,Ue[_t],_t,Ue));return Nt}function rt(Ue,qe){if(Ue===qe)return!0;const He=Object.keys(Ue),Nt=Object.keys(qe);for(const _t of He){if(!Nt.includes(_t))return!1;const rn=Ue[_t],Vn=qe[_t];if(Se(rn)&&Se(Vn)){if(!rt(rn,Vn))return!1}else if(rn!==Vn)return!1}for(const _t of Nt)if(!He.includes(_t))return!1;return!0}function Se(Ue){return null!==Ue&&"object"==typeof Ue}function et(Ue){const qe=[];for(const[He,Nt]of Object.entries(Ue))Array.isArray(Nt)?Nt.forEach(_t=>{qe.push(encodeURIComponent(He)+"="+encodeURIComponent(_t))}):qe.push(encodeURIComponent(He)+"="+encodeURIComponent(Nt));return qe.length?"&"+qe.join("&"):""}function It(Ue){const qe={};return Ue.replace(/^\?/,"").split("&").forEach(Nt=>{if(Nt){const[_t,rn]=Nt.split("=");qe[decodeURIComponent(_t)]=decodeURIComponent(rn)}}),qe}function Ct(Ue){const qe=Ue.indexOf("?");if(!qe)return"";const He=Ue.indexOf("#",qe);return Ue.substring(qe,He>0?He:void 0)}class dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let qe=1;qe<this.blockSize;++qe)this.pad_[qe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(qe,He){He||(He=0);const Nt=this.W_;if("string"==typeof qe)for(let Rn=0;Rn<16;Rn++)Nt[Rn]=qe.charCodeAt(He)<<24|qe.charCodeAt(He+1)<<16|qe.charCodeAt(He+2)<<8|qe.charCodeAt(He+3),He+=4;else for(let Rn=0;Rn<16;Rn++)Nt[Rn]=qe[He]<<24|qe[He+1]<<16|qe[He+2]<<8|qe[He+3],He+=4;for(let Rn=16;Rn<80;Rn++){const qr=Nt[Rn-3]^Nt[Rn-8]^Nt[Rn-14]^Nt[Rn-16];Nt[Rn]=4294967295&(qr<<1|qr>>>31)}let Sn,_r,_t=this.chain_[0],rn=this.chain_[1],Vn=this.chain_[2],vr=this.chain_[3],ir=this.chain_[4];for(let Rn=0;Rn<80;Rn++){Rn<40?Rn<20?(Sn=vr^rn&(Vn^vr),_r=1518500249):(Sn=rn^Vn^vr,_r=1859775393):Rn<60?(Sn=rn&Vn|vr&(rn|Vn),_r=2400959708):(Sn=rn^Vn^vr,_r=3395469782);const qr=(_t<<5|_t>>>27)+Sn+ir+_r+Nt[Rn]&4294967295;ir=vr,vr=Vn,Vn=4294967295&(rn<<30|rn>>>2),rn=_t,_t=qr}this.chain_[0]=this.chain_[0]+_t&4294967295,this.chain_[1]=this.chain_[1]+rn&4294967295,this.chain_[2]=this.chain_[2]+Vn&4294967295,this.chain_[3]=this.chain_[3]+vr&4294967295,this.chain_[4]=this.chain_[4]+ir&4294967295}update(qe,He){if(null==qe)return;void 0===He&&(He=qe.length);const Nt=He-this.blockSize;let _t=0;const rn=this.buf_;let Vn=this.inbuf_;for(;_t<He;){if(0===Vn)for(;_t<=Nt;)this.compress_(qe,_t),_t+=this.blockSize;if("string"==typeof qe){for(;_t<He;)if(rn[Vn]=qe.charCodeAt(_t),++Vn,++_t,Vn===this.blockSize){this.compress_(rn),Vn=0;break}}else for(;_t<He;)if(rn[Vn]=qe[_t],++Vn,++_t,Vn===this.blockSize){this.compress_(rn),Vn=0;break}}this.inbuf_=Vn,this.total_+=He}digest(){const qe=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let _t=this.blockSize-1;_t>=56;_t--)this.buf_[_t]=255&He,He/=256;this.compress_(this.buf_);let Nt=0;for(let _t=0;_t<5;_t++)for(let rn=24;rn>=0;rn-=8)qe[Nt]=this.chain_[_t]>>rn&255,++Nt;return qe}}function En(Ue,qe){const He=new Jn(Ue,qe);return He.subscribe.bind(He)}class Jn{constructor(qe,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{qe(this)}).catch(Nt=>{this.error(Nt)})}next(qe){this.forEachObserver(He=>{He.next(qe)})}error(qe){this.forEachObserver(He=>{He.error(qe)}),this.close(qe)}complete(){this.forEachObserver(qe=>{qe.complete()}),this.close()}subscribe(qe,He,Nt){let _t;if(void 0===qe&&void 0===He&&void 0===Nt)throw new Error("Missing Observer.");_t=function(Ue,qe){if("object"!=typeof Ue||null===Ue)return!1;for(const He of["next","error","complete"])if(He in Ue&&"function"==typeof Ue[He])return!0;return!1}(qe)?qe:{next:qe,error:He,complete:Nt},void 0===_t.next&&(_t.next=Tt),void 0===_t.error&&(_t.error=Tt),void 0===_t.complete&&(_t.complete=Tt);const rn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?_t.error(this.finalError):_t.complete()}catch(Vn){}}),this.observers.push(_t),rn}unsubscribeOne(qe){void 0===this.observers||void 0===this.observers[qe]||(delete this.observers[qe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(qe){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,qe)}sendOne(qe,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[qe])try{He(this.observers[qe])}catch(Nt){"undefined"!=typeof console&&console.error&&console.error(Nt)}})}close(qe){this.finalized||(this.finalized=!0,void 0!==qe&&(this.finalError=qe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tt(){}const on=function(Ue,qe,He,Nt){let _t;if(Nt<qe?_t="at least "+qe:Nt>He&&(_t=0===He?"none":"no more than "+He),_t)throw new Error(Ue+" failed: Was called with "+Nt+(1===Nt?" argument.":" arguments.")+" Expects "+_t+".")};function mt(Ue,qe){return`${Ue} failed: ${qe} argument `}function Kt(Ue,qe,He,Nt){if((!Nt||He)&&"function"!=typeof He)throw new Error(mt(Ue,qe)+"must be a valid function.")}function cn(Ue,qe,He,Nt){if((!Nt||He)&&("object"!=typeof He||null===He))throw new Error(mt(Ue,qe)+"must be a valid context object.")}const kt=function(Ue){const qe=[];let He=0;for(let Nt=0;Nt<Ue.length;Nt++){let _t=Ue.charCodeAt(Nt);if(_t>=55296&&_t<=56319){const rn=_t-55296;Nt++,v(Nt<Ue.length,"Surrogate pair missing trail surrogate."),_t=65536+(rn<<10)+(Ue.charCodeAt(Nt)-56320)}_t<128?qe[He++]=_t:_t<2048?(qe[He++]=_t>>6|192,qe[He++]=63&_t|128):_t<65536?(qe[He++]=_t>>12|224,qe[He++]=_t>>6&63|128,qe[He++]=63&_t|128):(qe[He++]=_t>>18|240,qe[He++]=_t>>12&63|128,qe[He++]=_t>>6&63|128,qe[He++]=63&_t|128)}return qe},ln=function(Ue){let qe=0;for(let He=0;He<Ue.length;He++){const Nt=Ue.charCodeAt(He);Nt<128?qe++:Nt<2048?qe+=2:Nt>=55296&&Nt<=56319?(qe+=4,He++):qe+=3}return qe};function Sr(Ue,qe=1e3,He=2){const Nt=qe*Math.pow(He,Ue),_t=Math.round(.5*Nt*(Math.random()-.5)*2);return Math.min(144e5,Nt+_t)}function Gr(Ue){return Ue&&Ue._delegate?Ue._delegate:Ue}},2329:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=N(5452);(0,f.registerVersion)("firebase","9.1.3","app")},7841:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Z:()=>f.Z});var f=N(4486);f.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(Vt,Ie,N)=>{"use strict";N.r(Ie);var f=N(8239),v=N(4486),J=N(3854),me=N(5452),le=N(4762),ue=N(5601),Ae=N(6034);const je=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Oe=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ye=new J.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new ue.Yd("@firebase/auth");function nt(I,...m){it.logLevel<=ue.in.ERROR&&it.error(`Auth (${me.SDK_VERSION}): ${I}`,...m)}function Ze(I,...m){throw De(I,...m)}function Xe(I,...m){return De(I,...m)}function ye(I,m,y){const A=Object.assign(Object.assign({},Oe()),{[m]:y});return new J.LL("auth","Firebase",A).create(m,{appName:I.name})}function Qt(I,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&Ze(I,"argument-error"),ye(I,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function De(I,...m){if("string"!=typeof I){const y=m[0],A=[...m.slice(1)];return A[0]&&(A[0].appName=I.name),I._errorFactory.create(y,...A)}return Ye.create(I,...m)}function Ge(I,m,...y){if(!I)throw De(m,...y)}function ce(I){const m="INTERNAL ASSERTION FAILED: "+I;throw nt(m),new Error(m)}function Ne(I,m){I||ce(m)}const Re=new Map;function _e(I){Ne(I instanceof Function,"Expected a class definition");let m=Re.get(I);return m?(Ne(m instanceof I,"Instance stored in cache mismatched with class"),m):(m=new I,Re.set(I,m),m)}function jt(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function mn(){return"http:"===Bn()||"https:"===Bn()}function Bn(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class pr{constructor(m,y){this.shortDelay=m,this.longDelay=y,Ne(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,J.uI)()||(0,J.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mn()||(0,J.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function vn(I,m){Ne(I.emulator,"Emulator should always be set here");const{url:y}=I.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class Et{static initialize(m,y,A){this.fetchImpl=m,y&&(this.headersImpl=y),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},at=new pr(3e4,6e4);function Ve(I,m){return I.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:I.tenantId}):m}function bt(I,m,y,A){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(I,m,y,A,W={}){return rt(I,W,()=>{let he={},ot={};A&&("GET"===m?ot=A:he={body:JSON.stringify(A)});const Ot=(0,J.xO)(Object.assign({key:I.config.apiKey},ot)).slice(1),_n=new(Et.headers());return _n.set("Content-Type","application/json"),_n.set("X-Client-Version",I._getSdkClientVersion()),I.languageCode&&_n.set("X-Firebase-Locale",I.languageCode),Et.fetch()(Ct(I,I.config.apiHost,y,Ot),Object.assign({method:m,headers:_n,referrerPolicy:"no-referrer"},he))})})).apply(this,arguments)}function rt(I,m,y){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(I,m,y){I._canInitEmulator=!1;const A=Object.assign(Object.assign({},Dt),m);try{const W=new dn(I),he=yield Promise.race([y(),W.promise]);W.clearNetworkTimeout();const ot=yield he.json();if("needConfirmation"in ot)throw En(I,"account-exists-with-different-credential",ot);if(he.ok&&!("errorMessage"in ot))return ot;{const Ot=he.ok?ot.errorMessage:ot.error.message,[_n,kn]=Ot.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_n)throw En(I,"credential-already-in-use",ot);if("EMAIL_EXISTS"===_n)throw En(I,"email-already-in-use",ot);const Kn=A[_n]||_n.toLowerCase().replace(/[_\s]+/g,"-");if(kn)throw ye(I,Kn,kn);Ze(I,Kn)}}catch(W){if(W instanceof J.ZR)throw W;Ze(I,"network-request-failed")}})).apply(this,arguments)}function et(I,m,y,A){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(I,m,y,A,W={}){const he=yield bt(I,m,y,A,W);return"mfaPendingCredential"in he&&Ze(I,"multi-factor-auth-required",{serverResponse:he}),he})).apply(this,arguments)}function Ct(I,m,y,A){const W=`${m}${y}?${A}`;return I.config.emulator?vn(I.config,W):`${I.config.apiScheme}://${W}`}class dn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,A)=>{this.timer=setTimeout(()=>A(Xe(this.auth,"timeout")),at.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function En(I,m,y){const A={appName:I.name};y.email&&(A.email=y.email),y.phoneNumber&&(A.phoneNumber=y.phoneNumber);const W=Xe(I,m,A);return W.customData._tokenResponse=y,W}function gn(){return(gn=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function qn(I,m){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function on(I,m){return mt.apply(this,arguments)}function mt(){return(mt=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Je(I){if(I)try{const m=new Date(Number(I));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function kt(){return(kt=(0,f.Z)(function*(I,m=!1){const y=(0,J.m9)(I),A=yield y.getIdToken(m),W=Ht(A);Ge(W&&W.exp&&W.auth_time&&W.iat,y.auth,"internal-error");const he="object"==typeof W.firebase?W.firebase:void 0,ot=null==he?void 0:he.sign_in_provider;return{claims:W,token:A,authTime:Je(ln(W.auth_time)),issuedAtTime:Je(ln(W.iat)),expirationTime:Je(ln(W.exp)),signInProvider:ot||null,signInSecondFactor:(null==he?void 0:he.sign_in_second_factor)||null}})).apply(this,arguments)}function ln(I){return 1e3*Number(I)}function Ht(I){const[m,y,A]=I.split(".");if(void 0===m||void 0===y||void 0===A)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,J.tV)(y);return W?JSON.parse(W):(nt("Failed to decode base64 JWT payload"),null)}catch(W){return nt("Caught error parsing JWT payload as JSON",W),null}}function tr(I,m){return ar.apply(this,arguments)}function ar(){return(ar=(0,f.Z)(function*(I,m,y=!1){if(y)return m;try{return yield m}catch(A){throw A instanceof J.ZR&&Sr(A)&&I.auth.currentUser===I&&(yield I.auth.signOut()),A}})).apply(this,arguments)}function Sr({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}class ni{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const W=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const A=this.getInterval(m);this.timerId=setTimeout((0,f.Z)(function*(){yield y.iteration()}),A)}iteration(){var m=this;return(0,f.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&m.schedule(!0))}m.schedule()})()}}class Ti{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Je(this.lastLoginAt),this.creationTime=Je(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gr(I){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,f.Z)(function*(I){var m;const y=I.auth,A=yield I.getIdToken(),W=yield tr(I,on(y,{idToken:A}));Ge(null==W?void 0:W.users.length,y,"internal-error");const he=W.users[0];I._notifyReloadListener(he);const ot=(null===(m=he.providerUserInfo)||void 0===m?void 0:m.length)?_t(he.providerUserInfo):[],Ot=Nt(I.providerData,ot),Kn=!!I.isAnonymous&&!(I.email&&he.passwordHash||(null==Ot?void 0:Ot.length)),Qn={uid:he.localId,displayName:he.displayName||null,photoURL:he.photoUrl||null,email:he.email||null,emailVerified:he.emailVerified||!1,phoneNumber:he.phoneNumber||null,tenantId:he.tenantId||null,providerData:Ot,metadata:new Ti(he.createdAt,he.lastLoginAt),isAnonymous:Kn};Object.assign(I,Qn)})).apply(this,arguments)}function He(){return(He=(0,f.Z)(function*(I){const m=(0,J.m9)(I);yield Gr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Nt(I,m){return[...I.filter(A=>!m.some(W=>W.providerId===A.providerId)),...m]}function _t(I){return I.map(m=>{var{providerId:y}=m,A=(0,le._T)(m,["providerId"]);return{providerId:y,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Vn(){return(Vn=(0,f.Z)(function*(I,m){const y=yield rt(I,{},()=>{const A=(0,J.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:W,apiKey:he}=I.config,ot=Ct(I,W,"/v1/token",`key=${he}`);return Et.fetch()(ot,{method:"POST",headers:{"X-Client-Version":I._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:A})});return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class vr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Ge(m.idToken,"internal-error"),Ge(void 0!==m.idToken,"internal-error"),Ge(void 0!==m.refreshToken,"internal-error");const y="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(I){const m=Ht(I);return Ge(m,"internal-error"),Ge(void 0!==m.exp,"internal-error"),Ge(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var A=this;return(0,f.Z)(function*(){return Ge(!A.accessToken||A.refreshToken,m,"user-token-expired"),y||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(m,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var A=this;return(0,f.Z)(function*(){const{accessToken:W,refreshToken:he,expiresIn:ot}=yield function(I,m){return Vn.apply(this,arguments)}(m,y);A.updateTokensAndExpiration(W,he,Number(ot))})()}updateTokensAndExpiration(m,y,A){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(m,y){const{refreshToken:A,accessToken:W,expirationTime:he}=y,ot=new vr;return A&&(Ge("string"==typeof A,"internal-error",{appName:m}),ot.refreshToken=A),W&&(Ge("string"==typeof W,"internal-error",{appName:m}),ot.accessToken=W),he&&(Ge("number"==typeof he,"internal-error",{appName:m}),ot.expirationTime=he),ot}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new vr,this.toJSON())}_performRefresh(){return ce("not implemented")}}function ir(I,m){Ge("string"==typeof I||void 0===I,"internal-error",{appName:m})}class Sn{constructor(m){var{uid:y,auth:A,stsTokenManager:W}=m,he=(0,le._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=A,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=he.displayName||null,this.email=he.email||null,this.emailVerified=he.emailVerified||!1,this.phoneNumber=he.phoneNumber||null,this.photoURL=he.photoURL||null,this.isAnonymous=he.isAnonymous||!1,this.tenantId=he.tenantId||null,this.metadata=new Ti(he.createdAt||void 0,he.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,f.Z)(function*(){const A=yield tr(y,y.stsTokenManager.getToken(y.auth,m));return Ge(A,y.auth,"internal-error"),y.accessToken!==A&&(y.accessToken=A,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),A})()}getIdTokenResult(m){return function(I){return kt.apply(this,arguments)}(this,m)}reload(){return function(I){return He.apply(this,arguments)}(this)}_assign(m){this!==m&&(Ge(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Sn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var A=this;return(0,f.Z)(function*(){let W=!1;m.idToken&&m.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(m),W=!0),y&&(yield Gr(A)),yield A.auth._persistUserIfCurrent(A),W&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var m=this;return(0,f.Z)(function*(){const y=yield m.getIdToken();return yield tr(m,function(I,m){return gn.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var A,W,he,ot,Ot,_n,kn,Kn;const Qn=null!==(A=y.displayName)&&void 0!==A?A:void 0,Gs=null!==(W=y.email)&&void 0!==W?W:void 0,Da=null!==(he=y.phoneNumber)&&void 0!==he?he:void 0,fo=null!==(ot=y.photoURL)&&void 0!==ot?ot:void 0,tn=null!==(Ot=y.tenantId)&&void 0!==Ot?Ot:void 0,Mo=null!==(_n=y._redirectEventId)&&void 0!==_n?_n:void 0,zi=null!==(kn=y.createdAt)&&void 0!==kn?kn:void 0,ha=null!==(Kn=y.lastLoginAt)&&void 0!==Kn?Kn:void 0,{uid:xa,emailVerified:fu,isAnonymous:Kd,providerData:fa,stsTokenManager:Nh}=y;Ge(xa&&Nh,m,"internal-error");const Mh=vr.fromJSON(this.name,Nh);Ge("string"==typeof xa,m,"internal-error"),ir(Qn,m.name),ir(Gs,m.name),Ge("boolean"==typeof fu,m,"internal-error"),Ge("boolean"==typeof Kd,m,"internal-error"),ir(Da,m.name),ir(fo,m.name),ir(tn,m.name),ir(Mo,m.name),ir(zi,m.name),ir(ha,m.name);const od=new Sn({uid:xa,auth:m,email:Gs,emailVerified:fu,displayName:Qn,isAnonymous:Kd,photoURL:fo,phoneNumber:Da,tenantId:tn,stsTokenManager:Mh,createdAt:zi,lastLoginAt:ha});return fa&&Array.isArray(fa)&&(od.providerData=fa.map(ko=>Object.assign({},ko))),Mo&&(od._redirectEventId=Mo),od}static _fromIdTokenResponse(m,y,A=!1){return(0,f.Z)(function*(){const W=new vr;W.updateFromServerResponse(y);const he=new Sn({uid:y.localId,auth:m,stsTokenManager:W,isAnonymous:A});return yield Gr(he),he})()}}const Rn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(y,A){var W=this;return(0,f.Z)(function*(){W.storage[y]=A})()}_get(y){var A=this;return(0,f.Z)(function*(){const W=A.storage[y];return void 0===W?null:W})()}_remove(y){var A=this;return(0,f.Z)(function*(){delete A.storage[y]})()}_addListener(y,A){}_removeListener(y,A){}}return I.type="NONE",I})();function qr(I,m,y){return`firebase:${I}:${m}:${y}`}class Kr{constructor(m,y,A){this.persistence=m,this.auth=y,this.userKey=A;const{config:W,name:he}=this.auth;this.fullUserKey=qr(this.userKey,W.apiKey,he),this.fullPersistenceKey=qr("persistence",W.apiKey,he),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,f.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Sn._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,f.Z)(function*(){if(y.persistence===m)return;const A=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,A?y.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,A="authUser"){return(0,f.Z)(function*(){if(!y.length)return new Kr(_e(Rn),m,A);const W=(yield Promise.all(y.map(function(){var kn=(0,f.Z)(function*(Kn){if(yield Kn._isAvailable())return Kn});return function(Kn){return kn.apply(this,arguments)}}()))).filter(kn=>kn);let he=W[0]||_e(Rn);const ot=qr(A,m.config.apiKey,m.name);let Ot=null;for(const kn of y)try{const Kn=yield kn._get(ot);if(Kn){const Qn=Sn._fromJSON(m,Kn);kn!==he&&(Ot=Qn),he=kn;break}}catch(Kn){}const _n=W.filter(kn=>kn._shouldAllowMigration);return he._shouldAllowMigration&&_n.length?(he=_n[0],Ot&&(yield he._set(ot,Ot.toJSON())),yield Promise.all(y.map(function(){var kn=(0,f.Z)(function*(Kn){if(Kn!==he)try{yield Kn._remove(ot)}catch(Qn){}});return function(Kn){return kn.apply(this,arguments)}}())),new Kr(he,m,A)):new Kr(he,m,A)})()}}function bi(I){const m=I.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Ii(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(rr(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Pn(m))return"Blackberry";if(xr(m))return"Webos";if(ki(m))return"Safari";if((m.includes("chrome/")||ji(m))&&!m.includes("edge/"))return"Chrome";if(di(m))return"Android";{const A=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function rr(I=(0,J.z$)()){return/firefox\//i.test(I)}function ki(I=(0,J.z$)()){const m=I.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ji(I=(0,J.z$)()){return/crios\//i.test(I)}function Ii(I=(0,J.z$)()){return/iemobile/i.test(I)}function di(I=(0,J.z$)()){return/android/i.test(I)}function Pn(I=(0,J.z$)()){return/blackberry/i.test(I)}function xr(I=(0,J.z$)()){return/webos/i.test(I)}function Hr(I=(0,J.z$)()){return/iphone|ipad|ipod/i.test(I)}function ei(I=(0,J.z$)()){return Hr(I)||di(I)||xr(I)||Pn(I)||/windows phone/i.test(I)||Ii(I)}function lr(I,m=[]){let y;switch(I){case"Browser":y=bi((0,J.z$)());break;case"Worker":y=`${bi((0,J.z$)())}-${I}`;break;default:y=I}const A=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${me.SDK_VERSION}/${A}`}class Yr{constructor(m,y){this.app=m,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qr(this),this.idTokenSubscription=new Qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(m,y){var A=this;return y&&(this._popupRedirectResolver=_e(y)),this._initializationPromise=this.queue((0,f.Z)(function*(){var W;A._deleted||(A.persistenceManager=yield Kr.create(A,m),!A._deleted&&((null===(W=A._popupRedirectResolver)||void 0===W?void 0:W._shouldInitProactively)&&(yield A._popupRedirectResolver._initialize(A)),yield A.initializeCurrentUser(y),!A._deleted&&(A._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,f.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y)}})()}initializeCurrentUser(m){var y=this;return(0,f.Z)(function*(){var A;let W=yield y.assertedPersistence.getCurrentUser();if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const he=null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId,ot=null==W?void 0:W._redirectEventId,Ot=yield y.tryRedirectSignIn(m);(!he||he===ot)&&(null==Ot?void 0:Ot.user)&&(W=Ot.user)}return W?W._redirectEventId?(Ge(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===W._redirectEventId?y.directlySetCurrentUser(W):y.reloadAndSetCurrentUserOrClear(W)):y.reloadAndSetCurrentUserOrClear(W):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var y=this;return(0,f.Z)(function*(){let A=null;try{A=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch(W){yield y._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,f.Z)(function*(){try{yield Gr(m)}catch(A){if("auth/network-request-failed"!==A.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var m=this;return(0,f.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,f.Z)(function*(){const A=m?(0,J.m9)(m):null;return A&&Ge(A.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(A&&A._clone(y))})()}_updateCurrentUser(m){var y=this;return(0,f.Z)(function*(){if(!y._deleted)return m&&Ge(y.tenantId===m.tenantId,y,"tenant-id-mismatch"),y.queue((0,f.Z)(function*(){yield y.directlySetCurrentUser(m),y.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,f.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var y=this;return this.queue((0,f.Z)(function*(){yield y.assertedPersistence.setPersistence(_e(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new J.LL("auth","Firebase",m())}onAuthStateChanged(m,y,A){return this.registerStateListener(this.authStateSubscription,m,y,A)}onIdTokenChanged(m,y,A){return this.registerStateListener(this.idTokenSubscription,m,y,A)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var A=this;return(0,f.Z)(function*(){const W=yield A.getOrInitRedirectPersistenceManager(y);return null===m?W.removeCurrentUser():W.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,f.Z)(function*(){if(!y.redirectPersistenceManager){const A=m&&_e(m)||y._popupRedirectResolver;Ge(A,y,"argument-error"),y.redirectPersistenceManager=yield Kr.create(y,[_e(A._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,f.Z)(function*(){var A,W;return y._isInitialized&&(yield y.queue((0,f.Z)(function*(){}))),(null===(A=y._currentUser)||void 0===A?void 0:A._redirectEventId)===m?y._currentUser:(null===(W=y.redirectUser)||void 0===W?void 0:W._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,f.Z)(function*(){if(m===y.currentUser)return y.queue((0,f.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,A,W){if(this._deleted)return()=>{};const he="function"==typeof y?y:y.next.bind(y),ot=this._isInitialized?Promise.resolve():this._initializationPromise;return Ge(ot,this,"internal-error"),ot.then(()=>he(this.currentUser)),"function"==typeof y?m.addObserver(y,A,W):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,f.Z)(function*(){y.currentUser&&y.currentUser!==m&&(y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh()),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=lr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Er(I){return(0,J.m9)(I)}class Qr{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,J.ne)(y=>this.observer=y)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function On(I){const m=I.indexOf(":");return m<0?"":I.substr(0,m+1)}function jn(I){if(!I)return null;const m=Number(I);return isNaN(m)?null:m}class st{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return ce("not implemented")}_getIdTokenResponse(m){return ce("not implemented")}_linkToIdToken(m,y){return ce("not implemented")}_getReauthenticationResolver(m){return ce("not implemented")}}function ze(I,m){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:resetPassword",Ve(I,m))})).apply(this,arguments)}function ht(I,m){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Nn(I,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:update",Ve(I,m))})).apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithPassword",Ve(I,m))})).apply(this,arguments)}function Wn(I,m){return us.apply(this,arguments)}function us(){return(us=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:sendOobCode",Ve(I,m))})).apply(this,arguments)}function Qi(I,m){return Br.apply(this,arguments)}function Br(){return(Br=(0,f.Z)(function*(I,m){return Wn(I,m)})).apply(this,arguments)}function pt(I,m){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(I,m){return Wn(I,m)})).apply(this,arguments)}function At(I,m){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,f.Z)(function*(I,m){return Wn(I,m)})).apply(this,arguments)}function yn(I,m){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(I,m){return Wn(I,m)})).apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithEmailLink",Ve(I,m))})).apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithEmailLink",Ve(I,m))})).apply(this,arguments)}class oi extends st{constructor(m,y,A,W=null){super("password",A),this._email=m,this._password=y,this._tenantId=W}static _fromEmailAndPassword(m,y){return new oi(m,y,"password")}static _fromEmailAndCode(m,y,A=null){return new oi(m,y,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,f.Z)(function*(){switch(y.signInMethod){case"password":return function(I,m){return Rr.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(I,m){return nr.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:Ze(m,"internal-error")}})()}_linkToIdToken(m,y){var A=this;return(0,f.Z)(function*(){switch(A.signInMethod){case"password":return ht(m,{idToken:y,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function(I,m){return $i.apply(this,arguments)}(m,{idToken:y,email:A._email,oobCode:A._password});default:Ze(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function sr(I,m){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithIdp",Ve(I,m))})).apply(this,arguments)}class fi extends st{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new fi(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):Ze("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:A,signInMethod:W}=y,he=(0,le._T)(y,["providerId","signInMethod"]);if(!A||!W)return null;const ot=new fi(A,W);return ot.idToken=he.idToken||void 0,ot.accessToken=he.accessToken||void 0,ot.secret=he.secret,ot.nonce=he.nonce,ot.pendingToken=he.pendingToken||null,ot}_getIdTokenResponse(m){return sr(m,this.buildRequest())}_linkToIdToken(m,y){const A=this.buildRequest();return A.idToken=y,sr(m,A)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,sr(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,J.xO)(y)}return m}}function Ps(I,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:sendVerificationCode",Ve(I,m))})).apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithPhoneNumber",Ve(I,m))})).apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(I,m){const y=yield et(I,"POST","/v1/accounts:signInWithPhoneNumber",Ve(I,m));if(y.temporaryProof)throw En(I,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const go={USER_NOT_FOUND:"user-not-found"};function Ro(){return(Ro=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithPhoneNumber",Ve(I,Object.assign(Object.assign({},m),{operation:"REAUTH"})),go)})).apply(this,arguments)}class ds extends st{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new ds({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new ds({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function(I,m){return Ri.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function(I,m){return Vo.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(I,m){return Ro.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:A,verificationCode:W}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:A,code:W}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:A,phoneNumber:W,temporaryProof:he}=m;return A||y||W||he?new ds({verificationId:y,verificationCode:A,phoneNumber:W,temporaryProof:he}):null}}class hs{constructor(m){var y,A,W,he,ot,Ot;const _n=(0,J.zd)((0,J.pd)(m)),kn=null!==(y=_n.apiKey)&&void 0!==y?y:null,Kn=null!==(A=_n.oobCode)&&void 0!==A?A:null,Qn=function(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=_n.mode)&&void 0!==W?W:null);Ge(kn&&Kn&&Qn,"argument-error"),this.apiKey=kn,this.operation=Qn,this.code=Kn,this.continueUrl=null!==(he=_n.continueUrl)&&void 0!==he?he:null,this.languageCode=null!==(ot=_n.languageCode)&&void 0!==ot?ot:null,this.tenantId=null!==(Ot=_n.tenantId)&&void 0!==Ot?Ot:null}static parseLink(m){const y=function(I){const m=(0,J.zd)((0,J.pd)(I)).link,y=m?(0,J.zd)((0,J.pd)(m)).deep_link_id:null,A=(0,J.zd)((0,J.pd)(I)).deep_link_id;return(A?(0,J.zd)((0,J.pd)(A)).link:null)||A||y||m||I}(m);try{return new hs(y)}catch(A){return null}}}let Ks=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(y,A){return oi._fromEmailAndPassword(y,A)}static credentialWithLink(y,A){const W=hs.parseLink(A);return Ge(W,"argument-error"),oi._fromEmailAndCode(y,W.code,W.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Li{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Fs extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Pi extends Fs{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return Ge("providerId"in y&&"signInMethod"in y,"argument-error"),fi._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Ge(m.idToken||m.accessToken,"argument-error"),fi._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Pi.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Pi.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:A,oauthTokenSecret:W,pendingToken:he,nonce:ot,providerId:Ot}=m;if(!A&&!W&&!y&&!he||!Ot)return null;try{return new Pi(Ot)._credential({idToken:y,accessToken:A,nonce:ot,pendingToken:he})}catch(_n){return null}}}let Ns=(()=>{class I extends Fs{constructor(){super("facebook.com")}static credential(y){return fi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return I.credential(y.oauthAccessToken)}catch(A){return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Xo=(()=>{class I extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(y,A){return fi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:A})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:A,oauthAccessToken:W}=y;if(!A&&!W)return null;try{return I.credential(A,W)}catch(he){return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Bo=(()=>{class I extends Fs{constructor(){super("github.com")}static credential(y){return fi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return I.credential(y.oauthAccessToken)}catch(A){return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class fs extends st{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return sr(m,this.buildRequest())}_linkToIdToken(m,y){const A=this.buildRequest();return A.idToken=y,sr(m,A)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,sr(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:A,signInMethod:W,pendingToken:he}=y;return A&&W&&he&&A===W?new fs(A,he):null}static _create(m,y){return new fs(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Hi=(()=>{class I extends Fs{constructor(){super("twitter.com")}static credential(y,A){return fi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:A})}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:A,oauthTokenSecret:W}=y;if(!A||!W)return null;try{return I.credential(A,W)}catch(he){return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Fa(I,m){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signUp",Ve(I,m))})).apply(this,arguments)}class ts{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,A,W=!1){return(0,f.Z)(function*(){const he=yield Sn._fromIdTokenResponse(m,A,W),ot=_o(A);return new ts({user:he,providerId:ot,_tokenResponse:A,operationType:y})})()}static _forOperation(m,y,A){return(0,f.Z)(function*(){yield m._updateTokensIfNecessary(A,!0);const W=_o(A);return new ts({user:m,providerId:W,_tokenResponse:A,operationType:y})})()}}function _o(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function Zi(){return(Zi=(0,f.Z)(function*(I){var m;const y=Er(I);if(yield y._initializationPromise,null===(m=y.currentUser)||void 0===m?void 0:m.isAnonymous)return new ts({user:y.currentUser,providerId:null,operationType:"signIn"});const A=yield Fa(y,{returnSecureToken:!0}),W=yield ts._fromIdTokenResponse(y,"signIn",A,!0);return yield y._updateCurrentUser(W.user),W})).apply(this,arguments)}class Vs extends J.ZR{constructor(m,y,A,W){var he;super(y.code,y.message),this.operationType=A,this.user=W,this.name="FirebaseError",Object.setPrototypeOf(this,Vs.prototype),this.appName=m.name,this.code=y.code,this.tenantId=null!==(he=m.tenantId)&&void 0!==he?he:void 0,this.serverResponse=y.customData.serverResponse}static _fromErrorAndOperation(m,y,A,W){return new Vs(m,y,A,W)}}function oo(I,m,y,A){return("reauthenticate"===m?y._getReauthenticationResolver(I):y._getIdTokenResponse(I)).catch(he=>{throw"auth/multi-factor-auth-required"===he.code?Vs._fromErrorAndOperation(I,he,m,A):he})}function Ys(I){return new Set(I.map(({providerId:m})=>m).filter(m=>!!m))}function Si(){return(Si=(0,f.Z)(function*(I,m){const y=(0,J.m9)(I);yield $(!0,y,m);const{providerUserInfo:A}=yield qn(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),W=Ys(A||[]);return y.providerData=y.providerData.filter(he=>W.has(he.providerId)),W.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function j(I,m){return ne.apply(this,arguments)}function ne(){return(ne=(0,f.Z)(function*(I,m,y=!1){const A=yield tr(I,m._linkToIdToken(I.auth,yield I.getIdToken()),y);return ts._forOperation(I,"link",A)})).apply(this,arguments)}function $(I,m,y){return ie.apply(this,arguments)}function ie(){return(ie=(0,f.Z)(function*(I,m,y){yield Gr(m);const W=!1===I?"provider-already-linked":"no-such-provider";Ge(Ys(m.providerData).has(y)===I,m.auth,W)})).apply(this,arguments)}function Pe(I,m){return gt.apply(this,arguments)}function gt(){return(gt=(0,f.Z)(function*(I,m,y=!1){const{auth:A}=I,W="reauthenticate";try{const he=yield tr(I,oo(A,W,m,I),y);Ge(he.idToken,A,"internal-error");const ot=Ht(he.idToken);Ge(ot,A,"internal-error");const{sub:Ot}=ot;return Ge(I.uid===Ot,A,"user-mismatch"),ts._forOperation(I,W,he)}catch(he){throw"auth/user-not-found"===(null==he?void 0:he.code)&&Ze(A,"user-mismatch"),he}})).apply(this,arguments)}function $t(I,m){return L.apply(this,arguments)}function L(){return(L=(0,f.Z)(function*(I,m,y=!1){const A="signIn",W=yield oo(I,A,m),he=yield ts._fromIdTokenResponse(I,A,W);return y||(yield I._updateCurrentUser(he.user)),he})).apply(this,arguments)}function k(I,m){return O.apply(this,arguments)}function O(){return(O=(0,f.Z)(function*(I,m){return $t(Er(I),m)})).apply(this,arguments)}function X(I,m){return dt.apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(I,m){const y=(0,J.m9)(I);return yield $(!1,y,m.providerId),j(y,m)})).apply(this,arguments)}function Ft(I,m){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(I,m){return Pe((0,J.m9)(I),m)})).apply(this,arguments)}function Xn(I,m){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(I,m){return et(I,"POST","/v1/accounts:signInWithCustomToken",Ve(I,m))})).apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*(I,m){const y=Er(I),A=yield Xn(y,{token:m,returnSecureToken:!0}),W=yield ts._fromIdTokenResponse(y,"signIn",A);return yield y._updateCurrentUser(W.user),W})).apply(this,arguments)}class ps{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Bs._fromServerResponse(m,y):Ze(m,"internal-error")}}class Bs extends ps{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Bs(y)}}function Q(I,m,y){var A;Ge((null===(A=y.url)||void 0===A?void 0:A.length)>0,I,"invalid-continue-uri"),Ge(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Ge(y.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(Ge(y.android.packageName.length>0,I,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function pe(){return(pe=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I),W={requestType:"PASSWORD_RESET",email:m};y&&Q(A,W,y),yield pt(A,W)})).apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(I,m,y){yield ze((0,J.m9)(I),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(I,m){yield Nn((0,J.m9)(I),{oobCode:m})})).apply(this,arguments)}function en(I,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(I,m){const y=(0,J.m9)(I),A=yield ze(y,{oobCode:m}),W=A.requestType;switch(Ge(W,y,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ge(A.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ge(A.mfaInfo,y,"internal-error");default:Ge(A.email,y,"internal-error")}let he=null;return A.mfaInfo&&(he=ps._fromServerResponse(Er(y),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:he},operation:W}})).apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(I,m){const{data:y}=yield en((0,J.m9)(I),m);return y.email})).apply(this,arguments)}function Mr(){return(Mr=(0,f.Z)(function*(I,m,y){const A=Er(I),W=yield Fa(A,{returnSecureToken:!0,email:m,password:y}),he=yield ts._fromIdTokenResponse(A,"signIn",W);return yield A._updateCurrentUser(he.user),he})).apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I),W={requestType:"EMAIL_SIGNIN",email:m};Ge(y.handleCodeInApp,A,"argument-error"),y&&Q(A,W,y),yield At(A,W)})).apply(this,arguments)}function Fr(){return(Fr=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I),W=Ks.credentialWithLink(m,y||jt());return Ge(W._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),k(A,W)})).apply(this,arguments)}function ai(I,m){return wi.apply(this,arguments)}function wi(){return(wi=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:createAuthUri",Ve(I,m))})).apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(I,m){const A={identifier:m,continueUri:mn()?jt():"http://localhost"},{signinMethods:W}=yield ai((0,J.m9)(I),A);return W||[]})).apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(I,m){const y=(0,J.m9)(I),W={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};m&&Q(y.auth,W,m);const{email:he}=yield Qi(y.auth,W);he!==I.email&&(yield I.reload())})).apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I),he={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:m};y&&Q(A.auth,he,y);const{email:ot}=yield yn(A.auth,he);ot!==I.email&&(yield I.reload())})).apply(this,arguments)}function ta(I,m){return ns.apply(this,arguments)}function ns(){return(ns=(0,f.Z)(function*(I,m){return bt(I,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(I,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const A=(0,J.m9)(I),he={idToken:yield A.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},ot=yield tr(A,ta(A.auth,he));A.displayName=ot.displayName||null,A.photoURL=ot.photoUrl||null;const Ot=A.providerData.find(({providerId:_n})=>"password"===_n);Ot&&(Ot.displayName=A.displayName,Ot.photoURL=A.photoURL),yield A._updateTokensIfNecessary(ot)})).apply(this,arguments)}function ul(I,m,y){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,f.Z)(function*(I,m,y){const{auth:A}=I,he={idToken:yield I.getIdToken(),returnSecureToken:!0};m&&(he.email=m),y&&(he.password=y);const ot=yield tr(I,ht(A,he));yield I._updateTokensIfNecessary(ot,!0)})).apply(this,arguments)}class ia{constructor(m,y,A={}){this.isNewUser=m,this.providerId=y,this.profile=A}}class Ql extends ia{constructor(m,y,A,W){super(m,y,A),this.username=W}}class vo extends ia{constructor(m,y){super(m,"facebook.com",y)}}class Rl extends Ql{constructor(m,y){super(m,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Ts extends ia{constructor(m,y){super(m,"google.com",y)}}class ao extends Ql{constructor(m,y,A){super(m,"twitter.com",y,A)}}function La(I){const{user:m,_tokenResponse:y}=I;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(I){var m,y;if(!I)return null;const{providerId:A}=I,W=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},he=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!A&&(null==I?void 0:I.idToken)){const ot=null===(y=null===(m=Ht(I.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(ot)return new ia(he,"anonymous"!==ot&&"custom"!==ot?ot:null)}if(!A)return null;switch(A){case"facebook.com":return new vo(he,W);case"github.com":return new Rl(he,W);case"google.com":return new Ts(he,W);case"twitter.com":return new ao(he,W,I.screenName||null);case"custom":case"anonymous":return new ia(he,null);default:return new ia(he,A,W)}}(y)}class pi{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new pi("enroll",m)}static _fromMfaPendingCredential(m){return new pi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,A;if(null==m?void 0:m.multiFactorSession){if(null===(y=m.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return pi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(A=m.multiFactorSession)||void 0===A?void 0:A.idToken)return pi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Eo{constructor(m,y,A){this.session=m,this.hints=y,this.signInResolver=A}static _fromError(m,y){const A=Er(m),W=(y.serverResponse.mfaInfo||[]).map(ot=>ps._fromServerResponse(A,ot));Ge(y.serverResponse.mfaPendingCredential,A,"internal-error");const he=pi._fromMfaPendingCredential(y.serverResponse.mfaPendingCredential);return new Eo(he,W,function(){var ot=(0,f.Z)(function*(Ot){const _n=yield Ot._process(A,he);delete y.serverResponse.mfaInfo,delete y.serverResponse.mfaPendingCredential;const kn=Object.assign(Object.assign({},y.serverResponse),{idToken:_n.idToken,refreshToken:_n.refreshToken});switch(y.operationType){case"signIn":const Kn=yield ts._fromIdTokenResponse(A,y.operationType,kn);return yield A._updateCurrentUser(Kn.user),Kn;case"reauthenticate":return Ge(y.user,A,"internal-error"),ts._forOperation(y.user,y.operationType,kn);default:Ze(A,"internal-error")}});return function(Ot){return ot.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,f.Z)(function*(){return y.signInResolver(m)})()}}function Su(I,m){return bt(I,"POST","/v2/accounts/mfaEnrollment:start",Ve(I,m))}class cl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(A=>ps._fromServerResponse(m.auth,A)))})}static _fromUser(m){return new cl(m)}getSession(){var m=this;return(0,f.Z)(function*(){return pi._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var A=this;return(0,f.Z)(function*(){const W=m,he=yield A.getSession(),ot=yield tr(A.user,W._process(A.user.auth,he,y));return yield A.user._updateTokensIfNecessary(ot),A.user.reload()})()}unenroll(m){var y=this;return(0,f.Z)(function*(){const A="string"==typeof m?m:m.uid,W=yield y.user.getIdToken(),he=yield tr(y.user,function(I,m){return bt(I,"POST","/v2/accounts/mfaEnrollment:withdraw",Ve(I,m))}(y.user.auth,{idToken:W,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ot})=>ot!==A),yield y.user._updateTokensIfNecessary(he);try{yield y.user.reload()}catch(ot){if("auth/user-token-expired"!==ot.code)throw ot}})()}}const Au=new WeakMap,Xs="__sak";class $o{constructor(m,y){this.storage=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Xs,"1"),this.storage.removeItem(Xs),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}}const eo=(()=>{class I extends $o{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(y,A)=>this.onStorageEvent(y,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const I=(0,J.z$)();return ki(I)||Hr(I)}()&&function(){try{return!(!window||window===window.top)}catch(I){return!1}}(),this.fallbackToPolling=ei(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const A of Object.keys(this.listeners)){const W=this.storage.getItem(A),he=this.localCache[A];W!==he&&y(A,he,W)}}onStorageEvent(y,A=!1){if(!y.key)return void this.forAllChangedKeys((Ot,_n,kn)=>{this.notifyListeners(Ot,kn)});const W=y.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ot=this.storage.getItem(W);if(y.newValue!==Ot)null!==y.newValue?this.storage.setItem(W,y.newValue):this.storage.removeItem(W);else if(this.localCache[W]===y.newValue&&!A)return}const he=()=>{const Ot=this.storage.getItem(W);!A&&this.localCache[W]===Ot||this.notifyListeners(W,Ot)},ot=this.storage.getItem(W);(0,J.w1)()&&10===document.documentMode&&ot!==y.newValue&&y.newValue!==y.oldValue?setTimeout(he,10):he()}notifyListeners(y,A){this.localCache[y]=A;const W=this.listeners[y];if(W)for(const he of Array.from(W))he(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,A,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:A,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,A){var W=()=>super._set,he=this;return(0,f.Z)(function*(){yield W().call(he,y,A),he.localCache[y]=JSON.stringify(A)})()}_get(y){var A=()=>super._get,W=this;return(0,f.Z)(function*(){const he=yield A().call(W,y);return W.localCache[y]=JSON.stringify(he),he})()}_remove(y){var A=()=>super._remove,W=this;return(0,f.Z)(function*(){yield A().call(W,y),delete W.localCache[y]})()}}return I.type="LOCAL",I})(),Gi=(()=>{class I extends $o{constructor(){super(window.sessionStorage,"SESSION")}_addListener(y,A){}_removeListener(y,A){}}return I.type="SESSION",I})();let Va=(()=>{class I{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const A=this.receivers.find(he=>he.isListeningto(y));if(A)return A;const W=new I(y);return this.receivers.push(W),W}isListeningto(y){return this.eventTarget===y}handleEvent(y){var A=this;return(0,f.Z)(function*(){const W=y,{eventId:he,eventType:ot,data:Ot}=W.data,_n=A.handlersMap[ot];if(!(null==_n?void 0:_n.size))return;W.ports[0].postMessage({status:"ack",eventId:he,eventType:ot});const kn=Array.from(_n).map(function(){var Qn=(0,f.Z)(function*(Gs){return Gs(W.origin,Ot)});return function(Gs){return Qn.apply(this,arguments)}}()),Kn=yield function(I){return Promise.all(I.map(function(){var m=(0,f.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(A){return{fulfilled:!1,reason:A}}});return function(y){return m.apply(this,arguments)}}()))}(kn);W.ports[0].postMessage({status:"done",eventId:he,eventType:ot,response:Kn})})()}_subscribe(y,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(A)}_unsubscribe(y,A){this.handlersMap[y]&&A&&this.handlersMap[y].delete(A),(!A||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function wo(I="",m=10){let y="";for(let A=0;A<m;A++)y+=Math.floor(10*Math.random());return I+y}class ru{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,A=50){var W=this;return(0,f.Z)(function*(){const he="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!he)throw new Error("connection_unavailable");let ot,Ot;return new Promise((_n,kn)=>{const Kn=wo("",20);he.port1.start();const Qn=setTimeout(()=>{kn(new Error("unsupported_event"))},A);Ot={messageChannel:he,onMessage(Gs){const Da=Gs;if(Da.data.eventId===Kn)switch(Da.data.status){case"ack":clearTimeout(Qn),ot=setTimeout(()=>{kn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ot),_n(Da.data.response);break;default:clearTimeout(Qn),clearTimeout(ot),kn(new Error("invalid_response"))}}},W.handlers.add(Ot),he.port1.addEventListener("message",Ot.onMessage),W.target.postMessage({eventType:m,eventId:Kn,data:y},[he.port2])}).finally(()=>{Ot&&W.removeMessageHandler(Ot)})})()}}function rs(){return window}function Ba(){return void 0!==rs().WorkerGlobalScope&&"function"==typeof rs().importScripts}function _a(){return(_a=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(I){return null}})).apply(this,arguments)}const ya="firebaseLocalStorageDb",mi="firebaseLocalStorage",Vi="fbase_key";class Ms{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function lo(I,m){return I.transaction([mi],m?"readwrite":"readonly").objectStore(mi)}function un(){const I=indexedDB.open(ya,1);return new Promise((m,y)=>{I.addEventListener("error",()=>{y(I.error)}),I.addEventListener("upgradeneeded",()=>{const A=I.result;try{A.createObjectStore(mi,{keyPath:Vi})}catch(W){y(W)}}),I.addEventListener("success",(0,f.Z)(function*(){const A=I.result;A.objectStoreNames.contains(mi)?m(A):(A.close(),yield function(){const I=indexedDB.deleteDatabase(ya);return new Ms(I).toPromise()}(),m(yield un()))}))})}function ui(I,m,y){return is.apply(this,arguments)}function is(){return(is=(0,f.Z)(function*(I,m,y){const A=lo(I,!0).put({[Vi]:m,value:y});return new Ms(A).toPromise()})).apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(I,m){const y=lo(I,!1).get(m),A=yield new Ms(y).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function $n(I,m){const y=lo(I,!0).delete(m);return new Ms(y).toPromise()}const zt=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,f.Z)(function*(){return y.db||(y.db=yield un()),y.db})()}_withRetries(y){var A=this;return(0,f.Z)(function*(){let W=0;for(;;)try{const he=yield A._openDb();return yield y(he)}catch(he){if(W++>3)throw he;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,f.Z)(function*(){return Ba()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,f.Z)(function*(){y.receiver=Va._getInstance(Ba()?self:null),y.receiver._subscribe("keyChanged",function(){var A=(0,f.Z)(function*(W,he){return{keyProcessed:(yield y._poll()).includes(he.key)}});return function(W,he){return A.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var A=(0,f.Z)(function*(W,he){return["keyChanged"]});return function(W,he){return A.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,f.Z)(function*(){var A,W;if(y.activeServiceWorker=yield function(){return _a.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ru(y.activeServiceWorker);const he=yield y.sender._send("ping",{},800);!he||(null===(A=he[0])||void 0===A?void 0:A.fulfilled)&&(null===(W=he[0])||void 0===W?void 0:W.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var A=this;return(0,f.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function(){var I;return(null===(I=null==navigator?void 0:navigator.serviceWorker)||void 0===I?void 0:I.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:y},A.serviceWorkerReceiverAvailable?800:50)}catch(W){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const y=yield un();return yield ui(y,Xs,"1"),yield $n(y,Xs),!0}catch(y){}return!1})()}_withPendingWrite(y){var A=this;return(0,f.Z)(function*(){A.pendingWrites++;try{yield y()}finally{A.pendingWrites--}})()}_set(y,A){var W=this;return(0,f.Z)(function*(){return W._withPendingWrite((0,f.Z)(function*(){return yield W._withRetries(he=>ui(he,y,A)),W.localCache[y]=A,W.notifyServiceWorker(y)}))})()}_get(y){var A=this;return(0,f.Z)(function*(){const W=yield A._withRetries(he=>function(I,m){return Mn.apply(this,arguments)}(he,y));return A.localCache[y]=W,W})()}_remove(y){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(W=>$n(W,y)),delete A.localCache[y],A.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,f.Z)(function*(){const A=yield y._withRetries(ot=>{const Ot=lo(ot,!1).getAll();return new Ms(Ot).toPromise()});if(!A)return[];if(0!==y.pendingWrites)return[];const W=[],he=new Set;for(const{fbase_key:ot,value:Ot}of A)he.add(ot),JSON.stringify(y.localCache[ot])!==JSON.stringify(Ot)&&(y.notifyListeners(ot,Ot),W.push(ot));for(const ot of Object.keys(y.localCache))y.localCache[ot]&&!he.has(ot)&&(y.notifyListeners(ot,null),W.push(ot));return W})()}notifyListeners(y,A){this.localCache[y]=A;const W=this.listeners[y];if(W)for(const he of Array.from(W))he(A)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function _i(I,m){return bt(I,"POST","/v2/accounts/mfaSignIn:start",Ve(I,m))}function va(){return(va=(0,f.Z)(function*(I){return(yield bt(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bc(I){return new Promise((m,y)=>{const A=document.createElement("script");A.setAttribute("src",I),A.onload=m,A.onerror=W=>{const he=Xe("internal-error");he.customData=W,y(he)},A.type="text/javascript",A.charset="UTF-8",function(){var I,m;return null!==(m=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==m?m:document}().appendChild(A)})}function pl(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Ha=1e12;class gr{constructor(m){this.auth=m,this.counter=Ha,this._widgets=new Map}render(m,y){const A=this.counter;return this._widgets.set(A,new Ea(m,this.auth.name,y||{})),this.counter++,A}reset(m){var y;const A=m||Ha;null===(y=this._widgets.get(A))||void 0===y||y.delete(),this._widgets.delete(A)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Ha))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,f.Z)(function*(){var A;return null===(A=y._widgets.get(m||Ha))||void 0===A||A.execute(),""})()}}class Ea{constructor(m,y,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof m?document.getElementById(m):m;Ge(W,"argument-error",{appName:y}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(I){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<50;A++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}();const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hr=pl("rcb"),Hn=new pr(3e4,6e4);class Co{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rs().grecaptcha}load(m,y=""){return Ge((I=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(rs().grecaptcha):new Promise((A,W)=>{const he=rs().setTimeout(()=>{W(Xe(m,"network-request-failed"))},Hn.get());rs()[hr]=()=>{rs().clearTimeout(he),delete rs()[hr];const Ot=rs().grecaptcha;if(!Ot)return void W(Xe(m,"internal-error"));const _n=Ot.render;Ot.render=(kn,Kn)=>{const Qn=_n(kn,Kn);return this.counter++,Qn},this.hostLanguage=y,A(Ot)},bc(`https://www.google.com/recaptcha/api.js??${(0,J.xO)({onload:hr,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(he),W(Xe(m,"internal-error"))})});var I}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!rs().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Po{load(m){return(0,f.Z)(function*(){return new gr(m)})()}clearedOneInstance(){}}const br="recaptcha",xu={theme:"light",type:"image"};class P{constructor(m,y=Object.assign({},xu),A){this.parameters=y,this.type=br,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Er(A),this.isInvisible="invisible"===this.parameters.size,Ge("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof m?document.getElementById(m):m;Ge(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Po:new Co,this.validateStartingState()}verify(){var m=this;return(0,f.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),A=m.getAssertedRecaptcha();return A.getResponse(y)||new Promise(he=>{const ot=Ot=>{!Ot||(m.tokenChangeListeners.delete(ot),he(Ot))};m.tokenChangeListeners.add(ot),m.isInvisible&&A.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Ge(!this.parameters.sitekey,this.auth,"argument-error"),Ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ge("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(A=>A(y)),"function"==typeof m)m(y);else if("string"==typeof m){const A=rs()[m];"function"==typeof A&&A(y)}}}assertNotDestroyed(){Ge(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,f.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const A=document.createElement("div");y.appendChild(A),y=A}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,f.Z)(function*(){Ge(mn()&&!Ba(),m.auth,"internal-error"),yield function(){let I=null;return new Promise(m=>{"complete"!==document.readyState?(I=()=>m(),window.addEventListener("load",I)):m()}).catch(m=>{throw I&&window.removeEventListener("load",I),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function(I){return va.apply(this,arguments)}(m.auth);Ge(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return Ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class T{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=ds._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function q(){return(q=(0,f.Z)(function*(I,m,y){const A=Er(I),W=yield In(A,m,(0,J.m9)(y));return new T(W,he=>k(A,he))})).apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I);yield $(!1,A,"phone");const W=yield In(A.auth,m,(0,J.m9)(y));return new T(W,he=>X(A,he))})).apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I),W=yield In(A.auth,m,(0,J.m9)(y));return new T(W,he=>Ft(A,he))})).apply(this,arguments)}function In(I,m,y){return Or.apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(I,m,y){var A;const W=yield y.verify();try{let he;if(Ge("string"==typeof W,I,"argument-error"),Ge(y.type===br,I,"argument-error"),he="string"==typeof m?{phoneNumber:m}:m,"session"in he){const ot=he.session;if("phoneNumber"in he)return Ge("enroll"===ot.type,I,"internal-error"),(yield Su(I,{idToken:ot.credential,phoneEnrollmentInfo:{phoneNumber:he.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{Ge("signin"===ot.type,I,"internal-error");const Ot=(null===(A=he.multiFactorHint)||void 0===A?void 0:A.uid)||he.multiFactorUid;return Ge(Ot,I,"missing-multi-factor-info"),(yield _i(I,{mfaPendingCredential:ot.credential,mfaEnrollmentId:Ot,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ot}=yield Ps(I,{phoneNumber:he.phoneNumber,recaptchaToken:W});return ot}}finally{y._reset()}})).apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(I,m){yield j((0,J.m9)(I),m)})).apply(this,arguments)}let Ar=(()=>{class I{constructor(y){this.providerId=I.PROVIDER_ID,this.auth=Er(y)}verifyPhoneNumber(y,A){return In(this.auth,y,(0,J.m9)(A))}static credential(y,A){return ds._fromVerification(y,A)}static credentialFromResult(y){return I.credentialFromTaggedObject(y)}static credentialFromError(y){return I.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:A,temporaryProof:W}=y;return A&&W?ds._fromTokenResponse(A,W):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Tn(I,m){return m?_e(m):(Ge(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class js extends st{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return sr(m,this._buildIdpRequest())}_linkToIdToken(m,y){return sr(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return sr(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function Ss(I){return $t(I.auth,new js(I),I.bypassAuthState)}function wa(I){const{auth:m,user:y}=I;return Ge(y,m,"internal-error"),Pe(y,new js(I),I.bypassAuthState)}function _s(I){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,f.Z)(function*(I){const{auth:m,user:y}=I;return Ge(y,m,"internal-error"),j(y,new js(I),I.bypassAuthState)})).apply(this,arguments)}class si{constructor(m,y,A,W,he=!1){this.auth=m,this.resolver=A,this.user=W,this.bypassAuthState=he,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,f.Z)(function*(A,W){m.pendingPromise={resolve:A,reject:W};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(he){m.reject(he)}});return function(A,W){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,f.Z)(function*(){const{urlResponse:A,sessionId:W,postBody:he,tenantId:ot,error:Ot,type:_n}=m;if(Ot)return void y.reject(Ot);const kn={auth:y.auth,requestUri:A,sessionId:W,tenantId:ot||void 0,postBody:he||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(_n)(kn))}catch(Kn){y.reject(Kn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ss;case"linkViaPopup":case"linkViaRedirect":return _s;case"reauthViaPopup":case"reauthViaRedirect":return wa;default:Ze(this.auth,"internal-error")}}resolve(m){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _l=new pr(2e3,1e4);function yl(){return(yl=(0,f.Z)(function*(I,m,y){const A=Er(I);Qt(I,m,Li);const W=Tn(A,y);return new Go(A,"signInViaPopup",m,W).executeNotNull()})).apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I);Qt(A.auth,m,Li);const W=Tn(A.auth,y);return new Go(A.auth,"reauthViaPopup",m,W,A).executeNotNull()})).apply(this,arguments)}function Ga(){return(Ga=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I);Qt(A.auth,m,Li);const W=Tn(A.auth,y);return new Go(A.auth,"linkViaPopup",m,W,A).executeNotNull()})).apply(this,arguments)}let Go=(()=>{class I extends si{constructor(y,A,W,he,ot){super(y,A,he,ot),this.provider=W,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var y=this;return(0,f.Z)(function*(){const A=yield y.execute();return Ge(A,y.auth,"internal-error"),A})()}onExecution(){var y=this;return(0,f.Z)(function*(){Ne(1===y.filter.length,"Popup operations only handle one event");const A=wo();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],A),y.authWindow.associatedEvent=A,y.resolver._originValidation(y.auth).catch(W=>{y.reject(W)}),y.resolver._isIframeWebStorageSupported(y.auth,W=>{W||y.reject(Xe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const y=()=>{var A,W;this.pollId=(null===(W=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===W?void 0:W.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,_l.get())};y()}}return I.currentPopupAction=null,I})();const ou=new Map;class Ni extends si{constructor(m,y,A=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,A),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,f.Z)(function*(){let A=ou.get(y.auth._key());if(!A){try{const he=(yield function(I,m){return vl.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;A=()=>Promise.resolve(he)}catch(W){A=()=>Promise.reject(W)}ou.set(y.auth._key(),A)}return A()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,A=this;return(0,f.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(A,m);if("unknown"!==m.type){if(m.eventId){const W=yield A.auth._redirectUserForId(m.eventId);if(W)return A.user=W,y().call(A,m);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function vl(){return(vl=(0,f.Z)(function*(I,m){const y=qi(m),A="true"===(yield Wa(I)._get(y));return yield Wa(I)._remove(y),A})).apply(this,arguments)}function Ru(I,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(I,m){return Wa(I)._set(qi(m),"true")})).apply(this,arguments)}function Wa(I){return _e(I._redirectPersistence)}function qi(I){return qr("pendingRedirect",I.config.apiKey,I.name)}function Jc(){return(Jc=(0,f.Z)(function*(I,m,y){const A=Er(I);Qt(I,m,Li);const W=Tn(A,y);return yield Ru(W,A),W._openRedirect(A,m,"signInViaRedirect")})).apply(this,arguments)}function oe(){return(oe=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I);Qt(A.auth,m,Li);const W=Tn(A.auth,y);yield Ru(W,A.auth);const he=yield zr(A);return W._openRedirect(A.auth,m,"reauthViaRedirect",he)})).apply(this,arguments)}function Rt(){return(Rt=(0,f.Z)(function*(I,m,y){const A=(0,J.m9)(I);Qt(A.auth,m,Li);const W=Tn(A.auth,y);yield $(!1,A,m.providerId),yield Ru(W,A.auth);const he=yield zr(A);return W._openRedirect(A.auth,m,"linkViaRedirect",he)})).apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(I,m){return yield Er(I)._initializationPromise,hn(I,m,!1)})).apply(this,arguments)}function hn(I,m){return fr.apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(I,m,y=!1){const A=Er(I),W=Tn(A,m),ot=yield new Ni(A,W,y).execute();return ot&&!y&&(delete ot.user._redirectEventId,yield A._persistUserIfCurrent(ot.user),yield A._setRedirectUser(null,m)),ot})).apply(this,arguments)}function zr(I){return no.apply(this,arguments)}function no(){return(no=(0,f.Z)(function*(I){const m=wo(`${I.uid}:::`);return I._redirectEventId=m,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),m})).apply(this,arguments)}class Ds{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(m,A)&&(y=!0,this.sendToConsumer(m,A),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return au(I);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var A;if(m.error&&!au(m)){const W=(null===(A=m.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";y.onError(Xe(this.auth,W))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const A=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&A}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(To(m))}saveEventToCache(m){this.cachedEventUids.add(To(m)),this.lastProcessedEventTime=Date.now()}}function To(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(m=>m).join("-")}function au({type:I,error:m}){return"unknown"===I&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Oo(I){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(I,m={}){return bt(I,"GET","/v1/projects",m)})).apply(this,arguments)}const Pu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wi=/^https?/;function Th(){return(Th=(0,f.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:m}=yield Oo(I);for(const y of m)try{if(Ka(y))return}catch(A){}Ze(I,"unauthorized-domain")})).apply(this,arguments)}function Ka(I){const m=jt(),{protocol:y,hostname:A}=new URL(m);if(I.startsWith("chrome-extension://")){const ot=new URL(I);return""===ot.hostname&&""===A?"chrome-extension:"===y&&I.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&ot.hostname===A}if(!Wi.test(y))return!1;if(Pu.test(I))return A===I;const W=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(A)}const Ia=new pr(3e4,6e4);function Xc(){const I=rs().___jsl;if(null==I?void 0:I.H)for(const m of Object.keys(I.H))if(I.H[m].r=I.H[m].r||[],I.H[m].L=I.H[m].L||[],I.H[m].r=[...I.H[m].L],I.CP)for(let y=0;y<I.CP.length;y++)I.CP[y]=null}let Sa=null;function Ih(I){return Sa=Sa||function(I){return new Promise((m,y)=>{var A,W,he;function ot(){Xc(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Xc(),y(Xe(I,"network-request-failed"))},timeout:Ia.get()})}if(null===(W=null===(A=rs().gapi)||void 0===A?void 0:A.iframes)||void 0===W?void 0:W.Iframe)m(gapi.iframes.getContext());else{if(!(null===(he=rs().gapi)||void 0===he?void 0:he.load)){const Ot=pl("iframefcb");return rs()[Ot]=()=>{gapi.load?ot():y(Xe(I,"network-request-failed"))},bc(`https://apis.google.com/js/api.js?onload=${Ot}`)}ot()}}).catch(m=>{throw Sa=null,m})}(I),Sa}const Nl=new pr(5e3,15e3),El={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},wf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Od(I){const m=I.config;Ge(m.authDomain,I,"auth-domain-config-required");const y=m.emulator?vn(m,"emulator/auth/iframe"):`https://${I.config.authDomain}/__/auth/iframe`,A={apiKey:m.apiKey,appName:I.name,v:me.SDK_VERSION},W=wf.get(I.config.apiHost);W&&(A.eid=W);const he=I._getFrameworks();return he.length&&(A.fw=he.join(",")),`${y}?${(0,J.xO)(A).slice(1)}`}function co(){return(co=(0,f.Z)(function*(I){const m=yield Ih(I),y=rs().gapi;return Ge(y,I,"internal-error"),m.open({where:document.body,url:Od(I),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:El,dontclear:!0},A=>new Promise(function(){var W=(0,f.Z)(function*(he,ot){yield A.restyle({setHideOnLeave:!1});const Ot=Xe(I,"network-request-failed"),_n=rs().setTimeout(()=>{ot(Ot)},Nl.get());function kn(){rs().clearTimeout(_n),he(A)}A.ping(kn).then(kn,()=>{ot(Ot)})});return function(he,ot){return W.apply(this,arguments)}}()))})).apply(this,arguments)}const Ya={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sh{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function Bi(I,m,y,A,W,he){Ge(I.config.authDomain,I,"auth-domain-config-required"),Ge(I.config.apiKey,I,"invalid-api-key");const ot={apiKey:I.config.apiKey,appName:I.name,authType:y,redirectUrl:A,v:me.SDK_VERSION,eventId:W};if(m instanceof Li){m.setDefaultLanguage(I.languageCode),ot.providerId=m.providerId||"",(0,J.xb)(m.getCustomParameters())||(ot.customParameters=JSON.stringify(m.getCustomParameters()));for(const[_n,kn]of Object.entries(he||{}))ot[_n]=kn}if(m instanceof Fs){const _n=m.getScopes().filter(kn=>""!==kn);_n.length>0&&(ot.scopes=_n.join(","))}I.tenantId&&(ot.tid=I.tenantId);const Ot=ot;for(const _n of Object.keys(Ot))void 0===Ot[_n]&&delete Ot[_n];return`${function({config:I}){return I.emulator?vn(I,"emulator/auth/handler"):`https://${I.authDomain}/__/auth/handler`}(I)}?${(0,J.xO)(Ot).slice(1)}`}const Qu="webStorageSupport";class wc extends class{constructor(m){this.factorId=m}_process(m,y,A){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,A);case"signin":return this._finalizeSignIn(m,y.credential);default:return ce("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new wc(m)}_finalizeEnroll(m,y,A){return function(I,m){return bt(I,"POST","/v2/accounts/mfaEnrollment:finalize",Ve(I,m))}(m,{idToken:y,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function(I,m){return bt(I,"POST","/v2/accounts/mfaSignIn:finalize",Ve(I,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let kd=(()=>{class I{constructor(){}static assertion(y){return wc._fromCredential(y)}}return I.FACTOR_ID="phone",I})();var I,Ju="@firebase/auth";class Ou{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,f.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(A=>{var W;m((null===(W=A)||void 0===W?void 0:W.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function So(){return window}function Zr(){return(Zr=(0,f.Z)(function*(I,m,y){var A;const{BuildInfo:W}=So();Ne(m.sessionId,"AuthEvent did not contain a session ID");const he=yield id(m.sessionId),ot={};return Hr()?ot.ibi=W.packageName:di()?ot.apn=W.packageName:Ze(I,"operation-not-supported-in-this-environment"),W.displayName&&(ot.appDisplayName=W.displayName),ot.sessionId=he,Bi(I,y,m.type,void 0,null!==(A=m.eventId)&&void 0!==A?A:void 0,ot)})).apply(this,arguments)}function Fd(){return(Fd=(0,f.Z)(function*(I){const{BuildInfo:m}=So(),y={};Hr()?y.iosBundleId=m.packageName:di()?y.androidPackageName=m.packageName:Ze(I,"operation-not-supported-in-this-environment"),yield Oo(I,y)})).apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(I,m,y){const{cordova:A}=So();let W=()=>{};try{yield new Promise((he,ot)=>{let Ot=null;function _n(){var Qn;he();const Gs=null===(Qn=A.plugins.browsertab)||void 0===Qn?void 0:Qn.close;"function"==typeof Gs&&Gs(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function kn(){Ot||(Ot=window.setTimeout(()=>{ot(Xe(I,"redirect-cancelled-by-user"))},2e3))}function Kn(){"visible"===(null==document?void 0:document.visibilityState)&&kn()}m.addPassiveListener(_n),document.addEventListener("resume",kn,!1),di()&&document.addEventListener("visibilitychange",Kn,!1),W=()=>{m.removePassiveListener(_n),document.removeEventListener("resume",kn,!1),document.removeEventListener("visibilitychange",Kn,!1),Ot&&window.clearTimeout(Ot)}})}finally{W()}})).apply(this,arguments)}function id(I){return cu.apply(this,arguments)}function cu(){return(cu=(0,f.Z)(function*(I){const m=la(I),y=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(y)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function la(I){if(Ne(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(I);const m=new ArrayBuffer(I.length),y=new Uint8Array(m);for(let A=0;A<I.length;A++)y[A]=I.charCodeAt(A);return y}I="Browser",(0,me._registerComponent)(new Ae.wA("auth",(m,{options:y})=>{const A=m.getProvider("app").getImmediate(),{apiKey:W,authDomain:he}=A.options;return(ot=>{Ge(W&&!W.includes(":"),"invalid-api-key",{appName:ot.name}),Ge(!(null==he?void 0:he.includes(":")),"argument-error",{appName:ot.name});const Ot={apiKey:W,authDomain:he,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lr(I)},_n=new Yr(ot,Ot);return function(I,m){const y=(null==m?void 0:m.persistence)||[],A=(Array.isArray(y)?y:[y]).map(_e);(null==m?void 0:m.errorMap)&&I._updateErrorMap(m.errorMap),I._initializeWithPersistence(A,null==m?void 0:m.popupRedirectResolver)}(_n,y),_n})(A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,A)=>{m.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new Ae.wA("auth-internal",m=>{const y=Er(m.getProvider("auth").getImmediate());return new Ou(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)(Ju,"0.18.3",void 0),(0,me.registerVersion)(Ju,"0.18.3","esm2017");class Ld extends Ds{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(m)),super.onEvent(m)}initialized(){var m=this;return(0,f.Z)(function*(){yield m.initPromise})()}}function Sf(I){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(I){const m=yield wl()._get(Nu(I));return m&&(yield wl()._remove(Nu(I))),m})).apply(this,arguments)}function Vd(){const I=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const A=Math.floor(Math.random()*m.length);I.push(m.charAt(A))}return I.join("")}function wl(){return _e(eo)}function Nu(I){return qr("authEvent",I.config.apiKey,I.name)}function Xu(I){if(!(null==I?void 0:I.includes("?")))return{};const[m,...y]=I.split("?");return(0,J.zd)(y.join("?"))}function Tc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}function Mu(){var I;return(null===(I=null==self?void 0:self.location)||void 0===I?void 0:I.protocol)||null}function yi(I=(0,J.z$)()){return!("file:"!==Mu()&&"ionic:"!==Mu()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function No(){try{const I=self.localStorage,m=wo();if(I)return I.setItem(m,"1"),I.removeItem(m),!function(I=(0,J.z$)()){return(0,J.w1)()&&11===(null==document?void 0:document.documentMode)||function(I=(0,J.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,J.hl)()}catch(I){return Fu()&&(0,J.hl)()}return!1}function Fu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Lu(){return("http:"===Mu()||"https:"===Mu()||(0,J.ru)()||yi())&&!((0,J.b$)()||(0,J.UG)())&&No()&&!Fu()}function Ic(){return yi()&&"undefined"!=typeof document}function Ji(){return(Ji=(0,f.Z)(function*(){return!!Ic()&&new Promise(I=>{const m=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),I(!0)})})})).apply(this,arguments)}const ua={LOCAL:"local",NONE:"none",SESSION:"session"},Sc=Ge,Tl="persistence";function Hd(I){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,f.Z)(function*(I){yield I._initializationPromise;const m=Ac(),y=qr(Tl,I.config.apiKey,I.name);(null==m?void 0:m.sessionStorage)&&m.sessionStorage.setItem(y,I._getPersistence())})).apply(this,arguments)}function Ac(){return"undefined"!=typeof window?window:null}const Op=Ge;class Fl{constructor(){this.browserResolver=_e(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gi,this._completeRedirectFn=hn}_openPopup(m,y,A,W){var he=this;return(0,f.Z)(function*(){var ot;Ne(null===(ot=he.eventManagers[m._key()])||void 0===ot?void 0:ot.manager,"_initialize() not called before _openPopup()");const Ot=Bi(m,y,A,jt(),W);return function(I,m,y,A=500,W=600){const he=Math.max((window.screen.availHeight-W)/2,0).toString(),ot=Math.max((window.screen.availWidth-A)/2,0).toString();let Ot="";const _n=Object.assign(Object.assign({},Ya),{width:A.toString(),height:W.toString(),top:he,left:ot}),kn=(0,J.z$)().toLowerCase();y&&(Ot=ji(kn)?"_blank":y),rr(kn)&&(m=m||"http://localhost",_n.scrollbars="yes");const Kn=Object.entries(_n).reduce((Gs,[Da,fo])=>`${Gs}${Da}=${fo},`,"");if(function(I=(0,J.z$)()){var m;return Hr(I)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(kn)&&"_self"!==Ot)return function(I,m){const y=document.createElement("a");y.href=I,y.target=m;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(A)}(m||"",Ot),new Sh(null);const Qn=window.open(m||"",Ot,Kn);Ge(Qn,I,"popup-blocked");try{Qn.focus()}catch(Gs){}return new Sh(Qn)}(m,Ot,wo())})()}_openRedirect(m,y,A,W){var he=this;return(0,f.Z)(function*(){return yield he._originValidation(m),I=Bi(m,y,A,jt(),W),rs().location.href=I,new Promise(()=>{});var I})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:W,promise:he}=this.eventManagers[y];return W?Promise.resolve(W):(Ne(he,"If manager is not set, promise should be"),he)}const A=this.initAndGetManager(m);return this.eventManagers[y]={promise:A},A}initAndGetManager(m){var y=this;return(0,f.Z)(function*(){const A=yield function(I){return co.apply(this,arguments)}(m),W=new Ds(m);return A.register("authEvent",he=>(Ge(null==he?void 0:he.authEvent,m,"invalid-auth-event"),{status:W.onEvent(he.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:W},y.iframes[m._key()]=A,W})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Qu,{type:Qu},W=>{var he;const ot=null===(he=null==W?void 0:W[0])||void 0===he?void 0:he[Qu];void 0!==ot&&y(!!ot),Ze(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(I){return Th.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return ei()||ki()||Hr()}}),this.cordovaResolver=_e(class{constructor(){this._redirectPersistence=Gi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hn}_initialize(m){var y=this;return(0,f.Z)(function*(){const A=m._key();let W=y.eventManagers.get(A);return W||(W=new Ld(m),y.eventManagers.set(A,W),y.attachCallbackListeners(m,W)),W})()}_openPopup(m){Ze(m,"operation-not-supported-in-this-environment")}_openRedirect(m,y,A,W){var he=this;return(0,f.Z)(function*(){!function(I){var m,y,A,W,he,ot,Ot,_n,kn,Kn;const Qn=So();Ge("function"==typeof(null===(m=null==Qn?void 0:Qn.universalLinks)||void 0===m?void 0:m.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ge(void 0!==(null===(y=null==Qn?void 0:Qn.BuildInfo)||void 0===y?void 0:y.packageName),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ge("function"==typeof(null===(he=null===(W=null===(A=null==Qn?void 0:Qn.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===he?void 0:he.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ge("function"==typeof(null===(_n=null===(Ot=null===(ot=null==Qn?void 0:Qn.cordova)||void 0===ot?void 0:ot.plugins)||void 0===Ot?void 0:Ot.browsertab)||void 0===_n?void 0:_n.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ge("function"==typeof(null===(Kn=null===(kn=null==Qn?void 0:Qn.cordova)||void 0===kn?void 0:kn.InAppBrowser)||void 0===Kn?void 0:Kn.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const ot=yield he._initialize(m);yield ot.initialized(),ot.resetRedirect(),ou.clear(),yield he._originValidation(m);const Ot=function(I,m,y=null){return{type:m,eventId:y,urlResponse:null,sessionId:Vd(),postBody:null,tenantId:I.tenantId,error:Xe(I,"no-auth-event")}}(m,A,W);yield function(I,m){return wl()._set(Nu(I),m)}(m,Ot);const _n=yield function(I,m,y){return Zr.apply(this,arguments)}(m,Ot,y),kn=yield function(I){const{cordova:m}=So();return new Promise(y=>{m.plugins.browsertab.isAvailable(A=>{let W=null;A?m.plugins.browsertab.openUrl(I):W=m.InAppBrowser.open(I,function(I=(0,J.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),y(W)})})}(_n);return function(I,m,y){return xs.apply(this,arguments)}(m,ot,kn)})()}_isIframeWebStorageSupported(m,y){throw new Error("Method not implemented.")}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(I){return Fd.apply(this,arguments)}(m)),this.originValidationPromises[y]}attachCallbackListeners(m,y){const{universalLinks:A,handleOpenURL:W,BuildInfo:he}=So(),ot=setTimeout((0,f.Z)(function*(){yield Sf(m),y.onEvent(Tc())}),500),Ot=function(){var Kn=(0,f.Z)(function*(Qn){clearTimeout(ot);const Gs=yield Sf(m);let Da=null;Gs&&(null==Qn?void 0:Qn.url)&&(Da=function(I,m){var y,A;const W=function(I){const m=Xu(I),y=m.link?decodeURIComponent(m.link):void 0,A=Xu(y).link,W=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Xu(W).link||W||A||y||I}(m);if(W.includes("/__/auth/callback")){const he=Xu(W),ot=he.firebaseError?function(I){try{return JSON.parse(I)}catch(m){return null}}(decodeURIComponent(he.firebaseError)):null,Ot=null===(A=null===(y=null==ot?void 0:ot.code)||void 0===y?void 0:y.split("auth/"))||void 0===A?void 0:A[1],_n=Ot?Xe(Ot):null;return _n?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:_n,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(Gs,Qn.url)),y.onEvent(Da||Tc())});return function(Gs){return Kn.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,Ot);const _n=W,kn=`${he.packageName.toLowerCase()}://`;So().handleOpenURL=function(){var Kn=(0,f.Z)(function*(Qn){if(Qn.toLowerCase().startsWith(kn)&&Ot({url:Qn}),"function"==typeof _n)try{_n(Qn)}catch(Gs){console.error(Gs)}});return function(Qn){return Kn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gi,this._completeRedirectFn=hn}_initialize(m){var y=this;return(0,f.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,y,A,W){var he=this;return(0,f.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openPopup(m,y,A,W)})()}_openRedirect(m,y,A,W){var he=this;return(0,f.Z)(function*(){return yield he.selectUnderlyingResolver(),he.assertedUnderlyingResolver._openRedirect(m,y,A,W)})()}_isIframeWebStorageSupported(m,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,y)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Ic()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Op(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,f.Z)(function*(){if(m.underlyingResolver)return;const y=yield function(){return Ji.apply(this,arguments)}();m.underlyingResolver=y?m.cordovaResolver:m.browserResolver})()}}function Rf(I){return I.unwrap()}function Wo(I){return Uu(I)}function Uu(I){const{_tokenResponse:m}=I instanceof J.ZR?I.customData:I;if(!m)return null;if(!(I instanceof J.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Ar.credentialFromResult(I);const y=m.providerId;if(!y||"password"===y)return null;let A;switch(y){case"google.com":A=Xo;break;case"facebook.com":A=Ns;break;case"github.com":A=Bo;break;case"twitter.com":A=Hi;break;default:const{oauthIdToken:W,oauthAccessToken:he,oauthTokenSecret:ot,pendingToken:Ot,nonce:_n}=m;return he||ot||W||Ot?Ot?y.startsWith("saml.")?fs._create(y,Ot):fi._fromParams({providerId:y,signInMethod:y,pendingToken:Ot,idToken:W,accessToken:he}):new Pi(y).credential({idToken:W,accessToken:he,rawNonce:_n}):null}return I instanceof J.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function Hs(I,m){return m.catch(y=>{throw y instanceof J.ZR&&function(I,m){var y;const A=null===(y=m.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===m.code)m.resolver=new Wd(I,function(I,m){var y;const A=(0,J.m9)(I),W=m;return Ge(m.operationType,A,"argument-error"),Ge(null===(y=W.serverResponse)||void 0===y?void 0:y.mfaPendingCredential,A,"argument-error"),Eo._fromError(A,W)}(I,m));else if(A){const W=Uu(m),he=m;W&&(he.credential=W,he.tenantId=A.tenantId||void 0,he.email=A.email||void 0,he.phoneNumber=A.phoneNumber||void 0)}}(I,y),y}).then(y=>{const W=y.user;return{operationType:y.operationType,credential:Wo(y),additionalUserInfo:La(y),user:Ll.getOrCreate(W)}})}function ho(I,m){return hu.apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(I,m){const y=yield m;return{verificationId:y.verificationId,confirm:A=>Hs(I,y.confirm(A))}})).apply(this,arguments)}class Wd{constructor(m,y){this.resolver=y,this.auth=function(I){return I.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Hs(Rf(this.auth),this.resolver.resolveSignIn(m))}}class Ll{constructor(m){this._delegate=m,this.multiFactor=function(I){const m=(0,J.m9)(I);return Au.has(m)||Au.set(m,cl._fromUser(m)),Au.get(m)}(m)}static getOrCreate(m){return Ll.USER_MAP.has(m)||Ll.USER_MAP.set(m,new Ll(m)),Ll.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var y=this;return(0,f.Z)(function*(){return Hs(y.auth,X(y._delegate,m))})()}linkWithPhoneNumber(m,y){var A=this;return(0,f.Z)(function*(){return ho(A.auth,function(I,m,y){return we.apply(this,arguments)}(A._delegate,m,y))})()}linkWithPopup(m){var y=this;return(0,f.Z)(function*(){return Hs(y.auth,function(I,m,y){return Ga.apply(this,arguments)}(y._delegate,m,Fl))})()}linkWithRedirect(m){var y=this;return(0,f.Z)(function*(){return yield Hd(Er(y.auth)),function(I,m,y){return function(I,m,y){return Rt.apply(this,arguments)}(I,m,y)}(y._delegate,m,Fl)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var y=this;return(0,f.Z)(function*(){return Hs(y.auth,Ft(y._delegate,m))})()}reauthenticateWithPhoneNumber(m,y){return ho(this.auth,function(I,m,y){return Lt.apply(this,arguments)}(this._delegate,m,y))}reauthenticateWithPopup(m){return Hs(this.auth,function(I,m,y){return uo.apply(this,arguments)}(this._delegate,m,Fl))}reauthenticateWithRedirect(m){var y=this;return(0,f.Z)(function*(){return yield Hd(Er(y.auth)),function(I,m,y){return function(I,m,y){return oe.apply(this,arguments)}(I,m,y)}(y._delegate,m,Fl)})()}sendEmailVerification(m){return function(I,m){return Js.apply(this,arguments)}(this._delegate,m)}unlink(m){var y=this;return(0,f.Z)(function*(){return yield function(I,m){return Si.apply(this,arguments)}(y._delegate,m),y})()}updateEmail(m){return function(I,m){return ul((0,J.m9)(I),m,null)}(this._delegate,m)}updatePassword(m){return function(I,m){return ul((0,J.m9)(I),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function(I,m){return Jr.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function(I,m){return na.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,y){return function(I,m,y){return yo.apply(this,arguments)}(this._delegate,m,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ll.USER_MAP=new WeakMap;const Zs=Ge;let Ul=(()=>{class I{constructor(y,A){if(this.app=y,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=y.options;Zs(W,"invalid-api-key",{appName:y.name});let he=[Rn];if("undefined"!=typeof window){he=function(I,m){const y=Ac();if(!(null==y?void 0:y.sessionStorage))return[];const A=qr(Tl,I,m);switch(y.sessionStorage.getItem(A)){case ua.NONE:return[Rn];case ua.LOCAL:return[zt,Gi];case ua.SESSION:return[Gi];default:return[]}}(W,y.name);for(const Ot of[zt,eo,Gi])he.includes(Ot)||he.push(Ot)}Zs(W,"invalid-api-key",{appName:y.name});const ot="undefined"!=typeof window?Fl:void 0;this._delegate=A.initialize({options:{persistence:he,popupRedirectResolver:ot}}),this._delegate._updateErrorMap(je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ll.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,A){!function(I,m,y){const A=Er(I);Ge(A._canInitEmulator,A,"emulator-config-failed"),Ge(/^https?:\/\//.test(m),A,"invalid-emulator-scheme");const W=!!(null==y?void 0:y.disableWarnings),he=On(m),{host:ot,port:Ot}=function(I){const m=On(I),y=/(\/\/)?([^?#/]+)/.exec(I.substr(m.length));if(!y)return{host:"",port:null};const A=y[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(A);if(W){const he=W[1];return{host:he,port:jn(A.substr(he.length+1))}}{const[he,ot]=A.split(":");return{host:he,port:jn(ot)}}}(m);A.config.emulator={url:`${he}//${ot}${null===Ot?"":`:${Ot}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:ot,port:Ot,protocol:he.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function(){function I(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,y,A)}applyActionCode(y){return function(I,m){return Wt.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return en(this._delegate,y)}confirmPasswordReset(y,A){return function(I,m,y){return We.apply(this,arguments)}(this._delegate,y,A)}createUserWithEmailAndPassword(y,A){var W=this;return(0,f.Z)(function*(){return Hs(W._delegate,function(I,m,y){return Mr.apply(this,arguments)}(W._delegate,y,A))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function(I,m){return gs.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function(I,m){const y=hs.parseLink(m);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,f.Z)(function*(){Zs(Lu(),y._delegate,"operation-not-supported-in-this-environment");const A=yield function(I,m){return An.apply(this,arguments)}(y._delegate,Fl);return A?Hs(y._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function(I,m){Er(I)._logFramework(m)}(this._delegate,y)}onAuthStateChanged(y,A,W){const{next:he,error:ot,complete:Ot}=Oh(y,A,W);return this._delegate.onAuthStateChanged(he,ot,Ot)}onIdTokenChanged(y,A,W){const{next:he,error:ot,complete:Ot}=Oh(y,A,W);return this._delegate.onIdTokenChanged(he,ot,Ot)}sendSignInLinkToEmail(y,A){return function(I,m,y){return Bt.apply(this,arguments)}(this._delegate,y,A)}sendPasswordResetEmail(y,A){return function(I,m,y){return pe.apply(this,arguments)}(this._delegate,y,A||void 0)}setPersistence(y){var A=this;return(0,f.Z)(function*(){let W;switch(function(I,m){Sc(Object.values(ua).includes(m),I,"invalid-persistence-type"),(0,J.b$)()?Sc(m!==ua.SESSION,I,"unsupported-persistence-type"):(0,J.UG)()?Sc(m===ua.NONE,I,"unsupported-persistence-type"):Fu()?Sc(m===ua.NONE||m===ua.LOCAL&&(0,J.hl)(),I,"unsupported-persistence-type"):Sc(m===ua.NONE||No(),I,"unsupported-persistence-type")}(A._delegate,y),y){case ua.SESSION:W=Gi;break;case ua.LOCAL:W=(yield _e(zt)._isAvailable())?zt:eo;break;case ua.NONE:W=Rn;break;default:return Ze("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Hs(this._delegate,function(I){return Zi.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Hs(this._delegate,k(this._delegate,y))}signInWithCustomToken(y){return Hs(this._delegate,function(I,m){return Ur.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,A){return Hs(this._delegate,function(I,m,y){return k((0,J.m9)(I),Ks.credential(m,y))}(this._delegate,y,A))}signInWithEmailLink(y,A){return Hs(this._delegate,function(I,m,y){return Fr.apply(this,arguments)}(this._delegate,y,A))}signInWithPhoneNumber(y,A){return ho(this._delegate,function(I,m,y){return q.apply(this,arguments)}(this._delegate,y,A))}signInWithPopup(y){var A=this;return(0,f.Z)(function*(){return Zs(Lu(),A._delegate,"operation-not-supported-in-this-environment"),Hs(A._delegate,function(I,m,y){return yl.apply(this,arguments)}(A._delegate,y,Fl))})()}signInWithRedirect(y){var A=this;return(0,f.Z)(function*(){return Zs(Lu(),A._delegate,"operation-not-supported-in-this-environment"),yield Hd(A._delegate),function(I,m,y){return function(I,m,y){return Jc.apply(this,arguments)}(I,m,y)}(A._delegate,y,Fl)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function(I,m){return mr.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=ua,I})();function Oh(I,m,y){let A=I;"function"!=typeof I&&({next:A,error:m,complete:y}=I);const W=A;return{next:ot=>W(ot&&Ll.getOrCreate(ot)),error:m,complete:y}}class ca{constructor(){this.providerId="phone",this._delegate=new Ar(Rf(v.Z.auth()))}static credential(m,y){return Ar.credential(m,y)}verifyPhoneNumber(m,y){return this._delegate.verifyPhoneNumber(m,y)}unwrap(){return this._delegate}}ca.PHONE_SIGN_IN_METHOD=Ar.PHONE_SIGN_IN_METHOD,ca.PROVIDER_ID=Ar.PROVIDER_ID;const zd=Ge;class da{constructor(m,y,A=v.Z.app()){var W;zd(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new P(m,y,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(I){I.INTERNAL.registerComponent(new Ae.wA("auth-compat",m=>{const y=m.getProvider("app-compat").getImmediate(),A=m.getProvider("auth");return new Ul(y,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ks,FacebookAuthProvider:Ns,GithubAuthProvider:Bo,GoogleAuthProvider:Xo,OAuthProvider:Pi,PhoneAuthProvider:ca,PhoneMultiFactorGenerator:kd,RecaptchaVerifier:da,TwitterAuthProvider:Hi,Auth:Ul,AuthCredential:st,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.1.6")}(v.Z)},6676:function(Vt,Ie){!function(N){"use strict";function f(Ye){return Array.prototype.slice.call(Ye)}function v(Ye){return new Promise(function(Qe,it){Ye.onsuccess=function(){Qe(Ye.result)},Ye.onerror=function(){it(Ye.error)}})}function J(Ye,Qe,it){var nt,Ze=new Promise(function(Xe,ye){v(nt=Ye[Qe].apply(Ye,it)).then(Xe,ye)});return Ze.request=nt,Ze}function me(Ye,Qe,it){var nt=J(Ye,Qe,it);return nt.then(function(Ze){if(Ze)return new K(Ze,nt.request)})}function le(Ye,Qe,it){it.forEach(function(nt){Object.defineProperty(Ye.prototype,nt,{get:function(){return this[Qe][nt]},set:function(Ze){this[Qe][nt]=Ze}})})}function ue(Ye,Qe,it,nt){nt.forEach(function(Ze){Ze in it.prototype&&(Ye.prototype[Ze]=function(){return J(this[Qe],Ze,arguments)})})}function Ae(Ye,Qe,it,nt){nt.forEach(function(Ze){Ze in it.prototype&&(Ye.prototype[Ze]=function(){return this[Qe][Ze].apply(this[Qe],arguments)})})}function Me(Ye,Qe,it,nt){nt.forEach(function(Ze){Ze in it.prototype&&(Ye.prototype[Ze]=function(){return me(this[Qe],Ze,arguments)})})}function ge(Ye){this._index=Ye}function K(Ye,Qe){this._cursor=Ye,this._request=Qe}function Z(Ye){this._store=Ye}function te(Ye){this._tx=Ye,this.complete=new Promise(function(Qe,it){Ye.oncomplete=function(){Qe()},Ye.onerror=function(){it(Ye.error)},Ye.onabort=function(){it(Ye.error)}})}function de(Ye,Qe,it){this._db=Ye,this.oldVersion=Qe,this.transaction=new te(it)}function be(Ye){this._db=Ye}le(ge,"_index",["name","keyPath","multiEntry","unique"]),ue(ge,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Me(ge,"_index",IDBIndex,["openCursor","openKeyCursor"]),le(K,"_cursor",["direction","key","primaryKey","value"]),ue(K,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Ye){Ye in IDBCursor.prototype&&(K.prototype[Ye]=function(){var Qe=this,it=arguments;return Promise.resolve().then(function(){return Qe._cursor[Ye].apply(Qe._cursor,it),v(Qe._request).then(function(nt){if(nt)return new K(nt,Qe._request)})})})}),Z.prototype.createIndex=function(){return new ge(this._store.createIndex.apply(this._store,arguments))},Z.prototype.index=function(){return new ge(this._store.index.apply(this._store,arguments))},le(Z,"_store",["name","keyPath","indexNames","autoIncrement"]),ue(Z,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Me(Z,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Ae(Z,"_store",IDBObjectStore,["deleteIndex"]),te.prototype.objectStore=function(){return new Z(this._tx.objectStore.apply(this._tx,arguments))},le(te,"_tx",["objectStoreNames","mode"]),Ae(te,"_tx",IDBTransaction,["abort"]),de.prototype.createObjectStore=function(){return new Z(this._db.createObjectStore.apply(this._db,arguments))},le(de,"_db",["name","version","objectStoreNames"]),Ae(de,"_db",IDBDatabase,["deleteObjectStore","close"]),be.prototype.transaction=function(){return new te(this._db.transaction.apply(this._db,arguments))},le(be,"_db",["name","version","objectStoreNames"]),Ae(be,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Ye){[Z,ge].forEach(function(Qe){Ye in Qe.prototype&&(Qe.prototype[Ye.replace("open","iterate")]=function(){var it=f(arguments),nt=it[it.length-1],Ze=this._store||this._index,Xe=Ze[Ye].apply(Ze,it.slice(0,-1));Xe.onsuccess=function(){nt(Xe.result)}})})}),[ge,Z].forEach(function(Ye){Ye.prototype.getAll||(Ye.prototype.getAll=function(Qe,it){var nt=this,Ze=[];return new Promise(function(Xe){nt.iterateCursor(Qe,function(ye){ye?(Ze.push(ye.value),void 0===it||Ze.length!=it?ye.continue():Xe(Ze)):Xe(Ze)})})})}),N.openDb=function(Ye,Qe,it){var nt=J(indexedDB,"open",[Ye,Qe]),Ze=nt.request;return Ze&&(Ze.onupgradeneeded=function(Xe){it&&it(new de(Ze.result,Xe.oldVersion,Ze.transaction))}),nt.then(function(Xe){return new be(Xe)})},N.deleteDb=function(Ye){return J(indexedDB,"deleteDatabase",[Ye])},Object.defineProperty(N,"__esModule",{value:!0})}(Ie)},7827:(Vt,Ie,N)=>{"use strict";function le(ke,rt,Se,et){var dn,It=arguments.length,Ct=It<3?rt:null===et?et=Object.getOwnPropertyDescriptor(rt,Se):et;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ct=Reflect.decorate(ke,rt,Se,et);else for(var En=ke.length-1;En>=0;En--)(dn=ke[En])&&(Ct=(It<3?dn(Ct):It>3?dn(rt,Se,Ct):dn(rt,Se))||Ct);return It>3&&Ct&&Object.defineProperty(rt,Se,Ct),Ct}N.d(Ie,{OP:()=>Dt,ZQ:()=>bt});var De=N(639),Ge=N(665),ce=N(8583);function Ne(ke,rt){if(1&ke&&(De.TgZ(0,"span"),De._uU(1),De.qZA()),2&ke){const Se=De.oxw();De.xp6(1),De.Oqu(Se._placeholder)}}function Re(ke,rt){if(1&ke){const Se=De.EpF();De.TgZ(0,"span",14),De.TgZ(1,"span"),De._uU(2),De.qZA(),De.TgZ(3,"a",15),De.NdJ("click",function(It){const dn=De.CHM(Se).$implicit;return De.oxw().onItemClick(It,dn)}),De._uU(4,"x"),De.qZA(),De.qZA()}if(2&ke){const Se=rt.$implicit,et=rt.index,It=De.oxw();De.Q6J("hidden",et>It._settings.itemsShowLimit-1),De.xp6(2),De.Oqu(Se.text)}}function _e(ke,rt){if(1&ke&&(De.TgZ(0,"span",16),De._uU(1),De.qZA()),2&ke){const Se=De.oxw();De.xp6(1),De.hij("+",Se.itemShowRemaining(),"")}}function ct(ke,rt){if(1&ke){const Se=De.EpF();De.TgZ(0,"li",17),De.NdJ("click",function(){return De.CHM(Se),De.oxw().toggleSelectAll()}),De._UZ(1,"input",18),De.TgZ(2,"div"),De._uU(3),De.qZA(),De.qZA()}if(2&ke){const Se=De.oxw();De.xp6(1),De.Q6J("checked",Se.isAllItemsSelected())("disabled",Se.disabled||Se.isLimitSelectionReached()),De.xp6(2),De.Oqu(Se.isAllItemsSelected()?Se._settings.unSelectAllText:Se._settings.selectAllText)}}function Te(ke,rt){if(1&ke){const Se=De.EpF();De.TgZ(0,"li",19),De.TgZ(1,"input",20),De.NdJ("ngModelChange",function(It){return De.CHM(Se),De.oxw().filter.text=It})("ngModelChange",function(It){return De.CHM(Se),De.oxw().onFilterTextChange(It)}),De.qZA(),De.qZA()}if(2&ke){const Se=De.oxw();De.xp6(1),De.Q6J("readOnly",Se.disabled)("placeholder",Se._settings.searchPlaceholderText)("ngModel",Se.filter.text)}}function jt(ke,rt){if(1&ke){const Se=De.EpF();De.TgZ(0,"li",21),De.NdJ("click",function(It){const dn=De.CHM(Se).$implicit;return De.oxw().onItemClick(It,dn)}),De._UZ(1,"input",22),De.TgZ(2,"div"),De._uU(3),De.qZA(),De.qZA()}if(2&ke){const Se=rt.$implicit,et=De.oxw();De.xp6(1),De.Q6J("checked",et.isSelected(Se))("disabled",et.disabled||et.isLimitSelectionReached()&&!et.isSelected(Se)||Se.isDisabled),De.uIk("aria-label",Se.text),De.xp6(2),De.Oqu(Se.text)}}function mn(ke,rt){if(1&ke&&(De.TgZ(0,"li",23),De.TgZ(1,"h5"),De._uU(2),De.qZA(),De.qZA()),2&ke){const Se=De.oxw();De.xp6(2),De.Oqu(Se._settings.noDataAvailablePlaceholderText)}}const Bn=function(ke){return{"dropdown-multiselect--active":ke}};class Zt{constructor(rt){("string"==typeof rt||"number"==typeof rt)&&(this.id=this.text=rt,this.isDisabled=!1),"object"==typeof rt&&(this.id=rt.id,this.text=rt.text,this.isDisabled=rt.isDisabled)}}let xn=(()=>{let ke=class{transform(Se,et){return Se&&et?Se.filter(It=>this.applyFilter(It,et)):Se}applyFilter(Se,et){return"string"==typeof Se.text&&"string"==typeof et.text?!(et.text&&Se.text&&-1===Se.text.toLowerCase().indexOf(et.text.toLowerCase())):!(et.text&&Se.text&&-1===Se.text.toString().toLowerCase().indexOf(et.text.toString().toLowerCase()))}};return ke.\u0275fac=function(Se){return new(Se||ke)},ke.\u0275pipe=De.Yjl({name:"multiSelectFilter",type:ke,pure:!1}),ke})();const pr={provide:Ge.JU,useExisting:(0,De.Gpc)(()=>Dt),multi:!0},vn=()=>{};let Dt=(()=>{let ke=class{constructor(Se){this.listFilterPipe=Se,this._data=[],this.selectedItems=[],this.isDropdownOpen=!0,this._placeholder="Select",this._sourceDataType=null,this._sourceDataFields=[],this.filter=new Zt(this.data),this.defaultSettings={singleSelection:!1,idField:"id",textField:"text",disabledField:"isDisabled",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,allowRemoteDataSearch:!1},this.disabled=!1,this.onFilterChange=new De.vpe,this.onDropDownClose=new De.vpe,this.onSelect=new De.vpe,this.onDeSelect=new De.vpe,this.onSelectAll=new De.vpe,this.onDeSelectAll=new De.vpe,this.onTouchedCallback=vn,this.onChangeCallback=vn}set placeholder(Se){this._placeholder=Se||"Select"}set settings(Se){this._settings=Se?Object.assign(this.defaultSettings,Se):Object.assign(this.defaultSettings)}set data(Se){if(Se){const et=Se[0];this._sourceDataType=typeof et,this._sourceDataFields=this.getFields(et),this._data=Se.map(It=>new Zt("string"==typeof It||"number"==typeof It?It:{id:It[this._settings.idField],text:It[this._settings.textField],isDisabled:It[this._settings.disabledField]}))}else this._data=[]}onFilterTextChange(Se){this.onFilterChange.emit(Se)}onItemClick(Se,et){if(this.disabled||et.isDisabled)return!1;const It=this.isSelected(et),Ct=-1===this._settings.limitSelection||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;It?this.removeSelected(et):Ct&&this.addSelected(et),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()}writeValue(Se){if(null!=Se&&Se.length>0)if(this._settings.singleSelection)try{if(Se.length>=1){const et=Se[0];this.selectedItems=[new Zt("string"==typeof et||"number"==typeof et?et:{id:et[this._settings.idField],text:et[this._settings.textField],isDisabled:et[this._settings.disabledField]})]}}catch(et){}else{const et=Se.map(It=>new Zt("string"==typeof It||"number"==typeof It?It:{id:It[this._settings.idField],text:It[this._settings.textField],isDisabled:It[this._settings.disabledField]}));this.selectedItems=this._settings.limitSelection>0?et.splice(0,this._settings.limitSelection):et}else this.selectedItems=[];this.onChangeCallback(Se)}registerOnChange(Se){this.onChangeCallback=Se}registerOnTouched(Se){this.onTouchedCallback=Se}onTouched(){this.closeDropdown(),this.onTouchedCallback()}trackByFn(Se,et){return et.id}isSelected(Se){let et=!1;return this.selectedItems.forEach(It=>{Se.id===It.id&&(et=!0)}),et}isLimitSelectionReached(){return this._settings.limitSelection===this.selectedItems.length}isAllItemsSelected(){let Se=this.listFilterPipe.transform(this._data,this.filter);const et=Se.filter(It=>It.isDisabled).length;return!((!this.data||0===this.data.length)&&this._settings.allowRemoteDataSearch)&&Se.length===this.selectedItems.length+et}showButton(){return!(this._settings.singleSelection||this._settings.limitSelection>0)}itemShowRemaining(){return this.selectedItems.length-this._settings.itemsShowLimit}addSelected(Se){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(Se)):this.selectedItems.push(Se),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(Se))}removeSelected(Se){this.selectedItems.forEach(et=>{Se.id===et.id&&this.selectedItems.splice(this.selectedItems.indexOf(et),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(Se))}emittedValue(Se){const et=[];if(Array.isArray(Se))Se.map(It=>{et.push(this.objectify(It))});else if(Se)return this.objectify(Se);return et}objectify(Se){if("object"===this._sourceDataType){const et={};return et[this._settings.idField]=Se.id,et[this._settings.textField]=Se.text,this._sourceDataFields.includes(this._settings.disabledField)&&(et[this._settings.disabledField]=Se.isDisabled),et}return"number"===this._sourceDataType?Number(Se.id):Se.text}toggleDropdown(Se){Se.preventDefault(),(!this.disabled||!this._settings.singleSelection)&&(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen||this.onDropDownClose.emit())}closeDropdown(){this._settings.defaultOpen=!1,this._settings.clearSearchFilter&&(this.filter.text=""),this.onDropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this.listFilterPipe.transform(this._data,this.filter).filter(Se=>!Se.isDisabled).slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}getFields(Se){const et=[];if("object"!=typeof Se)return et;for(const It in Se)et.push(It);return et}};return ke.\u0275fac=function(Se){return new(Se||ke)(De.Y36(xn))},ke.\u0275cmp=De.Xpm({type:ke,selectors:[["ng-multiselect-dropdown"]],hostBindings:function(Se,et){1&Se&&De.NdJ("blur",function(){return et.onTouched()})},inputs:{disabled:"disabled",placeholder:"placeholder",settings:"settings",data:"data"},outputs:{onFilterChange:"onFilterChange",onDropDownClose:"onDropDownClose",onSelect:"onSelect",onDeSelect:"onDeSelect",onSelectAll:"onSelectAll",onDeSelectAll:"onDeSelectAll"},features:[De._Bn([pr])],decls:16,vars:19,consts:[["tabindex","0",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],[4,"ngIf"],["class","selected-item",3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px",3,"ngClass"],["style","padding-right: 15px;",4,"ngIf"],[1,"dropdown-multiselect__caret"],[1,"dropdown-list",3,"hidden"],[1,"item1"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc;padding:10px",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],[1,"item2"],["class","multiselect-item-checkbox",3,"click",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"selected-item",3,"hidden"],[2,"padding-left","2px","color","white",3,"click"],[2,"padding-right","15px"],[1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc","padding","10px",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"readOnly","placeholder","ngModel","ngModelChange"],[1,"multiselect-item-checkbox",3,"click"],["type","checkbox",3,"checked","disabled"],[1,"no-data"]],template:function(Se,et){1&Se&&(De.TgZ(0,"div",0),De.NdJ("blur",function(){return et.onTouched()})("clickOutside",function(){return et.closeDropdown()}),De.TgZ(1,"div"),De.TgZ(2,"span",1),De.NdJ("click",function(Ct){return et.toggleDropdown(Ct)}),De.YNc(3,Ne,2,1,"span",2),De.YNc(4,Re,5,2,"span",3),De.TgZ(5,"span",4),De.YNc(6,_e,2,1,"span",5),De._UZ(7,"span",6),De.qZA(),De.qZA(),De.qZA(),De.TgZ(8,"div",7),De.TgZ(9,"ul",8),De.YNc(10,ct,4,3,"li",9),De.YNc(11,Te,2,3,"li",10),De.qZA(),De.TgZ(12,"ul",11),De.YNc(13,jt,4,4,"li",12),De.ALo(14,"multiSelectFilter"),De.YNc(15,mn,3,1,"li",13),De.qZA(),De.qZA(),De.qZA()),2&Se&&(De.xp6(1),De.ekj("disabled",et.disabled),De.xp6(2),De.Q6J("ngIf",0==et.selectedItems.length),De.xp6(1),De.Q6J("ngForOf",et.selectedItems)("ngForTrackBy",et.trackByFn),De.xp6(1),De.Q6J("ngClass",De.VKq(17,Bn,et._settings.defaultOpen)),De.xp6(1),De.Q6J("ngIf",et.itemShowRemaining()>0),De.xp6(2),De.Q6J("hidden",!et._settings.defaultOpen),De.xp6(2),De.Q6J("ngIf",(et._data.length>0||et._settings.allowRemoteDataSearch)&&!et._settings.singleSelection&&et._settings.enableCheckAll&&-1===et._settings.limitSelection),De.xp6(1),De.Q6J("ngIf",(et._data.length>0||et._settings.allowRemoteDataSearch)&&et._settings.allowSearchFilter),De.xp6(1),De.Udp("max-height",et._settings.maxHeight+"px"),De.xp6(1),De.Q6J("ngForOf",De.xi3(14,14,et._data,et.filter)),De.xp6(2),De.Q6J("ngIf",0==et._data.length&&!et._settings.allowRemoteDataSearch))},directives:function(){return[at,ce.O5,ce.sg,ce.mk,Ge.Fj,Ge.JJ,Ge.On]},pipes:function(){return[xn]},styles:['.multiselect-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left;display:flex;max-width:100px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]:hover{box-shadow:1px 1px #959595}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{line-height:16px;display:block;position:absolute;box-sizing:border-box;width:40px;height:38px;right:1px;top:0;padding:4px 8px;margin:0;text-decoration:none;text-align:center;cursor:pointer;transition:transform .2s}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]:before{position:relative;right:0;top:65%;color:#999;margin-top:4px;border-style:solid;border-width:8px 8px 0;border-color:#999 transparent;content:""}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect--active[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{transform:rotateZ(180deg)}.multiselect-dropdown[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#eceeef}.dropdown-list[_ngcontent-%COMP%]{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.dropdown-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;cursor:pointer;text-align:left}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;position:relative;padding:10px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;width:100%;padding:0 0 0 26px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.multiselect-item-checkbox[_ngcontent-%COMP%]:hover{background-color:#e4e3e3}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus + div[_ngcontent-%COMP%]:before, .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%]:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:active + div[_ngcontent-%COMP%]:before{transition-duration:0s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;transition:.4s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{box-sizing:content-box;content:"";position:absolute;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out;background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;-o-border-image:none;border-image:none;transform:rotate(-45deg) scale(0)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + div[_ngcontent-%COMP%]:before{border-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:focus + div[_ngcontent-%COMP%]:before   .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:hover + div[_ngcontent-%COMP%]:before{background-color:inherit}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:checked + div[_ngcontent-%COMP%]:before{background-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{content:"";transition:transform .2s ease-out;transform:rotate(-45deg) scale(1)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{-webkit-animation:.2s ease-in borderscale;animation:.2s ease-in borderscale;background:#337ab7}@-webkit-keyframes borderscale{50%{box-shadow:0 0 0 2px #337ab7}}@keyframes borderscale{50%{box-shadow:0 0 0 2px #337ab7}}'],changeDetection:0}),le([(0,De.IIB)()],ke.prototype,"placeholder",null),le([(0,De.IIB)()],ke.prototype,"disabled",void 0),le([(0,De.IIB)()],ke.prototype,"settings",null),le([(0,De.IIB)()],ke.prototype,"data",null),le([(0,De.r_U)("onFilterChange")],ke.prototype,"onFilterChange",void 0),le([(0,De.r_U)("onDropDownClose")],ke.prototype,"onDropDownClose",void 0),le([(0,De.r_U)("onSelect")],ke.prototype,"onSelect",void 0),le([(0,De.r_U)("onDeSelect")],ke.prototype,"onDeSelect",void 0),le([(0,De.r_U)("onSelectAll")],ke.prototype,"onSelectAll",void 0),le([(0,De.r_U)("onDeSelectAll")],ke.prototype,"onDeSelectAll",void 0),le([(0,De.L6J)("blur")],ke.prototype,"onTouched",null),ke})(),at=(()=>{let ke=class{constructor(Se){this._elementRef=Se,this.clickOutside=new De.vpe}onClick(Se,et){et&&(this._elementRef.nativeElement.contains(et)||this.clickOutside.emit(Se))}};return ke.\u0275fac=function(Se){return new(Se||ke)(De.Y36(De.SBq))},ke.\u0275dir=De.lG2({type:ke,selectors:[["","clickOutside",""]],hostBindings:function(Se,et){1&Se&&De.NdJ("click",function(Ct){return et.onClick(Ct,Ct.target)},!1,De.evT)},outputs:{clickOutside:"clickOutside"}}),le([(0,De.r_U)()],ke.prototype,"clickOutside",void 0),le([(0,De.L6J)("document:click",["$event","$event.target"])],ke.prototype,"onClick",null),ke})();var Ve;let bt=Ve=class{static forRoot(){return{ngModule:Ve}}};bt.\u0275fac=function(rt){return new(rt||bt)},bt.\u0275mod=De.oAB({type:bt}),bt.\u0275inj=De.cJS({providers:[xn],imports:[[ce.ez,Ge.u5]]})},9344:(Vt,Ie,N)=>{"use strict";N.d(Ie,{Rh:()=>Bn,_W:()=>Te});var f=N(639),v=N(7238),J=N(7709),me=N(9075),le=N(8583);const ue=["toast-component",""];function Ae(Et,Dt){if(1&Et){const at=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(at),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA(),f.qZA()}}function Me(Et,Dt){if(1&Et&&(f.ynx(0),f._uU(1),f.BQk()),2&Et){const at=f.oxw(2);f.xp6(1),f.hij("[",at.duplicatesCount+1,"]")}}function ge(Et,Dt){if(1&Et&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,Me,2,1,"ng-container",4),f.qZA()),2&Et){const at=f.oxw();f.Tol(at.options.titleClass),f.uIk("aria-label",at.title),f.xp6(1),f.hij(" ",at.title," "),f.xp6(1),f.Q6J("ngIf",at.duplicatesCount)}}function K(Et,Dt){if(1&Et&&f._UZ(0,"div",7),2&Et){const at=f.oxw();f.Tol(at.options.messageClass),f.Q6J("innerHTML",at.message,f.oJD)}}function Z(Et,Dt){if(1&Et&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&Et){const at=f.oxw();f.Tol(at.options.messageClass),f.uIk("aria-label",at.message),f.xp6(1),f.hij(" ",at.message," ")}}function te(Et,Dt){if(1&Et&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&Et){const at=f.oxw();f.xp6(1),f.Udp("width",at.width+"%")}}function de(Et,Dt){if(1&Et){const at=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(at),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA(),f.qZA()}}function be(Et,Dt){if(1&Et&&(f.ynx(0),f._uU(1),f.BQk()),2&Et){const at=f.oxw(2);f.xp6(1),f.hij("[",at.duplicatesCount+1,"]")}}function je(Et,Dt){if(1&Et&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,be,2,1,"ng-container",4),f.qZA()),2&Et){const at=f.oxw();f.Tol(at.options.titleClass),f.uIk("aria-label",at.title),f.xp6(1),f.hij(" ",at.title," "),f.xp6(1),f.Q6J("ngIf",at.duplicatesCount)}}function Oe(Et,Dt){if(1&Et&&f._UZ(0,"div",7),2&Et){const at=f.oxw();f.Tol(at.options.messageClass),f.Q6J("innerHTML",at.message,f.oJD)}}function Ye(Et,Dt){if(1&Et&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&Et){const at=f.oxw();f.Tol(at.options.messageClass),f.uIk("aria-label",at.message),f.xp6(1),f.hij(" ",at.message," ")}}function Qe(Et,Dt){if(1&Et&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&Et){const at=f.oxw();f.xp6(1),f.Udp("width",at.width+"%")}}class Ze{constructor(Dt,at,Ve,bt,ke,rt){this.toastId=Dt,this.config=at,this.message=Ve,this.title=bt,this.toastType=ke,this.toastRef=rt,this._onTap=new J.xQ,this._onAction=new J.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(Dt){this._onAction.next(Dt)}onAction(){return this._onAction.asObservable()}}const Xe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},ye=new f.OlP("ToastConfig");class Qt{constructor(Dt,at){this.component=Dt,this.injector=at}attach(Dt,at){return this._attachedHost=Dt,Dt.attach(this,at)}detach(){const Dt=this._attachedHost;if(Dt)return this._attachedHost=void 0,Dt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(Dt){this._attachedHost=Dt}}class Ge extends class{attach(Dt,at){return this._attachedPortal=Dt,this.attachComponentPortal(Dt,at)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(Dt){this._disposeFn=Dt}}{constructor(Dt,at,Ve){super(),this._hostDomElement=Dt,this._componentFactoryResolver=at,this._appRef=Ve}attachComponentPortal(Dt,at){const Ve=this._componentFactoryResolver.resolveComponentFactory(Dt.component);let bt;return bt=Ve.create(Dt.injector),this._appRef.attachView(bt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(bt.hostView),bt.destroy()}),at?this._hostDomElement.insertBefore(this._getComponentRootNode(bt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(bt)),bt}_getComponentRootNode(Dt){return Dt.hostView.rootNodes[0]}}let ce=(()=>{class Et{constructor(at){this._document=at}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const at=this._document.createElement("div");at.classList.add("overlay-container"),this._document.body.appendChild(at),this._containerElement=at}}return Et.\u0275fac=function(at){return new(at||Et)(f.LFG(le.K0))},Et.\u0275prov=f.Yz7({factory:function(){return new Et(f.LFG(le.K0))},token:Et,providedIn:"root"}),Et})();class Ne{constructor(Dt){this._portalHost=Dt}attach(Dt,at=!0){return this._portalHost.attach(Dt,at)}detach(){return this._portalHost.detach()}}let Re=(()=>{class Et{constructor(at,Ve,bt,ke){this._overlayContainer=at,this._componentFactoryResolver=Ve,this._appRef=bt,this._document=ke,this._paneElements=new Map}create(at,Ve){return this._createOverlayRef(this.getPaneElement(at,Ve))}getPaneElement(at="",Ve){return this._paneElements.get(Ve)||this._paneElements.set(Ve,{}),this._paneElements.get(Ve)[at]||(this._paneElements.get(Ve)[at]=this._createPaneElement(at,Ve)),this._paneElements.get(Ve)[at]}_createPaneElement(at,Ve){const bt=this._document.createElement("div");return bt.id="toast-container",bt.classList.add(at),bt.classList.add("toast-container"),Ve?Ve.getContainerElement().appendChild(bt):this._overlayContainer.getContainerElement().appendChild(bt),bt}_createPortalHost(at){return new Ge(at,this._componentFactoryResolver,this._appRef)}_createOverlayRef(at){return new Ne(this._createPortalHost(at))}}return Et.\u0275fac=function(at){return new(at||Et)(f.LFG(ce),f.LFG(f._Vd),f.LFG(f.z2F),f.LFG(le.K0))},Et.\u0275prov=f.Yz7({factory:function(){return new Et(f.LFG(ce),f.LFG(f._Vd),f.LFG(f.z2F),f.LFG(le.K0))},token:Et,providedIn:"root"}),Et})();class _e{constructor(Dt){this._overlayRef=Dt,this.duplicatesCount=0,this._afterClosed=new J.xQ,this._activate=new J.xQ,this._manualClose=new J.xQ,this._resetTimeout=new J.xQ,this._countDuplicate=new J.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(Dt,at){Dt&&this._resetTimeout.next(),at&&this._countDuplicate.next(++this.duplicatesCount)}}class ct{constructor(Dt,at){this._toastPackage=Dt,this._parentInjector=at}get(Dt,at,Ve){return Dt===Ze?this._toastPackage:this._parentInjector.get(Dt,at,Ve)}}let Te=(()=>{class Et{constructor(at,Ve,bt,ke,rt){this.overlay=Ve,this._injector=bt,this.sanitizer=ke,this.ngZone=rt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},at.default),at.config),at.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},at.default.iconClasses),at.config.iconClasses))}show(at,Ve,bt={},ke=""){return this._preBuildNotification(ke,at,Ve,this.applyConfig(bt))}success(at,Ve,bt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",at,Ve,this.applyConfig(bt))}error(at,Ve,bt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",at,Ve,this.applyConfig(bt))}info(at,Ve,bt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",at,Ve,this.applyConfig(bt))}warning(at,Ve,bt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",at,Ve,this.applyConfig(bt))}clear(at){for(const Ve of this.toasts)if(void 0!==at){if(Ve.toastId===at)return void Ve.toastRef.manualClose()}else Ve.toastRef.manualClose()}remove(at){const Ve=this._findToast(at);if(!Ve||(Ve.activeToast.toastRef.close(),this.toasts.splice(Ve.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const bt=this.toasts[this.currentlyActive].toastRef;bt.isInactive()||(this.currentlyActive=this.currentlyActive+1,bt.activate())}return!0}findDuplicate(at="",Ve="",bt,ke){const{includeTitleDuplicates:rt}=this.toastrConfig;for(const Se of this.toasts){const et=rt&&Se.title===at;if((!rt||et)&&Se.message===Ve)return Se.toastRef.onDuplicate(bt,ke),Se}return null}applyConfig(at={}){return Object.assign(Object.assign({},this.toastrConfig),at)}_findToast(at){for(let Ve=0;Ve<this.toasts.length;Ve++)if(this.toasts[Ve].toastId===at)return{index:Ve,activeToast:this.toasts[Ve]};return null}_preBuildNotification(at,Ve,bt,ke){return ke.onActivateTick?this.ngZone.run(()=>this._buildNotification(at,Ve,bt,ke)):this._buildNotification(at,Ve,bt,ke)}_buildNotification(at,Ve,bt,ke){if(!ke.toastComponent)throw new Error("toastComponent required");const rt=this.findDuplicate(bt,Ve,this.toastrConfig.resetTimeoutOnDuplicate&&ke.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&bt||Ve)&&this.toastrConfig.preventDuplicates&&null!==rt)return rt;this.previousToastMessage=Ve;let Se=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Se=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const et=this.overlay.create(ke.positionClass,this.overlayContainer);this.index=this.index+1;let It=Ve;Ve&&ke.enableHtml&&(It=this.sanitizer.sanitize(f.q3G.HTML,Ve));const Ct=new _e(et),dn=new Ze(this.index,ke,It,bt,at,Ct),En=new ct(dn,this._injector),Jn=new Qt(ke.toastComponent,En),gn=et.attach(Jn,this.toastrConfig.newestOnTop);Ct.componentInstance=gn.instance;const qn={toastId:this.index,title:bt||"",message:Ve||"",toastRef:Ct,onShown:Ct.afterActivate(),onHidden:Ct.afterClosed(),onTap:dn.onTap(),onAction:dn.onAction(),portal:gn};return Se||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{qn.toastRef.activate()})),this.toasts.push(qn),qn}}return Et.\u0275fac=function(at){return new(at||Et)(f.LFG(ye),f.LFG(Re),f.LFG(f.zs3),f.LFG(me.H7),f.LFG(f.R0b))},Et.\u0275prov=f.Yz7({factory:function(){return new Et(f.LFG(ye),f.LFG(Re),f.LFG(f.gxx),f.LFG(me.H7),f.LFG(f.R0b))},token:Et,providedIn:"root"}),Et})(),jt=(()=>{class Et{constructor(at,Ve,bt){this.toastrService=at,this.toastPackage=Ve,this.ngZone=bt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=Ve.message,this.title=Ve.title,this.options=Ve.config,this.originalTimeout=Ve.config.timeOut,this.toastClasses=`${Ve.toastType} ${Ve.config.toastClass}`,this.sub=Ve.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ve.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ve.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ve.toastRef.countDuplicate().subscribe(ke=>{this.duplicatesCount=ke})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const at=(new Date).getTime();this.width=(this.hideTime-at)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(at,Ve){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(at),Ve)):this.timeout=setTimeout(()=>at(),Ve)}outsideInterval(at,Ve){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(at),Ve)):this.intervalId=setInterval(()=>at(),Ve)}runInsideAngular(at){this.ngZone?this.ngZone.run(()=>at()):at()}}return Et.\u0275fac=function(at){return new(at||Et)(f.Y36(Te),f.Y36(Ze),f.Y36(f.R0b))},Et.\u0275cmp=f.Xpm({type:Et,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(at,Ve){1&at&&f.NdJ("click",function(){return Ve.tapToast()})("mouseenter",function(){return Ve.stickAround()})("mouseleave",function(){return Ve.delayedHideToast()}),2&at&&(f.d8E("@flyInOut",Ve.state),f.Tol(Ve.toastClasses),f.Udp("display",Ve.displayStyle))},attrs:ue,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(at,Ve){1&at&&(f.YNc(0,Ae,3,0,"button",0),f.YNc(1,ge,3,5,"div",1),f.YNc(2,K,1,3,"div",2),f.YNc(3,Z,2,4,"div",3),f.YNc(4,te,2,2,"div",4)),2&at&&(f.Q6J("ngIf",Ve.options.closeButton),f.xp6(1),f.Q6J("ngIf",Ve.title),f.xp6(1),f.Q6J("ngIf",Ve.message&&Ve.options.enableHtml),f.xp6(1),f.Q6J("ngIf",Ve.message&&!Ve.options.enableHtml),f.xp6(1),f.Q6J("ngIf",Ve.options.progressBar))},directives:[le.O5],encapsulation:2,data:{animation:[(0,v.X$)("flyInOut",[(0,v.SB)("inactive",(0,v.oB)({opacity:0})),(0,v.SB)("active",(0,v.oB)({opacity:1})),(0,v.SB)("removed",(0,v.oB)({opacity:0})),(0,v.eR)("inactive => active",(0,v.jt)("{{ easeTime }}ms {{ easing }}")),(0,v.eR)("active => removed",(0,v.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),Et})();const mn=Object.assign(Object.assign({},Xe),{toastComponent:jt});let Bn=(()=>{class Et{static forRoot(at={}){return{ngModule:Et,providers:[{provide:ye,useValue:{default:mn,config:at}}]}}}return Et.\u0275fac=function(at){return new(at||Et)},Et.\u0275mod=f.oAB({type:Et}),Et.\u0275inj=f.cJS({imports:[[le.ez]]}),Et})(),xn=(()=>{class Et{constructor(at,Ve,bt){this.toastrService=at,this.toastPackage=Ve,this.appRef=bt,this.width=-1,this.toastClasses="",this.state="inactive",this.message=Ve.message,this.title=Ve.title,this.options=Ve.config,this.originalTimeout=Ve.config.timeOut,this.toastClasses=`${Ve.toastType} ${Ve.config.toastClass}`,this.sub=Ve.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=Ve.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=Ve.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=Ve.toastRef.countDuplicate().subscribe(ke=>{this.duplicatesCount=ke})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const at=(new Date).getTime();this.width=(this.hideTime-at)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return Et.\u0275fac=function(at){return new(at||Et)(f.Y36(Te),f.Y36(Ze),f.Y36(f.z2F))},Et.\u0275cmp=f.Xpm({type:Et,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(at,Ve){1&at&&f.NdJ("click",function(){return Ve.tapToast()})("mouseenter",function(){return Ve.stickAround()})("mouseleave",function(){return Ve.delayedHideToast()}),2&at&&(f.Tol(Ve.toastClasses),f.Udp("display",Ve.displayStyle))},attrs:ue,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(at,Ve){1&at&&(f.YNc(0,de,3,0,"button",0),f.YNc(1,je,3,5,"div",1),f.YNc(2,Oe,1,3,"div",2),f.YNc(3,Ye,2,4,"div",3),f.YNc(4,Qe,2,2,"div",4)),2&at&&(f.Q6J("ngIf",Ve.options.closeButton),f.xp6(1),f.Q6J("ngIf",Ve.title),f.xp6(1),f.Q6J("ngIf",Ve.message&&Ve.options.enableHtml),f.xp6(1),f.Q6J("ngIf",Ve.message&&!Ve.options.enableHtml),f.xp6(1),f.Q6J("ngIf",Ve.options.progressBar))},directives:[le.O5],encapsulation:2}),Et})();Object.assign(Object.assign({},Xe),{toastComponent:xn})},268:(Vt,Ie,N)=>{"use strict";N.d(Ie,{d:()=>v});var f=N(7393);class v extends f.L{constructor(me,le,ue){super(),this.parent=me,this.outerValue=le,this.outerIndex=ue,this.index=0}_next(me){this.parent.notifyNext(this.outerValue,me,this.outerIndex,this.index++,this)}_error(me){this.parent.notifyError(me,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},7574:(Vt,Ie,N)=>{"use strict";N.d(Ie,{y:()=>Z});var f=N(7393),J=N(9181),me=N(6490),ue=N(6554),Ae=N(4487);var K=N(2494);let Z=(()=>{class de{constructor(je){this._isScalar=!1,je&&(this._subscribe=je)}lift(je){const Oe=new de;return Oe.source=this,Oe.operator=je,Oe}subscribe(je,Oe,Ye){const{operator:Qe}=this,it=function(de,be,je){if(de){if(de instanceof f.L)return de;if(de[J.b])return de[J.b]()}return de||be||je?new f.L(de,be,je):new f.L(me.c)}(je,Oe,Ye);if(it.add(Qe?Qe.call(it,this.source):this.source||K.v.useDeprecatedSynchronousErrorHandling&&!it.syncErrorThrowable?this._subscribe(it):this._trySubscribe(it)),K.v.useDeprecatedSynchronousErrorHandling&&it.syncErrorThrowable&&(it.syncErrorThrowable=!1,it.syncErrorThrown))throw it.syncErrorValue;return it}_trySubscribe(je){try{return this._subscribe(je)}catch(Oe){K.v.useDeprecatedSynchronousErrorHandling&&(je.syncErrorThrown=!0,je.syncErrorValue=Oe),function(de){for(;de;){const{closed:be,destination:je,isStopped:Oe}=de;if(be||Oe)return!1;de=je&&je instanceof f.L?je:null}return!0}(je)?je.error(Oe):console.warn(Oe)}}forEach(je,Oe){return new(Oe=te(Oe))((Ye,Qe)=>{let it;it=this.subscribe(nt=>{try{je(nt)}catch(Ze){Qe(Ze),it&&it.unsubscribe()}},Qe,Ye)})}_subscribe(je){const{source:Oe}=this;return Oe&&Oe.subscribe(je)}[ue.L](){return this}pipe(...je){return 0===je.length?this:function(de){return 0===de.length?Ae.y:1===de.length?de[0]:function(je){return de.reduce((Oe,Ye)=>Ye(Oe),je)}}(je)(this)}toPromise(je){return new(je=te(je))((Oe,Ye)=>{let Qe;this.subscribe(it=>Qe=it,it=>Ye(it),()=>Oe(Qe))})}}return de.create=be=>new de(be),de})();function te(de){if(de||(de=K.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},6490:(Vt,Ie,N)=>{"use strict";N.d(Ie,{c:()=>J});var f=N(2494),v=N(4449);const J={closed:!0,next(me){},error(me){if(f.v.useDeprecatedSynchronousErrorHandling)throw me;(0,v.z)(me)},complete(){}}},5197:(Vt,Ie,N)=>{"use strict";N.d(Ie,{L:()=>v});var f=N(7393);class v extends f.L{notifyNext(me,le,ue,Ae,Me){this.destination.next(le)}notifyError(me,le){this.destination.error(me)}notifyComplete(me){this.destination.complete()}}},7709:(Vt,Ie,N)=>{"use strict";N.d(Ie,{xQ:()=>Me,Yc:()=>Ae});var f=N(7574),v=N(7393),J=N(5319),me=N(7971);class le extends J.w{constructor(Z,te){super(),this.subject=Z,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Z=this.subject,te=Z.observers;if(this.subject=null,!te||0===te.length||Z.isStopped||Z.closed)return;const de=te.indexOf(this.subscriber);-1!==de&&te.splice(de,1)}}var ue=N(9181);class Ae extends v.L{constructor(Z){super(Z),this.destination=Z}}let Me=(()=>{class K extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ue.b](){return new Ae(this)}lift(te){const de=new ge(this,this);return de.operator=te,de}next(te){if(this.closed)throw new me.N;if(!this.isStopped){const{observers:de}=this,be=de.length,je=de.slice();for(let Oe=0;Oe<be;Oe++)je[Oe].next(te)}}error(te){if(this.closed)throw new me.N;this.hasError=!0,this.thrownError=te,this.isStopped=!0;const{observers:de}=this,be=de.length,je=de.slice();for(let Oe=0;Oe<be;Oe++)je[Oe].error(te);this.observers.length=0}complete(){if(this.closed)throw new me.N;this.isStopped=!0;const{observers:te}=this,de=te.length,be=te.slice();for(let je=0;je<de;je++)be[je].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(te){if(this.closed)throw new me.N;return super._trySubscribe(te)}_subscribe(te){if(this.closed)throw new me.N;return this.hasError?(te.error(this.thrownError),J.w.EMPTY):this.isStopped?(te.complete(),J.w.EMPTY):(this.observers.push(te),new le(this,te))}asObservable(){const te=new f.y;return te.source=this,te}}return K.create=(Z,te)=>new ge(Z,te),K})();class ge extends Me{constructor(Z,te){super(),this.destination=Z,this.source=te}next(Z){const{destination:te}=this;te&&te.next&&te.next(Z)}error(Z){const{destination:te}=this;te&&te.error&&this.destination.error(Z)}complete(){const{destination:Z}=this;Z&&Z.complete&&this.destination.complete()}_subscribe(Z){const{source:te}=this;return te?this.source.subscribe(Z):J.w.EMPTY}}},7393:(Vt,Ie,N)=>{"use strict";N.d(Ie,{L:()=>Ae});var f=N(9105),v=N(6490),J=N(5319),me=N(9181),le=N(2494),ue=N(4449);class Ae extends J.w{constructor(K,Z,te){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=v.c;break;case 1:if(!K){this.destination=v.c;break}if("object"==typeof K){K instanceof Ae?(this.syncErrorThrowable=K.syncErrorThrowable,this.destination=K,K.add(this)):(this.syncErrorThrowable=!0,this.destination=new Me(this,K));break}default:this.syncErrorThrowable=!0,this.destination=new Me(this,K,Z,te)}}[me.b](){return this}static create(K,Z,te){const de=new Ae(K,Z,te);return de.syncErrorThrowable=!1,de}next(K){this.isStopped||this._next(K)}error(K){this.isStopped||(this.isStopped=!0,this._error(K))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(K){this.destination.next(K)}_error(K){this.destination.error(K),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:K}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=K,this}}class Me extends Ae{constructor(K,Z,te,de){super(),this._parentSubscriber=K;let be,je=this;(0,f.m)(Z)?be=Z:Z&&(be=Z.next,te=Z.error,de=Z.complete,Z!==v.c&&(je=Object.create(Z),(0,f.m)(je.unsubscribe)&&this.add(je.unsubscribe.bind(je)),je.unsubscribe=this.unsubscribe.bind(this))),this._context=je,this._next=be,this._error=te,this._complete=de}next(K){if(!this.isStopped&&this._next){const{_parentSubscriber:Z}=this;le.v.useDeprecatedSynchronousErrorHandling&&Z.syncErrorThrowable?this.__tryOrSetError(Z,this._next,K)&&this.unsubscribe():this.__tryOrUnsub(this._next,K)}}error(K){if(!this.isStopped){const{_parentSubscriber:Z}=this,{useDeprecatedSynchronousErrorHandling:te}=le.v;if(this._error)te&&Z.syncErrorThrowable?(this.__tryOrSetError(Z,this._error,K),this.unsubscribe()):(this.__tryOrUnsub(this._error,K),this.unsubscribe());else if(Z.syncErrorThrowable)te?(Z.syncErrorValue=K,Z.syncErrorThrown=!0):(0,ue.z)(K),this.unsubscribe();else{if(this.unsubscribe(),te)throw K;(0,ue.z)(K)}}}complete(){if(!this.isStopped){const{_parentSubscriber:K}=this;if(this._complete){const Z=()=>this._complete.call(this._context);le.v.useDeprecatedSynchronousErrorHandling&&K.syncErrorThrowable?(this.__tryOrSetError(K,Z),this.unsubscribe()):(this.__tryOrUnsub(Z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(K,Z){try{K.call(this._context,Z)}catch(te){if(this.unsubscribe(),le.v.useDeprecatedSynchronousErrorHandling)throw te;(0,ue.z)(te)}}__tryOrSetError(K,Z,te){if(!le.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Z.call(this._context,te)}catch(de){return le.v.useDeprecatedSynchronousErrorHandling?(K.syncErrorValue=de,K.syncErrorThrown=!0,!0):((0,ue.z)(de),!0)}return!1}_unsubscribe(){const{_parentSubscriber:K}=this;this._context=null,this._parentSubscriber=null,K.unsubscribe()}}},5319:(Vt,Ie,N)=>{"use strict";N.d(Ie,{w:()=>ue});var f=N(9796),v=N(1555),J=N(9105);const le=(()=>{function Me(ge){return Error.call(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((K,Z)=>`${Z+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge,this}return Me.prototype=Object.create(Error.prototype),Me})();class ue{constructor(ge){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ge&&(this._unsubscribe=ge)}unsubscribe(){let ge;if(this.closed)return;let{_parentOrParents:K,_unsubscribe:Z,_subscriptions:te}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,K instanceof ue)K.remove(this);else if(null!==K)for(let de=0;de<K.length;++de)K[de].remove(this);if((0,J.m)(Z))try{Z.call(this)}catch(de){ge=de instanceof le?Ae(de.errors):[de]}if((0,f.k)(te)){let de=-1,be=te.length;for(;++de<be;){const je=te[de];if((0,v.K)(je))try{je.unsubscribe()}catch(Oe){ge=ge||[],Oe instanceof le?ge=ge.concat(Ae(Oe.errors)):ge.push(Oe)}}}if(ge)throw new le(ge)}add(ge){let K=ge;if(!ge)return ue.EMPTY;switch(typeof ge){case"function":K=new ue(ge);case"object":if(K===this||K.closed||"function"!=typeof K.unsubscribe)return K;if(this.closed)return K.unsubscribe(),K;if(!(K instanceof ue)){const de=K;K=new ue,K._subscriptions=[de]}break;default:throw new Error("unrecognized teardown "+ge+" added to Subscription.")}let{_parentOrParents:Z}=K;if(null===Z)K._parentOrParents=this;else if(Z instanceof ue){if(Z===this)return K;K._parentOrParents=[Z,this]}else{if(-1!==Z.indexOf(this))return K;Z.push(this)}const te=this._subscriptions;return null===te?this._subscriptions=[K]:te.push(K),K}remove(ge){const K=this._subscriptions;if(K){const Z=K.indexOf(ge);-1!==Z&&K.splice(Z,1)}}}var Me;function Ae(Me){return Me.reduce((ge,K)=>ge.concat(K instanceof le?K.errors:K),[])}ue.EMPTY=((Me=new ue).closed=!0,Me)},2494:(Vt,Ie,N)=>{"use strict";N.d(Ie,{v:()=>v});let f=!1;const v={Promise:void 0,set useDeprecatedSynchronousErrorHandling(J){if(J){const me=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+me.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=J},get useDeprecatedSynchronousErrorHandling(){return f}}},2441:(Vt,Ie,N)=>{"use strict";N.d(Ie,{c:()=>le,N:()=>ue});var f=N(7709),v=N(7574),J=N(5319),me=N(1307);class le extends v.y{constructor(Z,te){super(),this.source=Z,this.subjectFactory=te,this._refCount=0,this._isComplete=!1}_subscribe(Z){return this.getSubject().subscribe(Z)}getSubject(){const Z=this._subject;return(!Z||Z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Z=this._connection;return Z||(this._isComplete=!1,Z=this._connection=new J.w,Z.add(this.source.subscribe(new Ae(this.getSubject(),this))),Z.closed&&(this._connection=null,Z=J.w.EMPTY)),Z}refCount(){return(0,me.x)()(this)}}const ue=(()=>{const K=le.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:K._subscribe},_isComplete:{value:K._isComplete,writable:!0},getSubject:{value:K.getSubject},connect:{value:K.connect},refCount:{value:K.refCount}}})();class Ae extends f.Yc{constructor(Z,te){super(Z),this.connectable=te}_error(Z){this._unsubscribe(),super._error(Z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Z=this.connectable;if(Z){this.connectable=null;const te=Z._connection;Z._refCount=0,Z._subject=null,Z._connection=null,te&&te.unsubscribe()}}}},4402:(Vt,Ie,N)=>{"use strict";N.d(Ie,{D:()=>je});var f=N(7574),v=N(7444),J=N(5319),me=N(6554),Ae=N(4087),Me=N(377),Z=N(4072),te=N(9489);function je(Oe,Ye){return Ye?function(Oe,Ye){if(null!=Oe){if(function(Oe){return Oe&&"function"==typeof Oe[me.L]}(Oe))return function(Oe,Ye){return new f.y(Qe=>{const it=new J.w;return it.add(Ye.schedule(()=>{const nt=Oe[me.L]();it.add(nt.subscribe({next(Ze){it.add(Ye.schedule(()=>Qe.next(Ze)))},error(Ze){it.add(Ye.schedule(()=>Qe.error(Ze)))},complete(){it.add(Ye.schedule(()=>Qe.complete()))}}))})),it})}(Oe,Ye);if((0,Z.t)(Oe))return function(Oe,Ye){return new f.y(Qe=>{const it=new J.w;return it.add(Ye.schedule(()=>Oe.then(nt=>{it.add(Ye.schedule(()=>{Qe.next(nt),it.add(Ye.schedule(()=>Qe.complete()))}))},nt=>{it.add(Ye.schedule(()=>Qe.error(nt)))}))),it})}(Oe,Ye);if((0,te.z)(Oe))return(0,Ae.r)(Oe,Ye);if(function(Oe){return Oe&&"function"==typeof Oe[Me.hZ]}(Oe)||"string"==typeof Oe)return function(Oe,Ye){if(!Oe)throw new Error("Iterable cannot be null");return new f.y(Qe=>{const it=new J.w;let nt;return it.add(()=>{nt&&"function"==typeof nt.return&&nt.return()}),it.add(Ye.schedule(()=>{nt=Oe[Me.hZ](),it.add(Ye.schedule(function(){if(Qe.closed)return;let Ze,Xe;try{const ye=nt.next();Ze=ye.value,Xe=ye.done}catch(ye){return void Qe.error(ye)}Xe?Qe.complete():(Qe.next(Ze),this.schedule())}))})),it})}(Oe,Ye)}throw new TypeError((null!==Oe&&typeof Oe||Oe)+" is not observable")}(Oe,Ye):Oe instanceof f.y?Oe:new f.y((0,v.s)(Oe))}},6693:(Vt,Ie,N)=>{"use strict";N.d(Ie,{n:()=>me});var f=N(7574),v=N(5015),J=N(4087);function me(le,ue){return ue?(0,J.r)(le,ue):new f.y((0,v.V)(le))}},8002:(Vt,Ie,N)=>{"use strict";N.d(Ie,{U:()=>v});var f=N(7393);function v(le,ue){return function(Me){if("function"!=typeof le)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Me.lift(new J(le,ue))}}class J{constructor(ue,Ae){this.project=ue,this.thisArg=Ae}call(ue,Ae){return Ae.subscribe(new me(ue,this.project,this.thisArg))}}class me extends f.L{constructor(ue,Ae,Me){super(ue),this.project=Ae,this.count=0,this.thisArg=Me||this}_next(ue){let Ae;try{Ae=this.project.call(this.thisArg,ue,this.count++)}catch(Me){return void this.destination.error(Me)}this.destination.next(Ae)}}},3282:(Vt,Ie,N)=>{"use strict";N.d(Ie,{J:()=>J});var f=N(9773),v=N(4487);function J(me=Number.POSITIVE_INFINITY){return(0,f.zg)(v.y,me)}},9773:(Vt,Ie,N)=>{"use strict";N.d(Ie,{zg:()=>ue});var f=N(5604),v=N(5197),J=N(268),me=N(8002),le=N(4402);function ue(ge,K,Z=Number.POSITIVE_INFINITY){return"function"==typeof K?te=>te.pipe(ue((de,be)=>(0,le.D)(ge(de,be)).pipe((0,me.U)((je,Oe)=>K(de,je,be,Oe))),Z)):("number"==typeof K&&(Z=K),te=>te.lift(new Ae(ge,Z)))}class Ae{constructor(K,Z=Number.POSITIVE_INFINITY){this.project=K,this.concurrent=Z}call(K,Z){return Z.subscribe(new Me(K,this.project,this.concurrent))}}class Me extends v.L{constructor(K,Z,te=Number.POSITIVE_INFINITY){super(K),this.project=Z,this.concurrent=te,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(K){this.active<this.concurrent?this._tryNext(K):this.buffer.push(K)}_tryNext(K){let Z;const te=this.index++;try{Z=this.project(K,te)}catch(de){return void this.destination.error(de)}this.active++,this._innerSub(Z,K,te)}_innerSub(K,Z,te){const de=new J.d(this,Z,te),be=this.destination;be.add(de);const je=(0,f.D)(this,K,void 0,void 0,de);je!==de&&be.add(je)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(K,Z,te,de,be){this.destination.next(Z)}notifyComplete(K){const Z=this.buffer;this.remove(K),this.active--,Z.length>0?this._next(Z.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},1307:(Vt,Ie,N)=>{"use strict";N.d(Ie,{x:()=>v});var f=N(7393);function v(){return function(ue){return ue.lift(new J(ue))}}class J{constructor(ue){this.connectable=ue}call(ue,Ae){const{connectable:Me}=this;Me._refCount++;const ge=new me(ue,Me),K=Ae.subscribe(ge);return ge.closed||(ge.connection=Me.connect()),K}}class me extends f.L{constructor(ue,Ae){super(ue),this.connectable=Ae}_unsubscribe(){const{connectable:ue}=this;if(!ue)return void(this.connection=null);this.connectable=null;const Ae=ue._refCount;if(Ae<=0)return void(this.connection=null);if(ue._refCount=Ae-1,Ae>1)return void(this.connection=null);const{connection:Me}=this,ge=ue._connection;this.connection=null,ge&&(!Me||ge===Me)&&ge.unsubscribe()}}},4087:(Vt,Ie,N)=>{"use strict";N.d(Ie,{r:()=>J});var f=N(7574),v=N(5319);function J(me,le){return new f.y(ue=>{const Ae=new v.w;let Me=0;return Ae.add(le.schedule(function(){Me!==me.length?(ue.next(me[Me++]),ue.closed||Ae.add(this.schedule())):ue.complete()})),Ae})}},377:(Vt,Ie,N)=>{"use strict";N.d(Ie,{hZ:()=>v});const v="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Vt,Ie,N)=>{"use strict";N.d(Ie,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Vt,Ie,N)=>{"use strict";N.d(Ie,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Vt,Ie,N)=>{"use strict";N.d(Ie,{N:()=>v});const v=(()=>{function J(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return J.prototype=Object.create(Error.prototype),J})()},4449:(Vt,Ie,N)=>{"use strict";function f(v){setTimeout(()=>{throw v},0)}N.d(Ie,{z:()=>f})},4487:(Vt,Ie,N)=>{"use strict";function f(v){return v}N.d(Ie,{y:()=>f})},9796:(Vt,Ie,N)=>{"use strict";N.d(Ie,{k:()=>f});const f=Array.isArray||(v=>v&&"number"==typeof v.length)},9489:(Vt,Ie,N)=>{"use strict";N.d(Ie,{z:()=>f});const f=v=>v&&"number"==typeof v.length&&"function"!=typeof v},9105:(Vt,Ie,N)=>{"use strict";function f(v){return"function"==typeof v}N.d(Ie,{m:()=>f})},1555:(Vt,Ie,N)=>{"use strict";function f(v){return null!==v&&"object"==typeof v}N.d(Ie,{K:()=>f})},4072:(Vt,Ie,N)=>{"use strict";function f(v){return!!v&&"function"!=typeof v.subscribe&&"function"==typeof v.then}N.d(Ie,{t:()=>f})},4869:(Vt,Ie,N)=>{"use strict";function f(v){return v&&"function"==typeof v.schedule}N.d(Ie,{K:()=>f})},7444:(Vt,Ie,N)=>{"use strict";N.d(Ie,{s:()=>Z});var f=N(5015),v=N(4449),me=N(377),ue=N(6554),Me=N(9489),ge=N(4072),K=N(1555);const Z=te=>{if(te&&"function"==typeof te[ue.L])return(te=>de=>{const be=te[ue.L]();if("function"!=typeof be.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return be.subscribe(de)})(te);if((0,Me.z)(te))return(0,f.V)(te);if((0,ge.t)(te))return(te=>de=>(te.then(be=>{de.closed||(de.next(be),de.complete())},be=>de.error(be)).then(null,v.z),de))(te);if(te&&"function"==typeof te[me.hZ])return(te=>de=>{const be=te[me.hZ]();for(;;){const je=be.next();if(je.done){de.complete();break}if(de.next(je.value),de.closed)break}return"function"==typeof be.return&&de.add(()=>{be.return&&be.return()}),de})(te);{const be=`You provided ${(0,K.K)(te)?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(be)}}},5015:(Vt,Ie,N)=>{"use strict";N.d(Ie,{V:()=>f});const f=v=>J=>{for(let me=0,le=v.length;me<le&&!J.closed;me++)J.next(v[me]);J.complete()}},5604:(Vt,Ie,N)=>{"use strict";N.d(Ie,{D:()=>me});var f=N(268),v=N(7444),J=N(7574);function me(le,ue,Ae,Me,ge=new f.d(le,Ae,Me)){if(!ge.closed)return ue instanceof J.y?ue.subscribe(ge):(0,v.s)(ue)(ge)}},3576:(Vt,Ie,N)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var f=N(5730),v=N(7104),J=N(6232),me=N(3915),le=N(8273),ue=function(){function Me(ge){this._isScalar=!1,ge&&(this._subscribe=ge)}return Me.prototype.lift=function(ge){var K=new Me;return K.source=this,K.operator=ge,K},Me.prototype.subscribe=function(ge,K,Z){var te=this.operator,de=v.toSubscriber(ge,K,Z);if(de.add(te?te.call(de,this.source):this.source||le.config.useDeprecatedSynchronousErrorHandling&&!de.syncErrorThrowable?this._subscribe(de):this._trySubscribe(de)),le.config.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable&&(de.syncErrorThrowable=!1,de.syncErrorThrown))throw de.syncErrorValue;return de},Me.prototype._trySubscribe=function(ge){try{return this._subscribe(ge)}catch(K){le.config.useDeprecatedSynchronousErrorHandling&&(ge.syncErrorThrown=!0,ge.syncErrorValue=K),f.canReportError(ge)?ge.error(K):console.warn(K)}},Me.prototype.forEach=function(ge,K){var Z=this;return new(K=Ae(K))(function(te,de){var be;be=Z.subscribe(function(je){try{ge(je)}catch(Oe){de(Oe),be&&be.unsubscribe()}},de,te)})},Me.prototype._subscribe=function(ge){var K=this.source;return K&&K.subscribe(ge)},Me.prototype[J.observable]=function(){return this},Me.prototype.pipe=function(){for(var ge=[],K=0;K<arguments.length;K++)ge[K]=arguments[K];return 0===ge.length?this:me.pipeFromArray(ge)(this)},Me.prototype.toPromise=function(ge){var K=this;return new(ge=Ae(ge))(function(Z,te){var de;K.subscribe(function(be){return de=be},function(be){return te(be)},function(){return Z(de)})})},Me.create=function(ge){return new Me(ge)},Me}();function Ae(Me){if(Me||(Me=le.config.Promise||Promise),!Me)throw new Error("no Promise impl found");return Me}Ie.Observable=ue},6011:(Vt,Ie,N)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var f=N(8273),v=N(2434);Ie.empty={closed:!0,next:function(J){},error:function(J){if(f.config.useDeprecatedSynchronousErrorHandling)throw J;v.hostReportError(J)},complete:function(){}}},3409:function(Vt,Ie,N){"use strict";var Z,f=this&&this.__extends||(Z=function(te,de){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(be,je){be.__proto__=je}||function(be,je){for(var Oe in je)je.hasOwnProperty(Oe)&&(be[Oe]=je[Oe])})(te,de)},function(te,de){function be(){this.constructor=te}Z(te,de),te.prototype=null===de?Object.create(de):(be.prototype=de.prototype,new be)});Object.defineProperty(Ie,"__esModule",{value:!0});var v=N(3576),J=N(7241),me=N(3984),le=N(5639),ue=N(5298),Ae=N(1476),Me=function(Z){function te(de){var be=Z.call(this,de)||this;return be.destination=de,be}return f(te,Z),te}(J.Subscriber);Ie.SubjectSubscriber=Me;var ge=function(Z){function te(){var de=Z.call(this)||this;return de.observers=[],de.closed=!1,de.isStopped=!1,de.hasError=!1,de.thrownError=null,de}return f(te,Z),te.prototype[Ae.rxSubscriber]=function(){return new Me(this)},te.prototype.lift=function(de){var be=new K(this,this);return be.operator=de,be},te.prototype.next=function(de){if(this.closed)throw new le.ObjectUnsubscribedError;if(!this.isStopped)for(var be=this.observers,je=be.length,Oe=be.slice(),Ye=0;Ye<je;Ye++)Oe[Ye].next(de)},te.prototype.error=function(de){if(this.closed)throw new le.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=de,this.isStopped=!0;for(var be=this.observers,je=be.length,Oe=be.slice(),Ye=0;Ye<je;Ye++)Oe[Ye].error(de);this.observers.length=0},te.prototype.complete=function(){if(this.closed)throw new le.ObjectUnsubscribedError;this.isStopped=!0;for(var de=this.observers,be=de.length,je=de.slice(),Oe=0;Oe<be;Oe++)je[Oe].complete();this.observers.length=0},te.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},te.prototype._trySubscribe=function(de){if(this.closed)throw new le.ObjectUnsubscribedError;return Z.prototype._trySubscribe.call(this,de)},te.prototype._subscribe=function(de){if(this.closed)throw new le.ObjectUnsubscribedError;return this.hasError?(de.error(this.thrownError),me.Subscription.EMPTY):this.isStopped?(de.complete(),me.Subscription.EMPTY):(this.observers.push(de),new ue.SubjectSubscription(this,de))},te.prototype.asObservable=function(){var de=new v.Observable;return de.source=this,de},te.create=function(de,be){return new K(de,be)},te}(v.Observable);Ie.Subject=ge;var K=function(Z){function te(de,be){var je=Z.call(this)||this;return je.destination=de,je.source=be,je}return f(te,Z),te.prototype.next=function(de){var be=this.destination;be&&be.next&&be.next(de)},te.prototype.error=function(de){var be=this.destination;be&&be.error&&this.destination.error(de)},te.prototype.complete=function(){var de=this.destination;de&&de.complete&&this.destination.complete()},te.prototype._subscribe=function(de){return this.source?this.source.subscribe(de):me.Subscription.EMPTY},te}(ge);Ie.AnonymousSubject=K},5298:function(Vt,Ie,N){"use strict";var me,f=this&&this.__extends||(me=function(le,ue){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ae,Me){Ae.__proto__=Me}||function(Ae,Me){for(var ge in Me)Me.hasOwnProperty(ge)&&(Ae[ge]=Me[ge])})(le,ue)},function(le,ue){function Ae(){this.constructor=le}me(le,ue),le.prototype=null===ue?Object.create(ue):(Ae.prototype=ue.prototype,new Ae)});Object.defineProperty(Ie,"__esModule",{value:!0});var J=function(me){function le(ue,Ae){var Me=me.call(this)||this;return Me.subject=ue,Me.subscriber=Ae,Me.closed=!1,Me}return f(le,me),le.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var ue=this.subject,Ae=ue.observers;if(this.subject=null,Ae&&0!==Ae.length&&!ue.isStopped&&!ue.closed){var Me=Ae.indexOf(this.subscriber);-1!==Me&&Ae.splice(Me,1)}}},le}(N(3984).Subscription);Ie.SubjectSubscription=J},7241:function(Vt,Ie,N){"use strict";var K,f=this&&this.__extends||(K=function(Z,te){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,be){de.__proto__=be}||function(de,be){for(var je in be)be.hasOwnProperty(je)&&(de[je]=be[je])})(Z,te)},function(Z,te){function de(){this.constructor=Z}K(Z,te),Z.prototype=null===te?Object.create(te):(de.prototype=te.prototype,new de)});Object.defineProperty(Ie,"__esModule",{value:!0});var v=N(7382),J=N(6011),me=N(3984),le=N(1476),ue=N(8273),Ae=N(2434),Me=function(K){function Z(te,de,be){var je=K.call(this)||this;switch(je.syncErrorValue=null,je.syncErrorThrown=!1,je.syncErrorThrowable=!1,je.isStopped=!1,arguments.length){case 0:je.destination=J.empty;break;case 1:if(!te){je.destination=J.empty;break}if("object"==typeof te){te instanceof Z?(je.syncErrorThrowable=te.syncErrorThrowable,je.destination=te,te.add(je)):(je.syncErrorThrowable=!0,je.destination=new ge(je,te));break}default:je.syncErrorThrowable=!0,je.destination=new ge(je,te,de,be)}return je}return f(Z,K),Z.prototype[le.rxSubscriber]=function(){return this},Z.create=function(te,de,be){var je=new Z(te,de,be);return je.syncErrorThrowable=!1,je},Z.prototype.next=function(te){this.isStopped||this._next(te)},Z.prototype.error=function(te){this.isStopped||(this.isStopped=!0,this._error(te))},Z.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Z.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,K.prototype.unsubscribe.call(this))},Z.prototype._next=function(te){this.destination.next(te)},Z.prototype._error=function(te){this.destination.error(te),this.unsubscribe()},Z.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Z.prototype._unsubscribeAndRecycle=function(){var te=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=te,this},Z}(me.Subscription);Ie.Subscriber=Me;var ge=function(K){function Z(te,de,be,je){var Oe=K.call(this)||this;Oe._parentSubscriber=te;var Ye,Qe=Oe;return v.isFunction(de)?Ye=de:de&&(Ye=de.next,be=de.error,je=de.complete,de!==J.empty&&(Qe=Object.create(de),v.isFunction(Qe.unsubscribe)&&Oe.add(Qe.unsubscribe.bind(Qe)),Qe.unsubscribe=Oe.unsubscribe.bind(Oe))),Oe._context=Qe,Oe._next=Ye,Oe._error=be,Oe._complete=je,Oe}return f(Z,K),Z.prototype.next=function(te){if(!this.isStopped&&this._next){var de=this._parentSubscriber;ue.config.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable?this.__tryOrSetError(de,this._next,te)&&this.unsubscribe():this.__tryOrUnsub(this._next,te)}},Z.prototype.error=function(te){if(!this.isStopped){var de=this._parentSubscriber,be=ue.config.useDeprecatedSynchronousErrorHandling;if(this._error)be&&de.syncErrorThrowable?(this.__tryOrSetError(de,this._error,te),this.unsubscribe()):(this.__tryOrUnsub(this._error,te),this.unsubscribe());else if(de.syncErrorThrowable)be?(de.syncErrorValue=te,de.syncErrorThrown=!0):Ae.hostReportError(te),this.unsubscribe();else{if(this.unsubscribe(),be)throw te;Ae.hostReportError(te)}}},Z.prototype.complete=function(){var te=this;if(!this.isStopped){var de=this._parentSubscriber;if(this._complete){var be=function(){return te._complete.call(te._context)};ue.config.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable?(this.__tryOrSetError(de,be),this.unsubscribe()):(this.__tryOrUnsub(be),this.unsubscribe())}else this.unsubscribe()}},Z.prototype.__tryOrUnsub=function(te,de){try{te.call(this._context,de)}catch(be){if(this.unsubscribe(),ue.config.useDeprecatedSynchronousErrorHandling)throw be;Ae.hostReportError(be)}},Z.prototype.__tryOrSetError=function(te,de,be){if(!ue.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{de.call(this._context,be)}catch(je){return ue.config.useDeprecatedSynchronousErrorHandling?(te.syncErrorValue=je,te.syncErrorThrown=!0,!0):(Ae.hostReportError(je),!0)}return!1},Z.prototype._unsubscribe=function(){var te=this._parentSubscriber;this._context=null,this._parentSubscriber=null,te.unsubscribe()},Z}(Me);Ie.SafeSubscriber=ge},3984:(Vt,Ie,N)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var f=N(993),v=N(4720),J=N(7382),me=N(8574),le=function(){function Ae(Me){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Me&&(this._unsubscribe=Me)}return Ae.prototype.unsubscribe=function(){var Me;if(!this.closed){var K=this._parentOrParents,Z=this._unsubscribe,te=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,K instanceof Ae)K.remove(this);else if(null!==K)for(var de=0;de<K.length;++de)K[de].remove(this);if(J.isFunction(Z))try{Z.call(this)}catch(Ye){Me=Ye instanceof me.UnsubscriptionError?ue(Ye.errors):[Ye]}if(f.isArray(te)){de=-1;for(var je=te.length;++de<je;){var Oe=te[de];if(v.isObject(Oe))try{Oe.unsubscribe()}catch(Qe){Me=Me||[],Qe instanceof me.UnsubscriptionError?Me=Me.concat(ue(Qe.errors)):Me.push(Qe)}}}if(Me)throw new me.UnsubscriptionError(Me)}},Ae.prototype.add=function(Me){var ge=Me;if(!Me)return Ae.EMPTY;switch(typeof Me){case"function":ge=new Ae(Me);case"object":if(ge===this||ge.closed||"function"!=typeof ge.unsubscribe)return ge;if(this.closed)return ge.unsubscribe(),ge;if(!(ge instanceof Ae)){var K=ge;(ge=new Ae)._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+Me+" added to Subscription.")}var Z=ge._parentOrParents;if(null===Z)ge._parentOrParents=this;else if(Z instanceof Ae){if(Z===this)return ge;ge._parentOrParents=[Z,this]}else{if(-1!==Z.indexOf(this))return ge;Z.push(this)}var te=this._subscriptions;return null===te?this._subscriptions=[ge]:te.push(ge),ge},Ae.prototype.remove=function(Me){var ge=this._subscriptions;if(ge){var K=ge.indexOf(Me);-1!==K&&ge.splice(K,1)}},Ae.EMPTY=((Me=new Ae).closed=!0,Me),Ae;var Me}();function ue(Ae){return Ae.reduce(function(Me,ge){return Me.concat(ge instanceof me.UnsubscriptionError?ge.errors:ge)},[])}Ie.Subscription=le},8273:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var N=!1;Ie.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(f){if(f){var v=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+v.stack)}else N&&console.log("RxJS: Back to a better error behavior. Thank you. <3");N=f},get useDeprecatedSynchronousErrorHandling(){return N}}},6232:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},1476:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ie.$$rxSubscriber=Ie.rxSubscriber},5639:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var N=function(){function f(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return f.prototype=Object.create(Error.prototype),f}();Ie.ObjectUnsubscribedError=N},8574:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var N=function(){function f(v){return Error.call(this),this.message=v?v.length+" errors occurred during unsubscription:\n"+v.map(function(J,me){return me+1+") "+J.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=v,this}return f.prototype=Object.create(Error.prototype),f}();Ie.UnsubscriptionError=N},5730:(Vt,Ie,N)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var f=N(7241);Ie.canReportError=function(J){for(;J;){var ue=J.destination;if(J.closed||J.isStopped)return!1;J=ue&&ue instanceof f.Subscriber?ue:null}return!0}},2434:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.hostReportError=function(f){setTimeout(function(){throw f},0)}},2516:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.identity=function(f){return f}},993:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.isArray=Array.isArray||function(N){return N&&"number"==typeof N.length}},7382:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.isFunction=function(f){return"function"==typeof f}},4720:(Vt,Ie)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.isObject=function(f){return null!==f&&"object"==typeof f}},3915:(Vt,Ie,N)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var f=N(2516);function J(me){return 0===me.length?f.identity:1===me.length?me[0]:function(ue){return me.reduce(function(Ae,Me){return Me(Ae)},ue)}}Ie.pipe=function(){for(var me=[],le=0;le<arguments.length;le++)me[le]=arguments[le];return J(me)},Ie.pipeFromArray=J},7104:(Vt,Ie,N)=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});var f=N(7241),v=N(1476),J=N(6011);Ie.toSubscriber=function(le,ue,Ae){if(le){if(le instanceof f.Subscriber)return le;if(le[v.rxSubscriber])return le[v.rxSubscriber]()}return le||ue||Ae?new f.Subscriber(le,ue,Ae):new f.Subscriber(J.empty)}},7190:(Vt,Ie,N)=>{"use strict";N.r(Ie),N.d(Ie,{RegistroModule:()=>K});var f=N(8583),v=N(289),J=N(8539),me=N(639);let le=(()=>{class Z{constructor(de){this.router=de}canActivate(de,be){return!!JSON.parse(localStorage.getItem("user"))||(this.router.navigate(["home"]),!1)}}return Z.\u0275fac=function(de){return new(de||Z)(me.LFG(v.F0))},Z.\u0275prov=me.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})();var ue=N(5576);const Me=[{path:"",component:J.J},{path:"verify-email",component:(()=>{class Z{constructor(de){this.authService=de}ngOnInit(){}}return Z.\u0275fac=function(de){return new(de||Z)(me.Y36(ue.$))},Z.\u0275cmp=me.Xpm({type:Z,selectors:[["app-verify-email"]],decls:16,vars:0,consts:[["lang","en"],["tabindex","-1","role","dialog","id","modalSheet",1,"modal","modal-sheet","position-static","d-block","bg-secondary","py-5"],["role","document",1,"modal-dialog"],[1,"modal-content","rounded-6","shadow"],[1,"modal-header","border-bottom-0"],[1,"modal-title"],[1,"modal-body","py-0"],[1,"modal-footer","flex-column","border-top-0"],["type","button",1,"btn","btn-lg","btn-primary","w-100","mx-0","mb-2",3,"click"],["type","button","href","/login",1,"btn","btn-lg","btn-light","w-100","mx-0"]],template:function(de,be){1&de&&(me.TgZ(0,"html",0),me.TgZ(1,"body"),me.TgZ(2,"div",1),me.TgZ(3,"div",2),me.TgZ(4,"div",3),me.TgZ(5,"div",4),me.TgZ(6,"h5",5),me._uU(7,"Verificaci\xf3n de Email"),me.qZA(),me.qZA(),me.TgZ(8,"div",6),me.TgZ(9,"p"),me._uU(10," H\xe1game el favor de revisar su correo y clickear en el link de verificaci\xf3n de email"),me.qZA(),me.qZA(),me.TgZ(11,"div",7),me.TgZ(12,"button",8),me.NdJ("click",function(){return be.authService.SendVerificationMail()}),me._uU(13,"Volver a mandar verificaci\xf3n"),me.qZA(),me.TgZ(14,"a",9),me._uU(15,"Loguearse"),me.qZA(),me.qZA(),me.qZA(),me.qZA(),me.qZA(),me.qZA(),me.qZA())},styles:[".b-example-divider[_ngcontent-%COMP%]{height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}.bi[_ngcontent-%COMP%]{vertical-align:-.125em;fill:currentColor}.rounded-4[_ngcontent-%COMP%]{border-radius:.5rem}.rounded-5[_ngcontent-%COMP%]{border-radius:.75rem}.rounded-6[_ngcontent-%COMP%]{border-radius:1rem}.modal-sheet[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:380px;transition:bottom .75s ease-in-out}.modal-sheet[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding-bottom:2rem}.modal-alert[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:380px}.border-right[_ngcontent-%COMP%]{border-right:1px solid #eee}.modal-tour[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:380px}"]}),Z})(),canActivate:[le]}];let ge=(()=>{class Z{}return Z.\u0275fac=function(de){return new(de||Z)},Z.\u0275mod=me.oAB({type:Z}),Z.\u0275inj=me.cJS({imports:[[v.Bz.forChild(Me)],v.Bz]}),Z})(),K=(()=>{class Z{}return Z.\u0275fac=function(de){return new(de||Z)},Z.\u0275mod=me.oAB({type:Z}),Z.\u0275inj=me.cJS({imports:[[f.ez,ge]]}),Z})()},8539:(Vt,Ie,N)=>{"use strict";N.d(Ie,{J:()=>qn});var f=N(639),v=N(5576),J=N(289),me=N(8583),le=N(665),ue=N(4762);class Ae{constructor(on,mt,Je,Kt,cn,kt,ln,Ht,re){this.nombre=on,this.apellido=mt,this.edad=Je,this.dni=Kt,this.obraSocial=cn,this.mail=kt,this.password=ln,this.foto1Url=Ht,this.foto2Url=re}}var Me=N(7891),ge=N(9344),K=N(9751);function Z(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su nombre."),f.qZA())}function te(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su apellido."),f.qZA())}function de(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su dni."),f.qZA())}function be(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su edad."),f.qZA())}function je(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su obra social."),f.qZA())}function Oe(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe subir la primer foto de perfil."),f.qZA())}function Ye(Tt,on){if(1&Tt&&f._UZ(0,"img",31),2&Tt){const mt=f.oxw();f.Q6J("src",mt.foto1Url,f.LSH)}}function Qe(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe subir la segunda foto de perfil."),f.qZA())}function it(Tt,on){if(1&Tt&&f._UZ(0,"img",31),2&Tt){const mt=f.oxw();f.Q6J("src",mt.foto2Url,f.LSH)}}function nt(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su mail."),f.qZA())}function Ze(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su contrase\xf1a."),f.qZA())}let Xe=(()=>{class Tt{constructor(mt,Je,Kt,cn,kt,ln){this.pacienteService=mt,this.authService=Je,this.router=Kt,this.toastr=cn,this.fb=kt,this.fireStorage=ln,this.basePath="/fotosPerfil",this.foto1Url="",this.foto2Url="",this.formAltaPaciente=kt.group({dni:["",le.kI.required],nombre:["",le.kI.required],mail:["",le.kI.required],password:["",le.kI.required],apellido:["",le.kI.required],edad:["",le.kI.required],obraSocial:["",le.kI.required],foto1:[null,le.kI.required],foto2:[null,le.kI.required]})}ngOnInit(){}signUp(){this.authService.RegisterUser(this.formAltaPaciente.controls.mail.value,this.formAltaPaciente.controls.password.value).then(Kt=>{this.guardarPaciente(),this.authService.SendVerificationMail(),this.router.navigate(["registro/verify-email"])}).catch(Kt=>{this.toastr.error("Algo sali\xf3 mal, intente nuevamente","Error")})}guardarPaciente(){let ar=new Ae(this.formAltaPaciente.controls.nombre.value,this.formAltaPaciente.controls.apellido.value,this.formAltaPaciente.controls.edad.value,this.formAltaPaciente.controls.dni.value,this.formAltaPaciente.controls.obraSocial.value,this.formAltaPaciente.controls.mail.value,this.formAltaPaciente.controls.password.value,this.foto1Url,this.foto2Url);this.pacienteService.guardarPaciente(ar).then(Sr=>{this.showSuccess()}).catch(Sr=>{this.showError(Sr)})}showSuccess(){this.toastr.success("Se guard\xf3 correctamente")}showError(mt){this.toastr.error("Algo sali\xf3 mal. Error: "+mt)}onFileChanged(mt,Je){return(0,ue.mG)(this,void 0,void 0,function*(){const Kt=mt.target.files[0];Kt?(this.task=this.fireStorage.upload(`${this.basePath}/${Kt.name}`,Kt),(yield this.task).ref.getDownloadURL().then(kt=>{1==Je?this.foto1Url=kt:this.foto2Url=kt})):(this.toastr.error("No seleccion\xf3 ninguna imagen"),1==Je?this.foto1Url="":this.foto2Url="")})}}return Tt.\u0275fac=function(mt){return new(mt||Tt)(f.Y36(Me.d),f.Y36(v.$),f.Y36(J.F0),f.Y36(ge._W),f.Y36(le.qu),f.Y36(K.Q1))},Tt.\u0275cmp=f.Xpm({type:Tt,selectors:[["app-registro-paciente"]],decls:66,vars:13,consts:[["lang","en"],[1,"bg-light"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-group"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName"],["type","text","formControlName","nombre","placeholder","",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","formControlName","apellido","placeholder","",1,"form-control"],["for","dni"],["type","number","formControlName","dni","placeholder","",1,"form-control"],["for","edad"],["type","number","formControlName","edad","placeholder","",1,"form-control"],["for","obraSocial"],["type","text","formControlName","obraSocial","placeholder","",1,"form-control"],[1,"row","mb-3"],[1,"col"],["for","photo"],["type","file","name","file","formControlName","foto1","accept",".jpeg,.jpg,.png,.svg",1,"form-control",3,"input"],[3,"src",4,"ngIf"],["type","file","name","file","formControlName","foto2","accept",".jpeg,.jpg,.png,.svg",1,"form-control",3,"input"],[1,"row"],["for","mail"],["type","email","formControlName","mail","placeholder","",1,"form-control"],["for","password"],["type","password","formControlName","password","placeholder","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"text-danger"],[3,"src"]],template:function(mt,Je){if(1&mt&&(f.TgZ(0,"html",0),f.TgZ(1,"body",1),f.TgZ(2,"div",2),f.TgZ(3,"form",3),f.NdJ("ngSubmit",function(){return Je.signUp()}),f.TgZ(4,"h4",4),f._uU(5,"Alta Paciente"),f.qZA(),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"label",8),f._uU(10,"Nombre"),f.qZA(),f._UZ(11,"input",9),f.YNc(12,Z,2,0,"span",10),f.qZA(),f.TgZ(13,"div",7),f.TgZ(14,"label",8),f._uU(15,"Apellido"),f.qZA(),f._UZ(16,"input",11),f.YNc(17,te,2,0,"span",10),f.qZA(),f.TgZ(18,"div",7),f.TgZ(19,"label",12),f._uU(20,"DNI"),f.qZA(),f._UZ(21,"input",13),f.YNc(22,de,2,0,"span",10),f.qZA(),f.TgZ(23,"div",7),f.TgZ(24,"label",14),f._uU(25,"Edad"),f.qZA(),f._UZ(26,"input",15),f.YNc(27,be,2,0,"span",10),f.qZA(),f.qZA(),f.TgZ(28,"div",4),f.TgZ(29,"label",16),f._uU(30,"Obra social "),f.qZA(),f._UZ(31,"input",17),f.YNc(32,je,2,0,"span",10),f.qZA(),f.TgZ(33,"div",18),f.TgZ(34,"div",19),f.TgZ(35,"label",20),f._uU(36,"Foto de perfil 1"),f.qZA(),f._UZ(37,"br"),f.TgZ(38,"input",21),f.NdJ("input",function(cn){return Je.onFileChanged(cn,1)}),f.qZA(),f.YNc(39,Oe,2,0,"span",10),f._UZ(40,"br"),f.YNc(41,Ye,1,1,"img",22),f._UZ(42,"br"),f.qZA(),f.TgZ(43,"div",19),f.TgZ(44,"label",20),f._uU(45,"Foto de perfil 2"),f.qZA(),f._UZ(46,"br"),f.TgZ(47,"input",23),f.NdJ("input",function(cn){return Je.onFileChanged(cn,2)}),f.qZA(),f.YNc(48,Qe,2,0,"span",10),f._UZ(49,"br"),f.YNc(50,it,1,1,"img",22),f._UZ(51,"br"),f.qZA(),f.qZA(),f.TgZ(52,"div",24),f.TgZ(53,"div",7),f.TgZ(54,"label",25),f._uU(55,"Mail"),f.qZA(),f._UZ(56,"input",26),f.YNc(57,nt,2,0,"span",10),f.qZA(),f.TgZ(58,"div",7),f.TgZ(59,"label",27),f._uU(60,"Password"),f.qZA(),f._UZ(61,"input",28),f.YNc(62,Ze,2,0,"span",10),f.qZA(),f.qZA(),f._UZ(63,"br"),f.TgZ(64,"button",29),f._uU(65,"Cargar Paciente"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&mt){let Kt,cn,kt,ln,Ht,re,tr,ar,Sr;f.xp6(3),f.Q6J("formGroup",Je.formAltaPaciente),f.xp6(9),f.Q6J("ngIf",(null==(Kt=Je.formAltaPaciente.get("nombre"))?null:Kt.hasError("required"))&&(null==(Kt=Je.formAltaPaciente.get("nombre"))?null:Kt.touched)),f.xp6(5),f.Q6J("ngIf",(null==(cn=Je.formAltaPaciente.get("apellido"))?null:cn.hasError("required"))&&(null==(cn=Je.formAltaPaciente.get("apellido"))?null:cn.touched)),f.xp6(5),f.Q6J("ngIf",(null==(kt=Je.formAltaPaciente.get("dni"))?null:kt.hasError("required"))&&(null==(kt=Je.formAltaPaciente.get("dni"))?null:kt.touched)),f.xp6(5),f.Q6J("ngIf",(null==(ln=Je.formAltaPaciente.get("edad"))?null:ln.hasError("required"))&&(null==(ln=Je.formAltaPaciente.get("edad"))?null:ln.touched)),f.xp6(5),f.Q6J("ngIf",(null==(Ht=Je.formAltaPaciente.get("obraSocial"))?null:Ht.hasError("required"))&&(null==(Ht=Je.formAltaPaciente.get("obraSocial"))?null:Ht.touched)),f.xp6(7),f.Q6J("ngIf",(null==(re=Je.formAltaPaciente.get("foto1"))?null:re.hasError("required"))&&(null==(re=Je.formAltaPaciente.get("foto1"))?null:re.touched)),f.xp6(2),f.Q6J("ngIf",Je.foto1Url),f.xp6(7),f.Q6J("ngIf",(null==(tr=Je.formAltaPaciente.get("foto2"))?null:tr.hasError("required"))&&(null==(tr=Je.formAltaPaciente.get("foto2"))?null:tr.touched)),f.xp6(2),f.Q6J("ngIf",Je.foto2Url),f.xp6(7),f.Q6J("ngIf",(null==(ar=Je.formAltaPaciente.get("mail"))?null:ar.hasError("required"))&&(null==(ar=Je.formAltaPaciente.get("mail"))?null:ar.touched)),f.xp6(5),f.Q6J("ngIf",(null==(Sr=Je.formAltaPaciente.get("password"))?null:Sr.hasError("required"))&&(null==(Sr=Je.formAltaPaciente.get("password"))?null:Sr.touched)),f.xp6(2),f.Q6J("disabled",Je.formAltaPaciente.invalid)}},directives:[le._Y,le.JL,le.sg,le.Fj,le.JJ,le.u,me.O5,le.wV],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:contents;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),Tt})();class ye{constructor(on){this.nombre=on}}class Qt{constructor(on,mt,Je,Kt,cn,kt,ln,Ht,re){this.nombre=on,this.apellido=mt,this.edad=Je,this.dni=Kt,this.especialidades=cn,this.mail=kt,this.password=ln,this.fotoUrl=Ht,this.habilitado=re}}var De=N(9768),Ge=N(3124);let ce=(()=>{class Tt{constructor(mt){this.firestore=mt,this.especialidades=mt.collection("especialidades").snapshotChanges()}getEspecialidad(mt){return this.firestore.collection("especialidades").doc(mt).valueChanges()}guardarEspecialidad(mt){return this.firestore.collection("especialidades").add({nombre:mt.nombre})}}return Tt.\u0275fac=function(mt){return new(mt||Tt)(f.LFG(Ge.ST))},Tt.\u0275prov=f.Yz7({token:Tt,factory:Tt.\u0275fac,providedIn:"root"}),Tt})();var Ne=N(7827);function Re(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su nombre."),f.qZA())}function _e(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su apellido."),f.qZA())}function ct(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su dni."),f.qZA())}function Te(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su edad."),f.qZA())}function jt(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe seleccionar al menos una especialidad."),f.qZA())}function mn(Tt,on){if(1&Tt){const mt=f.EpF();f.TgZ(0,"div"),f._UZ(1,"input",31,32),f.TgZ(3,"button",33),f.NdJ("click",function(){f.CHM(mt);const Kt=f.MAs(2);return f.oxw().agregarNuevaEspecialidad(Kt.value)}),f._uU(4,"Agregar"),f.qZA(),f.qZA()}}function Bn(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe subir foto de perfil."),f.qZA())}function Zt(Tt,on){if(1&Tt&&f._UZ(0,"img",34),2&Tt){const mt=f.oxw();f.Q6J("src",mt.fotoUrl,f.LSH)}}function xn(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su mail."),f.qZA())}function pr(Tt,on){1&Tt&&(f.TgZ(0,"span",30),f._uU(1,"Debe completar con su contrase\xf1a."),f.qZA())}let vn=(()=>{class Tt{constructor(mt,Je,Kt,cn,kt,ln,Ht){this.especialistaService=mt,this.authService=Je,this.router=Kt,this.toastr=cn,this.fb=kt,this.fireStorage=ln,this.especialidadService=Ht,this.basePath="/fotosPerfil",this.fotoUrl="",this.listaEspecialidades=[],this.dropdownSettings={},this.agrEspecialidad=!1,this.agrEspBtn="Agregar Especialidad",this.formAltaEspecialista=kt.group({dni:["",le.kI.required],nombre:["",le.kI.required],mail:["",le.kI.required],password:["",le.kI.required],apellido:["",le.kI.required],edad:["",le.kI.required],especialidades:[[],le.kI.required],foto:[null,le.kI.required]})}ngOnInit(){this.fillListaEspecialidades()}signUp(){this.authService.RegisterUser(this.formAltaEspecialista.controls.mail.value,this.formAltaEspecialista.controls.password.value).then(Kt=>{this.guardarEspecialista(),this.authService.SendVerificationMail(),this.router.navigate(["registro/verify-email"])}).catch(Kt=>{this.toastr.error("Algo sali\xf3 mal, intente nuevamente","Error")})}guardarEspecialista(){let tr=new Qt(this.formAltaEspecialista.controls.nombre.value,this.formAltaEspecialista.controls.apellido.value,this.formAltaEspecialista.controls.edad.value,this.formAltaEspecialista.controls.dni.value,this.formAltaEspecialista.controls.especialidades.value,this.formAltaEspecialista.controls.mail.value,this.formAltaEspecialista.controls.password.value,this.fotoUrl,!1);this.especialistaService.guardarEspecialista(tr).then(ar=>{this.showSuccess()}).catch(ar=>{this.showError(ar)})}showSuccess(){this.toastr.success("Se guard\xf3 correctamente")}showError(mt){this.toastr.error("Algo sali\xf3 mal. Error: "+mt)}onFileChanged(mt){return(0,ue.mG)(this,void 0,void 0,function*(){const Je=mt.target.files[0];Je?(this.task=this.fireStorage.upload(`${this.basePath}/${Je.name}`,Je),(yield this.task).ref.getDownloadURL().then(cn=>{this.fotoUrl=cn})):(this.toastr.error("No seleccion\xf3 ninguna imagen"),this.fotoUrl="")})}activarAgregadoEspecialidad(){0==this.agrEspecialidad?(this.agrEspecialidad=!0,this.agrEspBtn="Cerrar"):(this.agrEspecialidad=!1,this.agrEspBtn="Agregar Especialidad")}agregarNuevaEspecialidad(mt){if(""!=mt){let Je=new ye(mt);this.especialidadService.guardarEspecialidad(Je)}}fillListaEspecialidades(){this.especialidadService.especialidades.subscribe(mt=>{let Je=[];for(let Kt=0;Kt<mt.length;Kt++)Je.push(new ye(mt[Kt].payload.doc.data().nombre));this.listaEspecialidades=Je,this.dropdownSettings={idField:"nombre",textField:"nombre"}})}}return Tt.\u0275fac=function(mt){return new(mt||Tt)(f.Y36(De.n),f.Y36(v.$),f.Y36(J.F0),f.Y36(ge._W),f.Y36(le.qu),f.Y36(K.Q1),f.Y36(ce))},Tt.\u0275cmp=f.Xpm({type:Tt,selectors:[["app-registro-especialista"]],decls:65,vars:15,consts:[["lang","en"],[1,"bg-light"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-group"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName"],["type","text","formControlName","nombre","placeholder","",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","formControlName","apellido","placeholder","",1,"form-control"],["for","dni"],["type","number","formControlName","dni","placeholder","",1,"form-control"],["for","edad"],["type","number","formControlName","edad","placeholder","",1,"form-control"],[1,"row"],["for","especialidades"],["formControlName","especialidades",3,"settings","data"],[4,"ngIf"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"my-3"],["for","photo"],["type","file","name","file","formControlName","foto","accept",".jpeg,.jpg,.png,.svg",1,"form-control",3,"input"],[3,"src",4,"ngIf"],["for","mail"],["type","email","formControlName","mail","placeholder","",1,"form-control"],["for","password"],["type","password","formControlName","password","placeholder","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"text-danger"],["type","text","placeholder",""],["nuevaEspecialidad",""],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[3,"src"]],template:function(mt,Je){if(1&mt&&(f.TgZ(0,"html",0),f.TgZ(1,"body",1),f.TgZ(2,"div",2),f.TgZ(3,"form",3),f.NdJ("ngSubmit",function(){return Je.signUp()}),f.TgZ(4,"h4",4),f._uU(5,"Alta Especialista"),f.qZA(),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"label",8),f._uU(10,"Nombre"),f.qZA(),f._UZ(11,"input",9),f.YNc(12,Re,2,0,"span",10),f.qZA(),f.TgZ(13,"div",7),f.TgZ(14,"label",8),f._uU(15,"Apellido"),f.qZA(),f._UZ(16,"input",11),f.YNc(17,_e,2,0,"span",10),f.qZA(),f.TgZ(18,"div",7),f.TgZ(19,"label",12),f._uU(20,"DNI"),f.qZA(),f._UZ(21,"input",13),f.YNc(22,ct,2,0,"span",10),f.qZA(),f.TgZ(23,"div",7),f.TgZ(24,"label",14),f._uU(25,"Edad"),f.qZA(),f._UZ(26,"input",15),f.YNc(27,Te,2,0,"span",10),f.qZA(),f.qZA(),f.TgZ(28,"div",16),f.TgZ(29,"div",7),f.TgZ(30,"label",17),f._uU(31,"Especialidades"),f.qZA(),f._UZ(32,"ng-multiselect-dropdown",18),f.YNc(33,jt,2,0,"span",10),f._UZ(34,"br"),f.qZA(),f.TgZ(35,"div",7),f._UZ(36,"br"),f.YNc(37,mn,5,0,"div",19),f.TgZ(38,"button",20),f.NdJ("click",function(){return Je.activarAgregadoEspecialidad()}),f._uU(39),f.qZA(),f.qZA(),f.qZA(),f.TgZ(40,"div",21),f.TgZ(41,"div",16),f.TgZ(42,"div",7),f.TgZ(43,"label",22),f._uU(44,"Foto de perfil"),f.qZA(),f._UZ(45,"br"),f.TgZ(46,"input",23),f.NdJ("input",function(cn){return Je.onFileChanged(cn)}),f.qZA(),f.YNc(47,Bn,2,0,"span",10),f._UZ(48,"br"),f.qZA(),f.TgZ(49,"div",7),f.YNc(50,Zt,1,1,"img",24),f.qZA(),f.qZA(),f._UZ(51,"br"),f.TgZ(52,"div",16),f.TgZ(53,"div",7),f.TgZ(54,"label",25),f._uU(55,"Mail"),f.qZA(),f._UZ(56,"input",26),f.YNc(57,xn,2,0,"span",10),f.qZA(),f.TgZ(58,"div",7),f.TgZ(59,"label",27),f._uU(60,"Password"),f.qZA(),f._UZ(61,"input",28),f.YNc(62,pr,2,0,"span",10),f.qZA(),f.qZA(),f.qZA(),f.TgZ(63,"button",29),f._uU(64,"Cargar Especialista"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&mt){let Kt,cn,kt,ln,Ht,re,tr,ar;f.xp6(3),f.Q6J("formGroup",Je.formAltaEspecialista),f.xp6(9),f.Q6J("ngIf",(null==(Kt=Je.formAltaEspecialista.get("nombre"))?null:Kt.hasError("required"))&&(null==(Kt=Je.formAltaEspecialista.get("nombre"))?null:Kt.touched)),f.xp6(5),f.Q6J("ngIf",(null==(cn=Je.formAltaEspecialista.get("apellido"))?null:cn.hasError("required"))&&(null==(cn=Je.formAltaEspecialista.get("apellido"))?null:cn.touched)),f.xp6(5),f.Q6J("ngIf",(null==(kt=Je.formAltaEspecialista.get("dni"))?null:kt.hasError("required"))&&(null==(kt=Je.formAltaEspecialista.get("dni"))?null:kt.touched)),f.xp6(5),f.Q6J("ngIf",(null==(ln=Je.formAltaEspecialista.get("edad"))?null:ln.hasError("required"))&&(null==(ln=Je.formAltaEspecialista.get("edad"))?null:ln.touched)),f.xp6(5),f.Q6J("settings",Je.dropdownSettings)("data",Je.listaEspecialidades),f.xp6(1),f.Q6J("ngIf",(null==(Ht=Je.formAltaEspecialista.get("especialidades"))?null:Ht.hasError("required"))&&(null==(Ht=Je.formAltaEspecialista.get("especialidades"))?null:Ht.touched)),f.xp6(4),f.Q6J("ngIf",Je.agrEspecialidad),f.xp6(2),f.Oqu(Je.agrEspBtn),f.xp6(8),f.Q6J("ngIf",(null==(re=Je.formAltaEspecialista.get("foto"))?null:re.hasError("required"))&&(null==(re=Je.formAltaEspecialista.get("foto"))?null:re.touched)),f.xp6(3),f.Q6J("ngIf",Je.fotoUrl),f.xp6(7),f.Q6J("ngIf",(null==(tr=Je.formAltaEspecialista.get("mail"))?null:tr.hasError("required"))&&(null==(tr=Je.formAltaEspecialista.get("mail"))?null:tr.touched)),f.xp6(5),f.Q6J("ngIf",(null==(ar=Je.formAltaEspecialista.get("password"))?null:ar.hasError("required"))&&(null==(ar=Je.formAltaEspecialista.get("password"))?null:ar.touched)),f.xp6(1),f.Q6J("disabled",Je.formAltaEspecialista.invalid)}},directives:[le._Y,le.JL,le.sg,le.Fj,le.JJ,le.u,me.O5,le.wV,Ne.OP],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:contents;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),Tt})();class Et{constructor(on,mt,Je,Kt,cn,kt,ln){this.nombre=on,this.apellido=mt,this.edad=Je,this.dni=Kt,this.mail=cn,this.password=kt,this.fotoUrl=ln}}var Dt=N(5614);function at(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe completar con su nombre."),f.qZA())}function Ve(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe completar con su apellido."),f.qZA())}function bt(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe completar con su dni."),f.qZA())}function ke(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe completar con su edad."),f.qZA())}function rt(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe subir foto de perfil."),f.qZA())}function Se(Tt,on){if(1&Tt&&f._UZ(0,"img",27),2&Tt){const mt=f.oxw();f.Q6J("src",mt.fotoUrl,f.LSH)}}function et(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe completar con su mail."),f.qZA())}function It(Tt,on){1&Tt&&(f.TgZ(0,"span",26),f._uU(1,"Debe completar con su contrase\xf1a."),f.qZA())}let Ct=(()=>{class Tt{constructor(mt,Je,Kt,cn,kt,ln,Ht){this.administradorService=mt,this.authService=Je,this.router=Kt,this.toastr=cn,this.fb=kt,this.fireStorage=ln,this.especialidadService=Ht,this.basePath="/fotosPerfil",this.fotoUrl="",this.formAltaAdministrador=kt.group({dni:["",le.kI.required],nombre:["",le.kI.required],mail:["",le.kI.required],password:["",le.kI.required],apellido:["",le.kI.required],edad:["",le.kI.required],foto:[null,le.kI.required]})}ngOnInit(){}signUp(){this.authService.RegisterUser(this.formAltaAdministrador.controls.mail.value,this.formAltaAdministrador.controls.password.value).then(Kt=>{this.guardarAdministrador()}).catch(Kt=>{this.toastr.error("Algo sali\xf3 mal, intente nuevamente","Error")})}guardarAdministrador(){let re=new Et(this.formAltaAdministrador.controls.nombre.value,this.formAltaAdministrador.controls.apellido.value,this.formAltaAdministrador.controls.edad.value,this.formAltaAdministrador.controls.dni.value,this.formAltaAdministrador.controls.mail.value,this.formAltaAdministrador.controls.password.value,this.fotoUrl);this.administradorService.guardarAdministrador(re).then(tr=>{this.showSuccess()}).catch(tr=>{this.showError(tr)})}showSuccess(){this.toastr.success("Se guard\xf3 correctamente")}showError(mt){this.toastr.error("Algo sali\xf3 mal. Error: "+mt)}onFileChanged(mt){return(0,ue.mG)(this,void 0,void 0,function*(){const Je=mt.target.files[0];Je?(this.task=this.fireStorage.upload(`${this.basePath}/${Je.name}`,Je),(yield this.task).ref.getDownloadURL().then(cn=>{this.fotoUrl=cn})):(this.toastr.error("No seleccion\xf3 ninguna imagen"),this.fotoUrl="")})}}return Tt.\u0275fac=function(mt){return new(mt||Tt)(f.Y36(Dt.p),f.Y36(v.$),f.Y36(J.F0),f.Y36(ge._W),f.Y36(le.qu),f.Y36(K.Q1),f.Y36(ce))},Tt.\u0275cmp=f.Xpm({type:Tt,selectors:[["app-registro-administrador"]],decls:53,vars:10,consts:[["lang","en"],[1,"bg-light"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-group"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName"],["type","text","formControlName","nombre","placeholder","",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","formControlName","apellido","placeholder","",1,"form-control"],["for","dni"],["type","number","formControlName","dni","placeholder","",1,"form-control"],["for","edad"],["type","number","formControlName","edad","placeholder","",1,"form-control"],[1,"my-3"],[1,"row"],["for","photo"],["type","file","name","file","formControlName","foto","accept",".jpeg,.jpg,.png,.svg",1,"form-control",3,"input"],[3,"src",4,"ngIf"],["for","mail"],["type","email","formControlName","mail","placeholder","",1,"form-control"],["for","password"],["type","password","formControlName","password","placeholder","",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"text-danger"],[3,"src"]],template:function(mt,Je){if(1&mt&&(f.TgZ(0,"html",0),f.TgZ(1,"body",1),f.TgZ(2,"div",2),f.TgZ(3,"form",3),f.NdJ("ngSubmit",function(){return Je.signUp()}),f.TgZ(4,"h4",4),f._uU(5,"Alta Administrador"),f.qZA(),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"label",8),f._uU(10,"Nombre"),f.qZA(),f._UZ(11,"input",9),f.YNc(12,at,2,0,"span",10),f.qZA(),f.TgZ(13,"div",7),f.TgZ(14,"label",8),f._uU(15,"Apellido"),f.qZA(),f._UZ(16,"input",11),f.YNc(17,Ve,2,0,"span",10),f.qZA(),f.TgZ(18,"div",7),f.TgZ(19,"label",12),f._uU(20,"DNI"),f.qZA(),f._UZ(21,"input",13),f.YNc(22,bt,2,0,"span",10),f.qZA(),f.TgZ(23,"div",7),f.TgZ(24,"label",14),f._uU(25,"Edad"),f.qZA(),f._UZ(26,"input",15),f.YNc(27,ke,2,0,"span",10),f.qZA(),f.qZA(),f.TgZ(28,"div",16),f.TgZ(29,"div",17),f.TgZ(30,"div",7),f.TgZ(31,"label",18),f._uU(32,"Foto de perfil"),f.qZA(),f._UZ(33,"br"),f.TgZ(34,"input",19),f.NdJ("input",function(cn){return Je.onFileChanged(cn)}),f.qZA(),f.YNc(35,rt,2,0,"span",10),f.qZA(),f._UZ(36,"br"),f.TgZ(37,"div",7),f.YNc(38,Se,1,1,"img",20),f.qZA(),f.qZA(),f._UZ(39,"br"),f.TgZ(40,"div",17),f.TgZ(41,"div",7),f.TgZ(42,"label",21),f._uU(43,"Mail"),f.qZA(),f._UZ(44,"input",22),f.YNc(45,et,2,0,"span",10),f.qZA(),f.TgZ(46,"div",7),f.TgZ(47,"label",23),f._uU(48,"Password"),f.qZA(),f._UZ(49,"input",24),f.YNc(50,It,2,0,"span",10),f.qZA(),f.qZA(),f.qZA(),f.TgZ(51,"button",25),f._uU(52,"Cargar Administrador"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&mt){let Kt,cn,kt,ln,Ht,re,tr;f.xp6(3),f.Q6J("formGroup",Je.formAltaAdministrador),f.xp6(9),f.Q6J("ngIf",(null==(Kt=Je.formAltaAdministrador.get("nombre"))?null:Kt.hasError("required"))&&(null==(Kt=Je.formAltaAdministrador.get("nombre"))?null:Kt.touched)),f.xp6(5),f.Q6J("ngIf",(null==(cn=Je.formAltaAdministrador.get("apellido"))?null:cn.hasError("required"))&&(null==(cn=Je.formAltaAdministrador.get("apellido"))?null:cn.touched)),f.xp6(5),f.Q6J("ngIf",(null==(kt=Je.formAltaAdministrador.get("dni"))?null:kt.hasError("required"))&&(null==(kt=Je.formAltaAdministrador.get("dni"))?null:kt.touched)),f.xp6(5),f.Q6J("ngIf",(null==(ln=Je.formAltaAdministrador.get("edad"))?null:ln.hasError("required"))&&(null==(ln=Je.formAltaAdministrador.get("edad"))?null:ln.touched)),f.xp6(8),f.Q6J("ngIf",(null==(Ht=Je.formAltaAdministrador.get("foto"))?null:Ht.hasError("required"))&&(null==(Ht=Je.formAltaAdministrador.get("foto"))?null:Ht.touched)),f.xp6(3),f.Q6J("ngIf",Je.fotoUrl),f.xp6(7),f.Q6J("ngIf",(null==(re=Je.formAltaAdministrador.get("mail"))?null:re.hasError("required"))&&(null==(re=Je.formAltaAdministrador.get("mail"))?null:re.touched)),f.xp6(5),f.Q6J("ngIf",(null==(tr=Je.formAltaAdministrador.get("password"))?null:tr.hasError("required"))&&(null==(tr=Je.formAltaAdministrador.get("password"))?null:tr.touched)),f.xp6(1),f.Q6J("disabled",Je.formAltaAdministrador.invalid)}},directives:[le._Y,le.JL,le.sg,le.Fj,le.JJ,le.u,me.O5,le.wV],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:contents;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),Tt})();function dn(Tt,on){if(1&Tt){const mt=f.EpF();f.TgZ(0,"button",3),f.NdJ("click",function(){return f.CHM(mt),f.oxw().registrarAdministrador()}),f._uU(1,"Registrar Administrador"),f.qZA()}}function En(Tt,on){1&Tt&&f._UZ(0,"app-registro-paciente")}function Jn(Tt,on){1&Tt&&f._UZ(0,"app-registro-especialista")}function gn(Tt,on){1&Tt&&f._UZ(0,"app-registro-administrador")}let qn=(()=>{class Tt{constructor(mt,Je){this.authService=mt,this.router=Je,this.regPaciente=!1,this.regEspecialista=!1,this.regAdministrador=!1,this.esAdmin=!1}ngOnInit(){this.authService.isLoggedIn&&"administrador"==JSON.parse(localStorage.getItem("loggedUser")).tipo&&(this.esAdmin=!0)}registrarPaciente(){this.regAdministrador=!1,this.regPaciente=!0,this.regEspecialista=!1}registrarAdministrador(){this.regAdministrador=!0,this.regPaciente=!1,this.regEspecialista=!1}registrarEspecialista(){this.regAdministrador=!1,this.regPaciente=!1,this.regEspecialista=!0}}return Tt.\u0275fac=function(mt){return new(mt||Tt)(f.Y36(v.$),f.Y36(J.F0))},Tt.\u0275cmp=f.Xpm({type:Tt,selectors:[["app-registration"]],decls:14,vars:4,consts:[["lang","en"],[1,"text-center"],[1,"form-signin"],["type","submit",1,"btn","btn-md","btn-primary",3,"click"],["class","btn btn-md btn-primary","type","submit",3,"click",4,"ngIf"],[4,"ngIf"]],template:function(mt,Je){1&mt&&(f.TgZ(0,"html",0),f.TgZ(1,"body",1),f.TgZ(2,"main",2),f.TgZ(3,"button",3),f.NdJ("click",function(){return Je.registrarPaciente()}),f._uU(4,"Registrar Paciente"),f.qZA(),f.TgZ(5,"button",3),f.NdJ("click",function(){return Je.registrarEspecialista()}),f._uU(6,"Registrar Especialista"),f.qZA(),f.YNc(7,dn,2,0,"button",4),f._UZ(8,"br"),f._UZ(9,"br"),f.TgZ(10,"form"),f.YNc(11,En,1,0,"app-registro-paciente",5),f.YNc(12,Jn,1,0,"app-registro-especialista",5),f.YNc(13,gn,1,0,"app-registro-administrador",5),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&mt&&(f.xp6(7),f.Q6J("ngIf",Je.esAdmin),f.xp6(4),f.Q6J("ngIf",Je.regPaciente),f.xp6(1),f.Q6J("ngIf",Je.regEspecialista),f.xp6(1),f.Q6J("ngIf",Je.regAdministrador))},directives:[me.O5,le._Y,le.JL,le.F,Xe,vn,Ct],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:contents;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.btn[_ngcontent-%COMP%]{margin:1%}"]}),Tt})()},5614:(Vt,Ie,N)=>{"use strict";N.d(Ie,{p:()=>J});var f=N(639),v=N(3124);let J=(()=>{class me{constructor(ue){this.firestore=ue,this.administradores=ue.collection("administradores").snapshotChanges()}getAdministradores(){return this.firestore.collection("administradores").snapshotChanges()}getAdministrador(ue){return this.firestore.collection("administradores",Ae=>Ae.where("mail","==",ue)).snapshotChanges()}guardarAdministrador(ue){return this.firestore.collection("administradores").add({nombre:ue.nombre,apellido:ue.apellido,edad:ue.edad,dni:ue.dni,mail:ue.mail,password:ue.password,fotoUrl:ue.fotoUrl,tipo:"administrador"})}}return me.\u0275fac=function(ue){return new(ue||me)(f.LFG(v.ST))},me.\u0275prov=f.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},9768:(Vt,Ie,N)=>{"use strict";N.d(Ie,{n:()=>J});var f=N(639),v=N(3124);let J=(()=>{class me{constructor(ue){this.firestore=ue,this.especialistas=ue.collection("especialistas").snapshotChanges()}getEspecialistas(){return this.firestore.collection("especialistas").snapshotChanges()}getEspecialista(ue){return this.firestore.collection("especialistas",Ae=>Ae.where("mail","==",ue)).snapshotChanges()}guardarEspecialista(ue){return this.firestore.collection("especialistas").add({nombre:ue.nombre,apellido:ue.apellido,edad:ue.edad,dni:ue.dni,especialidades:ue.especialidades,mail:ue.mail,password:ue.password,fotoUrl:ue.fotoUrl,habilitado:ue.habilitado,tipo:"especialista"})}habilitarEspecialista(ue,Ae){let Me=this.getEspecialista(ue).subscribe(ge=>{let K=ge[0].payload.doc.id;this.firestore.collection("especialistas").doc(K).update({habilitado:Ae}).then(()=>{}).catch(te=>{}),Me.unsubscribe()})}}return me.\u0275fac=function(ue){return new(ue||me)(f.LFG(v.ST))},me.\u0275prov=f.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},7891:(Vt,Ie,N)=>{"use strict";N.d(Ie,{d:()=>J});var f=N(639),v=N(3124);let J=(()=>{class me{constructor(ue){this.firestore=ue,this.pacientes=ue.collection("pacientes").snapshotChanges()}getPacientes(){return this.firestore.collection("pacientes").snapshotChanges()}getPaciente(ue){return this.firestore.collection("pacientes",Ae=>Ae.where("mail","==",ue)).snapshotChanges()}guardarPaciente(ue){return this.firestore.collection("pacientes").add({nombre:ue.nombre,apellido:ue.apellido,edad:ue.edad,dni:ue.dni,obraSocial:ue.obraSocial,mail:ue.mail,password:ue.password,foto1Url:ue.foto1Url,foto2Url:ue.foto2Url,tipo:"paciente"})}}return me.\u0275fac=function(ue){return new(ue||me)(f.LFG(v.ST))},me.\u0275prov=f.Yz7({token:me,factory:me.\u0275fac,providedIn:"root"}),me})()},5576:(Vt,Ie,N)=>{"use strict";N.d(Ie,{$:()=>Ae});var f=N(4762),v=N(639),J=N(3124),me=N(9344),le=N(4421),ue=N(289);let Ae=(()=>{class Me{constructor(K,Z,te,de,be){this.afStore=K,this.toastr=Z,this.ngFireAuth=te,this.router=de,this.ngZone=be}SignIn(K,Z){return this.ngFireAuth.signInWithEmailAndPassword(K,Z)}RegisterUser(K,Z){return this.ngFireAuth.createUserWithEmailAndPassword(K,Z)}SendVerificationMail(){return(0,f.mG)(this,void 0,void 0,function*(){return(yield this.ngFireAuth.currentUser).sendEmailVerification().then(()=>{this.router.navigate(["registro/verify-email"])})})}PasswordRecover(K){return this.ngFireAuth.sendPasswordResetEmail(K).then(()=>{window.alert("Password reset email has been sent, please check your inbox.")}).catch(Z=>{window.alert(Z)})}get isLoggedIn(){const K=JSON.parse(localStorage.getItem("user")),Z=JSON.parse(localStorage.getItem("loggedUser"));return null!==K&&(!1!==K.emailVerified||null!==Z&&"administrador"==Z.tipo)}get isEmailVerified(){return!1!==JSON.parse(localStorage.getItem("user")).emailVerified}SignOut(){return this.ngFireAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("loggedUser"),this.router.navigate(["login"])})}checkIfUserIsLogged(){return this.ngFireAuth.onAuthStateChanged(K=>{this.userData=K||null}),this.userData}}return Me.\u0275fac=function(K){return new(K||Me)(v.LFG(J.ST),v.LFG(me._W),v.LFG(le.zQ),v.LFG(ue.F0),v.LFG(v.R0b))},Me.\u0275prov=v.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})()},8498:(Vt,Ie,N)=>{"use strict";var f=N(9075),v=N(639),J=N(289),me=N(3409),le=N(5576),ue=N(8583);function Ae(c,o){1&c&&(v.TgZ(0,"a",13),v._uU(1,"Ingresar"),v.qZA())}function Me(c,o){1&c&&(v.TgZ(0,"a",14),v._uU(1,"Secci\xf3n Usuarios"),v.qZA())}function ge(c,o){if(1&c){const s=v.EpF();v.TgZ(0,"a",15),v.NdJ("click",function(){return v.CHM(s),v.oxw().logOut()}),v._uU(1,"Salir"),v.qZA()}}class K{constructor(o,s){this.router=o,this.authService=s,this.isLogged=!1,this.esAdmin=!1,K.updateUserStatus.subscribe(h=>{this.isLogged=!0,"administrador"==JSON.parse(localStorage.getItem("loggedUser")).tipo&&(this.esAdmin=!0)})}ngOnInit(){let o=JSON.parse(localStorage.getItem("loggedUser"));o?(this.isLogged=!0,"administrador"==o.tipo&&(this.esAdmin=!0)):this.isLogged=!1}logOut(){this.isLogged=!1,this.esAdmin=!1,this.authService.SignOut()}}function Z(c,o){1&c&&(v.TgZ(0,"a",8),v._uU(1,"Ingresar"),v.qZA())}function te(c,o){1&c&&(v.TgZ(0,"a",9),v._uU(1,"Secci\xf3n Usuarios"),v.qZA())}K.updateUserStatus=new me.Subject,K.\u0275fac=function(o){return new(o||K)(v.Y36(J.F0),v.Y36(le.$))},K.\u0275cmp=v.Xpm({type:K,selectors:[["app-nav-bar"]],decls:22,vars:3,consts:[["aria-label","Third navbar example",1,"navbar","navbar-expand-sm","navbar-dark","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarsExample03","aria-controls","navbarsExample03","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExample03",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-sm-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["class","nav-link","href","login",4,"ngIf"],["href","registro",1,"nav-link"],["class","nav-link","href","seccion-usuarios",4,"ngIf"],["class","nav-link",3,"click",4,"ngIf"],["href","login",1,"nav-link"],["href","seccion-usuarios",1,"nav-link"],[1,"nav-link",3,"click"]],template:function(o,s){1&o&&(v.TgZ(0,"body"),v.TgZ(1,"main"),v.TgZ(2,"nav",0),v.TgZ(3,"div",1),v.TgZ(4,"a",2),v._uU(5,"Bienvenido a TPCl\xednica"),v.qZA(),v.TgZ(6,"button",3),v._UZ(7,"span",4),v.qZA(),v.TgZ(8,"div",5),v.TgZ(9,"ul",6),v.TgZ(10,"li",7),v.TgZ(11,"a",8),v._uU(12,"Home"),v.qZA(),v.qZA(),v.TgZ(13,"li",7),v.YNc(14,Ae,2,0,"a",9),v.qZA(),v.TgZ(15,"li",7),v.TgZ(16,"a",10),v._uU(17,"Registro"),v.qZA(),v.qZA(),v.TgZ(18,"li",7),v.YNc(19,Me,2,0,"a",11),v.qZA(),v.TgZ(20,"li",7),v.YNc(21,ge,2,0,"a",12),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&o&&(v.xp6(14),v.Q6J("ngIf",!s.isLogged),v.xp6(5),v.Q6J("ngIf",s.esAdmin),v.xp6(2),v.Q6J("ngIf",s.isLogged))},directives:[ue.O5],styles:[""]});class de{constructor(o,s){this.router=o,this.authService=s,this.isLogged=!1,this.esAdmin=!1,K.updateUserStatus.subscribe(h=>{this.isLogged=!0,"administrador"==JSON.parse(localStorage.getItem("loggedUser")).tipo&&(this.esAdmin=!0)})}ngOnInit(){let o=JSON.parse(localStorage.getItem("loggedUser"));o?(this.isLogged=!0,"administrador"==o.tipo&&(this.esAdmin=!0)):this.isLogged=!1}}de.updateUserStatus=new me.Subject,de.\u0275fac=function(o){return new(o||de)(v.Y36(J.F0),v.Y36(le.$))},de.\u0275cmp=v.Xpm({type:de,selectors:[["app-home"]],decls:18,vars:2,consts:[["lang","en",1,"h-100"],["scroll","none",1,"d-flex","h-100","text-center","text-white","bg-dark"],[1,"cover-container","d-flex","w-100","h-100","p-3","mx-auto","flex-column"],[1,"px-3"],[1,"lead"],["href","login","class","btn btn-lg btn-primary ",4,"ngIf"],["href","registro",1,"btn","btn-lg","btn-primary"],["class","btn btn-lg btn-primary","href","seccion-usuarios",4,"ngIf"],["href","login",1,"btn","btn-lg","btn-primary"],["href","seccion-usuarios",1,"btn","btn-lg","btn-primary"]],template:function(o,s){1&o&&(v.TgZ(0,"html",0),v.TgZ(1,"body",1),v.TgZ(2,"div",2),v.TgZ(3,"main",3),v._UZ(4,"br"),v._UZ(5,"br"),v.TgZ(6,"h1"),v._uU(7,"Bienvenide"),v.qZA(),v.TgZ(8,"h2"),v._uU(9,"Elija una opci\xf3n, estoy seguro de que perder\xe1.."),v.qZA(),v._UZ(10,"br"),v._UZ(11,"br"),v._UZ(12,"br"),v.TgZ(13,"p",4),v.YNc(14,Z,2,0,"a",5),v.TgZ(15,"a",6),v._uU(16,"Registro"),v.qZA(),v.YNc(17,te,2,0,"a",7),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&o&&(v.xp6(14),v.Q6J("ngIf",!s.isLogged),v.xp6(3),v.Q6J("ngIf",s.esAdmin))},directives:[ue.O5],styles:[".btn-secondary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:focus{color:#333;text-shadow:none}body[_ngcontent-%COMP%]{text-shadow:0 .05rem .1rem rgba(0,0,0,.5);box-shadow:inset 0 0 5rem #00000080;background-image:url(fotoBienvenido.2147446ec15018804ae6.webp);background-position:center;background-repeat:no-repeat;background-size:contain}.cover-container[_ngcontent-%COMP%]{max-width:42em}html[_ngcontent-%COMP%]{height:91vh!important}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.25rem 0;font-weight:700;color:#ffffff80;background-color:transparent;border-bottom:.25rem solid transparent}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{border-bottom-color:#ffffff40}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%] + .nav-link[_ngcontent-%COMP%]{margin-left:1rem}.nav-masthead[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;border-bottom-color:#fff}.btn[_ngcontent-%COMP%]{margin:10%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:30px;color:#000;-webkit-text-stroke-width:.5px;-webkit-text-stroke-color:white}"]});var be=N(5614),je=N(9768),Oe=N(7891);function Ye(c,o){if(1&c){const s=v.EpF();v.TgZ(0,"tbody",6),v.NdJ("click",function(){const w=v.CHM(s).$implicit;return v.oxw(2).SeleccionarAdministrador(w)}),v.TgZ(1,"tr"),v.TgZ(2,"td"),v._uU(3),v.qZA(),v.TgZ(4,"td"),v._uU(5),v.qZA(),v.TgZ(6,"td"),v._uU(7),v.qZA(),v.TgZ(8,"td"),v._uU(9),v.qZA(),v.qZA(),v.qZA()}if(2&c){const s=o.$implicit;v.xp6(3),v.Oqu(s.nombre),v.xp6(2),v.Oqu(s.apellido),v.xp6(2),v.Oqu(s.dni),v.xp6(2),v.Oqu(s.edad)}}function Qe(c,o){if(1&c&&(v.TgZ(0,"table",2),v.TgZ(1,"thead",3),v.TgZ(2,"tr"),v.TgZ(3,"th",4),v._uU(4,"Nombre"),v.qZA(),v.TgZ(5,"th",4),v._uU(6,"Apellido"),v.qZA(),v.TgZ(7,"th",4),v._uU(8,"DNI"),v.qZA(),v.TgZ(9,"th",4),v._uU(10,"Edad"),v.qZA(),v.qZA(),v.qZA(),v.YNc(11,Ye,10,4,"tbody",5),v.qZA()),2&c){const s=v.oxw();v.xp6(11),v.Q6J("ngForOf",s.arrayAdministradores)}}function it(c,o){if(1&c){const s=v.EpF();v.TgZ(0,"tbody",6),v.NdJ("click",function(){const w=v.CHM(s).$implicit;return v.oxw(2).SeleccionarEspecialista(w)}),v.TgZ(1,"tr"),v.TgZ(2,"td"),v._uU(3),v.qZA(),v.TgZ(4,"td"),v._uU(5),v.qZA(),v.TgZ(6,"td"),v._uU(7),v.qZA(),v.TgZ(8,"td"),v._uU(9),v.qZA(),v.TgZ(10,"td"),v.TgZ(11,"input",7),v.NdJ("change",function(_){const D=v.CHM(s).$implicit;return v.oxw(2).habilitarEspecialista(D,_.target.checked)}),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&c){const s=o.$implicit;v.xp6(3),v.Oqu(s.nombre),v.xp6(2),v.Oqu(s.apellido),v.xp6(2),v.Oqu(s.dni),v.xp6(2),v.Oqu(s.edad),v.xp6(2),v.Q6J("checked",s.habilitado)}}function nt(c,o){if(1&c&&(v.TgZ(0,"table",2),v.TgZ(1,"thead",3),v.TgZ(2,"tr"),v.TgZ(3,"th",4),v._uU(4,"Nombre"),v.qZA(),v.TgZ(5,"th",4),v._uU(6,"Apellido"),v.qZA(),v.TgZ(7,"th",4),v._uU(8,"DNI"),v.qZA(),v.TgZ(9,"th",4),v._uU(10,"Edad"),v.qZA(),v.TgZ(11,"th",4),v._uU(12,"Habilitado"),v.qZA(),v.qZA(),v.qZA(),v.YNc(13,it,12,5,"tbody",5),v.qZA()),2&c){const s=v.oxw();v.xp6(13),v.Q6J("ngForOf",s.arrayEspecialistas)}}function Ze(c,o){if(1&c){const s=v.EpF();v.TgZ(0,"tbody",6),v.NdJ("click",function(){const w=v.CHM(s).$implicit;return v.oxw(2).SeleccionarPaciente(w)}),v.TgZ(1,"tr"),v.TgZ(2,"td"),v._uU(3),v.qZA(),v.TgZ(4,"td"),v._uU(5),v.qZA(),v.TgZ(6,"td"),v._uU(7),v.qZA(),v.TgZ(8,"td"),v._uU(9),v.qZA(),v.qZA(),v.qZA()}if(2&c){const s=o.$implicit;v.xp6(3),v.Oqu(s.nombre),v.xp6(2),v.Oqu(s.apellido),v.xp6(2),v.Oqu(s.dni),v.xp6(2),v.Oqu(s.edad)}}function Xe(c,o){if(1&c&&(v.TgZ(0,"table",2),v.TgZ(1,"thead",3),v.TgZ(2,"tr"),v.TgZ(3,"th",4),v._uU(4,"Nombre"),v.qZA(),v.TgZ(5,"th",4),v._uU(6,"Apellido"),v.qZA(),v.TgZ(7,"th",4),v._uU(8,"DNI"),v.qZA(),v.TgZ(9,"th",4),v._uU(10,"Edad"),v.qZA(),v.qZA(),v.qZA(),v.YNc(11,Ze,10,4,"tbody",5),v.qZA()),2&c){const s=v.oxw();v.xp6(11),v.Q6J("ngForOf",s.arrayPacientes)}}let ye=(()=>{class c{constructor(s,h,_){this.administradorService=s,this.especialistaService=h,this.pacienteService=_,this.seSeleccionoAdministrador=new v.vpe,this.seSeleccionoPaciente=new v.vpe,this.seSeleccionoEspecialista=new v.vpe,this.arrayAdministradores=[],this.arrayPacientes=[],this.arrayEspecialistas=[]}ngOnInit(){this.administradorService.getAdministradores().subscribe(s=>{let h=[];for(let _=0;_<s.length;_++)h.push(s[_].payload.doc.data());this.arrayAdministradores=h}),this.pacienteService.getPacientes().subscribe(s=>{let h=[];for(let _=0;_<s.length;_++)h.push(s[_].payload.doc.data());this.arrayPacientes=h}),this.especialistaService.getEspecialistas().subscribe(s=>{let h=[];for(let _=0;_<s.length;_++)h.push(s[_].payload.doc.data());this.arrayEspecialistas=h})}SeleccionarAdministrador(s){this.seSeleccionoAdministrador.emit(s)}SeleccionarPaciente(s){this.seSeleccionoPaciente.emit(s)}SeleccionarEspecialista(s){this.seSeleccionoEspecialista.emit(s)}habilitarEspecialista(s,h){s.habilitado=h,this.especialistaService.habilitarEspecialista(s.mail,h)}}return c.\u0275fac=function(s){return new(s||c)(v.Y36(be.p),v.Y36(je.n),v.Y36(Oe.d))},c.\u0275cmp=v.Xpm({type:c,selectors:[["app-tabla-usuarios"]],inputs:{tipoUsuarios:"tipoUsuarios"},outputs:{seSeleccionoAdministrador:"seSeleccionoAdministrador",seSeleccionoPaciente:"seSeleccionoPaciente",seSeleccionoEspecialista:"seSeleccionoEspecialista"},decls:4,vars:3,consts:[[1,"table-responsive"],["class","table table-bordered",4,"ngIf"],[1,"table","table-bordered"],[1,"thead-dark"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["type","checkbox",3,"checked","change"]],template:function(s,h){1&s&&(v.TgZ(0,"div",0),v.YNc(1,Qe,12,1,"table",1),v.YNc(2,nt,14,1,"table",1),v.YNc(3,Xe,12,1,"table",1),v.qZA()),2&s&&(v.xp6(1),v.Q6J("ngIf","Administradores"==h.tipoUsuarios),v.xp6(1),v.Q6J("ngIf","Especialistas"==h.tipoUsuarios),v.xp6(1),v.Q6J("ngIf","Pacientes"==h.tipoUsuarios))},directives:[ue.O5,ue.sg],styles:[""]}),c})(),Qt=(()=>{class c{transform(s){return s?"Si":"No"}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275pipe=v.Yjl({name:"respuestaBooleano",type:c,pure:!0}),c})();function De(c,o){if(1&c&&(v.TgZ(0,"div"),v.TgZ(1,"span"),v._uU(2),v.qZA(),v._UZ(3,"br"),v.TgZ(4,"span"),v._uU(5),v.qZA(),v._UZ(6,"br"),v.TgZ(7,"span"),v._uU(8),v.qZA(),v._UZ(9,"br"),v.TgZ(10,"span"),v._uU(11),v.qZA(),v._UZ(12,"br"),v.TgZ(13,"span"),v._uU(14),v.qZA(),v._UZ(15,"br"),v.TgZ(16,"span"),v._uU(17),v.qZA(),v._UZ(18,"br"),v.TgZ(19,"label"),v._uU(20,"Foto Perfil"),v.qZA(),v._UZ(21,"br"),v._UZ(22,"img",1),v.qZA()),2&c){const s=v.oxw();v.xp6(2),v.hij("Nombre: ",s.administrador.nombre,""),v.xp6(3),v.hij("Apellido: ",s.administrador.apellido,""),v.xp6(3),v.hij("DNI: ",s.administrador.dni,""),v.xp6(3),v.hij("Edad: ",s.administrador.edad,""),v.xp6(3),v.hij("Email: ",s.administrador.mail,""),v.xp6(3),v.hij("Password: ",s.administrador.password,""),v.xp6(5),v.Q6J("src",s.administrador.fotoUrl,v.LSH)}}function Ge(c,o){if(1&c&&(v.TgZ(0,"li",4),v.TgZ(1,"span"),v._uU(2),v.qZA(),v.qZA()),2&c){const s=o.$implicit;v.xp6(2),v.Oqu(s.nombre)}}function ce(c,o){if(1&c&&(v.TgZ(0,"div"),v.TgZ(1,"span"),v._uU(2),v.qZA(),v._UZ(3,"br"),v.TgZ(4,"span"),v._uU(5),v.qZA(),v._UZ(6,"br"),v.TgZ(7,"span"),v._uU(8),v.qZA(),v._UZ(9,"br"),v.TgZ(10,"span"),v._uU(11),v.qZA(),v._UZ(12,"br"),v.TgZ(13,"span"),v._uU(14,"Especialidades: "),v.TgZ(15,"ul",2),v.YNc(16,Ge,3,1,"li",3),v.qZA(),v.qZA(),v.TgZ(17,"span"),v._uU(18),v.ALo(19,"respuestaBooleano"),v.qZA(),v._UZ(20,"br"),v.TgZ(21,"span"),v._uU(22),v.qZA(),v._UZ(23,"br"),v.TgZ(24,"span"),v._uU(25),v.qZA(),v._UZ(26,"br"),v.TgZ(27,"label"),v._uU(28,"Foto Perfil"),v.qZA(),v._UZ(29,"br"),v._UZ(30,"img",1),v.qZA()),2&c){const s=v.oxw();v.xp6(2),v.hij("Nombre: ",s.especialista.nombre,""),v.xp6(3),v.hij("Apellido: ",s.especialista.apellido,""),v.xp6(3),v.hij("DNI: ",s.especialista.dni,""),v.xp6(3),v.hij("Edad: ",s.especialista.edad,""),v.xp6(5),v.Q6J("ngForOf",s.especialista.especialidades),v.xp6(2),v.hij("Habilitado: ",v.lcZ(19,9,s.especialista.habilitado),""),v.xp6(4),v.hij("Email: ",s.especialista.mail,""),v.xp6(3),v.hij("Password: ",s.especialista.password,""),v.xp6(5),v.Q6J("src",s.especialista.fotoUrl,v.LSH)}}function Ne(c,o){if(1&c&&(v.TgZ(0,"div"),v.TgZ(1,"span"),v._uU(2),v.qZA(),v._UZ(3,"br"),v.TgZ(4,"span"),v._uU(5),v.qZA(),v._UZ(6,"br"),v.TgZ(7,"span"),v._uU(8),v.qZA(),v._UZ(9,"br"),v.TgZ(10,"span"),v._uU(11),v.qZA(),v._UZ(12,"br"),v.TgZ(13,"span"),v._uU(14),v.qZA(),v._UZ(15,"br"),v.TgZ(16,"span"),v._uU(17),v.qZA(),v._UZ(18,"br"),v.TgZ(19,"span"),v._uU(20),v.qZA(),v._UZ(21,"br"),v.TgZ(22,"label"),v._uU(23,"Foto Perfil 1"),v.qZA(),v._UZ(24,"br"),v._UZ(25,"img",1),v._UZ(26,"br"),v.TgZ(27,"label"),v._uU(28,"Foto Perfil 2"),v.qZA(),v._UZ(29,"br"),v._UZ(30,"img",1),v.qZA()),2&c){const s=v.oxw();v.xp6(2),v.hij("Nombre: ",s.paciente.nombre,""),v.xp6(3),v.hij("Apellido: ",s.paciente.apellido,""),v.xp6(3),v.hij("DNI: ",s.paciente.dni,""),v.xp6(3),v.hij("edad: ",s.paciente.edad,""),v.xp6(3),v.hij("Obra Social: ",s.paciente.obraSocial,""),v.xp6(3),v.hij("Email: ",s.paciente.mail,""),v.xp6(3),v.hij("Password: ",s.paciente.password,""),v.xp6(5),v.Q6J("src",s.paciente.foto1Url,v.LSH),v.xp6(5),v.Q6J("src",s.paciente.foto2Url,v.LSH)}}let Re=(()=>{class c{constructor(){this.administrador=null,this.especialista=null,this.paciente=null}ngOnInit(){}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=v.Xpm({type:c,selectors:[["app-detalle-usuario"]],inputs:{administrador:"administrador",especialista:"especialista",paciente:"paciente"},decls:3,vars:3,consts:[[4,"ngIf"],["alt","",3,"src"],[1,"list-group","mb-3","text-muted"],["class"," d-flex justify-content-between lh-condensed ",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","lh-condensed"]],template:function(s,h){1&s&&(v.YNc(0,De,23,7,"div",0),v.YNc(1,ce,31,11,"div",0),v.YNc(2,Ne,31,9,"div",0)),2&s&&(v.Q6J("ngIf",h.administrador),v.xp6(1),v.Q6J("ngIf",h.especialista),v.xp6(1),v.Q6J("ngIf",h.paciente))},directives:[ue.O5,ue.sg],pipes:[Qt],styles:["img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),c})();var _e=N(8539);let ct=(()=>{class c{constructor(){this.tipoUsuarios="Especialistas"}ngOnInit(){}mostrarAdministrador(s){this.limpiar(),this.administrador=s}mostrarPaciente(s){this.limpiar(),this.paciente=s}mostrarEspecialista(s){this.limpiar(),this.especialista=s}limpiar(){null!=this.administrador&&(this.administrador=null),null!=this.especialista&&(this.especialista=null),null!=this.paciente&&(this.paciente=null)}cambiarTabla(s){this.limpiar(),this.tipoUsuarios=s}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=v.Xpm({type:c,selectors:[["app-seccion-usuarios"]],decls:32,vars:5,consts:[["lang","en"],[1,"container","py-4"],[1,"pb-3","mb-4","border-bottom"],[1,"fs-4"],[1,"p-5","mb-4","bg-light","rounded-3"],[1,"container-fluid","py-5"],[1,"display-5","fw-bold"],[3,"tipoUsuarios","seSeleccionoAdministrador","seSeleccionoPaciente","seSeleccionoEspecialista"],["type","button",1,"btn","btn-primary","btn-md",3,"click"],[1,"row","align-items-md-stretch"],[1,"col-md-6"],[1,"h-100","p-5","bg-light","border","rounded-3"],[3,"administrador","paciente","especialista"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(s,h){1&s&&(v.TgZ(0,"html",0),v.TgZ(1,"body"),v.TgZ(2,"main"),v.TgZ(3,"div",1),v.TgZ(4,"header",2),v.TgZ(5,"span",3),v._uU(6,"Usuarios"),v.qZA(),v.qZA(),v.TgZ(7,"div",4),v.TgZ(8,"div",5),v.TgZ(9,"h1",6),v._uU(10),v.qZA(),v.TgZ(11,"app-tabla-usuarios",7),v.NdJ("seSeleccionoAdministrador",function(w){return h.mostrarAdministrador(w)})("seSeleccionoPaciente",function(w){return h.mostrarPaciente(w)})("seSeleccionoEspecialista",function(w){return h.mostrarEspecialista(w)}),v.qZA(),v.TgZ(12,"button",8),v.NdJ("click",function(){return h.cambiarTabla("Administradores")}),v._uU(13,"Ver Administradores"),v.qZA(),v.TgZ(14,"button",8),v.NdJ("click",function(){return h.cambiarTabla("Especialistas")}),v._uU(15,"Ver Especialistas"),v.qZA(),v.TgZ(16,"button",8),v.NdJ("click",function(){return h.cambiarTabla("Pacientes")}),v._uU(17,"Ver Pacientes"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(18,"div",9),v.TgZ(19,"div",10),v.TgZ(20,"div",11),v.TgZ(21,"h2"),v._uU(22,"Detalle Usuario Seleccionado"),v.qZA(),v._UZ(23,"app-detalle-usuario",12),v._UZ(24,"br"),v.TgZ(25,"button",13),v.NdJ("click",function(){return h.limpiar()}),v._uU(26,"Limpiar"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(27,"div",10),v.TgZ(28,"div",11),v.TgZ(29,"h2"),v._uU(30,"Agregar Usuario"),v.qZA(),v._UZ(31,"app-registration"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&s&&(v.xp6(10),v.Oqu(h.tipoUsuarios),v.xp6(1),v.Q6J("tipoUsuarios",h.tipoUsuarios),v.xp6(12),v.Q6J("administrador",h.administrador)("paciente",h.paciente)("especialista",h.especialista))},directives:[ye,Re,_e.J],styles:[".btn[_ngcontent-%COMP%]{margin:.1%}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:91vh!important}"]}),c})();var Te=N(9344),jt=N(665);let mn=(()=>{class c{constructor(s,h,_,w,D,U){this.administradorService=s,this.pacienteService=h,this.especialistaService=_,this.authService=w,this.router=D,this.toastr=U}ngOnInit(){}logIn(){this.authService.SignIn(this.email,this.password).then(s=>{localStorage.setItem("user",JSON.stringify(s.user)),this.logInAdmin(),this.userIsLogged()||(this.logInEspecialista(),this.userIsLogged()||this.logInPaciente())}).catch(s=>{this.toastr.error("Algo sali\xf3 mal, revise los datos ingresados","Login")})}logInAdmin(){let s=this.administradorService.getAdministrador(this.email).subscribe(h=>{if(null!=h[0]){let _=h[0].payload.doc.data();localStorage.setItem("loggedUser",JSON.stringify(_)),K.updateUserStatus.next(!0),this.toastr.success("Perfecto, bienvenido "+_.nombre,"Login"),this.router.navigate(["home"])}s.unsubscribe()})}logInPaciente(){let s=JSON.parse(localStorage.getItem("user")),h=this.pacienteService.getPaciente(this.email).subscribe(_=>{if(null!=_[0])if(s.emailVerified){let w=_[0].payload.doc.data();localStorage.setItem("loggedUser",JSON.stringify(w)),K.updateUserStatus.next(!0),this.toastr.success("Perfecto, bienvenido "+w.nombre,"Login"),this.router.navigate(["home"])}else this.toastr.error("No se ha verificado el email correctamente","Login"),this.router.navigate(["registro/verify-email"]);h.unsubscribe()})}logInEspecialista(){let s=JSON.parse(localStorage.getItem("user")),h=this.especialistaService.getEspecialista(this.email).subscribe(_=>{if(null!=_[0])if(s.emailVerified){let w=_[0].payload.doc.data();1==w.habilitado?(localStorage.setItem("loggedUser",JSON.stringify(w)),K.updateUserStatus.next(!0),this.toastr.success("Perfecto, bienvenido "+w.nombre,"Login"),this.router.navigate(["home"])):(localStorage.removeItem("user"),this.toastr.error("Su cuenta a\xfan no se encuentra habilitada. Por favor, p\xf3nganse en contaco con su administrador","Login"))}else this.toastr.error("No se ha verificado el email correctamente","Login"),this.router.navigate(["registro/verify-email"]);h.unsubscribe()})}cargarAdmin(){this.email="matiasgravante@hotmail.com",this.password="123456"}cargarPaciente(){this.email="alesilversalmon@hotmail.com",this.password="123456"}cargarEspecialista(){this.email="matiasgravante@gmail.com",this.password="123456"}userIsLogged(){return JSON.parse(localStorage.getItem("loggedUser"))}}return c.\u0275fac=function(s){return new(s||c)(v.Y36(be.p),v.Y36(Oe.d),v.Y36(je.n),v.Y36(le.$),v.Y36(J.F0),v.Y36(Te._W))},c.\u0275cmp=v.Xpm({type:c,selectors:[["app-login"]],decls:28,vars:2,consts:[["lang","en"],[1,"text-center"],[1,"form-signin"],[1,"h3","mb-3","fw-normal"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],["type","submit",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-md","btn-primary",3,"click"],["type","submit","href","/registro",1,"w-100","btn","btn-sm","btn-secondary"]],template:function(s,h){1&s&&(v.TgZ(0,"html",0),v.TgZ(1,"body",1),v.TgZ(2,"main",2),v.TgZ(3,"form"),v.TgZ(4,"h1",3),v._uU(5,"\xbfSeguro quiere loguearse? OK..."),v.qZA(),v.TgZ(6,"div",4),v.TgZ(7,"input",5),v.NdJ("ngModelChange",function(w){return h.email=w}),v.qZA(),v.TgZ(8,"label",6),v._uU(9,"Email"),v.qZA(),v.qZA(),v.TgZ(10,"div",4),v.TgZ(11,"input",7),v.NdJ("ngModelChange",function(w){return h.password=w}),v.qZA(),v.TgZ(12,"label",8),v._uU(13,"Password"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(14,"button",9),v.NdJ("click",function(){return h.cargarAdmin()}),v._uU(15,"Cargar datos Administrador"),v.qZA(),v.TgZ(16,"button",9),v.NdJ("click",function(){return h.cargarEspecialista()}),v._uU(17,"Cargar datos Especialista"),v.qZA(),v.TgZ(18,"button",9),v.NdJ("click",function(){return h.cargarPaciente()}),v._uU(19,"Cargar datos Paciente"),v.qZA(),v._UZ(20,"br"),v._UZ(21,"br"),v.TgZ(22,"button",10),v.NdJ("click",function(){return h.logIn()}),v._uU(23,"Ingresar"),v.qZA(),v._UZ(24,"br"),v._UZ(25,"br"),v.TgZ(26,"a",11),v._uU(27,"Registrarse"),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&s&&(v.xp6(7),v.Q6J("ngModel",h.email),v.xp6(4),v.Q6J("ngModel",h.password))},directives:[jt._Y,jt.JL,jt.F,jt.Fj,jt.JJ,jt.On],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:91vh!important}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:-moz-fit-content;max-width:fit-content;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}.btn[_ngcontent-%COMP%]{margin:.1%}"]}),c})();var Bn=N(7190);const xn=[{path:"",component:de},{path:"login",component:mn},{path:"registro",loadChildren:()=>Promise.resolve().then(N.bind(N,7190)).then(c=>Bn.RegistroModule)},{path:"home",component:de},{path:"seccion-usuarios",component:ct,canActivate:[(()=>{class c{constructor(s){this.router=s}canActivate(s,h){let _=JSON.parse(localStorage.getItem("loggedUser"));return!(!_||"administrador"!=_.tipo)||(this.router.navigate(["home"]),!1)}}return c.\u0275fac=function(s){return new(s||c)(v.LFG(J.F0))},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()]}];let pr=(()=>{class c{}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=v.oAB({type:c}),c.\u0275inj=v.cJS({imports:[[J.Bz.forRoot(xn,{relativeLinkResolution:"legacy"})],J.Bz]}),c})(),vn=(()=>{class c{constructor(){this.title="TPclinica"}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=v.Xpm({type:c,selectors:[["app-root"]],decls:2,vars:0,template:function(s,h){1&s&&(v._UZ(0,"app-nav-bar"),v._UZ(1,"router-outlet"))},directives:[K,J.lC],styles:[""]}),c})();var Et=N(8939),Dt=N(4421),at=N(4346),Ve=N(1827),bt=N(4323),ke=N(1755),rt=N(6885),Se=N(784),et=N(1926),It=N(3117),Ct=N(5488),dn=N(3201),En=N(1894),Jn=N(3413),gn=N(576),qn=N(9361),Tt=N(7375),Je=N(8797),cn=(N(4671),N(4486)),kt=N(6034),ln=N(8239),Ht=N(5452),re=N(3854),tr=N(5601);const ar="@firebase/database";let ni="";function Ti(c){ni=c}class Gr{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,s){null==s?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,re.Pz)(s))}get(o){const s=this.domStorage_.getItem(this.prefixedName_(o));return null==s?null:(0,re.cI)(s)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Ue{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,s){null==s?delete this.cache_[o]:this.cache_[o]=s}get(o){return(0,re.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const qe=function(c){try{if("undefined"!=typeof window&&void 0!==window[c]){const o=window[c];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new Gr(o)}}catch(o){}return new Ue},He=qe("localStorage"),Nt=qe("sessionStorage"),_t=new tr.Yd("@firebase/database"),rn=function(){let c=1;return function(){return c++}}(),Vn=function(c){const o=(0,re.dS)(c),s=new re.gQ;s.update(o);const h=s.digest();return re.US.encodeByteArray(h)},vr=function(...c){let o="";for(let s=0;s<c.length;s++){const h=c[s];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?o+=vr.apply(null,h):o+="object"==typeof h?(0,re.Pz)(h):h,o+=" "}return o};let ir=null,Sn=!0;const _r=function(c,o){(0,re.hu)(!o||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(_t.logLevel=tr.in.VERBOSE,ir=_t.log.bind(_t),o&&Nt.set("logging_enabled",!0)):"function"==typeof c?ir=c:(ir=null,Nt.remove("logging_enabled"))},Rn=function(...c){if(!0===Sn&&(Sn=!1,null===ir&&!0===Nt.get("logging_enabled")&&_r(!0)),ir){const o=vr.apply(null,c);ir(o)}},qr=function(c){return function(...o){Rn(c,...o)}},Kr=function(...c){const o="FIREBASE INTERNAL ERROR: "+vr(...c);_t.error(o)},bi=function(...c){const o=`FIREBASE FATAL ERROR: ${vr(...c)}`;throw _t.error(o),new Error(o)},rr=function(...c){const o="FIREBASE WARNING: "+vr(...c);_t.warn(o)},ji=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},di="[MIN_NAME]",Pn="[MAX_NAME]",xr=function(c,o){if(c===o)return 0;if(c===di||o===Pn)return-1;if(o===di||c===Pn)return 1;{const s=qt(c),h=qt(o);return null!==s?null!==h?s-h==0?c.length-o.length:s-h:-1:null!==h?1:c<o?-1:1}},Hr=function(c,o){return c===o?0:c<o?-1:1},Fi=function(c,o){if(o&&c in o)return o[c];throw new Error("Missing required key ("+c+") in object: "+(0,re.Pz)(o))},Yi=function(c){if("object"!=typeof c||null===c)return(0,re.Pz)(c);const o=[];for(const h in c)o.push(h);o.sort();let s="{";for(let h=0;h<o.length;h++)0!==h&&(s+=","),s+=(0,re.Pz)(o[h]),s+=":",s+=Yi(c[o[h]]);return s+="}",s},bs=function(c,o){const s=c.length;if(s<=o)return[c];const h=[];for(let _=0;_<s;_+=o)h.push(c.substring(_,_+o>s?s:_+o));return h};function ei(c,o){for(const s in c)c.hasOwnProperty(s)&&o(s,c[s])}const ws=function(c){(0,re.hu)(!ji(c),"Invalid JSON number");const h=1023;let _,w,D,U,Y;0===c?(w=0,D=0,_=1/c==-1/0?1:0):(_=c<0,(c=Math.abs(c))>=Math.pow(2,1-h)?(U=Math.min(Math.floor(Math.log(c)/Math.LN2),h),w=U+h,D=Math.round(c*Math.pow(2,52-U)-Math.pow(2,52))):(w=0,D=Math.round(c/Math.pow(2,-1074))));const ae=[];for(Y=52;Y;Y-=1)ae.push(D%2?1:0),D=Math.floor(D/2);for(Y=11;Y;Y-=1)ae.push(w%2?1:0),w=Math.floor(w/2);ae.push(_?1:0),ae.reverse();const $e=ae.join("");let tt="";for(Y=0;Y<64;Y+=8){let wt=parseInt($e.substr(Y,8),2).toString(16);1===wt.length&&(wt="0"+wt),tt+=wt}return tt.toLowerCase()},Qr=new RegExp("^-?(0*)\\d{1,10}$"),ls=-2147483648,On=2147483647,qt=function(c){if(Qr.test(c)){const o=Number(c);if(o>=ls&&o<=On)return o}return null},jn=function(c){try{c()}catch(o){setTimeout(()=>{throw rr("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},st=function(c,o){const s=setTimeout(c,o);return"object"==typeof s&&s.unref&&s.unref(),s};class ze{constructor(o,s){this.appName_=o,this.appCheckProvider=s,this.appCheck=null==s?void 0:s.getImmediate({optional:!0}),this.appCheck||null==s||s.get().then(h=>this.appCheck=h)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((s,h)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(s,h):s(null)},0)})}addTokenChangeListener(o){var s;null===(s=this.appCheckProvider)||void 0===s||s.get().then(h=>h.addTokenListener(o))}notifyForInvalidToken(){rr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ce{constructor(o,s,h){this.appName_=o,this.firebaseOptions_=s,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.onInit(_=>this.auth_=_)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(s=>s&&"auth/token-not-initialized"===s.code?(Rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,h)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(s,h):s(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(s=>s.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(s=>s.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rr(o)}}let ht=(()=>{class c{constructor(s){this.accessToken=s}getToken(s){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(s){s(this.accessToken)}removeTokenChangeListener(s){}notifyForInvalidToken(){}}return c.OWNER="owner",c})();const Wn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pt="websocket",yt="long_polling";class At{constructor(o,s,h,_,w=!1,D="",U=!1){this.secure=s,this.namespace=h,this.webSocketOnly=_,this.nodeAdmin=w,this.persistenceKey=D,this.includeNamespaceInQueryParams=U,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=He.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&He.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yn(c,o,s){let h;if((0,re.hu)("string"==typeof o,"typeof type must == string"),(0,re.hu)("object"==typeof s,"typeof params must == object"),o===pt)h=(c.secure?"wss://":"ws://")+c.internalHost+"/.ws?";else{if(o!==yt)throw new Error("Unknown connection type: "+o);h=(c.secure?"https://":"http://")+c.internalHost+"/.lp?"}(function(c){return c.host!==c.internalHost||c.isCustomHost()||c.includeNamespaceInQueryParams})(c)&&(s.ns=c.namespace);const _=[];return ei(s,(w,D)=>{_.push(w+"="+D)}),h+_.join("&")}class Ln{constructor(){this.counters_={}}incrementCounter(o,s=1){(0,re.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=s}get(){return(0,re.p$)(this.counters_)}}const Tr={},nr={};function Nr(c){const o=c.toString();return Tr[o]||(Tr[o]=new Ln),Tr[o]}class oi{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,s){this.closeAfterResponse=o,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,s){for(this.pendingResponses[o]=s;this.pendingResponses[this.currentResponseNum];){const h=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<h.length;++_)h[_]&&jn(()=>{this.onMessage_(h[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class so{constructor(o,s,h,_,w,D,U){this.connId=o,this.repoInfo=s,this.applicationId=h,this.appCheckToken=_,this.authToken=w,this.transportSessionId=D,this.lastSessionId=U,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qr(o),this.stats_=Nr(s),this.urlFn=Y=>(this.appCheckToken&&(Y.ac=this.appCheckToken),yn(s,yt,Y))}open(o,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new oi(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if((0,re.Yr)()||"complete"===document.readyState)c();else{let o=!1;const s=function(){document.body?o||(o=!0,c()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&s()}),window.attachEvent("onload",s))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ks((...w)=>{const[D,U,Y,ae,$e]=w;if(this.incrementIncomingBytes_(w),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===D)this.id=U,this.password=Y;else{if("close"!==D)throw new Error("Unrecognized command received: "+D);U?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(U,()=>{this.onClosed_()})):this.onClosed_()}},(...w)=>{const[D,U]=w;this.incrementIncomingBytes_(w),this.myPacketOrderer.handleResponse(D,U)},()=>{this.onClosed_()},this.urlFn);const h={start:"t"};h.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=this.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",this.transportSessionId&&(h.s=this.transportSessionId),this.lastSessionId&&(h.ls=this.lastSessionId),this.applicationId&&(h.p=this.applicationId),this.appCheckToken&&(h.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Wn.test(location.hostname)&&(h.r="f");const _=this.urlFn(h);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){so.forceAllow_=!0}static forceDisallow(){so.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!so.forceAllow_&&(so.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const s=(0,re.Pz)(o);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const h=(0,re.h$)(s),_=bs(h,1840);for(let w=0;w<_.length;w++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[w]),this.curSegmentNum++}addDisconnectPingFrame(o,s){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const h={dframe:"t"};h.id=o,h.pw=s,this.myDisconnFrame.src=this.urlFn(h),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const s=(0,re.Pz)(o).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class Ks{constructor(o,s,h,_){if(this.onDisconnect=h,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=o,this.onMessageCB=s;else{this.uniqueCallbackIdentifier=rn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=s,this.myIFrame=Ks.createIFrame_();let w="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(w='<script>document.domain="'+document.domain+'";<\/script>');const D="<html><body>"+w+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(D),this.myIFrame.doc.close()}catch(U){Rn("frame writing exception"),U.stack&&Rn(U.stack),Rn(U)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Rn("No IE domain setting required")}catch(s){const h=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+h+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,s){for(this.myID=o,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let s=this.urlFn(o),h="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+h.length<=1870;){const D=this.pendingSegs.shift();h=h+"&seg"+_+"="+D.seg+"&ts"+_+"="+D.ts+"&d"+_+"="+D.d,_++}return s+=h,this.addLongPollTag_(s,this.currentSerial),!0}return!1}enqueueSegment(o,s,h){this.pendingSegs.push({seg:o,ts:s,d:h}),this.alive&&this.newRequest_()}addLongPollTag_(o,s){this.outstandingRequests.add(s);const h=()=>{this.outstandingRequests.delete(s),this.newRequest_()},_=setTimeout(h,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(_),h()})}addTag(o,s){(0,re.Yr)()?this.doNodeLongPoll(o,s):setTimeout(()=>{try{if(!this.sendNewPolls)return;const h=this.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=o,h.onload=h.onreadystatechange=function(){const _=h.readyState;(!_||"loaded"===_||"complete"===_)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),s())},h.onerror=()=>{Rn("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(h)}catch(h){}},Math.floor(1))}}let Pi=null;"undefined"!=typeof MozWebSocket?Pi=MozWebSocket:"undefined"!=typeof WebSocket&&(Pi=WebSocket);let Ns=(()=>{class c{constructor(s,h,_,w,D,U,Y){this.connId=s,this.applicationId=_,this.appCheckToken=w,this.authToken=D,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qr(this.connId),this.stats_=Nr(h),this.connURL=c.connectionURL_(h,U,Y,w),this.nodeAdmin=h.nodeAdmin}static connectionURL_(s,h,_,w){const D={v:"5"};return!(0,re.Yr)()&&"undefined"!=typeof location&&location.hostname&&Wn.test(location.hostname)&&(D.r="f"),h&&(D.s=h),_&&(D.ls=_),w&&(D.ac=w),yn(s,pt,D)}open(s,h){this.onDisconnect=h,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,He.set("previous_websocket_failure",!0);try{if((0,re.Yr)()){const w={headers:{"User-Agent":`Firebase/5/${ni}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(w.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(w.headers["X-Firebase-AppCheck"]=this.appCheckToken);const D=process.env,U=0===this.connURL.indexOf("wss://")?D.HTTPS_PROXY||D.https_proxy:D.HTTP_PROXY||D.http_proxy;U&&(w.proxy={origin:U}),this.mySock=new Pi(this.connURL,[],w)}else this.mySock=new Pi(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(_){this.log_("Error instantiating WebSocket.");const w=_.message||_.data;return w&&this.log_(w),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const w=_.message||_.data;w&&this.log_(w),this.onClosed_()}}start(){}static forceDisallow(){c.forceDisallow_=!0}static isAvailable(){let s=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(s=!0)}return!s&&null!==Pi&&!c.forceDisallow_}static previouslyFailed(){return He.isInMemoryStorage||!0===He.get("previous_websocket_failure")}markConnectionHealthy(){He.remove("previous_websocket_failure")}appendFrame_(s){if(this.frames.push(s),this.frames.length===this.totalFrames){const h=this.frames.join("");this.frames=null;const _=(0,re.cI)(h);this.onMessage(_)}}handleNewFrameCount_(s){this.totalFrames=s,this.frames=[]}extractFrameCount_(s){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),s.length<=6){const h=Number(s);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),s}handleIncomingFrame(s){if(null===this.mySock)return;const h=s.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{const _=this.extractFrameCount_(h);null!==_&&this.appendFrame_(_)}}send(s){this.resetKeepAlive();const h=(0,re.Pz)(s);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const _=bs(h,16384);_.length>1&&this.sendString_(String(_.length));for(let w=0;w<_.length;w++)this.sendString_(_[w])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(s){try{this.mySock.send(s)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c})();class Xo{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[so,Ns]}initTransports_(o){const s=Ns&&Ns.isAvailable();let h=s&&!Ns.previouslyFailed();if(o.webSocketOnly&&(s||rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),h=!0),h)this.transports_=[Ns];else{const _=this.transports_=[];for(const w of Xo.ALL_TRANSPORTS)w&&w.isAvailable()&&_.push(w)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Ys{constructor(o,s,h,_,w,D,U,Y,ae,$e){this.id=o,this.repoInfo_=s,this.applicationId_=h,this.appCheckToken_=_,this.authToken_=w,this.onMessage_=D,this.onReady_=U,this.onDisconnect_=Y,this.onKill_=ae,this.lastSessionId=$e,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qr("c:"+this.id+":"),this.transportManager_=new Xo(s),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,h)},Math.floor(0));const _=o.healthyTimeout||0;_>0&&(this.healthyTimeout_=st(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return s=>{o===this.conn_?this.onConnectionLost_(s):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return s=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(s):o===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const s=o.t;"a"===s?this.upgradeIfSecondaryHealthy_():"r"===s?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===s&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const s=Fi("t",o),h=Fi("d",o);if("c"===s)this.onSecondaryControl_(h);else{if("d"!==s)throw new Error("Unknown protocol layer: "+s);this.pendingDataMessages.push(h)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const s=Fi("t",o),h=Fi("d",o);"c"===s?this.onControl_(h):"d"===s&&this.onDataMessage_(h)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const s=Fi("t",o);if("d"in o){const h=o.d;if("h"===s)this.onHandshake_(h);else if("n"===s){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===s?this.onConnectionShutdown_(h):"r"===s?this.onReset_(h):"e"===s?Kr("Server Error: "+h):"o"===s?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kr("Unknown control packet command: "+s)}}onHandshake_(o){const s=o.ts,h=o.v,_=o.h;this.sessionId=o.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),"5"!==h&&rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,h),st(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,s){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):st(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(He.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Cs{put(o,s,h,_){}merge(o,s,h,_){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,s,h){}onDisconnectMerge(o,s,h){}onDisconnectCancel(o,s){}reportStats(o){}}class Si{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,re.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...s){if(Array.isArray(this.listeners_[o])){const h=[...this.listeners_[o]];for(let _=0;_<h.length;_++)h[_].callback.apply(h[_].context,s)}}on(o,s,h){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:s,context:h});const _=this.getInitialEvent(o);_&&s.apply(h,_)}off(o,s,h){this.validateEventType_(o);const _=this.listeners_[o]||[];for(let w=0;w<_.length;w++)if(_[w].callback===s&&(!h||h===_[w].context))return void _.splice(w,1)}validateEventType_(o){(0,re.hu)(this.allowedEvents_.find(s=>s===o),"Unknown event: "+o)}}class j extends Si{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new j}getInitialEvent(o){return(0,re.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class ie{constructor(o,s){if(void 0===s){this.pieces_=o.split("/");let h=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[h]=this.pieces_[_],h++);this.pieces_.length=h,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=s}toString(){let o="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)""!==this.pieces_[s]&&(o+="/"+this.pieces_[s]);return o||"/"}}function Pe(){return new ie("")}function gt(c){return c.pieceNum_>=c.pieces_.length?null:c.pieces_[c.pieceNum_]}function $t(c){return c.pieces_.length-c.pieceNum_}function L(c){let o=c.pieceNum_;return o<c.pieces_.length&&o++,new ie(c.pieces_,o)}function k(c){return c.pieceNum_<c.pieces_.length?c.pieces_[c.pieces_.length-1]:null}function X(c,o=0){return c.pieces_.slice(c.pieceNum_+o)}function dt(c){if(c.pieceNum_>=c.pieces_.length)return null;const o=[];for(let s=c.pieceNum_;s<c.pieces_.length-1;s++)o.push(c.pieces_[s]);return new ie(o,0)}function Ft(c,o){const s=[];for(let h=c.pieceNum_;h<c.pieces_.length;h++)s.push(c.pieces_[h]);if(o instanceof ie)for(let h=o.pieceNum_;h<o.pieces_.length;h++)s.push(o.pieces_[h]);else{const h=o.split("/");for(let _=0;_<h.length;_++)h[_].length>0&&s.push(h[_])}return new ie(s,0)}function an(c){return c.pieceNum_>=c.pieces_.length}function Xn(c,o){const s=gt(c),h=gt(o);if(null===s)return o;if(s===h)return Xn(L(c),L(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+c+")")}function ii(c,o){const s=X(c,0),h=X(o,0);for(let _=0;_<s.length&&_<h.length;_++){const w=xr(s[_],h[_]);if(0!==w)return w}return s.length===h.length?0:s.length<h.length?-1:1}function Wr(c,o){if($t(c)!==$t(o))return!1;for(let s=c.pieceNum_,h=o.pieceNum_;s<=c.pieces_.length;s++,h++)if(c.pieces_[s]!==o.pieces_[h])return!1;return!0}function Ur(c,o){let s=c.pieceNum_,h=o.pieceNum_;if($t(c)>$t(o))return!1;for(;s<c.pieces_.length;){if(c.pieces_[s]!==o.pieces_[h])return!1;++s,++h}return!0}class ps{constructor(o,s){this.errorPrefix_=s,this.parts_=X(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let h=0;h<this.parts_.length;h++)this.byteLength_+=(0,re.ug)(this.parts_[h]);G(this)}}function G(c){if(c.byteLength_>768)throw new Error(c.errorPrefix_+"has a key path longer than 768 bytes ("+c.byteLength_+").");if(c.parts_.length>32)throw new Error(c.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pe(c))}function pe(c){return 0===c.parts_.length?"":"in property '"+c.parts_.join(".")+"'"}class Le extends Si{constructor(){let o,s;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(s="visibilitychange",o="hidden"):void 0!==document.mozHidden?(s="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(s="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(s="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const h=!document[o];h!==this.visible_&&(this.visible_=h,this.trigger("visible",h))},!1)}static getInstance(){return new Le}getInitialEvent(o){return(0,re.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const We=1e3;let Bt,Mr=(()=>{class c extends Cs{constructor(s,h,_,w,D,U,Y,ae){if(super(),this.repoInfo_=s,this.applicationId_=h,this.onDataUpdate_=_,this.onConnectStatus_=w,this.onServerInfoUpdate_=D,this.authTokenProvider_=U,this.appCheckTokenProvider_=Y,this.authOverride_=ae,this.id=c.nextPersistentConnectionId_++,this.log_=qr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=We,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ae&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Le.getInstance().on("visible",this.onVisible_,this),-1===s.host.indexOf("fblocal")&&j.getInstance().on("online",this.onOnline_,this)}sendRequest(s,h,_){const w=++this.requestNumber_,D={r:w,a:s,b:h};this.log_((0,re.Pz)(D)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(D),_&&(this.requestCBHash_[w]=_)}get(s){this.initConnection_();const h=new re.BH,_={p:s._path.toString(),q:s._queryObject},w={action:"g",request:_,onComplete:U=>{const Y=U.d;"ok"===U.s?(this.onDataUpdate_(_.p,Y,!1,null),h.resolve(Y)):h.reject(Y)}};this.outstandingGets_.push(w),this.outstandingGetCount_++;const D=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const U=this.outstandingGets_[D];void 0===U||w!==U||(delete this.outstandingGets_[D],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+D+" timed out on connection"),h.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(D),h.promise}listen(s,h,_,w){this.initConnection_();const D=s._queryIdentifier,U=s._path.toString();this.log_("Listen called for "+U+" "+D),this.listens.has(U)||this.listens.set(U,new Map),(0,re.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(U).has(D),"listen() called twice for same path/queryId.");const Y={onComplete:w,hashFn:h,query:s,tag:_};this.listens.get(U).set(D,Y),this.connected_&&this.sendListen_(Y)}sendGet_(s){const h=this.outstandingGets_[s];this.sendRequest("g",h.request,_=>{delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),h.onComplete&&h.onComplete(_)})}sendListen_(s){const h=s.query,_=h._path.toString(),w=h._queryIdentifier;this.log_("Listen on "+_+" for "+w);const D={p:_};s.tag&&(D.q=h._queryObject,D.t=s.tag),D.h=s.hashFn(),this.sendRequest("q",D,Y=>{const ae=Y.d,$e=Y.s;c.warnOnListenWarnings_(ae,h),(this.listens.get(_)&&this.listens.get(_).get(w))===s&&(this.log_("listen response",Y),"ok"!==$e&&this.removeListen_(_,w),s.onComplete&&s.onComplete($e,ae))})}static warnOnListenWarnings_(s,h){if(s&&"object"==typeof s&&(0,re.r3)(s,"w")){const _=(0,re.DV)(s,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const w='".indexOn": "'+h._queryParams.getIndex().toString()+'"',D=h._path.toString();rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${w} at ${D} to your security rules for better performance.`)}}}refreshAuthToken(s){this.authToken_=s,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(s)}reduceReconnectDelayIfAdminCredential_(s){(s&&40===s.length||(0,re.GJ)(s))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(s){this.appCheckToken_=s,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const s=this.authToken_,h=(0,re.w9)(s)?"auth":"gauth",_={cred:s};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(h,_,w=>{const D=w.s,U=w.d||"error";this.authToken_===s&&("ok"===D?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(D,U))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},s=>{const h=s.s,_=s.d||"error";"ok"===h?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(h,_)})}unlisten(s,h){const _=s._path.toString(),w=s._queryIdentifier;this.log_("Unlisten called for "+_+" "+w),(0,re.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,w)&&this.connected_&&this.sendUnlisten_(_,w,s._queryObject,h)}sendUnlisten_(s,h,_,w){this.log_("Unlisten on "+s+" for "+h);const D={p:s};w&&(D.q=_,D.t=w),this.sendRequest("n",D)}onDisconnectPut(s,h,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",s,h,_):this.onDisconnectRequestQueue_.push({pathString:s,action:"o",data:h,onComplete:_})}onDisconnectMerge(s,h,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",s,h,_):this.onDisconnectRequestQueue_.push({pathString:s,action:"om",data:h,onComplete:_})}onDisconnectCancel(s,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",s,null,h):this.onDisconnectRequestQueue_.push({pathString:s,action:"oc",data:null,onComplete:h})}sendOnDisconnect_(s,h,_,w){const D={p:h,d:_};this.log_("onDisconnect "+s,D),this.sendRequest(s,D,U=>{w&&setTimeout(()=>{w(U.s,U.d)},Math.floor(0))})}put(s,h,_,w){this.putInternal("p",s,h,_,w)}merge(s,h,_,w){this.putInternal("m",s,h,_,w)}putInternal(s,h,_,w,D){this.initConnection_();const U={p:h,d:_};void 0!==D&&(U.h=D),this.outstandingPuts_.push({action:s,request:U,onComplete:w}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+h)}sendPut_(s){const h=this.outstandingPuts_[s].action,_=this.outstandingPuts_[s].request,w=this.outstandingPuts_[s].onComplete;this.outstandingPuts_[s].queued=this.connected_,this.sendRequest(h,_,D=>{this.log_(h+" response",D),delete this.outstandingPuts_[s],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),w&&w(D.s,D.d)})}reportStats(s){if(this.connected_){const h={c:s};this.log_("reportStats",h),this.sendRequest("s",h,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(s){if("r"in s){this.log_("from server: "+(0,re.Pz)(s));const h=s.r,_=this.requestCBHash_[h];_&&(delete this.requestCBHash_[h],_(s.b))}else{if("error"in s)throw"A server-side error has occurred: "+s.error;"a"in s&&this.onDataPush_(s.a,s.b)}}onDataPush_(s,h){this.log_("handleServerMessage",s,h),"d"===s?this.onDataUpdate_(h.p,h.d,!1,h.t):"m"===s?this.onDataUpdate_(h.p,h.d,!0,h.t):"c"===s?this.onListenRevoked_(h.p,h.q):"ac"===s?this.onAuthRevoked_(h.s,h.d):"apc"===s?this.onAppCheckRevoked_(h.s,h.d):"sd"===s?this.onSecurityDebugPacket_(h):Kr("Unrecognized action received from server: "+(0,re.Pz)(s)+"\nAre you using the latest client?")}onReady_(s,h){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(s),this.lastSessionId=h,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(s){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(s))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(s){s&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=We,this.realtime_||this.scheduleConnect_(0)),this.visible_=s}onOnline_(s){s?(this.log_("Browser went online."),this.reconnectDelay_=We,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=We),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const s=(new Date).getTime()-this.lastConnectionAttemptTime_;let h=Math.max(0,this.reconnectDelay_-s);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var s=this;return(0,ln.Z)(function*(){if(s.shouldReconnect_()){s.log_("Making a connection attempt"),s.lastConnectionAttemptTime_=(new Date).getTime(),s.lastConnectionEstablishedTime_=null;const h=s.onDataMessage_.bind(s),_=s.onReady_.bind(s),w=s.onRealtimeDisconnect_.bind(s),D=s.id+":"+c.nextConnectionId_++,U=s.lastSessionId;let Y=!1,ae=null;const $e=function(){ae?ae.close():(Y=!0,w())};s.realtime_={close:$e,sendRequest:function(sn){(0,re.hu)(ae,"sendRequest call when we're not connected not allowed."),ae.sendRequest(sn)}};const wt=s.forceTokenRefresh_;s.forceTokenRefresh_=!1;try{const[sn,nn]=yield Promise.all([s.authTokenProvider_.getToken(wt),s.appCheckTokenProvider_.getToken(wt)]);Y?Rn("getToken() completed but was canceled"):(Rn("getToken() completed. Creating connection."),s.authToken_=sn&&sn.accessToken,s.appCheckToken_=nn&&nn.token,ae=new Ys(D,s.repoInfo_,s.applicationId_,s.appCheckToken_,s.authToken_,h,_,w,Dn=>{rr(Dn+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")},U))}catch(sn){s.log_("Failed to get token: "+sn),Y||(s.repoInfo_.nodeAdmin&&rr(sn),$e())}}})()}interrupt(s){Rn("Interrupting connection for reason: "+s),this.interruptReasons_[s]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(s){Rn("Resuming connection for reason: "+s),delete this.interruptReasons_[s],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=We,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(s){const h=s-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:h})}cancelSentTransactions_(){for(let s=0;s<this.outstandingPuts_.length;s++){const h=this.outstandingPuts_[s];h&&"h"in h.request&&h.queued&&(h.onComplete&&h.onComplete("disconnect"),delete this.outstandingPuts_[s],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(s,h){let _;_=h?h.map(D=>Yi(D)).join("$"):"default";const w=this.removeListen_(s,_);w&&w.onComplete&&w.onComplete("permission_denied")}removeListen_(s,h){const _=new ie(s).toString();let w;if(this.listens.has(_)){const D=this.listens.get(_);w=D.get(h),D.delete(h),0===D.size&&this.listens.delete(_)}else w=void 0;return w}onAuthRevoked_(s,h){Rn("Auth token revoked: "+s+"/"+h),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===s||"permission_denied"===s)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(s,h){Rn("App check token revoked: "+s+"/"+h),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===s||"permission_denied"===s)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(s){this.securityDebugCallback_?this.securityDebugCallback_(s):"msg"in s&&console.log("FIREBASE: "+s.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const s of this.listens.values())for(const h of s.values())this.sendListen_(h);for(let s=0;s<this.outstandingPuts_.length;s++)this.outstandingPuts_[s]&&this.sendPut_(s);for(;this.onDisconnectRequestQueue_.length;){const s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(let s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}sendConnectStats_(){const s={};let h="js";(0,re.Yr)()&&(h=this.repoInfo_.nodeAdmin?"admin_node":"node"),s["sdk."+h+"."+ni.replace(/\./g,"-")]=1,(0,re.uI)()?s["framework.cordova"]=1:(0,re.b$)()&&(s["framework.reactnative"]=1),this.reportStats(s)}shouldReconnect_(){const s=j.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&s}}return c.nextPersistentConnectionId_=0,c.nextConnectionId_=0,c})();class Fn{constructor(o,s){this.name=o,this.node=s}static Wrap(o,s){return new Fn(o,s)}}class jr{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,s){const h=new Fn(di,o),_=new Fn(di,s);return 0!==this.compare(h,_)}minPost(){return Fn.MIN}}class ur extends jr{static get __EMPTY_NODE(){return Bt}static set __EMPTY_NODE(o){Bt=o}compare(o,s){return xr(o.name,s.name)}isDefinedOn(o){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,s){return!1}minPost(){return Fn.MIN}maxPost(){return new Fn(Pn,Bt)}makePost(o,s){return(0,re.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new Fn(o,Bt)}toString(){return".key"}}const Ai=new ur;class Fr{constructor(o,s,h,_,w=null){this.isReverse_=_,this.resultGenerator_=w,this.nodeStack_=[];let D=1;for(;!o.isEmpty();)if(o=o,D=s?h(o.key,s):1,_&&(D*=-1),D<0)o=this.isReverse_?o.left:o.right;else{if(0===D){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let s,o=this.nodeStack_.pop();if(s=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let Js,ai=(()=>{class c{constructor(s,h,_,w,D){this.key=s,this.value=h,this.color=null!=_?_:c.RED,this.left=null!=w?w:Pr.EMPTY_NODE,this.right=null!=D?D:Pr.EMPTY_NODE}copy(s,h,_,w,D){return new c(null!=s?s:this.key,null!=h?h:this.value,null!=_?_:this.color,null!=w?w:this.left,null!=D?D:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,h,_){let w=this;const D=_(s,w.key);return w=D<0?w.copy(null,null,null,w.left.insert(s,h,_),null):0===D?w.copy(null,h,null,null,null):w.copy(null,null,null,null,w.right.insert(s,h,_)),w.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pr.EMPTY_NODE;let s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.removeMin_(),null),s.fixUp_()}remove(s,h){let _,w;if(_=this,h(s,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(s,h),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===h(s,_.key)){if(_.right.isEmpty())return Pr.EMPTY_NODE;w=_.right.min_(),_=_.copy(w.key,w.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(s,h))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s}moveRedLeft_(){let s=this.colorFlip_();return s.right.left.isRed_()&&(s=s.copy(null,null,null,null,s.right.rotateRight_()),s=s.rotateLeft_(),s=s.colorFlip_()),s}moveRedRight_(){let s=this.colorFlip_();return s.left.left.isRed_()&&(s=s.rotateRight_(),s=s.colorFlip_()),s}rotateLeft_(){const s=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight_(){const s=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip_(){const s=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,h)}checkMaxDepth_(){const s=this.check_();return Math.pow(2,s)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)}}return c.RED=!0,c.BLACK=!1,c})();class Pr{constructor(o,s=Pr.EMPTY_NODE){this.comparator_=o,this.root_=s}insert(o,s){return new Pr(this.comparator_,this.root_.insert(o,s,this.comparator_).copy(null,null,ai.BLACK,null,null))}remove(o){return new Pr(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,ai.BLACK,null,null))}get(o){let s,h=this.root_;for(;!h.isEmpty();){if(s=this.comparator_(o,h.key),0===s)return h.value;s<0?h=h.left:s>0&&(h=h.right)}return null}getPredecessorKey(o){let s,h=this.root_,_=null;for(;!h.isEmpty();){if(s=this.comparator_(o,h.key),0===s){if(h.left.isEmpty())return _?_.key:null;for(h=h.left;!h.right.isEmpty();)h=h.right;return h.key}s<0?h=h.left:s>0&&(_=h,h=h.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Fr(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,s){return new Fr(this.root_,o,this.comparator_,!1,s)}getReverseIteratorFrom(o,s){return new Fr(this.root_,o,this.comparator_,!0,s)}getReverseIterator(o){return new Fr(this.root_,null,this.comparator_,!0,o)}}function gs(c,o){return xr(c.name,o.name)}function Qs(c,o){return xr(c,o)}Pr.EMPTY_NODE=new class{copy(o,s,h,_,w){return this}insert(o,s,h){return new ai(o,s,null)}remove(o,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yo=function(c){return"number"==typeof c?"number:"+ws(c):"string:"+c},ta=function(c){if(c.isLeafNode()){const o=c.val();(0,re.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,re.r3)(o,".sv"),"Priority must be a string or number.")}else(0,re.hu)(c===Js||c.isEmpty(),"priority of unexpected type.");(0,re.hu)(c===Js||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ns,na,ll,$r=(()=>{class c{constructor(s,h=c.__childrenNodeConstructor.EMPTY_NODE){this.value_=s,this.priorityNode_=h,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ta(this.priorityNode_)}static set __childrenNodeConstructor(s){ns=s}static get __childrenNodeConstructor(){return ns}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(s){return new c(this.value_,s)}getImmediateChild(s){return".priority"===s?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}getChild(s){return an(s)?this:".priority"===gt(s)?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(s,h){return null}updateImmediateChild(s,h){return".priority"===s?this.updatePriority(h):h.isEmpty()&&".priority"!==s?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,h).updatePriority(this.priorityNode_)}updateChild(s,h){const _=gt(s);return null===_?h:h.isEmpty()&&".priority"!==_?this:((0,re.hu)(".priority"!==_||1===$t(s),".priority must be the last token in a path"),this.updateImmediateChild(_,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(L(s),h)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(s,h){return!1}val(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let s="";this.priorityNode_.isEmpty()||(s+="priority:"+yo(this.priorityNode_.val())+":");const h=typeof this.value_;s+=h+":",s+="number"===h?ws(this.value_):this.value_,this.lazyHash_=Vn(s)}return this.lazyHash_}getValue(){return this.value_}compareTo(s){return s===c.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof c.__childrenNodeConstructor?-1:((0,re.hu)(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))}compareToLeafNode_(s){const h=typeof s.value_,_=typeof this.value_,w=c.VALUE_TYPE_ORDER.indexOf(h),D=c.VALUE_TYPE_ORDER.indexOf(_);return(0,re.hu)(w>=0,"Unknown leaf type: "+h),(0,re.hu)(D>=0,"Unknown leaf type: "+_),w===D?"object"===_?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:D-w}withIndex(){return this}isIndexed(){return!0}equals(s){if(s===this)return!0;if(s.isLeafNode()){const h=s;return this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_)}return!1}}return c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c})();const li=new class extends jr{compare(o,s){const h=o.node.getPriority(),_=s.node.getPriority(),w=h.compareTo(_);return 0===w?xr(o.name,s.name):w}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,s){return!o.getPriority().equals(s.getPriority())}minPost(){return Fn.MIN}maxPost(){return new Fn(Pn,new $r("[PRIORITY-POST]",ll))}makePost(o,s){const h=na(o);return new Fn(s,new $r("[PRIORITY-POST]",h))}toString(){return".priority"}},ia=Math.log(2);class Ql{constructor(o){this.count=parseInt(Math.log(o+1)/ia,10),this.current_=this.count-1;const _=(w=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&_}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const vo=function(c,o,s,h){c.sort(o);const _=function(Y,ae){const $e=ae-Y;let tt,wt;if(0===$e)return null;if(1===$e)return tt=c[Y],wt=s?s(tt):tt,new ai(wt,tt.node,ai.BLACK,null,null);{const sn=parseInt($e/2,10)+Y,nn=_(Y,sn),Dn=_(sn+1,ae);return tt=c[sn],wt=s?s(tt):tt,new ai(wt,tt.node,ai.BLACK,nn,Dn)}},U=function(Y){let ae=null,$e=null,tt=c.length;const wt=function(nn,Dn){const Yn=tt-nn,xi=tt;tt-=nn;const vi=_(Yn+1,xi),vs=c[Yn],ro=s?s(vs):vs;sn(new ai(ro,vs.node,Dn,null,vi))},sn=function(nn){ae?(ae.left=nn,ae=nn):($e=nn,ae=nn)};for(let nn=0;nn<Y.count;++nn){const Dn=Y.nextBitIsOne(),Yn=Math.pow(2,Y.count-(nn+1));Dn?wt(Yn,ai.BLACK):(wt(Yn,ai.BLACK),wt(Yn,ai.RED))}return $e}(new Ql(c.length));return new Pr(h||o,U)};let Rl;const Ts={};class ao{constructor(o,s){this.indexes_=o,this.indexSet_=s}static get Default(){return(0,re.hu)(Ts&&li,"ChildrenNode.ts has not been loaded"),Rl=Rl||new ao({".priority":Ts},{".priority":li}),Rl}get(o){const s=(0,re.DV)(this.indexes_,o);if(!s)throw new Error("No index defined for "+o);return s instanceof Pr?s:null}hasIndex(o){return(0,re.r3)(this.indexSet_,o.toString())}addIndex(o,s){(0,re.hu)(o!==Ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const h=[];let _=!1;const w=s.getIterator(Fn.Wrap);let U,D=w.getNext();for(;D;)_=_||o.isDefinedOn(D.node),h.push(D),D=w.getNext();U=_?vo(h,o.getCompare()):Ts;const Y=o.toString(),ae=Object.assign({},this.indexSet_);ae[Y]=o;const $e=Object.assign({},this.indexes_);return $e[Y]=U,new ao($e,ae)}addToIndexes(o,s){const h=(0,re.UI)(this.indexes_,(_,w)=>{const D=(0,re.DV)(this.indexSet_,w);if((0,re.hu)(D,"Missing index implementation for "+w),_===Ts){if(D.isDefinedOn(o.node)){const U=[],Y=s.getIterator(Fn.Wrap);let ae=Y.getNext();for(;ae;)ae.name!==o.name&&U.push(ae),ae=Y.getNext();return U.push(o),vo(U,D.getCompare())}return Ts}{const U=s.get(o.name);let Y=_;return U&&(Y=Y.remove(new Fn(o.name,U))),Y.insert(o,o.node)}});return new ao(h,this.indexSet_)}removeFromIndexes(o,s){const h=(0,re.UI)(this.indexes_,_=>{if(_===Ts)return _;{const w=s.get(o.name);return w?_.remove(new Fn(o.name,w)):_}});return new ao(h,this.indexSet_)}}let La,cr=(()=>{class c{constructor(s,h,_){this.children_=s,this.priorityNode_=h,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&ta(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return La||(La=new c(new Pr(Qs),null,ao.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||La}updatePriority(s){return this.children_.isEmpty()?this:new c(this.children_,s,this.indexMap_)}getImmediateChild(s){if(".priority"===s)return this.getPriority();{const h=this.children_.get(s);return null===h?La:h}}getChild(s){const h=gt(s);return null===h?this:this.getImmediateChild(h).getChild(L(s))}hasChild(s){return null!==this.children_.get(s)}updateImmediateChild(s,h){if((0,re.hu)(h,"We should always be passing snapshot nodes"),".priority"===s)return this.updatePriority(h);{const _=new Fn(s,h);let w,D;h.isEmpty()?(w=this.children_.remove(s),D=this.indexMap_.removeFromIndexes(_,this.children_)):(w=this.children_.insert(s,h),D=this.indexMap_.addToIndexes(_,this.children_));const U=w.isEmpty()?La:this.priorityNode_;return new c(w,U,D)}}updateChild(s,h){const _=gt(s);if(null===_)return h;{(0,re.hu)(".priority"!==gt(s)||1===$t(s),".priority must be the last token in a path");const w=this.getImmediateChild(_).updateChild(L(s),h);return this.updateImmediateChild(_,w)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(s){if(this.isEmpty())return null;const h={};let _=0,w=0,D=!0;if(this.forEachChild(li,(U,Y)=>{h[U]=Y.val(s),_++,D&&c.INTEGER_REGEXP_.test(U)?w=Math.max(w,Number(U)):D=!1}),!s&&D&&w<2*_){const U=[];for(const Y in h)U[Y]=h[Y];return U}return s&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h}hash(){if(null===this.lazyHash_){let s="";this.getPriority().isEmpty()||(s+="priority:"+yo(this.getPriority().val())+":"),this.forEachChild(li,(h,_)=>{const w=_.hash();""!==w&&(s+=":"+h+":"+w)}),this.lazyHash_=""===s?"":Vn(s)}return this.lazyHash_}getPredecessorChildName(s,h,_){const w=this.resolveIndex_(_);if(w){const D=w.getPredecessorKey(new Fn(s,h));return D?D.name:null}return this.children_.getPredecessorKey(s)}getFirstChildName(s){const h=this.resolveIndex_(s);if(h){const _=h.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(s){const h=this.getFirstChildName(s);return h?new Fn(h,this.children_.get(h)):null}getLastChildName(s){const h=this.resolveIndex_(s);if(h){const _=h.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(s){const h=this.getLastChildName(s);return h?new Fn(h,this.children_.get(h)):null}forEachChild(s,h){const _=this.resolveIndex_(s);return _?_.inorderTraversal(w=>h(w.name,w.node)):this.children_.inorderTraversal(h)}getIterator(s){return this.getIteratorFrom(s.minPost(),s)}getIteratorFrom(s,h){const _=this.resolveIndex_(h);if(_)return _.getIteratorFrom(s,w=>w);{const w=this.children_.getIteratorFrom(s.name,Fn.Wrap);let D=w.peek();for(;null!=D&&h.compare(D,s)<0;)w.getNext(),D=w.peek();return w}}getReverseIterator(s){return this.getReverseIteratorFrom(s.maxPost(),s)}getReverseIteratorFrom(s,h){const _=this.resolveIndex_(h);if(_)return _.getReverseIteratorFrom(s,w=>w);{const w=this.children_.getReverseIteratorFrom(s.name,Fn.Wrap);let D=w.peek();for(;null!=D&&h.compare(D,s)>0;)w.getNext(),D=w.peek();return w}}compareTo(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Jl?-1:0}withIndex(s){if(s===Ai||this.indexMap_.hasIndex(s))return this;{const h=this.indexMap_.addIndex(s,this.children_);return new c(this.children_,this.priorityNode_,h)}}isIndexed(s){return s===Ai||this.indexMap_.hasIndex(s)}equals(s){if(s===this)return!0;if(s.isLeafNode())return!1;{const h=s;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){const _=this.getIterator(li),w=h.getIterator(li);let D=_.getNext(),U=w.getNext();for(;D&&U;){if(D.name!==U.name||!D.node.equals(U.node))return!1;D=_.getNext(),U=w.getNext()}return null===D&&null===U}return!1}return!1}}resolveIndex_(s){return s===Ai?null:this.indexMap_.get(s.toString())}}return c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c})();const Jl=new class extends cr{constructor(){super(new Pr(Qs),cr.EMPTY_NODE,ao.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return cr.EMPTY_NODE}isEmpty(){return!1}};function Di(c,o=null){if(null===c)return cr.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(o=c[".priority"]),(0,re.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new $r(c,Di(o));if(c instanceof Array){let s=cr.EMPTY_NODE;return ei(c,(h,_)=>{if((0,re.r3)(c,h)&&"."!==h.substring(0,1)){const w=Di(_);(w.isLeafNode()||!w.isEmpty())&&(s=s.updateImmediateChild(h,w))}}),s.updatePriority(Di(o))}{const s=[];let h=!1;if(ei(c,(D,U)=>{if("."!==D.substring(0,1)){const Y=Di(U);Y.isEmpty()||(h=h||!Y.getPriority().isEmpty(),s.push(new Fn(D,Y)))}}),0===s.length)return cr.EMPTY_NODE;const w=vo(s,gs,D=>D.name,Qs);if(h){const D=vo(s,li.getCompare());return new cr(w,Di(o),new ao({".priority":D},{".priority":li}))}return new cr(w,Di(o),ao.Default)}}Object.defineProperties(Fn,{MIN:{value:new Fn(di,cr.EMPTY_NODE)},MAX:{value:new Fn(Pn,Jl)}}),ur.__EMPTY_NODE=cr.EMPTY_NODE,$r.__childrenNodeConstructor=cr,Js=Jl,ll=Jl,function(c){na=c}(Di);class eu extends jr{constructor(o){super(),this.indexPath_=o,(0,re.hu)(!an(o)&&".priority"!==gt(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,s){const h=this.extractChild(o.node),_=this.extractChild(s.node),w=h.compareTo(_);return 0===w?xr(o.name,s.name):w}makePost(o,s){const h=Di(o),_=cr.EMPTY_NODE.updateChild(this.indexPath_,h);return new Fn(s,_)}maxPost(){const o=cr.EMPTY_NODE.updateChild(this.indexPath_,Jl);return new Fn(Pn,o)}toString(){return X(this.indexPath_,0).join("/")}}const Ua=new class extends jr{compare(o,s){const h=o.node.compareTo(s.node);return 0===h?xr(o.name,s.name):h}isDefinedOn(o){return!0}indexedValueChanged(o,s){return!o.equals(s)}minPost(){return Fn.MIN}maxPost(){return Fn.MAX}makePost(o,s){const h=Di(o);return new Fn(s,h)}toString(){return".value"}},pi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Is=function(){let c=0;const o=[];return function(s){const h=s===c;let _;c=s;const w=new Array(8);for(_=7;_>=0;_--)w[_]=pi.charAt(s%64),s=Math.floor(s/64);(0,re.hu)(0===s,"Cannot push at time == 0");let D=w.join("");if(h){for(_=11;_>=0&&63===o[_];_--)o[_]=0;o[_]++}else for(_=0;_<12;_++)o[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)D+=pi.charAt(o[_]);return(0,re.hu)(20===D.length,"nextPushId: Length should be 20."),D}}(),nu=function(c){if(c===""+On)return"-";const o=qt(c);if(null!=o)return""+(o+1);const s=new Array(c.length);for(let D=0;D<s.length;D++)s[D]=c.charAt(D);if(s.length<786)return s.push("-"),s.join("");let h=s.length-1;for(;h>=0&&"z"===s[h];)h--;if(-1===h)return Pn;const w=pi.charAt(pi.indexOf(s[h])+1);return s[h]=w,s.slice(0,h+1).join("")},cl=function(c){if(c===""+ls)return di;const o=qt(c);if(null!=o)return""+(o-1);const s=new Array(c.length);for(let h=0;h<s.length;h++)s[h]=c.charAt(h);return"-"===s[s.length-1]?1===s.length?""+On:(delete s[s.length-1],s.join("")):(s[s.length-1]=pi.charAt(pi.indexOf(s[s.length-1])-1),s.join("")+"z".repeat(786-s.length))};function Au(c){return{type:"value",snapshotNode:c}}function sa(c,o){return{type:"child_added",snapshotNode:o,childName:c}}function Xs(c,o){return{type:"child_removed",snapshotNode:o,childName:c}}function $o(c,o,s){return{type:"child_changed",snapshotNode:o,childName:c,oldSnap:s}}class Pl{constructor(o){this.index_=o}updateChild(o,s,h,_,w,D){(0,re.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const U=o.getImmediateChild(s);return U.getChild(_).equals(h.getChild(_))&&U.isEmpty()===h.isEmpty()||(null!=D&&(h.isEmpty()?o.hasChild(s)?D.trackChildChange(Xs(s,U)):(0,re.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):U.isEmpty()?D.trackChildChange(sa(s,h)):D.trackChildChange($o(s,h,U))),o.isLeafNode()&&h.isEmpty())?o:o.updateImmediateChild(s,h).withIndex(this.index_)}updateFullNode(o,s,h){return null!=h&&(o.isLeafNode()||o.forEachChild(li,(_,w)=>{s.hasChild(_)||h.trackChildChange(Xs(_,w))}),s.isLeafNode()||s.forEachChild(li,(_,w)=>{if(o.hasChild(_)){const D=o.getImmediateChild(_);D.equals(w)||h.trackChildChange($o(_,w,D))}else h.trackChildChange(sa(_,w))})),s.withIndex(this.index_)}updatePriority(o,s){return o.isEmpty()?cr.EMPTY_NODE:o.updatePriority(s)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class dl{constructor(o){this.indexedFilter_=new Pl(o.getIndex()),this.index_=o.getIndex(),this.startPost_=dl.getStartPost_(o),this.endPost_=dl.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,s,h,_,w,D){return this.matches(new Fn(s,h))||(h=cr.EMPTY_NODE),this.indexedFilter_.updateChild(o,s,h,_,w,D)}updateFullNode(o,s,h){s.isLeafNode()&&(s=cr.EMPTY_NODE);let _=s.withIndex(this.index_);_=_.updatePriority(cr.EMPTY_NODE);const w=this;return s.forEachChild(li,(D,U)=>{w.matches(new Fn(D,U))||(_=_.updateImmediateChild(D,cr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,_,h)}updatePriority(o,s){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const s=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),s)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const s=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),s)}return o.getIndex().maxPost()}}class Qc{constructor(o){this.rangedFilter_=new dl(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,s,h,_,w,D){return this.rangedFilter_.matches(new Fn(s,h))||(h=cr.EMPTY_NODE),o.getImmediateChild(s).equals(h)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,s,h,_,w,D):this.fullLimitUpdateChild_(o,s,h,w,D)}updateFullNode(o,s,h){let _;if(s.isLeafNode()||s.isEmpty())_=cr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<s.numChildren()&&s.isIndexed(this.index_)){let w;_=cr.EMPTY_NODE.withIndex(this.index_),w=this.reverse_?s.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let D=0;for(;w.hasNext()&&D<this.limit_;){const U=w.getNext();let Y;if(Y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),U)<=0:this.index_.compare(U,this.rangedFilter_.getEndPost())<=0,!Y)break;_=_.updateImmediateChild(U.name,U.node),D++}}else{let w,D,U,Y;if(_=s.withIndex(this.index_),_=_.updatePriority(cr.EMPTY_NODE),this.reverse_){Y=_.getReverseIterator(this.index_),w=this.rangedFilter_.getEndPost(),D=this.rangedFilter_.getStartPost();const tt=this.index_.getCompare();U=(wt,sn)=>tt(sn,wt)}else Y=_.getIterator(this.index_),w=this.rangedFilter_.getStartPost(),D=this.rangedFilter_.getEndPost(),U=this.index_.getCompare();let ae=0,$e=!1;for(;Y.hasNext();){const tt=Y.getNext();!$e&&U(w,tt)<=0&&($e=!0),$e&&ae<this.limit_&&U(tt,D)<=0?ae++:_=_.updateImmediateChild(tt.name,cr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,_,h)}updatePriority(o,s){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,s,h,_,w){let D;if(this.reverse_){const tt=this.index_.getCompare();D=(wt,sn)=>tt(sn,wt)}else D=this.index_.getCompare();const U=o;(0,re.hu)(U.numChildren()===this.limit_,"");const Y=new Fn(s,h),ae=this.reverse_?U.getFirstChild(this.index_):U.getLastChild(this.index_),$e=this.rangedFilter_.matches(Y);if(U.hasChild(s)){const tt=U.getImmediateChild(s);let wt=_.getChildAfterChild(this.index_,ae,this.reverse_);for(;null!=wt&&(wt.name===s||U.hasChild(wt.name));)wt=_.getChildAfterChild(this.index_,wt,this.reverse_);const sn=null==wt?1:D(wt,Y);if($e&&!h.isEmpty()&&sn>=0)return null!=w&&w.trackChildChange($o(s,h,tt)),U.updateImmediateChild(s,h);{null!=w&&w.trackChildChange(Xs(s,tt));const Dn=U.updateImmediateChild(s,cr.EMPTY_NODE);return null!=wt&&this.rangedFilter_.matches(wt)?(null!=w&&w.trackChildChange(sa(wt.name,wt.node)),Dn.updateImmediateChild(wt.name,wt.node)):Dn}}return h.isEmpty()?o:$e&&D(ae,Y)>=0?(null!=w&&(w.trackChildChange(Xs(ae.name,ae.node)),w.trackChildChange(sa(s,h))),U.updateImmediateChild(s,h).updateImmediateChild(ae.name,cr.EMPTY_NODE)):o}}class eo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=li}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:di}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===li}copy(){const o=new eo;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function Va(c,o,s){const h=c.copy();return h.startSet_=!0,void 0===o&&(o=null),h.indexStartValue_=o,null!=s?(h.startNameSet_=!0,h.indexStartName_=s):(h.startNameSet_=!1,h.indexStartName_=""),h}function ru(c,o,s){const h=c.copy();return h.endSet_=!0,void 0===o&&(o=null),h.indexEndValue_=o,void 0!==s?(h.endNameSet_=!0,h.indexEndName_=s):(h.endNameSet_=!1,h.indexEndName_=""),h}function hl(c,o){const s=c.copy();return s.index_=o,s}function Ba(c){const o={};if(c.isDefault())return o;let s;return c.index_===li?s="$priority":c.index_===Ua?s="$value":c.index_===Ai?s="$key":((0,re.hu)(c.index_ instanceof eu,"Unrecognized index type!"),s=c.index_.toString()),o.orderBy=(0,re.Pz)(s),c.startSet_&&(o.startAt=(0,re.Pz)(c.indexStartValue_),c.startNameSet_&&(o.startAt+=","+(0,re.Pz)(c.indexStartName_))),c.endSet_&&(o.endAt=(0,re.Pz)(c.indexEndValue_),c.endNameSet_&&(o.endAt+=","+(0,re.Pz)(c.indexEndName_))),c.limitSet_&&(c.isViewFromLeft()?o.limitToFirst=c.limit_:o.limitToLast=c.limit_),o}function fl(c){const o={};if(c.startSet_&&(o.sp=c.indexStartValue_,c.startNameSet_&&(o.sn=c.indexStartName_)),c.endSet_&&(o.ep=c.indexEndValue_,c.endNameSet_&&(o.en=c.indexEndName_)),c.limitSet_){o.l=c.limit_;let s=c.viewFrom_;""===s&&(s=c.isViewFromLeft()?"l":"r"),o.vf=s}return c.index_!==li&&(o.i=c.index_.toString()),o}class _a extends Cs{constructor(o,s,h,_){super(),this.repoInfo_=o,this.onDataUpdate_=s,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.log_=qr("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,s){return void 0!==s?"tag$"+s:((0,re.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,s,h,_){const w=o._path.toString();this.log_("Listen called for "+w+" "+o._queryIdentifier);const D=_a.getListenId_(o,h),U={};this.listens_[D]=U;const Y=Ba(o._queryParams);this.restRequest_(w+".json",Y,(ae,$e)=>{let tt=$e;if(404===ae&&(tt=null,ae=null),null===ae&&this.onDataUpdate_(w,tt,!1,h),(0,re.DV)(this.listens_,D)===U){let wt;wt=ae?401===ae?"permission_denied":"rest_error:"+ae:"ok",_(wt,null)}})}unlisten(o,s){const h=_a.getListenId_(o,s);delete this.listens_[h]}get(o){const s=Ba(o._queryParams),h=o._path.toString(),_=new re.BH;return this.restRequest_(h+".json",s,(w,D)=>{let U=D;404===w&&(U=null,w=null),null===w?(this.onDataUpdate_(h,U,!1,null),_.resolve(U)):_.reject(new Error(U))}),_.promise}refreshAuthToken(o){}restRequest_(o,s={},h){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,w])=>{_&&_.accessToken&&(s.auth=_.accessToken),w&&w.token&&(s.ac=w.token);const D=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,re.xO)(s);this.log_("Sending REST request for "+D);const U=new XMLHttpRequest;U.onreadystatechange=()=>{if(h&&4===U.readyState){this.log_("REST Response for "+D+" received. status:",U.status,"response:",U.responseText);let Y=null;if(U.status>=200&&U.status<300){try{Y=(0,re.cI)(U.responseText)}catch(ae){rr("Failed to parse JSON response for "+D+": "+U.responseText)}h(null,Y)}else 401!==U.status&&404!==U.status&&rr("Got unsuccessful REST response for "+D+" Status: "+U.status),h(U.status);h=null}},U.open("GET",D,!0),U.send()})}}class iu{constructor(){this.rootNode_=cr.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,s){this.rootNode_=this.rootNode_.updateChild(o,s)}}function oa(){return{value:null,children:new Map}}function ya(c,o,s){if(an(o))c.value=s,c.children.clear();else if(null!==c.value)c.value=c.value.updateChild(o,s);else{const h=gt(o);c.children.has(h)||c.children.set(h,oa()),ya(c.children.get(h),o=L(o),s)}}function su(c,o){if(an(o))return c.value=null,c.children.clear(),!0;if(null!==c.value){if(c.value.isLeafNode())return!1;{const s=c.value;return c.value=null,s.forEachChild(li,(h,_)=>{ya(c,new ie(h),_)}),su(c,o)}}if(c.children.size>0){const s=gt(o);return o=L(o),c.children.has(s)&&su(c.children.get(s),o)&&c.children.delete(s),0===c.children.size}return!0}function mi(c,o,s){null!==c.value?s(o,c.value):function(c,o){c.children.forEach((s,h)=>{o(h,s)})}(c,(h,_)=>{mi(_,new ie(o.toString()+"/"+h),s)})}class Ms{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),s=Object.assign({},o);return this.last_&&ei(this.last_,(h,_)=>{s[h]=s[h]-_}),this.last_=o,s}}class ui{constructor(o,s){this.server_=s,this.statsToReport_={},this.statsListener_=new Ms(o);const h=1e4+2e4*Math.random();st(this.reportStats_.bind(this),Math.floor(h))}reportStats_(){const o=this.statsListener_.get(),s={};let h=!1;ei(o,(_,w)=>{w>0&&(0,re.r3)(this.statsToReport_,_)&&(s[_]=w,h=!0)}),h&&this.server_.reportStats(s),st(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var is=(()=>(function(c){c[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(is||(is={})),is))();function $n(c){return{fromUser:!1,fromServer:!0,queryId:c,tagged:!0}}class Ho{constructor(o,s,h){this.path=o,this.affectedTree=s,this.revert=h,this.type=is.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(an(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new ie(o));return new Ho(Pe(),s,this.revert)}}return(0,re.hu)(gt(this.path)===o,"operationForChild called for unrelated child."),new Ho(L(this.path),this.affectedTree,this.revert)}}class pn{constructor(o,s){this.source=o,this.path=s,this.type=is.LISTEN_COMPLETE}operationForChild(o){return an(this.path)?new pn(this.source,Pe()):new pn(this.source,L(this.path))}}class St{constructor(o,s,h){this.source=o,this.path=s,this.snap=h,this.type=is.OVERWRITE}operationForChild(o){return an(this.path)?new St(this.source,Pe(),this.snap.getImmediateChild(o)):new St(this.source,L(this.path),this.snap)}}class zt{constructor(o,s,h){this.source=o,this.path=s,this.children=h,this.type=is.MERGE}operationForChild(o){if(an(this.path)){const s=this.children.subtree(new ie(o));return s.isEmpty()?null:s.value?new St(this.source,Pe(),s.value):new zt(this.source,Pe(),s)}return(0,re.hu)(gt(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new zt(this.source,L(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _i{constructor(o,s,h){this.node_=o,this.fullyInitialized_=s,this.filtered_=h}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(an(o))return this.isFullyInitialized()&&!this.filtered_;const s=gt(o);return this.isCompleteForChild(s)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Ec{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function va(c,o,s,h,_,w){const D=h.filter(U=>U.type===s);D.sort((U,Y)=>function(c,o,s){if(null==o.childName||null==s.childName)throw(0,re.g5)("Should only compare child_ events.");const h=new Fn(o.childName,o.snapshotNode),_=new Fn(s.childName,s.snapshotNode);return c.index_.compare(h,_)}(c,U,Y)),D.forEach(U=>{const Y=function(c,o,s){return"value"===o.type||"child_removed"===o.type||(o.prevName=s.getPredecessorChildName(o.childName,o.snapshotNode,c.index_)),o}(c,U,w);_.forEach(ae=>{ae.respondsTo(U.type)&&o.push(ae.createEvent(Y,c.query_))})})}function pl(c,o){return{eventCache:c,serverCache:o}}function ss(c,o,s,h){return pl(new _i(o,s,h),c.serverCache)}function $a(c,o,s,h){return pl(c.eventCache,new _i(o,s,h))}function Ha(c){return c.eventCache.isFullyInitialized()?c.eventCache.getNode():null}function gr(c){return c.serverCache.isFullyInitialized()?c.serverCache.getNode():null}let Ea;class hr{constructor(o,s=(()=>(Ea||(Ea=new Pr(Hr)),Ea))()){this.value=o,this.children=s}static fromObject(o){let s=new hr(null);return ei(o,(h,_)=>{s=s.set(new ie(h),_)}),s}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,s){if(null!=this.value&&s(this.value))return{path:Pe(),value:this.value};if(an(o))return null;{const h=gt(o),_=this.children.get(h);if(null!==_){const w=_.findRootMostMatchingPathAndValue(L(o),s);return null!=w?{path:Ft(new ie(h),w.path),value:w.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(an(o))return this;{const s=gt(o),h=this.children.get(s);return null!==h?h.subtree(L(o)):new hr(null)}}set(o,s){if(an(o))return new hr(s,this.children);{const h=gt(o),w=(this.children.get(h)||new hr(null)).set(L(o),s),D=this.children.insert(h,w);return new hr(this.value,D)}}remove(o){if(an(o))return this.children.isEmpty()?new hr(null):new hr(null,this.children);{const s=gt(o),h=this.children.get(s);if(h){const _=h.remove(L(o));let w;return w=_.isEmpty()?this.children.remove(s):this.children.insert(s,_),null===this.value&&w.isEmpty()?new hr(null):new hr(this.value,w)}return this}}get(o){if(an(o))return this.value;{const s=gt(o),h=this.children.get(s);return h?h.get(L(o)):null}}setTree(o,s){if(an(o))return s;{const h=gt(o),w=(this.children.get(h)||new hr(null)).setTree(L(o),s);let D;return D=w.isEmpty()?this.children.remove(h):this.children.insert(h,w),new hr(this.value,D)}}fold(o){return this.fold_(Pe(),o)}fold_(o,s){const h={};return this.children.inorderTraversal((_,w)=>{h[_]=w.fold_(Ft(o,_),s)}),s(o,this.value,h)}findOnPath(o,s){return this.findOnPath_(o,Pe(),s)}findOnPath_(o,s,h){const _=!!this.value&&h(s,this.value);if(_)return _;if(an(o))return null;{const w=gt(o),D=this.children.get(w);return D?D.findOnPath_(L(o),Ft(s,w),h):null}}foreachOnPath(o,s){return this.foreachOnPath_(o,Pe(),s)}foreachOnPath_(o,s,h){if(an(o))return this;{this.value&&h(s,this.value);const _=gt(o),w=this.children.get(_);return w?w.foreachOnPath_(L(o),Ft(s,_),h):new hr(null)}}foreach(o){this.foreach_(Pe(),o)}foreach_(o,s){this.children.inorderTraversal((h,_)=>{_.foreach_(Ft(o,h),s)}),this.value&&s(o,this.value)}foreachChild(o){this.children.inorderTraversal((s,h)=>{h.value&&o(s,h.value)})}}class Hn{constructor(o){this.writeTree_=o}static empty(){return new Hn(new hr(null))}}function ba(c,o,s){if(an(o))return new Hn(new hr(s));{const h=c.writeTree_.findRootMostValueAndPath(o);if(null!=h){const _=h.path;let w=h.value;const D=Xn(_,o);return w=w.updateChild(D,s),new Hn(c.writeTree_.set(_,w))}{const _=new hr(s),w=c.writeTree_.setTree(o,_);return new Hn(w)}}}function Co(c,o,s){let h=c;return ei(s,(_,w)=>{h=ba(h,Ft(o,_),w)}),h}function ml(c,o){if(an(o))return Hn.empty();{const s=c.writeTree_.setTree(o,new hr(null));return new Hn(s)}}function Po(c,o){return null!=br(c,o)}function br(c,o){const s=c.writeTree_.findRootMostValueAndPath(o);return null!=s?c.writeTree_.get(s.path).getChild(Xn(s.path,o)):null}function xu(c){const o=[],s=c.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(li,(h,_)=>{o.push(new Fn(h,_))}):c.writeTree_.children.inorderTraversal((h,_)=>{null!=_.value&&o.push(new Fn(h,_.value))}),o}function P(c,o){if(an(o))return c;{const s=br(c,o);return new Hn(null!=s?new hr(s):c.writeTree_.subtree(o))}}function S(c){return c.writeTree_.isEmpty()}function T(c,o){return M(Pe(),c.writeTree_,o)}function M(c,o,s){if(null!=o.value)return s.updateChild(c,o.value);{let h=null;return o.children.inorderTraversal((_,w)=>{".priority"===_?((0,re.hu)(null!==w.value,"Priority writes must always be leaf nodes"),h=w.value):s=M(Ft(c,_),w,s)}),!s.getChild(c).isEmpty()&&null!==h&&(s=s.updateChild(Ft(c,".priority"),h)),s}}function q(c,o){return Ga(o,c)}function In(c,o){if(c.snap)return Ur(c.path,o);for(const s in c.children)if(c.children.hasOwnProperty(s)&&Ur(Ft(c.path,s),o))return!0;return!1}function Zn(c){return c.visible}function Jr(c,o,s){let h=Hn.empty();for(let _=0;_<c.length;++_){const w=c[_];if(o(w)){const D=w.path;let U;if(w.snap)Ur(s,D)?(U=Xn(s,D),h=ba(h,U,w.snap)):Ur(D,s)&&(U=Xn(D,s),h=ba(h,Pe(),w.snap.getChild(U)));else{if(!w.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(Ur(s,D))U=Xn(s,D),h=Co(h,U,w.children);else if(Ur(D,s))if(U=Xn(D,s),an(U))h=Co(h,Pe(),w.children);else{const Y=(0,re.DV)(w.children,gt(U));if(Y){const ae=Y.getChild(L(U));h=ba(h,Pe(),ae)}}}}}return h}function Ar(c,o,s,h,_){if(h||_){const w=P(c.visibleWrites,o);return!_&&S(w)?s:_||null!=s||Po(w,Pe())?T(Jr(c.allWrites,function(ae){return(ae.visible||_)&&(!h||!~h.indexOf(ae.writeId))&&(Ur(ae.path,o)||Ur(o,ae.path))},o),s||cr.EMPTY_NODE):null}{const w=br(c.visibleWrites,o);if(null!=w)return w;{const D=P(c.visibleWrites,o);return S(D)?s:null!=s||Po(D,Pe())?T(D,s||cr.EMPTY_NODE):null}}}function si(c,o,s,h){return Ar(c.writeTree,c.treePath,o,s,h)}function _l(c,o){return function(c,o,s){let h=cr.EMPTY_NODE;const _=br(c.visibleWrites,o);if(_)return _.isLeafNode()||_.forEachChild(li,(w,D)=>{h=h.updateImmediateChild(w,D)}),h;if(s){const w=P(c.visibleWrites,o);return s.forEachChild(li,(D,U)=>{const Y=T(P(w,new ie(D)),U);h=h.updateImmediateChild(D,Y)}),xu(w).forEach(D=>{h=h.updateImmediateChild(D.name,D.node)}),h}return xu(P(c.visibleWrites,o)).forEach(D=>{h=h.updateImmediateChild(D.name,D.node)}),h}(c.writeTree,c.treePath,o)}function Za(c,o,s,h){return function(c,o,s,h,_){(0,re.hu)(h||_,"Either existingEventSnap or existingServerSnap must exist");const w=Ft(o,s);if(Po(c.visibleWrites,w))return null;{const D=P(c.visibleWrites,w);return S(D)?_.getChild(s):T(D,_.getChild(s))}}(c.writeTree,c.treePath,o,s,h)}function yl(c,o){return function(c,o){return br(c.visibleWrites,o)}(c.writeTree,Ft(c.treePath,o))}function uo(c,o,s){return function(c,o,s,h){const _=Ft(o,s),w=br(c.visibleWrites,_);return null!=w?w:h.isCompleteForChild(s)?T(P(c.visibleWrites,_),h.getNode().getImmediateChild(s)):null}(c.writeTree,c.treePath,o,s)}function Ca(c,o){return Ga(Ft(c.treePath,o),c.writeTree)}function Ga(c,o){return{treePath:c,writeTree:o}}class Go{constructor(){this.changeMap=new Map}trackChildChange(o){const s=o.type,h=o.childName;(0,re.hu)("child_added"===s||"child_changed"===s||"child_removed"===s,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==h,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(h);if(_){const w=_.type;if("child_added"===s&&"child_removed"===w)this.changeMap.set(h,$o(h,o.snapshotNode,_.snapshotNode));else if("child_removed"===s&&"child_added"===w)this.changeMap.delete(h);else if("child_removed"===s&&"child_changed"===w)this.changeMap.set(h,Xs(h,_.oldSnap));else if("child_changed"===s&&"child_added"===w)this.changeMap.set(h,sa(h,o.snapshotNode));else{if("child_changed"!==s||"child_changed"!==w)throw(0,re.g5)("Illegal combination of changes: "+o+" occurred after "+_);this.changeMap.set(h,$o(h,o.snapshotNode,_.oldSnap))}}else this.changeMap.set(h,o)}getChanges(){return Array.from(this.changeMap.values())}}const ou=new class{getCompleteChild(o){return null}getChildAfterChild(o,s,h){return null}};class Ni{constructor(o,s,h=null){this.writes_=o,this.viewCache_=s,this.optCompleteServerCache_=h}getCompleteChild(o){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(o))return s.getNode().getImmediateChild(o);{const h=null!=this.optCompleteServerCache_?new _i(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uo(this.writes_,o,h)}}getChildAfterChild(o,s,h){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gr(this.viewCache_),w=function(c,o,s,h,_,w){return function(c,o,s,h,_,w,D){let U;const Y=P(c.visibleWrites,o),ae=br(Y,Pe());if(null!=ae)U=ae;else{if(null==s)return[];U=T(Y,s)}if(U=U.withIndex(D),U.isEmpty()||U.isLeafNode())return[];{const $e=[],tt=D.getCompare(),wt=w?U.getReverseIteratorFrom(h,D):U.getIteratorFrom(h,D);let sn=wt.getNext();for(;sn&&$e.length<_;)0!==tt(sn,h)&&$e.push(sn),sn=wt.getNext();return $e}}(c.writeTree,c.treePath,o,s,h,_,w)}(this.writes_,_,s,1,h,o);return 0===w.length?null:w[0]}}function to(c,o,s,h,_,w){const D=o.eventCache;if(null!=yl(h,s))return o;{let U,Y;if(an(s))if((0,re.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const ae=gr(o),tt=_l(h,ae instanceof cr?ae:cr.EMPTY_NODE);U=c.filter.updateFullNode(o.eventCache.getNode(),tt,w)}else{const ae=si(h,gr(o));U=c.filter.updateFullNode(o.eventCache.getNode(),ae,w)}else{const ae=gt(s);if(".priority"===ae){(0,re.hu)(1===$t(s),"Can't have a priority with additional path components");const $e=D.getNode();Y=o.serverCache.getNode();const tt=Za(h,s,$e,Y);U=null!=tt?c.filter.updatePriority($e,tt):D.getNode()}else{const $e=L(s);let tt;if(D.isCompleteForChild(ae)){Y=o.serverCache.getNode();const wt=Za(h,s,D.getNode(),Y);tt=null!=wt?D.getNode().getImmediateChild(ae).updateChild($e,wt):D.getNode().getImmediateChild(ae)}else tt=uo(h,ae,o.serverCache);U=null!=tt?c.filter.updateChild(D.getNode(),ae,tt,$e,_,w):D.getNode()}}return ss(o,U,D.isFullyInitialized()||an(s),c.filter.filtersNodes())}}function Wa(c,o,s,h,_,w,D,U){const Y=o.serverCache;let ae;const $e=D?c.filter:c.filter.getIndexedFilter();if(an(s))ae=$e.updateFullNode(Y.getNode(),h,null);else if($e.filtersNodes()&&!Y.isFiltered()){const sn=Y.getNode().updateChild(s,h);ae=$e.updateFullNode(Y.getNode(),sn,null)}else{const sn=gt(s);if(!Y.isCompleteForPath(s)&&$t(s)>1)return o;const nn=L(s),Yn=Y.getNode().getImmediateChild(sn).updateChild(nn,h);ae=".priority"===sn?$e.updatePriority(Y.getNode(),Yn):$e.updateChild(Y.getNode(),sn,Yn,nn,ou,null)}const tt=$a(o,ae,Y.isFullyInitialized()||an(s),$e.filtersNodes());return to(c,tt,s,_,new Ni(_,tt,w),U)}function qi(c,o,s,h,_,w,D){const U=o.eventCache;let Y,ae;const $e=new Ni(_,o,w);if(an(s))ae=c.filter.updateFullNode(o.eventCache.getNode(),h,D),Y=ss(o,ae,!0,c.filter.filtersNodes());else{const tt=gt(s);if(".priority"===tt)ae=c.filter.updatePriority(o.eventCache.getNode(),h),Y=ss(o,ae,U.isFullyInitialized(),U.isFiltered());else{const wt=L(s),sn=U.getNode().getImmediateChild(tt);let nn;if(an(wt))nn=h;else{const Dn=$e.getCompleteChild(tt);nn=null!=Dn?".priority"===k(wt)&&Dn.getChild(dt(wt)).isEmpty()?Dn:Dn.updateChild(wt,h):cr.EMPTY_NODE}Y=sn.equals(nn)?o:ss(o,c.filter.updateChild(U.getNode(),tt,nn,wt,$e,D),U.isFullyInitialized(),c.filter.filtersNodes())}}return Y}function Ch(c,o){return c.eventCache.isCompleteForChild(o)}function Jc(c,o,s){return s.foreach((h,_)=>{o=o.updateChild(h,_)}),o}function F(c,o,s,h,_,w,D,U){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let ae,Y=o;ae=an(s)?h:new hr(null).setTree(s,h);const $e=o.serverCache.getNode();return ae.children.inorderTraversal((tt,wt)=>{if($e.hasChild(tt)){const nn=Jc(0,o.serverCache.getNode().getImmediateChild(tt),wt);Y=Wa(c,Y,new ie(tt),nn,_,w,D,U)}}),ae.children.inorderTraversal((tt,wt)=>{const sn=!o.serverCache.isCompleteForChild(tt)&&void 0===wt.value;if(!$e.hasChild(tt)&&!sn){const Dn=Jc(0,o.serverCache.getNode().getImmediateChild(tt),wt);Y=Wa(c,Y,new ie(tt),Dn,_,w,D,U)}}),Y}class ft{constructor(o,s){this.query_=o,this.eventRegistrations_=[];const h=this.query_._queryParams,_=new Pl(h.getIndex()),w=function(c){return c.loadsAllData()?new Pl(c.getIndex()):c.hasLimit()?new Qc(c):new dl(c)}(h);this.processor_=function(c){return{filter:c}}(w);const D=s.serverCache,U=s.eventCache,Y=_.updateFullNode(cr.EMPTY_NODE,D.getNode(),null),ae=w.updateFullNode(cr.EMPTY_NODE,U.getNode(),null),$e=new _i(Y,D.isFullyInitialized(),_.filtersNodes()),tt=new _i(ae,U.isFullyInitialized(),w.filtersNodes());this.viewCache_=pl(tt,$e),this.eventGenerator_=new Ec(this.query_)}get query(){return this.query_}}function An(c,o){const s=gr(c.viewCache_);return s&&(c.query._queryParams.loadsAllData()||!an(o)&&!s.getImmediateChild(gt(o)).isEmpty())?s.getChild(o):null}function hn(c){return 0===c.eventRegistrations_.length}function zr(c,o,s){const h=[];if(s){(0,re.hu)(null==o,"A cancel should cancel all event registrations.");const _=c.query._path;c.eventRegistrations_.forEach(w=>{const D=w.createCancelEvent(s,_);D&&h.push(D)})}if(o){let _=[];for(let w=0;w<c.eventRegistrations_.length;++w){const D=c.eventRegistrations_[w];if(D.matches(o)){if(o.hasAnyCallback()){_=_.concat(c.eventRegistrations_.slice(w+1));break}}else _.push(D)}c.eventRegistrations_=_}else c.eventRegistrations_=[];return h}function no(c,o,s,h){o.type===is.MERGE&&null!==o.source.queryId&&((0,re.hu)(gr(c.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(Ha(c.viewCache_),"Missing event cache, even though we have a server cache"));const _=c.viewCache_,w=function(c,o,s,h,_){const w=new Go;let D,U;if(s.type===is.OVERWRITE){const ae=s;ae.source.fromUser?D=qi(c,o,ae.path,ae.snap,h,_,w):((0,re.hu)(ae.source.fromServer,"Unknown source."),U=ae.source.tagged||o.serverCache.isFiltered()&&!an(ae.path),D=Wa(c,o,ae.path,ae.snap,h,_,U,w))}else if(s.type===is.MERGE){const ae=s;ae.source.fromUser?D=function(c,o,s,h,_,w,D){let U=o;return h.foreach((Y,ae)=>{const $e=Ft(s,Y);Ch(o,gt($e))&&(U=qi(c,U,$e,ae,_,w,D))}),h.foreach((Y,ae)=>{const $e=Ft(s,Y);Ch(o,gt($e))||(U=qi(c,U,$e,ae,_,w,D))}),U}(c,o,ae.path,ae.children,h,_,w):((0,re.hu)(ae.source.fromServer,"Unknown source."),U=ae.source.tagged||o.serverCache.isFiltered(),D=F(c,o,ae.path,ae.children,h,_,U,w))}else if(s.type===is.ACK_USER_WRITE){const ae=s;D=ae.revert?function(c,o,s,h,_,w){let D;if(null!=yl(h,s))return o;{const U=new Ni(h,o,_),Y=o.eventCache.getNode();let ae;if(an(s)||".priority"===gt(s)){let $e;if(o.serverCache.isFullyInitialized())$e=si(h,gr(o));else{const tt=o.serverCache.getNode();(0,re.hu)(tt instanceof cr,"serverChildren would be complete if leaf node"),$e=_l(h,tt)}$e=$e,ae=c.filter.updateFullNode(Y,$e,w)}else{const $e=gt(s);let tt=uo(h,$e,o.serverCache);null==tt&&o.serverCache.isCompleteForChild($e)&&(tt=Y.getImmediateChild($e)),ae=null!=tt?c.filter.updateChild(Y,$e,tt,L(s),U,w):o.eventCache.getNode().hasChild($e)?c.filter.updateChild(Y,$e,cr.EMPTY_NODE,L(s),U,w):Y,ae.isEmpty()&&o.serverCache.isFullyInitialized()&&(D=si(h,gr(o)),D.isLeafNode()&&(ae=c.filter.updateFullNode(ae,D,w)))}return D=o.serverCache.isFullyInitialized()||null!=yl(h,Pe()),ss(o,ae,D,c.filter.filtersNodes())}}(c,o,ae.path,h,_,w):function(c,o,s,h,_,w,D){if(null!=yl(_,s))return o;const U=o.serverCache.isFiltered(),Y=o.serverCache;if(null!=h.value){if(an(s)&&Y.isFullyInitialized()||Y.isCompleteForPath(s))return Wa(c,o,s,Y.getNode().getChild(s),_,w,U,D);if(an(s)){let ae=new hr(null);return Y.getNode().forEachChild(Ai,($e,tt)=>{ae=ae.set(new ie($e),tt)}),F(c,o,s,ae,_,w,U,D)}return o}{let ae=new hr(null);return h.foreach(($e,tt)=>{const wt=Ft(s,$e);Y.isCompleteForPath(wt)&&(ae=ae.set($e,Y.getNode().getChild(wt)))}),F(c,o,s,ae,_,w,U,D)}}(c,o,ae.path,ae.affectedTree,h,_,w)}else{if(s.type!==is.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+s.type);D=function(c,o,s,h,_){const w=o.serverCache;return to(c,$a(o,w.getNode(),w.isFullyInitialized()||an(s),w.isFiltered()),s,h,ou,_)}(c,o,s.path,h,w)}const Y=w.getChanges();return function(c,o,s){const h=o.eventCache;if(h.isFullyInitialized()){const _=h.getNode().isLeafNode()||h.getNode().isEmpty(),w=Ha(c);(s.length>0||!c.eventCache.isFullyInitialized()||_&&!h.getNode().equals(w)||!h.getNode().getPriority().equals(w.getPriority()))&&s.push(Au(Ha(o)))}}(o,D,Y),{viewCache:D,changes:Y}}(c.processor_,_,o,s,h);return function(c,o){(0,re.hu)(o.eventCache.getNode().isIndexed(c.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(o.serverCache.getNode().isIndexed(c.filter.getIndex()),"Server snap not indexed")}(c.processor_,w.viewCache),(0,re.hu)(w.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),c.viewCache_=w.viewCache,Ds(c,w.changes,w.viewCache.eventCache.getNode(),null)}function Ds(c,o,s,h){return function(c,o,s,h){const _=[],w=[];return o.forEach(D=>{"child_changed"===D.type&&c.index_.indexedValueChanged(D.oldSnap,D.snapshotNode)&&w.push(function(c,o){return{type:"child_moved",snapshotNode:o,childName:c}}(D.childName,D.snapshotNode))}),va(c,_,"child_removed",o,h,s),va(c,_,"child_added",o,h,s),va(c,_,"child_moved",w,h,s),va(c,_,"child_changed",o,h,s),va(c,_,"value",o,h,s),_}(c.eventGenerator_,o,s,h?[h]:c.eventRegistrations_)}let To,Nl;class au{constructor(){this.views=new Map}}function Pu(c,o,s,h){const _=o.source.queryId;if(null!==_){const w=c.views.get(_);return(0,re.hu)(null!=w,"SyncTree gave us an op for an invalid query."),no(w,o,s,h)}{let w=[];for(const D of c.views.values())w=w.concat(no(D,o,s,h));return w}}function Wi(c,o,s,h,_){const D=c.views.get(o._queryIdentifier);if(!D){let U=si(s,_?h:null),Y=!1;U?Y=!0:h instanceof cr?(U=_l(s,h),Y=!1):(U=cr.EMPTY_NODE,Y=!1);const ae=pl(new _i(U,Y,!1),new _i(h,_,!1));return new ft(o,ae)}return D}function Ka(c){const o=[];for(const s of c.views.values())s.query._queryParams.loadsAllData()||o.push(s);return o}function Ia(c,o){let s=null;for(const h of c.views.values())s=s||An(h,o);return s}function Xc(c,o){return o._queryParams.loadsAllData()?Ih(c):c.views.get(o._queryIdentifier)}function Wu(c,o){return null!=Xc(c,o)}function Sa(c){return null!=Ih(c)}function Ih(c){for(const o of c.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let El=1;class wf{constructor(o){this.listenProvider_=o,this.syncPointTree_=new hr(null),this.pendingWriteTree_={visibleWrites:Hn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Od(c,o,s,h,_){return function(c,o,s,h,_){(0,re.hu)(h>c.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),c.allWrites.push({path:o,snap:s,writeId:h,visible:_}),_&&(c.visibleWrites=ba(c.visibleWrites,o,s)),c.lastWriteId=h}(c.pendingWriteTree_,o,s,h,_),_?Bi(c,new St({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,s)):[]}function co(c,o,s=!1){const h=function(c,o){for(let s=0;s<c.allWrites.length;s++){const h=c.allWrites[s];if(h.writeId===o)return h}return null}(c.pendingWriteTree_,o);if(function(c,o){const s=c.allWrites.findIndex(U=>U.writeId===o);(0,re.hu)(s>=0,"removeWrite called with nonexistent writeId.");const h=c.allWrites[s];c.allWrites.splice(s,1);let _=h.visible,w=!1,D=c.allWrites.length-1;for(;_&&D>=0;){const U=c.allWrites[D];U.visible&&(D>=s&&In(U,h.path)?_=!1:Ur(h.path,U.path)&&(w=!0)),D--}return!!_&&(w?(function(c){c.visibleWrites=Jr(c.allWrites,Zn,Pe()),c.lastWriteId=c.allWrites.length>0?c.allWrites[c.allWrites.length-1].writeId:-1}(c),!0):(h.snap?c.visibleWrites=ml(c.visibleWrites,h.path):ei(h.children,Y=>{c.visibleWrites=ml(c.visibleWrites,Ft(h.path,Y))}),!0))}(c.pendingWriteTree_,o)){let w=new hr(null);return null!=h.snap?w=w.set(Pe(),!0):ei(h.children,D=>{w=w.set(new ie(D),!0)}),Bi(c,new Ho(h.path,w,s))}return[]}function Ya(c,o,s){return Bi(c,new St({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,s))}function Qa(c,o,s,h){const _=o._path,w=c.syncPointTree_.get(_);let D=[];if(w&&("default"===o._queryIdentifier||Wu(w,o))){const U=function(c,o,s,h){const _=o._queryIdentifier,w=[];let D=[];const U=Sa(c);if("default"===_)for(const[Y,ae]of c.views.entries())D=D.concat(zr(ae,s,h)),hn(ae)&&(c.views.delete(Y),ae.query._queryParams.loadsAllData()||w.push(ae.query));else{const Y=c.views.get(_);Y&&(D=D.concat(zr(Y,s,h)),hn(Y)&&(c.views.delete(_),Y.query._queryParams.loadsAllData()||w.push(Y.query)))}return U&&!Sa(c)&&w.push(new((0,re.hu)(To,"Reference.ts has not been loaded"),To)(o._repo,o._path)),{removed:w,events:D}}(w,o,s,h);(function(c){return 0===c.views.size})(w)&&(c.syncPointTree_=c.syncPointTree_.remove(_));const Y=U.removed;D=U.events;const ae=-1!==Y.findIndex(tt=>tt._queryParams.loadsAllData()),$e=c.syncPointTree_.findOnPath(_,(tt,wt)=>Sa(wt));if(ae&&!$e){const tt=c.syncPointTree_.subtree(_);if(!tt.isEmpty()){const wt=function(c){return c.fold((o,s,h)=>{if(s&&Sa(s))return[Ih(s)];{let _=[];return s&&(_=Ka(s)),ei(h,(w,D)=>{_=_.concat(D)}),_}})}(tt);for(let sn=0;sn<wt.length;++sn){const nn=wt[sn],Dn=nn.query,Yn=nd(c,nn);c.listenProvider_.startListening(Ou(Dn),lu(c,Dn),Yn.hashFn,Yn.onComplete)}}}if(!$e&&Y.length>0&&!h)if(ae){const tt=null;c.listenProvider_.stopListening(Ou(o),tt)}else Y.forEach(tt=>{const wt=c.queryToTagMap.get(uu(tt));c.listenProvider_.stopListening(Ou(tt),wt)});!function(c,o){for(let s=0;s<o.length;++s){const h=o[s];if(!h._queryParams.loadsAllData()){const _=uu(h),w=c.queryToTagMap.get(_);c.queryToTagMap.delete(_),c.tagToQueryMap.delete(w)}}}(c,Y)}return D}function Yu(c,o,s){const h=o._path;let _=null,w=!1;c.syncPointTree_.foreachOnPath(h,(tt,wt)=>{const sn=Xn(tt,h);_=_||Ia(wt,sn),w=w||Sa(wt)});let U,D=c.syncPointTree_.get(h);D?(w=w||Sa(D),_=_||Ia(D,Pe())):(D=new au,c.syncPointTree_=c.syncPointTree_.set(h,D)),null!=_?U=!0:(U=!1,_=cr.EMPTY_NODE,c.syncPointTree_.subtree(h).foreachChild((wt,sn)=>{const nn=Ia(sn,Pe());nn&&(_=_.updateImmediateChild(wt,nn))}));const Y=Wu(D,o);if(!Y&&!o._queryParams.loadsAllData()){const tt=uu(o);(0,re.hu)(!c.queryToTagMap.has(tt),"View does not exist, but we have a tag");const wt=El++;c.queryToTagMap.set(tt,wt),c.tagToQueryMap.set(wt,tt)}let $e=function(c,o,s,h,_,w){const D=Wi(c,o,h,_,w);return c.views.has(o._queryIdentifier)||c.views.set(o._queryIdentifier,D),function(c,o){c.eventRegistrations_.push(o)}(D,s),function(c,o){const s=c.viewCache_.eventCache,h=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(li,(w,D)=>{h.push(sa(w,D))}),s.isFullyInitialized()&&h.push(Au(s.getNode())),Ds(c,h,s.getNode(),o)}(D,s)}(D,o,s,q(c.pendingWriteTree_,h),_,U);if(!Y&&!w){const tt=Xc(D,o);$e=$e.concat(function(c,o,s){const h=o._path,_=lu(c,o),w=nd(c,s),D=c.listenProvider_.startListening(Ou(o),_,w.hashFn,w.onComplete),U=c.syncPointTree_.subtree(h);if(_)(0,re.hu)(!Sa(U.value),"If we're adding a query, it shouldn't be shadowed");else{const Y=U.fold((ae,$e,tt)=>{if(!an(ae)&&$e&&Sa($e))return[Ih($e).query];{let wt=[];return $e&&(wt=wt.concat(Ka($e).map(sn=>sn.query))),ei(tt,(sn,nn)=>{wt=wt.concat(nn)}),wt}});for(let ae=0;ae<Y.length;++ae){const $e=Y[ae];c.listenProvider_.stopListening(Ou($e),lu(c,$e))}}return D}(c,o,tt))}return $e}function Md(c,o,s){const _=c.pendingWriteTree_,w=c.syncPointTree_.findOnPath(o,(D,U)=>{const ae=Ia(U,Xn(D,o));if(ae)return ae});return Ar(_,o,w,s,!0)}function Bi(c,o){return td(o,c.syncPointTree_,null,q(c.pendingWriteTree_,Pe()))}function td(c,o,s,h){if(an(c.path))return Qu(c,o,s,h);{const _=o.get(Pe());null==s&&null!=_&&(s=Ia(_,Pe()));let w=[];const D=gt(c.path),U=c.operationForChild(D),Y=o.children.get(D);if(Y&&U){const ae=s?s.getImmediateChild(D):null,$e=Ca(h,D);w=w.concat(td(U,Y,ae,$e))}return _&&(w=w.concat(Pu(_,c,h,s))),w}}function Qu(c,o,s,h){const _=o.get(Pe());null==s&&null!=_&&(s=Ia(_,Pe()));let w=[];return o.children.inorderTraversal((D,U)=>{const Y=s?s.getImmediateChild(D):null,ae=Ca(h,D),$e=c.operationForChild(D);$e&&(w=w.concat(Qu($e,U,Y,ae)))}),_&&(w=w.concat(Pu(_,c,h,s))),w}function nd(c,o){const s=o.query,h=lu(c,s);return{hashFn:()=>(function(c){return c.viewCache_.serverCache.getNode()}(o)||cr.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return h?function(c,o,s){const h=wc(c,s);if(h){const _=kd(h),w=_.path,D=_.queryId,U=Xn(w,o);return Ju(c,w,new pn($n(D),U))}return[]}(c,s._path,h):function(c,o){return Bi(c,new pn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(c,s._path);{const w=function(c,o){let s="Unknown Error";"too_big"===c?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?s="Client doesn't have permission to access the desired data.":"unavailable"===c&&(s="The service is unavailable");const h=new Error(c+" at "+o._path.toString()+": "+s);return h.code=c.toUpperCase(),h}(_,s);return Qa(c,s,null,w)}}}}function lu(c,o){const s=uu(o);return c.queryToTagMap.get(s)}function uu(c){return c._path.toString()+"$"+c._queryIdentifier}function wc(c,o){return c.tagToQueryMap.get(o)}function kd(c){const o=c.indexOf("$");return(0,re.hu)(-1!==o&&o<c.length-1,"Bad queryKey."),{queryId:c.substr(o+1),path:new ie(c.substr(0,o))}}function Ju(c,o,s){const h=c.syncPointTree_.get(o);return(0,re.hu)(h,"Missing sync point for query tag that we're tracking"),Pu(h,s,q(c.pendingWriteTree_,o),null)}function Ou(c){return c._queryParams.loadsAllData()&&!c._queryParams.isDefault()?new((0,re.hu)(Nl,"Reference.ts has not been loaded"),Nl)(c._repo,c._path):c}class So{constructor(o){this.node_=o}getImmediateChild(o){const s=this.node_.getImmediateChild(o);return new So(s)}node(){return this.node_}}class xh{constructor(o,s){this.syncTree_=o,this.path_=s}getImmediateChild(o){const s=Ft(this.path_,o);return new xh(this.syncTree_,s)}node(){return Md(this.syncTree_,this.path_)}}const Zr=function(c,o,s){return c&&"object"==typeof c?((0,re.hu)(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?Tf(c[".sv"],o,s):"object"==typeof c[".sv"]?Fd(c[".sv"],o):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},Tf=function(c,o,s){switch(c){case"timestamp":return s.timestamp;default:(0,re.hu)(!1,"Unexpected server value: "+c)}},Fd=function(c,o,s){c.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(c,null,2));const h=c.increment;"number"!=typeof h&&(0,re.hu)(!1,"Unexpected increment value: "+h);const _=o.node();if((0,re.hu)(null!=_,"Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return h;const D=_.getValue();return"number"!=typeof D?h:D+h},Mi=function(c,o,s,h){return xs(o,new xh(s,c),h)},bl=function(c,o,s){return xs(c,new So(o),s)};function xs(c,o,s){const h=c.getPriority().val(),_=Zr(h,o.getImmediateChild(".priority"),s);let w;if(c.isLeafNode()){const D=c,U=Zr(D.getValue(),o,s);return U!==D.getValue()||_!==D.getPriority().val()?new $r(U,Di(_)):c}{const D=c;return w=D,_!==D.getPriority().val()&&(w=w.updatePriority(new $r(_))),D.forEachChild(li,(U,Y)=>{const ae=xs(Y,o.getImmediateChild(U),s);ae!==Y&&(w=w.updateImmediateChild(U,ae))}),w}}class os{constructor(o="",s=null,h={children:{},childCount:0}){this.name=o,this.parent=s,this.node=h}}function id(c,o){let s=o instanceof ie?o:new ie(o),h=c,_=gt(s);for(;null!==_;){const w=(0,re.DV)(h.node.children,_)||{children:{},childCount:0};h=new os(_,h,w),s=L(s),_=gt(s)}return h}function cu(c){return c.node.value}function la(c,o){c.node.value=o,Af(c)}function If(c){return c.node.childCount>0}function Ud(c,o){ei(c.node.children,(s,h)=>{o(new os(s,c,h))})}function Rh(c,o,s,h){s&&!h&&o(c),Ud(c,_=>{Rh(_,o,!0,h)}),s&&h&&o(c)}function Xr(c){return new ie(null===c.parent?c.name:Xr(c.parent)+"/"+c.name)}function Af(c){null!==c.parent&&function(c,o,s){const h=function(c){return void 0===cu(c)&&!If(c)}(s),_=(0,re.r3)(c.node.children,o);h&&_?(delete c.node.children[o],c.node.childCount--,Af(c)):!h&&!_&&(c.node.children[o]=s.node,c.node.childCount++,Af(c))}(c.parent,c.name,c)}const wl=/[\[\].#$\/\u0000-\u001F\u007F]/,Nu=/[\[\].#$\u0000-\u001F\u007F]/,qo=10485760,du=function(c){return"string"==typeof c&&0!==c.length&&!wl.test(c)},Xu=function(c){return"string"==typeof c&&0!==c.length&&!Nu.test(c)},Cc=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!ji(c)||c&&"object"==typeof c&&(0,re.r3)(c,".sv")},kl=function(c,o,s,h){h&&void 0===o||Tc((0,re.gK)(c,"value"),o,s)},Tc=function(c,o,s){const h=s instanceof ie?new ps(s,c):s;if(void 0===o)throw new Error(c+"contains undefined "+pe(h));if("function"==typeof o)throw new Error(c+"contains a function "+pe(h)+" with contents = "+o.toString());if(ji(o))throw new Error(c+"contains "+o.toString()+" "+pe(h));if("string"==typeof o&&o.length>qo/3&&(0,re.ug)(o)>qo)throw new Error(c+"contains a string greater than "+qo+" utf8 bytes "+pe(h)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let _=!1,w=!1;if(ei(o,(D,U)=>{if(".value"===D)_=!0;else if(".priority"!==D&&".sv"!==D&&(w=!0,!du(D)))throw new Error(c+" contains an invalid key ("+D+") "+pe(h)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(c,o){c.parts_.length>0&&(c.byteLength_+=1),c.parts_.push(o),c.byteLength_+=(0,re.ug)(o),G(c)})(h,D),Tc(c,U,h),function(c){const o=c.parts_.pop();c.byteLength_-=(0,re.ug)(o),c.parts_.length>0&&(c.byteLength_-=1)}(h)}),_&&w)throw new Error(c+' contains ".value" child '+pe(h)+" in addition to actual children.")}},Bd=function(c,o,s,h){if(h&&void 0===o)return;const _=(0,re.gK)(c,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(_+" must be an object containing the children to replace.");const w=[];ei(o,(D,U)=>{const Y=new ie(D);if(Tc(_,U,Ft(s,Y)),".priority"===k(Y)&&!Cc(U))throw new Error(_+"contains an invalid value for '"+Y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");w.push(Y)}),function(c,o){let s,h;for(s=0;s<o.length;s++){h=o[s];const w=X(h);for(let D=0;D<w.length;D++)if((".priority"!==w[D]||D!==w.length-1)&&!du(w[D]))throw new Error(c+"contains an invalid key ("+w[D]+") in path "+h.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(ii);let _=null;for(s=0;s<o.length;s++){if(h=o[s],null!==_&&Ur(_,h))throw new Error(c+"contains a path "+_.toString()+" that is ancestor of another path "+h.toString());_=h}}(_,w)},sd=function(c,o,s){if(!s||void 0!==o){if(ji(o))throw new Error((0,re.gK)(c,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Cc(o))throw new Error((0,re.gK)(c,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cl=function(c,o,s,h){if(!(h&&void 0===s||du(s)))throw new Error((0,re.gK)(c,o)+'was an invalid key = "'+s+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Mu=function(c,o,s,h){if(!(h&&void 0===s||Xu(s)))throw new Error((0,re.gK)(c,o)+'was an invalid path = "'+s+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yi=function(c,o){if(".info"===gt(o))throw new Error(c+" failed = Can't modify data under /.info/")},jd=function(c,o){const s=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!du(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==s.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Xu(c)}(s))throw new Error((0,re.gK)(c,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Df{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ku(c,o){let s=null;for(let h=0;h<o.length;h++){const _=o[h],w=_.getPath();null!==s&&!Wr(w,s.path)&&(c.eventLists_.push(s),s=null),null===s&&(s={events:[],path:w}),s.events.push(_)}s&&c.eventLists_.push(s)}function Xa(c,o,s){ku(c,s),Fu(c,h=>Wr(h,o))}function No(c,o,s){ku(c,s),Fu(c,h=>Ur(h,o)||Ur(o,h))}function Fu(c,o){c.recursionDepth_++;let s=!0;for(let h=0;h<c.eventLists_.length;h++){const _=c.eventLists_[h];_&&(o(_.path)?(Lu(c.eventLists_[h]),c.eventLists_[h]=null):s=!1)}s&&(c.eventLists_=[]),c.recursionDepth_--}function Lu(c){for(let o=0;o<c.events.length;o++){const s=c.events[o];if(null!==s){c.events[o]=null;const h=s.getEventRunner();ir&&Rn("event: "+s.toString()),jn(h)}}}const Ic="repo_interrupt";class Ji{constructor(o,s,h,_){this.repoInfo_=o,this.forceRestClient_=s,this.authTokenProvider_=h,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Df,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oa(),this.transactionQueueTree_=new os,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Sc(c){const s=c.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+s}function Tl(c){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:Sc(c)})}function $d(c,o,s,h,_){c.dataUpdateCount++;const w=new ie(o);s=c.interceptServerDataCallback_?c.interceptServerDataCallback_(o,s):s;let D=[];if(_)if(h){const Y=(0,re.UI)(s,ae=>Di(ae));D=function(c,o,s,h){const _=wc(c,h);if(_){const w=kd(_),D=w.path,U=w.queryId,Y=Xn(D,o),ae=hr.fromObject(s);return Ju(c,D,new zt($n(U),Y,ae))}return[]}(c.serverSyncTree_,w,Y,_)}else{const Y=Di(s);D=function(c,o,s,h){const _=wc(c,h);if(null!=_){const w=kd(_),D=w.path,U=w.queryId,Y=Xn(D,o);return Ju(c,D,new St($n(U),Y,s))}return[]}(c.serverSyncTree_,w,Y,_)}else if(h){const Y=(0,re.UI)(s,ae=>Di(ae));D=function(c,o,s){const h=hr.fromObject(s);return Bi(c,new zt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,h))}(c.serverSyncTree_,w,Y)}else{const Y=Di(s);D=Ya(c.serverSyncTree_,w,Y)}let U=w;D.length>0&&(U=Aa(c,w)),No(c.eventQueue_,U,D)}function Hd(c,o){Gd(c,"connected",o),!1===o&&function(c){Zs(c,"onDisconnectEvents");const o=Tl(c),s=oa();mi(c.onDisconnect_,Pe(),(_,w)=>{const D=Mi(_,w,c.serverSyncTree_,o);ya(s,_,D)});let h=[];mi(s,Pe(),(_,w)=>{h=h.concat(Ya(c.serverSyncTree_,_,w));const D=W(c,_);Aa(c,D)}),c.onDisconnect_=oa(),No(c.eventQueue_,Pe(),h)}(c)}function Gd(c,o,s){const h=new ie("/.info/"+o),_=Di(s);c.infoData_.updateSnapshot(h,_);const w=Ya(c.infoSyncTree_,h,_);No(c.eventQueue_,h,w)}function Ac(c){return c.nextWriteId_++}function Fl(c,o,s,h,_){Zs(c,"set",{path:o.toString(),value:s,priority:h});const w=Tl(c),D=Di(s,h),U=Md(c.serverSyncTree_,o),Y=bl(D,U,w),ae=Ac(c),$e=Od(c.serverSyncTree_,o,Y,ae,!0);ku(c.eventQueue_,$e),c.server_.put(o.toString(),D.val(!0),(wt,sn)=>{const nn="ok"===wt;nn||rr("set at "+o+" failed: "+wt);const Dn=co(c.serverSyncTree_,ae,!nn);No(c.eventQueue_,o,Dn),Ul(0,_,wt,sn)});const tt=W(c,o);Aa(c,tt),No(c.eventQueue_,tt,[])}function Wo(c,o,s){c.server_.onDisconnectCancel(o.toString(),(h,_)=>{"ok"===h&&su(c.onDisconnect_,o),Ul(0,s,h,_)})}function qd(c,o,s,h){const _=Di(s);c.server_.onDisconnectPut(o.toString(),_.val(!0),(w,D)=>{"ok"===w&&ya(c.onDisconnect_,o,_),Ul(0,h,w,D)})}function hu(c,o,s){let h;h=".info"===gt(o._path)?Qa(c.infoSyncTree_,o,s):Qa(c.serverSyncTree_,o,s),Xa(c.eventQueue_,o._path,h)}function Wd(c){c.persistentConnection_&&c.persistentConnection_.interrupt(Ic)}function Zs(c,...o){let s="";c.persistentConnection_&&(s=c.persistentConnection_.id+":"),Rn(s,...o)}function Ul(c,o,s,h){o&&jn(()=>{if("ok"===s)o(null);else{const _=(s||"error").toUpperCase();let w=_;h&&(w+=": "+h);const D=new Error(w);D.code=_,o(D)}})}function ca(c,o,s){return Md(c.serverSyncTree_,o,s)||cr.EMPTY_NODE}function zd(c,o=c.transactionQueueTree_){if(o||A(c,o),cu(o)){const s=m(c,o);(0,re.hu)(s.length>0,"Sending zero length transaction queue"),s.every(_=>0===_.status)&&function(c,o,s){const h=s.map(ae=>ae.currentWriteId),_=ca(c,o,h);let w=_;const D=_.hash();for(let ae=0;ae<s.length;ae++){const $e=s[ae];(0,re.hu)(0===$e.status,"tryToSendTransactionQueue_: items in queue should all be run."),$e.status=1,$e.retryCount++;const tt=Xn(o,$e.path);w=w.updateChild(tt,$e.currentOutputSnapshotRaw)}const U=w.val(!0),Y=o;c.server_.put(Y.toString(),U,ae=>{Zs(c,"transaction put response",{path:Y.toString(),status:ae});let $e=[];if("ok"===ae){const tt=[];for(let wt=0;wt<s.length;wt++)s[wt].status=2,$e=$e.concat(co(c.serverSyncTree_,s[wt].currentWriteId)),s[wt].onComplete&&tt.push(()=>s[wt].onComplete(null,!0,s[wt].currentOutputSnapshotResolved)),s[wt].unwatcher();A(c,id(c.transactionQueueTree_,o)),zd(c,c.transactionQueueTree_),No(c.eventQueue_,o,$e);for(let wt=0;wt<tt.length;wt++)jn(tt[wt])}else{if("datastale"===ae)for(let tt=0;tt<s.length;tt++)s[tt].status=3===s[tt].status?4:0;else{rr("transaction at "+Y.toString()+" failed: "+ae);for(let tt=0;tt<s.length;tt++)s[tt].status=4,s[tt].abortReason=ae}Aa(c,o)}},D)}(c,Xr(o),s)}else If(o)&&Ud(o,s=>{zd(c,s)})}function Aa(c,o){const s=I(c,o),h=Xr(s);return function(c,o,s){if(0===o.length)return;const h=[];let _=[];const D=o.filter(U=>0===U.status).map(U=>U.currentWriteId);for(let U=0;U<o.length;U++){const Y=o[U],ae=Xn(s,Y.path);let tt,$e=!1;if((0,re.hu)(null!==ae,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Y.status)$e=!0,tt=Y.abortReason,_=_.concat(co(c.serverSyncTree_,Y.currentWriteId,!0));else if(0===Y.status)if(Y.retryCount>=25)$e=!0,tt="maxretry",_=_.concat(co(c.serverSyncTree_,Y.currentWriteId,!0));else{const wt=ca(c,Y.path,D);Y.currentInputSnapshot=wt;const sn=o[U].update(wt.val());if(void 0!==sn){Tc("transaction failed: Data returned ",sn,Y.path);let nn=Di(sn);"object"==typeof sn&&null!=sn&&(0,re.r3)(sn,".priority")||(nn=nn.updatePriority(wt.getPriority()));const Yn=Y.currentWriteId,xi=Tl(c),vi=bl(nn,wt,xi);Y.currentOutputSnapshotRaw=nn,Y.currentOutputSnapshotResolved=vi,Y.currentWriteId=Ac(c),D.splice(D.indexOf(Yn),1),_=_.concat(Od(c.serverSyncTree_,Y.path,vi,Y.currentWriteId,Y.applyLocally)),_=_.concat(co(c.serverSyncTree_,Yn,!0))}else $e=!0,tt="nodata",_=_.concat(co(c.serverSyncTree_,Y.currentWriteId,!0))}No(c.eventQueue_,s,_),_=[],$e&&(o[U].status=2,setTimeout(o[U].unwatcher,Math.floor(0)),o[U].onComplete&&h.push("nodata"===tt?()=>o[U].onComplete(null,!1,o[U].currentInputSnapshot):()=>o[U].onComplete(new Error(tt),!1,null)))}A(c,c.transactionQueueTree_);for(let U=0;U<h.length;U++)jn(h[U]);zd(c,c.transactionQueueTree_)}(c,m(c,s),h),h}function I(c,o){let s,h=c.transactionQueueTree_;for(s=gt(o);null!==s&&void 0===cu(h);)h=id(h,s),s=gt(o=L(o));return h}function m(c,o){const s=[];return y(c,o,s),s.sort((h,_)=>h.order-_.order),s}function y(c,o,s){const h=cu(o);if(h)for(let _=0;_<h.length;_++)s.push(h[_]);Ud(o,_=>{y(c,_,s)})}function A(c,o){const s=cu(o);if(s){let h=0;for(let _=0;_<s.length;_++)2!==s[_].status&&(s[h]=s[_],h++);s.length=h,la(o,s.length>0?s:void 0)}Ud(o,h=>{A(c,h)})}function W(c,o){const s=Xr(I(c,o)),h=id(c.transactionQueueTree_,o);return function(c,o,s){let h=c.parent;for(;null!==h;){if(o(h))return!0;h=h.parent}}(h,_=>{he(c,_)}),he(c,h),Rh(h,_=>{he(c,_)}),s}function he(c,o){const s=cu(o);if(s){const h=[];let _=[],w=-1;for(let D=0;D<s.length;D++)3===s[D].status||(1===s[D].status?((0,re.hu)(w===D-1,"All SENT items should be at beginning of queue."),w=D,s[D].status=3,s[D].abortReason="set"):((0,re.hu)(0===s[D].status,"Unexpected transaction status in abort"),s[D].unwatcher(),_=_.concat(co(c.serverSyncTree_,s[D].currentWriteId,!0)),s[D].onComplete&&h.push(s[D].onComplete.bind(null,new Error("set"),!1,null))));-1===w?la(o,void 0):s.length=w+1,No(c.eventQueue_,Xr(o),_);for(let D=0;D<h.length;D++)jn(h[D])}}const _n=function(c,o){const s=kn(c),h=s.namespace;return"firebase.com"===s.domain&&bi(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!h||"undefined"===h)&&"localhost"!==s.domain&&bi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new At(s.host,s.secure,h,o,"ws"===s.scheme||"wss"===s.scheme,"",h!==s.subdomain),path:new ie(s.pathString)}},kn=function(c){let o="",s="",h="",_="",w="",D=!0,U="https",Y=443;if("string"==typeof c){let ae=c.indexOf("//");ae>=0&&(U=c.substring(0,ae-1),c=c.substring(ae+2));let $e=c.indexOf("/");-1===$e&&($e=c.length);let tt=c.indexOf("?");-1===tt&&(tt=c.length),o=c.substring(0,Math.min($e,tt)),$e<tt&&(_=function(c){let o="";const s=c.split("/");for(let h=0;h<s.length;h++)if(s[h].length>0){let _=s[h];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch(w){}o+="/"+_}return o}(c.substring($e,tt)));const wt=function(c){const o={};"?"===c.charAt(0)&&(c=c.substring(1));for(const s of c.split("&")){if(0===s.length)continue;const h=s.split("=");2===h.length?o[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):rr(`Invalid query segment '${s}' in query '${c}'`)}return o}(c.substring(Math.min(c.length,tt)));ae=o.indexOf(":"),ae>=0?(D="https"===U||"wss"===U,Y=parseInt(o.substring(ae+1),10)):ae=o.length;const sn=o.slice(0,ae);if("localhost"===sn.toLowerCase())s="localhost";else if(sn.split(".").length<=2)s=sn;else{const nn=o.indexOf(".");h=o.substring(0,nn).toLowerCase(),s=o.substring(nn+1),w=h}"ns"in wt&&(w=wt.ns)}return{host:o,port:Y,domain:s,subdomain:h,secure:D,scheme:U,pathString:_,namespace:w}};class Kn{constructor(o,s,h,_){this.eventType=o,this.eventRegistration=s,this.snapshot=h,this.prevName=_}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Pz)(this.snapshot.exportVal())}}class Qn{constructor(o,s,h){this.eventRegistration=o,this.error=s,this.path=h}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Gs{constructor(o,s){this.snapshotCallback=o,this.cancelCallback=s}onValue(o,s){this.snapshotCallback.call(null,o,s)}onCancel(o){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class Da{constructor(o,s){this._repo=o,this._path=s}cancel(){const o=new re.BH;return Wo(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){yi("OnDisconnect.remove",this._path);const o=new re.BH;return qd(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){yi("OnDisconnect.set",this._path),kl("OnDisconnect.set",o,this._path,!1);const s=new re.BH;return qd(this._repo,this._path,o,s.wrapCallback(()=>{})),s.promise}setWithPriority(o,s){yi("OnDisconnect.setWithPriority",this._path),kl("OnDisconnect.setWithPriority",o,this._path,!1),sd("OnDisconnect.setWithPriority",s,!1);const h=new re.BH;return function(c,o,s,h,_){const w=Di(s,h);c.server_.onDisconnectPut(o.toString(),w.val(!0),(D,U)=>{"ok"===D&&ya(c.onDisconnect_,o,w),Ul(0,_,D,U)})}(this._repo,this._path,o,s,h.wrapCallback(()=>{})),h.promise}update(o){yi("OnDisconnect.update",this._path),Bd("OnDisconnect.update",o,this._path,!1);const s=new re.BH;return function(c,o,s,h){if((0,re.xb)(s))return Rn("onDisconnect().update() called with empty data.  Don't do anything."),void Ul(0,h,"ok",void 0);c.server_.onDisconnectMerge(o.toString(),s,(_,w)=>{"ok"===_&&ei(s,(D,U)=>{const Y=Di(U);ya(c.onDisconnect_,Ft(o,D),Y)}),Ul(0,h,_,w)})}(this._repo,this._path,o,s.wrapCallback(()=>{})),s.promise}}class fo{constructor(o,s,h,_){this._repo=o,this._path=s,this._queryParams=h,this._orderByCalled=_}get key(){return an(this._path)?null:k(this._path)}get ref(){return new ha(this._repo,this._path)}get _queryIdentifier(){const o=fl(this._queryParams),s=Yi(o);return"{}"===s?"default":s}get _queryObject(){return fl(this._queryParams)}isEqual(o){if(!((o=(0,re.m9)(o))instanceof fo))return!1;const s=this._repo===o._repo,h=Wr(this._path,o._path);return s&&h&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(c){let o="";for(let s=c.pieceNum_;s<c.pieces_.length;s++)""!==c.pieces_[s]&&(o+="/"+encodeURIComponent(String(c.pieces_[s])));return o||"/"}(this._path)}}function tn(c,o){if(!0===c._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Mo(c){let o=null,s=null;if(c.hasStart()&&(o=c.getIndexStartValue()),c.hasEnd()&&(s=c.getIndexEndValue()),c.getIndex()===Ai){const h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(c.hasStart()){if(c.getIndexStartName()!==di)throw new Error(h);if("string"!=typeof o)throw new Error(_)}if(c.hasEnd()){if(c.getIndexEndName()!==Pn)throw new Error(h);if("string"!=typeof s)throw new Error(_)}}else if(c.getIndex()===li){if(null!=o&&!Cc(o)||null!=s&&!Cc(s))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(c.getIndex()instanceof eu||c.getIndex()===Ua,"unknown index type."),null!=o&&"object"==typeof o||null!=s&&"object"==typeof s)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function zi(c){if(c.hasStart()&&c.hasEnd()&&c.hasLimit()&&!c.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ha extends fo{constructor(o,s){super(o,s,new eo,!1)}get parent(){const o=dt(this._path);return null===o?null:new ha(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class xa{constructor(o,s,h){this._node=o,this.ref=s,this._index=h}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const s=new ie(o),h=fa(this.ref,o);return new xa(this._node.getChild(s),h,li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(h,_)=>o(new xa(_,fa(this.ref,h),li)))}hasChild(o){const s=new ie(o);return!this._node.getChild(s).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fu(c,o){return(c=(0,re.m9)(c))._checkNotDeleted("ref"),void 0!==o?fa(c._root,o):c._root}function Kd(c,o){(c=(0,re.m9)(c))._checkNotDeleted("refFromURL");const s=_n(o,c._repo.repoInfo_.nodeAdmin);jd("refFromURL",s);const h=s.repoInfo;return!c._repo.repoInfo_.isCustomHost()&&h.host!==c._repo.repoInfo_.host&&bi("refFromURL: Host name does not match the current database: (found "+h.host+" but expected "+c._repo.repoInfo_.host+")"),fu(c,s.path.toString())}function fa(c,o){return null===gt((c=(0,re.m9)(c))._path)?((s=o)&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Mu("child","path",s,!1)):Mu("child","path",o,!1),new ha(c._repo,Ft(c._path,o));var s}function ko(c,o){c=(0,re.m9)(c),yi("set",c._path),kl("set",o,c._path,!1);const s=new re.BH;return Fl(c._repo,c._path,o,null,s.wrapCallback(()=>{})),s.promise}function ad(c,o){Bd("update",o,c._path,!1);const s=new re.BH;return function(c,o,s,h){Zs(c,"update",{path:o.toString(),value:s});let _=!0;const w=Tl(c),D={};if(ei(s,(U,Y)=>{_=!1,D[U]=Mi(Ft(o,U),Di(Y),c.serverSyncTree_,w)}),_)Rn("update() called with empty data.  Don't do anything."),Ul(0,h,"ok",void 0);else{const U=Ac(c),Y=function(c,o,s,h){!function(c,o,s,h){(0,re.hu)(h>c.lastWriteId,"Stacking an older merge on top of newer ones"),c.allWrites.push({path:o,children:s,writeId:h,visible:!0}),c.visibleWrites=Co(c.visibleWrites,o,s),c.lastWriteId=h}(c.pendingWriteTree_,o,s,h);const _=hr.fromObject(s);return Bi(c,new zt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,_))}(c.serverSyncTree_,o,D,U);ku(c.eventQueue_,Y),c.server_.merge(o.toString(),s,(ae,$e)=>{const tt="ok"===ae;tt||rr("update at "+o+" failed: "+ae);const wt=co(c.serverSyncTree_,U,!tt),sn=wt.length>0?Aa(c,o):o;No(c.eventQueue_,sn,wt),Ul(0,h,ae,$e)}),ei(s,ae=>{const $e=W(c,Ft(o,ae));Aa(c,$e)}),No(c.eventQueue_,o,[])}}(c._repo,c._path,o,s.wrapCallback(()=>{})),s.promise}function l_(c){return function(c,o){const s=function(c,o){const s=o._path;let h=null;c.syncPointTree_.foreachOnPath(s,(ae,$e)=>{const tt=Xn(ae,s);h=h||Ia($e,tt)});let _=c.syncPointTree_.get(s);_?h=h||Ia(_,Pe()):(_=new au,c.syncPointTree_=c.syncPointTree_.set(s,_));const w=null!=h,D=w?new _i(h,!0,!1):null;return function(c){return Ha(c.viewCache_)}(Wi(_,o,q(c.pendingWriteTree_,o._path),w?D.getNode():cr.EMPTY_NODE,w))}(c.serverSyncTree_,o);return null!=s?Promise.resolve(s):c.server_.get(o).then(h=>{const _=Di(h).withIndex(o._queryParams.getIndex()),w=Ya(c.serverSyncTree_,o._path,_);return Xa(c.eventQueue_,o._path,w),Promise.resolve(_)},h=>(Zs(c,"get for query "+(0,re.Pz)(o)+" failed: "+h),Promise.reject(new Error(h))))}((c=(0,re.m9)(c))._repo,c).then(o=>new xa(o,new ha(c._repo,c._path),c._queryParams.getIndex()))}class ld{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,s){const h=s._queryParams.getIndex();return new Kn("value",this,new xa(o.snapshotNode,new ha(s._repo,s._path),h))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,s){return this.callbackContext.hasCancelCallback?new Qn(this,o,s):null}matches(o){return o instanceof ld&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Pf{constructor(o,s){this.eventType=o,this.callbackContext=s}respondsTo(o){let s="children_added"===o?"child_added":o;return s="children_removed"===s?"child_removed":s,this.eventType===s}createCancelEvent(o,s){return this.callbackContext.hasCancelCallback?new Qn(this,o,s):null}createEvent(o,s){(0,re.hu)(null!=o.childName,"Child events should have a childName.");const h=fa(new ha(s._repo,s._path),o.childName),_=s._queryParams.getIndex();return new Kn(o.type,this,new xa(o.snapshotNode,h,_),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof Pf&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pa(c,o,s,h,_){let w;if("object"==typeof h&&(w=void 0,_=h),"function"==typeof h&&(w=h),_&&_.onlyOnce){const Y=s,ae=($e,tt)=>{hu(c._repo,c,U),Y($e,tt)};ae.userCallback=s.userCallback,ae.context=s.context,s=ae}const D=new Gs(s,w||void 0),U="value"===o?new ld(D):new Pf(o,D);return function(c,o,s){let h;h=".info"===gt(o._path)?Yu(c.infoSyncTree_,o,s):Yu(c.serverSyncTree_,o,s),Xa(c.eventQueue_,o._path,h)}(c._repo,c,U),()=>hu(c._repo,c,U)}function Yd(c,o,s,h){return pa(c,"value",o,s,h)}function ec(c,o,s,h){return pa(c,"child_added",o,s,h)}function ud(c,o,s,h){return pa(c,"child_changed",o,s,h)}function Rc(c,o,s,h){return pa(c,"child_moved",o,s,h)}function Vu(c,o,s,h){return pa(c,"child_removed",o,s,h)}function Of(c,o,s){let h=null;const _=s?new Gs(s):null;"value"===o?h=new ld(_):o&&(h=new Pf(o,_)),hu(c._repo,c,h)}class el{}class Nf extends el{constructor(o,s){super(),this._value=o,this._key=s}_apply(o){kl("endAt",this._value,o._path,!0);const s=ru(o._queryParams,this._value,this._key);if(zi(s),Mo(s),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(o._repo,o._path,s,o._orderByCalled)}}class Np extends el{constructor(o,s){super(),this._value=o,this._key=s}_apply(o){kl("endBefore",this._value,o._path,!1);const s=function(c,o,s){let h,_;return c.index_===Ai?("string"==typeof o&&(o=cl(o)),_=ru(c,o,s)):(h=null==s?di:cl(s),_=ru(c,o,h)),_.endBeforeSet_=!0,_}(o._queryParams,this._value,this._key);if(zi(s),Mo(s),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(o._repo,o._path,s,o._orderByCalled)}}class tc extends el{constructor(o,s){super(),this._value=o,this._key=s}_apply(o){kl("startAt",this._value,o._path,!0);const s=Va(o._queryParams,this._value,this._key);if(zi(s),Mo(s),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(o._repo,o._path,s,o._orderByCalled)}}class kp extends el{constructor(o,s){super(),this._value=o,this._key=s}_apply(o){kl("startAfter",this._value,o._path,!1);const s=function(c,o,s){let h;if(c.index_===Ai)"string"==typeof o&&(o=nu(o)),h=Va(c,o,s);else{let _;_=null==s?Pn:nu(s),h=Va(c,o,_)}return h.startAfterSet_=!0,h}(o._queryParams,this._value,this._key);if(zi(s),Mo(s),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(o._repo,o._path,s,o._orderByCalled)}}class ga extends el{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(o._repo,o._path,function(c,o){const s=c.copy();return s.limitSet_=!0,s.limit_=o,s.viewFrom_="l",s}(o._queryParams,this._limit),o._orderByCalled)}}class kf extends el{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(o._repo,o._path,function(c,o){const s=c.copy();return s.limitSet_=!0,s.limit_=o,s.viewFrom_="r",s}(o._queryParams,this._limit),o._orderByCalled)}}class rm extends el{constructor(o){super(),this._path=o}_apply(o){tn(o,"orderByChild");const s=new ie(this._path);if(an(s))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const h=new eu(s),_=hl(o._queryParams,h);return Mo(_),new fo(o._repo,o._path,_,!0)}}class Qd extends el{_apply(o){tn(o,"orderByKey");const s=hl(o._queryParams,Ai);return Mo(s),new fo(o._repo,o._path,s,!0)}}class nc extends el{_apply(o){tn(o,"orderByPriority");const s=hl(o._queryParams,li);return Mo(s),new fo(o._repo,o._path,s,!0)}}class Oc extends el{_apply(o){tn(o,"orderByValue");const s=hl(o._queryParams,Ua);return Mo(s),new fo(o._repo,o._path,s,!0)}}class Nc extends el{constructor(o,s){super(),this._value=o,this._key=s}_apply(o){if(kl("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Nf(this._value,this._key)._apply(new tc(this._value,this._key)._apply(o))}}function tl(c,...o){let s=(0,re.m9)(c);for(const h of o)s=h._apply(s);return s}(function(c){(0,re.hu)(!To,"__referenceConstructor has already been defined"),To=c})(ha),function(c){(0,re.hu)(!Nl,"__referenceConstructor has already been defined"),Nl=c}(ha);const Ff={};function kh(c,o,s,h,_){let w=h||c.options.databaseURL;void 0===w&&(c.options.projectId||bi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rn("Using default host for project ",c.options.projectId),w=`${c.options.projectId}-default-rtdb.firebaseio.com`);let Y,ae,D=_n(w,_),U=D.repoInfo;"undefined"!=typeof process&&(ae=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ae?(Y=!0,w=`http://${ae}?ns=${U.namespace}`,D=_n(w,_),U=D.repoInfo):Y=!D.repoInfo.secure;const $e=_&&Y?new ht(ht.OWNER):new Ce(c.name,c.options,o);jd("Invalid Firebase Database URL",D),an(D.path)||bi("Database URL must point to the root of a Firebase Database (not including a child path).");const tt=function(c,o,s,h){let _=Ff[o.name];_||(_={},Ff[o.name]=_);let w=_[c.toURLString()];return w&&bi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),w=new Ji(c,false,s,h),_[c.toURLString()]=w,w}(U,c,$e,new ze(c.name,s));return new om(tt,c)}class om{constructor(o,s){this._repoInternal=o,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(c,o,s){if(c.stats_=Nr(c.repoInfo_),c.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)c.server_=new _a(c.repoInfo_,(h,_,w,D)=>{$d(c,h,_,w,D)},c.authTokenProvider_,c.appCheckProvider_),setTimeout(()=>Hd(c,!0),0);else{if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Pz)(s)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}c.persistentConnection_=new Mr(c.repoInfo_,o,(h,_,w,D)=>{$d(c,h,_,w,D)},h=>{Hd(c,h)},h=>{!function(c,o){ei(o,(s,h)=>{Gd(c,s,h)})}(c,h)},c.authTokenProvider_,c.appCheckProvider_,s),c.server_=c.persistentConnection_}c.authTokenProvider_.addTokenChangeListener(h=>{c.server_.refreshAuthToken(h)}),c.appCheckProvider_.addTokenChangeListener(h=>{c.server_.refreshAppCheckToken(h.token)}),c.statsReporter_=function(c,o){const s=c.toString();return nr[s]||(nr[s]=o()),nr[s]}(c.repoInfo_,()=>new ui(c.stats_,c.server_)),c.infoData_=new iu,c.infoSyncTree_=new wf({startListening:(h,_,w,D)=>{let U=[];const Y=c.infoData_.getNode(h._path);return Y.isEmpty()||(U=Ya(c.infoSyncTree_,h._path,Y),setTimeout(()=>{D("ok")},0)),U},stopListening:()=>{}}),Gd(c,"connected",!1),c.serverSyncTree_=new wf({startListening:(h,_,w,D)=>(c.server_.listen(h,w,_,(U,Y)=>{const ae=D(U,Y);No(c.eventQueue_,h._path,ae)}),[]),stopListening:(h,_)=>{c.server_.unlisten(h,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ha(this._repo,Pe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(c,o){const s=Ff[o];(!s||s[c.key]!==c)&&bi(`Database ${o}(${c.repoInfo_}) has already been deleted.`),Wd(c),delete s[c.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&bi("Cannot call "+o+" on a deleted database.")}}function lm(c,o){_r(c,o)}class Bf{constructor(o,s){this.committed=o,this.snapshot=s}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mr.prototype.simpleListen=function(c,o){this.sendRequest("q",{p:c},o)},Mr.prototype.echo=function(c,o){this.sendRequest("echo",{d:c},o)},Ti(Ht.SDK_VERSION),(0,Ht._registerComponent)(new kt.wA("database",(o,{instanceIdentifier:s})=>kh(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),s),"PUBLIC").setMultipleInstances(!0)),(0,Ht.registerVersion)(ar,"0.12.2",void 0),(0,Ht.registerVersion)(ar,"0.12.2","esm2017");const um=new tr.Yd("@firebase/database-compat"),cm=function(c){um.warn("FIREBASE WARNING: "+c)};class dm{constructor(o){this._delegate=o}cancel(o){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",o,!0);const s=this._delegate.cancel();return o&&s.then(()=>o(null),h=>o(h)),s}remove(o){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",o,!0);const s=this._delegate.remove();return o&&s.then(()=>o(null),h=>o(h)),s}set(o,s){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",s,!0);const h=this._delegate.set(o);return s&&h.then(()=>s(null),_=>s(_)),h}setWithPriority(o,s,h){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",h,!0);const _=this._delegate.setWithPriority(o,s);return h&&_.then(()=>h(null),w=>h(w)),_}update(o,s){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const _={};for(let w=0;w<o.length;++w)_[""+w]=o[w];o=_,cm("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",s,!0);const h=this._delegate.update(o);return s&&h.then(()=>s(null),_=>s(_)),h}}class hm{constructor(o,s){this.committed=o,this.snapshot=s}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Fc{constructor(o,s){this._database=o,this._delegate=s}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),Mu("DataSnapshot.child","path",o,!1),new Fc(this._database,this._delegate.child(o))}hasChild(o){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Mu("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(s=>o(new Fc(this._database,s)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new Il(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ki{constructor(o,s){this.database=o,this._delegate=s}on(o,s,h,_){var w;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",s,!1);const D=Ki.getCancelAndContextArgs_("Query.on",h,_),U=(ae,$e)=>{s.call(D.context,new Fc(this.database,ae),$e)};U.userCallback=s,U.context=D.context;const Y=null===(w=D.cancel)||void 0===w?void 0:w.bind(D.context);switch(o){case"value":return Yd(this._delegate,U,Y),s;case"child_added":return ec(this._delegate,U,Y),s;case"child_removed":return Vu(this._delegate,U,Y),s;case"child_changed":return ud(this._delegate,U,Y),s;case"child_moved":return Rc(this._delegate,U,Y),s;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,s,h){if((0,re.Dv)("Query.off",0,3,arguments.length),function(c,o,s){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,re.Wj)("Query.off","callback",s,!0),(0,re.lb)("Query.off","context",h,!0),s){const _=()=>{};_.userCallback=s,_.context=h,Of(this._delegate,o,_)}else Of(this._delegate,o)}get(){return l_(this._delegate).then(o=>new Fc(this.database,o))}once(o,s,h,_){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",s,!0);const w=Ki.getCancelAndContextArgs_("Query.once",h,_),D=new re.BH,U=(ae,$e)=>{const tt=new Fc(this.database,ae);s&&s.call(w.context,tt,$e),D.resolve(tt)};U.userCallback=s,U.context=w.context;const Y=ae=>{w.cancel&&w.cancel.call(w.context,ae),D.reject(ae)};switch(o){case"value":Yd(this._delegate,U,Y,{onlyOnce:!0});break;case"child_added":ec(this._delegate,U,Y,{onlyOnce:!0});break;case"child_removed":Vu(this._delegate,U,Y,{onlyOnce:!0});break;case"child_changed":ud(this._delegate,U,Y,{onlyOnce:!0});break;case"child_moved":Rc(this._delegate,U,Y,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return D.promise}limitToFirst(o){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new Ki(this.database,tl(this._delegate,function(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ga(c)}(o)))}limitToLast(o){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new Ki(this.database,tl(this._delegate,function(c){if("number"!=typeof c||Math.floor(c)!==c||c<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kf(c)}(o)))}orderByChild(o){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new Ki(this.database,tl(this._delegate,function(c){if("$key"===c)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===c)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===c)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Mu("orderByChild","path",c,!1),new rm(c)}(o)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new Ki(this.database,tl(this._delegate,new Qd))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new Ki(this.database,tl(this._delegate,new nc))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new Ki(this.database,tl(this._delegate,new Oc))}startAt(o=null,s){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new Ki(this.database,tl(this._delegate,function(c=null,o){return Cl("startAt","key",o,!0),new tc(c,o)}(o,s)))}startAfter(o=null,s){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new Ki(this.database,tl(this._delegate,function(c,o){return Cl("startAfter","key",o,!0),new kp(c,o)}(o,s)))}endAt(o=null,s){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new Ki(this.database,tl(this._delegate,function(c,o){return Cl("endAt","key",o,!0),new Nf(c,o)}(o,s)))}endBefore(o=null,s){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new Ki(this.database,tl(this._delegate,function(c,o){return Cl("endBefore","key",o,!0),new Np(c,o)}(o,s)))}equalTo(o,s){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new Ki(this.database,tl(this._delegate,function(c,o){return Cl("equalTo","key",o,!0),new Nc(c,o)}(o,s)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Ki))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,s,h){const _={cancel:void 0,context:void 0};if(s&&h)_.cancel=s,(0,re.Wj)(o,"cancel",_.cancel,!0),_.context=h,(0,re.lb)(o,"context",_.context,!0);else if(s)if("object"==typeof s&&null!==s)_.context=s;else{if("function"!=typeof s)throw new Error((0,re.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=s}return _}get ref(){return new Il(this.database,new ha(this._delegate._repo,this._delegate._path))}}class Il extends Ki{constructor(o,s){super(o,new fo(s._repo,s._path,new eo,!1)),this.database=o,this._delegate=s}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new Il(this.database,fa(this._delegate,o))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new Il(this.database,o):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new Il(this.database,this._delegate.root)}set(o,s){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",s,!0);const h=ko(this._delegate,o);return s&&h.then(()=>s(null),_=>s(_)),h}update(o,s){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const _={};for(let w=0;w<o.length;++w)_[""+w]=o[w];o=_,cm("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yi("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",s,!0);const h=ad(this._delegate,o);return s&&h.then(()=>s(null),_=>s(_)),h}setWithPriority(o,s,h){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",h,!0);const _=function(c,o,s){if(yi("setWithPriority",c._path),kl("setWithPriority",o,c._path,!1),sd("setWithPriority",s,!1),".length"===c.key||".keys"===c.key)throw"setWithPriority failed: "+c.key+" is a read-only object.";const h=new re.BH;return Fl(c._repo,c._path,o,s,h.wrapCallback(()=>{})),h.promise}(this._delegate,o,s);return h&&_.then(()=>h(null),w=>h(w)),_}remove(o){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",o,!0);const s=function(c){return yi("remove",c._path),ko(c,null)}(this._delegate);return o&&s.then(()=>o(null),h=>o(h)),s}transaction(o,s,h){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,re.Wj)("Reference.transaction","onComplete",s,!0),function(c,o,s,h){if(void 0!==s&&"boolean"!=typeof s)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,h);const _=function(c,o,s){var h;if(c=(0,re.m9)(c),yi("Reference.transaction",c._path),".length"===c.key||".keys"===c.key)throw"Reference.transaction failed: "+c.key+" is a read-only object.";const _=null===(h=null==s?void 0:s.applyLocally)||void 0===h||h,w=new re.BH,U=Yd(c,()=>{});return function(c,o,s,h,_,w){Zs(c,"transaction on "+o);const D={path:o,update:s,onComplete:h,status:null,order:rn(),applyLocally:w,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},U=ca(c,o,void 0);D.currentInputSnapshot=U;const Y=D.update(U.val());if(void 0===Y)D.unwatcher(),D.currentOutputSnapshotRaw=null,D.currentOutputSnapshotResolved=null,D.onComplete&&D.onComplete(null,!1,D.currentInputSnapshot);else{Tc("transaction failed: Data returned ",Y,D.path),D.status=0;const ae=id(c.transactionQueueTree_,o),$e=cu(ae)||[];let tt;$e.push(D),la(ae,$e),"object"==typeof Y&&null!==Y&&(0,re.r3)(Y,".priority")?(tt=(0,re.DV)(Y,".priority"),(0,re.hu)(Cc(tt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):tt=(Md(c.serverSyncTree_,o)||cr.EMPTY_NODE).getPriority().val();const wt=Tl(c),sn=Di(Y,tt),nn=bl(sn,U,wt);D.currentOutputSnapshotRaw=sn,D.currentOutputSnapshotResolved=nn,D.currentWriteId=Ac(c);const Dn=Od(c.serverSyncTree_,o,nn,D.currentWriteId,D.applyLocally);No(c.eventQueue_,o,Dn),zd(c,c.transactionQueueTree_)}}(c._repo,c._path,o,(Y,ae,$e)=>{let tt=null;Y?w.reject(Y):(tt=new xa($e,new ha(c._repo,c._path),li),w.resolve(new Bf(ae,tt)))},U,_),w.promise}(this._delegate,o,{applyLocally:h}).then(w=>new hm(w.committed,new Fc(this.database,w.snapshot)));return s&&_.then(w=>s(null,w.committed,w.snapshot),w=>s(w,!1,null)),_}setPriority(o,s){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",s,!0);const h=function(c,o){c=(0,re.m9)(c),yi("setPriority",c._path),sd("setPriority",o,!1);const s=new re.BH;return Fl(c._repo,Ft(c._path,".priority"),o,null,s.wrapCallback(()=>{})),s.promise}(this._delegate,o);return s&&h.then(()=>s(null),_=>s(_)),h}push(o,s){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",s,!0);const h=function(c,o){c=(0,re.m9)(c),yi("push",c._path),kl("push",o,c._path,!0);const s=Sc(c._repo),h=Is(s),_=fa(c,h),w=fa(c,h);let D;return D=null!=o?ko(w,o).then(()=>w):Promise.resolve(w),_.then=D.then.bind(D),_.catch=D.then.bind(D,void 0),_}(this._delegate,o),_=h.then(D=>new Il(this.database,D));s&&_.then(()=>s(null),D=>s(D));const w=new Il(this.database,h);return w.then=_.then.bind(_),w.catch=_.catch.bind(_,void 0),w}onDisconnect(){return yi("Reference.onDisconnect",this._delegate._path),new dm(new Da(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class gu{constructor(o,s){this._delegate=o,this.app=s,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(o,s,h={}){!function(c,o,s,h={}){(c=(0,re.m9)(c))._checkNotDeleted("useEmulator"),c._instanceStarted&&bi("Cannot call useEmulator() after instance has already been initialized.");const _=c._repoInternal;let w;if(_.repoInfo_.nodeAdmin)h.mockUserToken&&bi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),w=new ht(ht.OWNER);else if(h.mockUserToken){const D="string"==typeof h.mockUserToken?h.mockUserToken:(0,re.Sg)(h.mockUserToken,c.app.options.projectId);w=new ht(D)}!function(c,o,s,h){c.repoInfo_=new At(`${o}:${s}`,!1,c.repoInfo_.namespace,c.repoInfo_.webSocketOnly,c.repoInfo_.nodeAdmin,c.repoInfo_.persistenceKey,c.repoInfo_.includeNamespaceInQueryParams),h&&(c.authTokenProvider_=h)}(_,o,s,w)}(this._delegate,o,s,h)}ref(o){if((0,re.Dv)("database.ref",0,1,arguments.length),o instanceof Il){const s=Kd(this._delegate,o.toString());return new Il(this,s)}{const s=fu(this._delegate,o);return new Il(this,s)}}refFromURL(o){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const h=Kd(this._delegate,o);return new Il(this,h)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function(c){(c=(0,re.m9)(c))._checkNotDeleted("goOffline"),Wd(c._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function(c){(c=(0,re.m9)(c))._checkNotDeleted("goOnline"),function(c){c.persistentConnection_&&c.persistentConnection_.resume(Ic)}(c._repo)}(this._delegate)}}gu.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:c=>function(c){return{".sv":{increment:c}}}(c)};var Hp=Object.freeze({__proto__:null,initStandalone:function({app:c,url:o,version:s,customAuthImpl:h,namespace:_,nodeAdmin:w=!1}){Ti(s);const D=new kt.zt("auth-internal",new kt.H0("database-standalone"));return D.setComponent(new kt.wA("auth-internal",()=>h,"PRIVATE")),{instance:new gu(kh(c,D,void 0,o,w),c),namespace:_}}});const Zf=gu.ServerValue;!function(c){c.INTERNAL.registerComponent(new kt.wA("database-compat",(o,{instanceIdentifier:s})=>{const h=o.getProvider("app-compat").getImmediate(),_=o.getProvider("database").getImmediate({identifier:s});return new gu(_,h)},"PUBLIC").setServiceProps({Reference:Il,Query:Ki,Database:gu,DataSnapshot:Fc,enableLogging:lm,INTERNAL:Hp,ServerValue:Zf}).setMultipleInstances(!0)),c.registerVersion("@firebase/database-compat","0.1.2")}(cn.Z);var Zp=N(2965),d_=N(7841);function wr(c){return null==c}function qp(c){return"function"==typeof c.set}function Lh(c,o){return qp(o)?o:c.ref(o)}function Uh(c,o){if(function(c){return"string"==typeof c}(c))return o.stringCase();if(qp(c))return o.firebaseCase();if(function(c){return"function"==typeof c.exportVal}(c))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof c)}function zo(c,o,s="on",h=at.z){return new Ve.y(_=>{let w=null;return w=c[s](o,(D,U)=>{h.schedule(()=>{_.next({snapshot:D,prevKey:U})}),"once"===s&&h.schedule(()=>_.complete())},D=>{h.schedule(()=>_.error(D))}),"on"===s?{unsubscribe(){null!=w&&c.off(o,w)}}:{unsubscribe(){}}}).pipe((0,rt.U)(_=>{const{snapshot:w,prevKey:D}=_;let U=null;return w.exists()&&(U=w.key),{type:o,payload:w,prevKey:D,key:U}}),(0,Se.B)())}function pm(c,o){const s=c.length;for(let h=0;h<s;h++)if(c[h].payload.key===o)return h;return-1}function ic(c,o){const{payload:s,prevKey:h,key:_}=o,w=pm(c,_),D=function(c,o){if(wr(o))return 0;{const s=pm(c,o);return-1===s?c.length:s+1}}(c,h);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let U=null;o.payload.forEach(Y=>{const ae={payload:Y,type:"value",prevKey:U,key:Y.key};return U=Y.key,c=[...c,ae],!1})}return c;case"child_added":if(w>-1){const U=c[w-1];(U&&U.key||null)!==h&&(c=c.filter(Y=>Y.payload.key!==s.key)).splice(D,0,o)}else{if(null==h)return[o,...c];(c=c.slice()).splice(D,0,o)}return c;case"child_removed":return c.filter(U=>U.payload.key!==s.key);case"child_changed":return c.map(U=>U.payload.key===_?o:U);case"child_moved":if(w>-1){const U=c.splice(w,1)[0];return(c=c.slice()).splice(D,0,U),c}return c;default:return c}}function Gf(c){return(wr(c)||0===c.length)&&(c=["child_added","child_removed","child_changed","child_moved"]),c}function zp(c,o,s){return function(c,o,s){return zo(c,"value","once",s).pipe((0,et.w)(h=>{const _=[(0,bt.of)(h)];return o.forEach(w=>_.push(zo(c,w,"on",s))),(0,ke.T)(..._).pipe((0,It.R)(ic,[]))}),(0,Ct.x)())}(c,o=Gf(o),s)}function qf(c,o,s){const h=(o=Gf(o)).map(_=>zo(c,_,"on",s));return(0,ke.T)(...h)}function Bl(c,o){return function(h,_){return Uh(h,{stringCase:()=>c.child(h)[o](_),firebaseCase:()=>h[o](_),snapshotCase:()=>h.ref[o](_)})}}function hd(c){return function(s){return s?Uh(s,{stringCase:()=>c.child(s).remove(),firebaseCase:()=>s.remove(),snapshotCase:()=>s.ref.remove()}):c.remove()}}function fd(c,o){return function(){return zo(c,"value","on",o)}}const Yp=new v.OlP("angularfire2.realtimeDatabaseURL"),Wf=new v.OlP("angularfire2.database.use-emulator");let p_=(()=>{class c{constructor(s,h,_,w,D,U,Y,ae,$e,tt,wt,sn,nn,Dn,Yn){this.schedulers=U;const xi=Y,vi=(0,Et.on)(s,D,h);ae&&(0,Dt.nw)(vi,D,$e,wt,sn,nn,tt,Dn),this.database=(0,Et.cc)(`${vi.name}.database.${_}`,"AngularFireDatabase",vi.name,()=>{const vs=D.runOutsideAngular(()=>vi.database(_||void 0));return xi&&vs.useEmulator(...xi),vs},[xi])}list(s,h){const _=this.schedulers.ngZone.runOutsideAngular(()=>Lh(this.database,s));let w=_;return h&&(w=h(_)),function(c,o){const s=o.schedulers.outsideAngular,h=o.schedulers.ngZone.run(()=>c.ref);return{query:c,update:Bl(h,"update"),set:Bl(h,"set"),push:_=>h.push(_),remove:hd(h),snapshotChanges:_=>zp(c,_,s).pipe(Je.iC),stateChanges:_=>qf(c,_,s).pipe(Je.iC),auditTrail:_=>function(c,o,s){return function(c,o,s){return function(c,o){return zo(c,"value","on",o).pipe((0,rt.U)(s=>{let h;return s.payload.forEach(_=>(h=_.key,!1)),{data:s,lastKeyToLoad:h}}))}(c,s).pipe(function(...c){const o=(0,Tt.jO)(c);return(0,dn.e)((s,h)=>{const _=c.length,w=new Array(_);let D=c.map(()=>!1),U=!1;for(let Y=0;Y<_;Y++)(0,Jn.Xf)(c[Y]).subscribe(new En.Q(h,ae=>{w[Y]=ae,!U&&!D[Y]&&(D[Y]=!0,(U=D.every(gn.y))&&(D=null))},qn.Z));s.subscribe(new En.Q(h,Y=>{if(U){const ae=[Y,...w];h.next(o?o(...ae):ae)}}))})}(o),(0,rt.U)(([_,w])=>{const D=_.lastKeyToLoad,U=w.map(Y=>Y.key);return{actions:w,lastKeyToLoad:D,loadedKeys:U}}),(0,dn.e)((o,s)=>{let h=!1;o.subscribe(new En.Q(s,w=>(h||(h=!(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad))(w)))&&s.next(w)))}),(0,rt.U)(_=>_.actions))}(c,qf(c,o).pipe((0,It.R)((_,w)=>[..._,w],[])),s)}(c,_,s).pipe(Je.iC),valueChanges:(_,w)=>zp(c,_,s).pipe((0,rt.U)(U=>U.map(Y=>w&&w.idField?Object.assign(Object.assign({},Y.payload.val()),{[w.idField]:Y.key}):Y.payload.val())),Je.iC)}}(w,this)}object(s){return function(c,o){return{query:c,snapshotChanges:()=>fd(c,o.schedulers.outsideAngular)().pipe(Je.iC),update:s=>c.ref.update(s),set:s=>c.ref.set(s),remove:()=>c.ref.remove(),valueChanges:()=>fd(c,o.schedulers.outsideAngular)().pipe(Je.iC,(0,rt.U)(h=>h.payload.exists()?h.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Lh(this.database,s)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return c.\u0275fac=function(s){return new(s||c)(v.LFG(Et.Dh),v.LFG(Et.xv,8),v.LFG(Yp,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Je.HU),v.LFG(Wf,8),v.LFG(Dt.zQ,8),v.LFG(Dt.Qv,8),v.LFG(Dt.L6,8),v.LFG(Dt._Q,8),v.LFG(Dt.rT,8),v.LFG(Dt.lh,8),v.LFG(Dt.f7,8),v.LFG(Zp.nm,8))},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac,providedIn:"any"}),c})(),g_=(()=>{class c{constructor(){d_.Z.registerVersion("angularfire",Je.q4.full,"rtdb-compat")}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=v.oAB({type:c}),c.\u0275inj=v.cJS({providers:[p_]}),c})();var _m=N(3124),ym=N(9751);const Qp_firebaseConfig={apiKey:"AIzaSyATuN4CiOGZ5OgRP4WJ0xk65aXACQF42Kw",authDomain:"clinica-bb441.firebaseapp.com",projectId:"clinica-bb441",storageBucket:"clinica-bb441.appspot.com",messagingSenderId:"987060585441",appId:"1:987060585441:web:1064c8b4bb0dbb117548a0"};var es=N(7238);function Vh(){return"undefined"!=typeof window&&void 0!==window.document}function Bh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function mu(c){switch(c.length){case 0:return new es.ZN;case 1:return c[0];default:return new es.ZE(c)}}function Jp(c,o,s,h,_={},w={}){const D=[],U=[];let Y=-1,ae=null;if(h.forEach($e=>{const tt=$e.offset,wt=tt==Y,sn=wt&&ae||{};Object.keys($e).forEach(nn=>{let Dn=nn,Yn=$e[nn];if("offset"!==nn)switch(Dn=o.normalizePropertyName(Dn,D),Yn){case es.k1:Yn=_[nn];break;case es.l3:Yn=w[nn];break;default:Yn=o.normalizeStyleValue(nn,Dn,Yn,D)}sn[Dn]=Yn}),wt||U.push(sn),ae=sn,Y=tt}),D.length){const $e="\n - ";throw new Error(`Unable to animate due to the following errors:${$e}${D.join($e)}`)}return U}function Xp(c,o,s,h){switch(o){case"start":c.onStart(()=>h(s&&vm(s,"start",c)));break;case"done":c.onDone(()=>h(s&&vm(s,"done",c)));break;case"destroy":c.onDestroy(()=>h(s&&vm(s,"destroy",c)))}}function vm(c,o,s){const h=s.totalTime,w=Em(c.element,c.triggerName,c.fromState,c.toState,o||c.phaseName,null==h?c.totalTime:h,!!s.disabled),D=c._data;return null!=D&&(w._data=D),w}function Em(c,o,s,h,_="",w=0,D){return{element:c,triggerName:o,fromState:s,toState:h,phaseName:_,totalTime:w,disabled:!!D}}function jl(c,o,s){let h;return c instanceof Map?(h=c.get(o),h||c.set(o,h=s)):(h=c[o],h||(h=c[o]=s)),h}function m_(c){const o=c.indexOf(":");return[c.substring(1,o),c.substr(o+1)]}let bm=(c,o)=>!1,zf=(c,o)=>!1,Xd=(c,o,s)=>[];const pd=Bh();(pd||"undefined"!=typeof Element)&&(bm=Vh()?(c,o)=>{for(;o&&o!==document.documentElement;){if(o===c)return!0;o=o.parentNode||o.host}return!1}:(c,o)=>c.contains(o),zf=(()=>{if(pd||Element.prototype.matches)return(c,o)=>c.matches(o);{const c=Element.prototype,o=c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector;return o?(s,h)=>o.apply(s,[h]):zf}})(),Xd=(c,o,s)=>{let h=[];if(s){const _=c.querySelectorAll(o);for(let w=0;w<_.length;w++)h.push(_[w])}else{const _=c.querySelector(o);_&&h.push(_)}return h});let sc=null,eh=!1;function $h(c){sc||(sc=("undefined"!=typeof document?document.body:null)||{},eh=!!sc.style&&"WebkitAppearance"in sc.style);let o=!0;return sc.style&&!function(c){return"ebkit"==c.substring(1,6)}(c)&&(o=c in sc.style,!o&&eh&&(o="Webkit"+c.charAt(0).toUpperCase()+c.substr(1)in sc.style)),o}const Hh=zf,ng=bm,Kf=Xd;function Yf(c){const o={};return Object.keys(c).forEach(s=>{const h=s.replace(/([a-z])([A-Z])/g,"$1-$2");o[h]=c[s]}),o}let Qf=(()=>{class c{validateStyleProperty(s){return $h(s)}matchesElement(s,h){return Hh(s,h)}containsElement(s,h){return ng(s,h)}query(s,h,_){return Kf(s,h,_)}computeStyle(s,h,_){return _||""}animate(s,h,_,w,D,U=[],Y){return new es.ZN(_,w)}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac}),c})(),Jf=(()=>{class c{}return c.NOOP=new Qf,c})();const oc="ng-enter",_u="ng-leave",ac="ng-trigger",Gh=".ng-trigger",ep="ng-animating",tp=".ng-animating";function yu(c){if("number"==typeof c)return c;const o=c.match(/^(-?[\.\d]+)(m?s)/);return!o||o.length<2?0:qh(parseFloat(o[1]),o[2])}function qh(c,o){switch(o){case"s":return 1e3*c;default:return c}}function _d(c,o,s){return c.hasOwnProperty("duration")?c:function(c,o,s){let _,w=0,D="";if("string"==typeof c){const U=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===U)return o.push(`The provided timing value "${c}" is invalid.`),{duration:0,delay:0,easing:""};_=qh(parseFloat(U[1]),U[2]);const Y=U[3];null!=Y&&(w=qh(parseFloat(Y),U[4]));const ae=U[5];ae&&(D=ae)}else _=c;if(!s){let U=!1,Y=o.length;_<0&&(o.push("Duration values below 0 are not allowed for this animation step."),U=!0),w<0&&(o.push("Delay values below 0 are not allowed for this animation step."),U=!0),U&&o.splice(Y,0,`The provided timing value "${c}" is invalid.`)}return{duration:_,delay:w,easing:D}}(c,o,s)}function Uc(c,o={}){return Object.keys(c).forEach(s=>{o[s]=c[s]}),o}function lc(c,o,s={}){if(o)for(let h in c)s[h]=c[h];else Uc(c,s);return s}function Wh(c,o,s){return s?o+":"+s+";":""}function zh(c){let o="";for(let s=0;s<c.style.length;s++){const h=c.style.item(s);o+=Wh(0,h,c.style.getPropertyValue(h))}for(const s in c.style)c.style.hasOwnProperty(s)&&!s.startsWith("_")&&(o+=Wh(0,wm(s),c.style[s]));c.setAttribute("style",o)}function Pa(c,o,s){c.style&&(Object.keys(o).forEach(h=>{const _=nh(h);s&&!s.hasOwnProperty(h)&&(s[h]=c.style[_]),c.style[_]=o[h]}),Bh()&&zh(c))}function Oa(c,o){c.style&&(Object.keys(o).forEach(s=>{const h=nh(s);c.style[h]=""}),Bh()&&zh(c))}function yd(c){return Array.isArray(c)?1==c.length?c[0]:(0,es.vP)(c):c}const po=new RegExp("{{\\s*(.+?)\\s*}}","g");function sg(c){let o=[];if("string"==typeof c){let s;for(;s=po.exec(c);)o.push(s[1]);po.lastIndex=0}return o}function uc(c,o,s){const h=c.toString(),_=h.replace(po,(w,D)=>{let U=o[D];return o.hasOwnProperty(D)||(s.push(`Please provide a value for the animation param ${D}`),U=""),U.toString()});return _==h?c:_}function og(c){const o=[];let s=c.next();for(;!s.done;)o.push(s.value),s=c.next();return o}const wy=/-+([a-z0-9])/g;function nh(c){return c.replace(wy,(...o)=>o[1].toUpperCase())}function wm(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rp(c,o){return 0===c||0===o}function rh(c,o,s){const h=Object.keys(s);if(h.length&&o.length){let w=o[0],D=[];if(h.forEach(U=>{w.hasOwnProperty(U)||D.push(U),w[U]=s[U]}),D.length)for(var _=1;_<o.length;_++){let U=o[_];D.forEach(function(Y){U[Y]=ag(c,Y)})}}return o}function nl(c,o,s){switch(o.type){case 7:return c.visitTrigger(o,s);case 0:return c.visitState(o,s);case 1:return c.visitTransition(o,s);case 2:return c.visitSequence(o,s);case 3:return c.visitGroup(o,s);case 4:return c.visitAnimate(o,s);case 5:return c.visitKeyframes(o,s);case 6:return c.visitStyle(o,s);case 8:return c.visitReference(o,s);case 9:return c.visitAnimateChild(o,s);case 10:return c.visitAnimateRef(o,s);case 11:return c.visitQuery(o,s);case 12:return c.visitStagger(o,s);default:throw new Error(`Unable to resolve animation metadata node #${o.type}`)}}function ag(c,o){return window.getComputedStyle(c)[o]}function lg(c,o){const s=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function(c,o,s){if(":"==c[0]){const Y=function(c,o){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,h)=>parseFloat(h)>parseFloat(s);case":decrement":return(s,h)=>parseFloat(h)<parseFloat(s);default:return o.push(`The transition alias value "${c}" is not supported`),"* => *"}}(c,s);if("function"==typeof Y)return void o.push(Y);c=Y}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return s.push(`The provided transition expression "${c}" is not supported`),o;const _=h[1],w=h[2],D=h[3];o.push(ug(_,D));"<"==w[0]&&!("*"==_&&"*"==D)&&o.push(ug(D,_))}(h,s,o)):s.push(c),s}const Kh=new Set(["true","1"]),Yh=new Set(["false","0"]);function ug(c,o){const s=Kh.has(c)||Yh.has(c),h=Kh.has(o)||Yh.has(o);return(_,w)=>{let D="*"==c||c==_,U="*"==o||o==w;return!D&&s&&"boolean"==typeof _&&(D=_?Kh.has(c):Yh.has(c)),!U&&h&&"boolean"==typeof w&&(U=w?Kh.has(o):Yh.has(o)),D&&U}}const cg=new RegExp("s*:selfs*,?","g");function dg(c,o,s){return new hg(c).build(o,s)}class hg{constructor(o){this._driver=o}build(o,s){const h=new Im(s);return this._resetContextStyleTimingState(h),nl(this,yd(o),h)}_resetContextStyleTimingState(o){o.currentQuerySelector="",o.collectedStyles={},o.collectedStyles[""]={},o.currentTime=0}visitTrigger(o,s){let h=s.queryCount=0,_=s.depCount=0;const w=[],D=[];return"@"==o.name.charAt(0)&&s.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),o.definitions.forEach(U=>{if(this._resetContextStyleTimingState(s),0==U.type){const Y=U,ae=Y.name;ae.toString().split(/\s*,\s*/).forEach($e=>{Y.name=$e,w.push(this.visitState(Y,s))}),Y.name=ae}else if(1==U.type){const Y=this.visitTransition(U,s);h+=Y.queryCount,_+=Y.depCount,D.push(Y)}else s.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:o.name,states:w,transitions:D,queryCount:h,depCount:_,options:null}}visitState(o,s){const h=this.visitStyle(o.styles,s),_=o.options&&o.options.params||null;if(h.containsDynamicStyles){const w=new Set,D=_||{};if(h.styles.forEach(U=>{if(op(U)){const Y=U;Object.keys(Y).forEach(ae=>{sg(Y[ae]).forEach($e=>{D.hasOwnProperty($e)||w.add($e)})})}}),w.size){const U=og(w.values());s.errors.push(`state("${o.name}", ...) must define default values for all the following style substitutions: ${U.join(", ")}`)}}return{type:0,name:o.name,style:h,options:_?{params:_}:null}}visitTransition(o,s){s.queryCount=0,s.depCount=0;const h=nl(this,yd(o.animation),s);return{type:1,matchers:lg(o.expr,s.errors),animation:h,queryCount:s.queryCount,depCount:s.depCount,options:vd(o.options)}}visitSequence(o,s){return{type:2,steps:o.steps.map(h=>nl(this,h,s)),options:vd(o.options)}}visitGroup(o,s){const h=s.currentTime;let _=0;const w=o.steps.map(D=>{s.currentTime=h;const U=nl(this,D,s);return _=Math.max(_,s.currentTime),U});return s.currentTime=_,{type:3,steps:w,options:vd(o.options)}}visitAnimate(o,s){const h=function(c,o){let s=null;if(c.hasOwnProperty("duration"))s=c;else if("number"==typeof c)return Ed(_d(c,o).duration,0,"");const h=c;if(h.split(/\s+/).some(w=>"{"==w.charAt(0)&&"{"==w.charAt(1))){const w=Ed(0,0,"");return w.dynamic=!0,w.strValue=h,w}return s=s||_d(h,o),Ed(s.duration,s.delay,s.easing)}(o.timings,s.errors);s.currentAnimateTimings=h;let _,w=o.styles?o.styles:(0,es.oB)({});if(5==w.type)_=this.visitKeyframes(w,s);else{let D=o.styles,U=!1;if(!D){U=!0;const ae={};h.easing&&(ae.easing=h.easing),D=(0,es.oB)(ae)}s.currentTime+=h.duration+h.delay;const Y=this.visitStyle(D,s);Y.isEmptyStep=U,_=Y}return s.currentAnimateTimings=null,{type:4,timings:h,style:_,options:null}}visitStyle(o,s){const h=this._makeStyleAst(o,s);return this._validateStyleAst(h,s),h}_makeStyleAst(o,s){const h=[];Array.isArray(o.styles)?o.styles.forEach(D=>{"string"==typeof D?D==es.l3?h.push(D):s.errors.push(`The provided style string value ${D} is not allowed.`):h.push(D)}):h.push(o.styles);let _=!1,w=null;return h.forEach(D=>{if(op(D)){const U=D,Y=U.easing;if(Y&&(w=Y,delete U.easing),!_)for(let ae in U)if(U[ae].toString().indexOf("{{")>=0){_=!0;break}}}),{type:6,styles:h,easing:w,offset:o.offset,containsDynamicStyles:_,options:null}}_validateStyleAst(o,s){const h=s.currentAnimateTimings;let _=s.currentTime,w=s.currentTime;h&&w>0&&(w-=h.duration+h.delay),o.styles.forEach(D=>{"string"!=typeof D&&Object.keys(D).forEach(U=>{if(!this._driver.validateStyleProperty(U))return void s.errors.push(`The provided animation property "${U}" is not a supported CSS property for animations`);const Y=s.collectedStyles[s.currentQuerySelector],ae=Y[U];let $e=!0;ae&&(w!=_&&w>=ae.startTime&&_<=ae.endTime&&(s.errors.push(`The CSS property "${U}" that exists between the times of "${ae.startTime}ms" and "${ae.endTime}ms" is also being animated in a parallel animation between the times of "${w}ms" and "${_}ms"`),$e=!1),w=ae.startTime),$e&&(Y[U]={startTime:w,endTime:_}),s.options&&function(c,o,s){const h=o.params||{},_=sg(c);_.length&&_.forEach(w=>{h.hasOwnProperty(w)||s.push(`Unable to resolve the local animation param ${w} in the given list of values`)})}(D[U],s.options,s.errors)})})}visitKeyframes(o,s){const h={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push("keyframes() must be placed inside of a call to animate()"),h;let w=0;const D=[];let U=!1,Y=!1,ae=0;const $e=o.steps.map(xi=>{const vi=this._makeStyleAst(xi,s);let vs=null!=vi.offset?vi.offset:function(c){if("string"==typeof c)return null;let o=null;if(Array.isArray(c))c.forEach(s=>{if(op(s)&&s.hasOwnProperty("offset")){const h=s;o=parseFloat(h.offset),delete h.offset}});else if(op(c)&&c.hasOwnProperty("offset")){const s=c;o=parseFloat(s.offset),delete s.offset}return o}(vi.styles),ro=0;return null!=vs&&(w++,ro=vi.offset=vs),Y=Y||ro<0||ro>1,U=U||ro<ae,ae=ro,D.push(ro),vi});Y&&s.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),U&&s.errors.push("Please ensure that all keyframe offsets are in order");const tt=o.steps.length;let wt=0;w>0&&w<tt?s.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==w&&(wt=1/(tt-1));const sn=tt-1,nn=s.currentTime,Dn=s.currentAnimateTimings,Yn=Dn.duration;return $e.forEach((xi,vi)=>{const vs=wt>0?vi==sn?1:wt*vi:D[vi],ro=vs*Yn;s.currentTime=nn+Dn.delay+ro,Dn.duration=ro,this._validateStyleAst(xi,s),xi.offset=vs,h.styles.push(xi)}),h}visitReference(o,s){return{type:8,animation:nl(this,yd(o.animation),s),options:vd(o.options)}}visitAnimateChild(o,s){return s.depCount++,{type:9,options:vd(o.options)}}visitAnimateRef(o,s){return{type:10,animation:this.visitReference(o.animation,s),options:vd(o.options)}}visitQuery(o,s){const h=s.currentQuerySelector,_=o.options||{};s.queryCount++,s.currentQuery=o;const[w,D]=function(c){const o=!!c.split(/\s*,\s*/).find(s=>":self"==s);return o&&(c=c.replace(cg,"")),[c=c.replace(/@\*/g,Gh).replace(/@\w+/g,s=>Gh+"-"+s.substr(1)).replace(/:animating/g,tp),o]}(o.selector);s.currentQuerySelector=h.length?h+" "+w:w,jl(s.collectedStyles,s.currentQuerySelector,{});const U=nl(this,yd(o.animation),s);return s.currentQuery=null,s.currentQuerySelector=h,{type:11,selector:w,limit:_.limit||0,optional:!!_.optional,includeSelf:D,animation:U,originalSelector:o.selector,options:vd(o.options)}}visitStagger(o,s){s.currentQuery||s.errors.push("stagger() can only be used inside of query()");const h="full"===o.timings?{duration:0,delay:0,easing:"full"}:_d(o.timings,s.errors,!0);return{type:12,animation:nl(this,yd(o.animation),s),timings:h,options:null}}}class Im{constructor(o){this.errors=o,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function op(c){return!Array.isArray(c)&&"object"==typeof c}function vd(c){return c?(c=Uc(c)).params&&(c.params=function(c){return c?Uc(c):null}(c.params)):c={},c}function Ed(c,o,s){return{duration:c,delay:o,easing:s}}function ap(c,o,s,h,_,w,D=null,U=!1){return{type:1,element:c,keyframes:o,preStyleProps:s,postStyleProps:h,duration:_,delay:w,totalTime:_+w,easing:D,subTimeline:U}}class sh{constructor(){this._map=new Map}consume(o){let s=this._map.get(o);return s?this._map.delete(o):s=[],s}append(o,s){let h=this._map.get(o);h||this._map.set(o,h=[]),h.push(...s)}has(o){return this._map.has(o)}clear(){this._map.clear()}}const mg=new RegExp(":enter","g"),Jh=new RegExp(":leave","g");function lp(c,o,s,h,_,w={},D={},U,Y,ae=[]){return(new yg).buildKeyframes(c,o,s,h,_,w,D,U,Y,ae)}class yg{buildKeyframes(o,s,h,_,w,D,U,Y,ae,$e=[]){ae=ae||new sh;const tt=new bd(o,s,ae,_,w,$e,[]);tt.options=Y,tt.currentTimeline.setStyles([D],null,tt.errors,Y),nl(this,h,tt);const wt=tt.timelines.filter(sn=>sn.containsAnimation());if(wt.length&&Object.keys(U).length){const sn=wt[wt.length-1];sn.allowOnlyTimelineStyles()||sn.setStyles([U],null,tt.errors,Y)}return wt.length?wt.map(sn=>sn.buildKeyframes()):[ap(s,[],[],[],0,0,"",!1)]}visitTrigger(o,s){}visitState(o,s){}visitTransition(o,s){}visitAnimateChild(o,s){const h=s.subInstructions.consume(s.element);if(h){const _=s.createSubContext(o.options),w=s.currentTimeline.currentTime,D=this._visitSubInstructions(h,_,_.options);w!=D&&s.transformIntoNewTimeline(D)}s.previousNode=o}visitAnimateRef(o,s){const h=s.createSubContext(o.options);h.transformIntoNewTimeline(),this.visitReference(o.animation,h),s.transformIntoNewTimeline(h.currentTimeline.currentTime),s.previousNode=o}_visitSubInstructions(o,s,h){let w=s.currentTimeline.currentTime;const D=null!=h.duration?yu(h.duration):null,U=null!=h.delay?yu(h.delay):null;return 0!==D&&o.forEach(Y=>{const ae=s.appendInstructionToTimeline(Y,D,U);w=Math.max(w,ae.duration+ae.delay)}),w}visitReference(o,s){s.updateOptions(o.options,!0),nl(this,o.animation,s),s.previousNode=o}visitSequence(o,s){const h=s.subContextCount;let _=s;const w=o.options;if(w&&(w.params||w.delay)&&(_=s.createSubContext(w),_.transformIntoNewTimeline(),null!=w.delay)){6==_.previousNode.type&&(_.currentTimeline.snapshotCurrentStyles(),_.previousNode=up);const D=yu(w.delay);_.delayNextStep(D)}o.steps.length&&(o.steps.forEach(D=>nl(this,D,_)),_.currentTimeline.applyStylesToKeyframe(),_.subContextCount>h&&_.transformIntoNewTimeline()),s.previousNode=o}visitGroup(o,s){const h=[];let _=s.currentTimeline.currentTime;const w=o.options&&o.options.delay?yu(o.options.delay):0;o.steps.forEach(D=>{const U=s.createSubContext(o.options);w&&U.delayNextStep(w),nl(this,D,U),_=Math.max(_,U.currentTimeline.currentTime),h.push(U.currentTimeline)}),h.forEach(D=>s.currentTimeline.mergeTimelineCollectedStyles(D)),s.transformIntoNewTimeline(_),s.previousNode=o}_visitTiming(o,s){if(o.dynamic){const h=o.strValue;return _d(s.params?uc(h,s.params,s.errors):h,s.errors)}return{duration:o.duration,delay:o.delay,easing:o.easing}}visitAnimate(o,s){const h=s.currentAnimateTimings=this._visitTiming(o.timings,s),_=s.currentTimeline;h.delay&&(s.incrementTime(h.delay),_.snapshotCurrentStyles());const w=o.style;5==w.type?this.visitKeyframes(w,s):(s.incrementTime(h.duration),this.visitStyle(w,s),_.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=o}visitStyle(o,s){const h=s.currentTimeline,_=s.currentAnimateTimings;!_&&h.getCurrentStyleProperties().length&&h.forwardFrame();const w=_&&_.easing||o.easing;o.isEmptyStep?h.applyEmptyStep(w):h.setStyles(o.styles,w,s.errors,s.options),s.previousNode=o}visitKeyframes(o,s){const h=s.currentAnimateTimings,_=s.currentTimeline.duration,w=h.duration,U=s.createSubContext().currentTimeline;U.easing=h.easing,o.styles.forEach(Y=>{U.forwardTime((Y.offset||0)*w),U.setStyles(Y.styles,Y.easing,s.errors,s.options),U.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(U),s.transformIntoNewTimeline(_+w),s.previousNode=o}visitQuery(o,s){const h=s.currentTimeline.currentTime,_=o.options||{},w=_.delay?yu(_.delay):0;w&&(6===s.previousNode.type||0==h&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=up);let D=h;const U=s.invokeQuery(o.selector,o.originalSelector,o.limit,o.includeSelf,!!_.optional,s.errors);s.currentQueryTotal=U.length;let Y=null;U.forEach((ae,$e)=>{s.currentQueryIndex=$e;const tt=s.createSubContext(o.options,ae);w&&tt.delayNextStep(w),ae===s.element&&(Y=tt.currentTimeline),nl(this,o.animation,tt),tt.currentTimeline.applyStylesToKeyframe(),D=Math.max(D,tt.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(D),Y&&(s.currentTimeline.mergeTimelineCollectedStyles(Y),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=o}visitStagger(o,s){const h=s.parentContext,_=s.currentTimeline,w=o.timings,D=Math.abs(w.duration),U=D*(s.currentQueryTotal-1);let Y=D*s.currentQueryIndex;switch(w.duration<0?"reverse":w.easing){case"reverse":Y=U-Y;break;case"full":Y=h.currentStaggerTime}const $e=s.currentTimeline;Y&&$e.delayNextStep(Y);const tt=$e.currentTime;nl(this,o.animation,s),s.previousNode=o,h.currentStaggerTime=_.currentTime-tt+(_.startTime-h.currentTimeline.startTime)}}const up={};class bd{constructor(o,s,h,_,w,D,U,Y){this._driver=o,this.element=s,this.subInstructions=h,this._enterClassName=_,this._leaveClassName=w,this.errors=D,this.timelines=U,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=up,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Y||new Xh(this._driver,s,0),U.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(o,s){if(!o)return;const h=o;let _=this.options;null!=h.duration&&(_.duration=yu(h.duration)),null!=h.delay&&(_.delay=yu(h.delay));const w=h.params;if(w){let D=_.params;D||(D=this.options.params={}),Object.keys(w).forEach(U=>{(!s||!D.hasOwnProperty(U))&&(D[U]=uc(w[U],D,this.errors))})}}_copyOptions(){const o={};if(this.options){const s=this.options.params;if(s){const h=o.params={};Object.keys(s).forEach(_=>{h[_]=s[_]})}}return o}createSubContext(o=null,s,h){const _=s||this.element,w=new bd(this._driver,_,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(_,h||0));return w.previousNode=this.previousNode,w.currentAnimateTimings=this.currentAnimateTimings,w.options=this._copyOptions(),w.updateOptions(o),w.currentQueryIndex=this.currentQueryIndex,w.currentQueryTotal=this.currentQueryTotal,w.parentContext=this,this.subContextCount++,w}transformIntoNewTimeline(o){return this.previousNode=up,this.currentTimeline=this.currentTimeline.fork(this.element,o),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(o,s,h){const _={duration:null!=s?s:o.duration,delay:this.currentTimeline.currentTime+(null!=h?h:0)+o.delay,easing:""},w=new vg(this._driver,o.element,o.keyframes,o.preStyleProps,o.postStyleProps,_,o.stretchStartingKeyframe);return this.timelines.push(w),_}incrementTime(o){this.currentTimeline.forwardTime(this.currentTimeline.duration+o)}delayNextStep(o){o>0&&this.currentTimeline.delayNextStep(o)}invokeQuery(o,s,h,_,w,D){let U=[];if(_&&U.push(this.element),o.length>0){o=(o=o.replace(mg,"."+this._enterClassName)).replace(Jh,"."+this._leaveClassName);let ae=this._driver.query(this.element,o,1!=h);0!==h&&(ae=h<0?ae.slice(ae.length+h,ae.length):ae.slice(0,h)),U.push(...ae)}return!w&&0==U.length&&D.push(`\`query("${s}")\` returned zero elements. (Use \`query("${s}", { optional: true })\` if you wish to allow this.)`),U}}class Xh{constructor(o,s,h,_){this._driver=o,this.element=s,this.startTime=h,this._elementTimelineStylesLookup=_,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(o){const s=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||s?(this.forwardTime(this.currentTime+o),s&&this.snapshotCurrentStyles()):this.startTime+=o}fork(o,s){return this.applyStylesToKeyframe(),new Xh(this._driver,o,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(o){this.applyStylesToKeyframe(),this.duration=o,this._loadKeyframe()}_updateStyle(o,s){this._localTimelineStyles[o]=s,this._globalTimelineStyles[o]=s,this._styleSummary[o]={time:this.currentTime,value:s}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(o){o&&(this._previousKeyframe.easing=o),Object.keys(this._globalTimelineStyles).forEach(s=>{this._backFill[s]=this._globalTimelineStyles[s]||es.l3,this._currentKeyframe[s]=es.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(o,s,h,_){s&&(this._previousKeyframe.easing=s);const w=_&&_.params||{},D=function(c,o){const s={};let h;return c.forEach(_=>{"*"===_?(h=h||Object.keys(o),h.forEach(w=>{s[w]=es.l3})):lc(_,!1,s)}),s}(o,this._globalTimelineStyles);Object.keys(D).forEach(U=>{const Y=uc(D[U],w,h);this._pendingStyles[U]=Y,this._localTimelineStyles.hasOwnProperty(U)||(this._backFill[U]=this._globalTimelineStyles.hasOwnProperty(U)?this._globalTimelineStyles[U]:es.l3),this._updateStyle(U,Y)})}applyStylesToKeyframe(){const o=this._pendingStyles,s=Object.keys(o);0!=s.length&&(this._pendingStyles={},s.forEach(h=>{this._currentKeyframe[h]=o[h]}),Object.keys(this._localTimelineStyles).forEach(h=>{this._currentKeyframe.hasOwnProperty(h)||(this._currentKeyframe[h]=this._localTimelineStyles[h])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(o=>{const s=this._localTimelineStyles[o];this._pendingStyles[o]=s,this._updateStyle(o,s)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const o=[];for(let s in this._currentKeyframe)o.push(s);return o}mergeTimelineCollectedStyles(o){Object.keys(o._styleSummary).forEach(s=>{const h=this._styleSummary[s],_=o._styleSummary[s];(!h||_.time>h.time)&&this._updateStyle(s,_.value)})}buildKeyframes(){this.applyStylesToKeyframe();const o=new Set,s=new Set,h=1===this._keyframes.size&&0===this.duration;let _=[];this._keyframes.forEach((U,Y)=>{const ae=lc(U,!0);Object.keys(ae).forEach($e=>{const tt=ae[$e];tt==es.k1?o.add($e):tt==es.l3&&s.add($e)}),h||(ae.offset=Y/this.duration),_.push(ae)});const w=o.size?og(o.values()):[],D=s.size?og(s.values()):[];if(h){const U=_[0],Y=Uc(U);U.offset=0,Y.offset=1,_=[U,Y]}return ap(this.element,_,w,D,this.duration,this.startTime,this.easing,!1)}}class vg extends Xh{constructor(o,s,h,_,w,D,U=!1){super(o,s,D.delay),this.keyframes=h,this.preStyleProps=_,this.postStyleProps=w,this._stretchStartingKeyframe=U,this.timings={duration:D.duration,delay:D.delay,easing:D.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let o=this.keyframes,{delay:s,duration:h,easing:_}=this.timings;if(this._stretchStartingKeyframe&&s){const w=[],D=h+s,U=s/D,Y=lc(o[0],!1);Y.offset=0,w.push(Y);const ae=lc(o[0],!1);ae.offset=Vc(U),w.push(ae);const $e=o.length-1;for(let tt=1;tt<=$e;tt++){let wt=lc(o[tt],!1);wt.offset=Vc((s+wt.offset*h)/D),w.push(wt)}h=D,s=0,_="",o=w}return ap(this.element,o,this.preStyleProps,this.postStyleProps,h,s,_,!0)}}function Vc(c,o=3){const s=Math.pow(10,o-1);return Math.round(c*s)/s}class cp{}class Ko extends cp{normalizePropertyName(o,s){return nh(o)}normalizeStyleValue(o,s,h,_){let w="";const D=h.toString().trim();if(y_[s]&&0!==h&&"0"!==h)if("number"==typeof h)w="px";else{const U=h.match(/^[+-]?[\d\.]+([a-z]*)$/);U&&0==U[1].length&&_.push(`Please provide a CSS unit value for ${o}:${h}`)}return D+w}}const y_=(()=>function(c){const o={};return c.forEach(s=>o[s]=!0),o}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function v_(c,o,s,h,_,w,D,U,Y,ae,$e,tt,wt){return{type:0,element:c,triggerName:o,isRemovalTransition:_,fromState:s,fromStyles:w,toState:h,toStyles:D,timelines:U,queriedElements:Y,preStyleProps:ae,postStyleProps:$e,totalTime:tt,errors:wt}}const Bc={};class tf{constructor(o,s,h){this._triggerName=o,this.ast=s,this._stateStyles=h}match(o,s,h,_){return function(c,o,s,h,_){return c.some(w=>w(o,s,h,_))}(this.ast.matchers,o,s,h,_)}buildStyles(o,s,h){const _=this._stateStyles["*"],w=this._stateStyles[o],D=_?_.buildStyles(s,h):{};return w?w.buildStyles(s,h):D}build(o,s,h,_,w,D,U,Y,ae,$e){const tt=[],wt=this.ast.options&&this.ast.options.params||Bc,nn=this.buildStyles(h,U&&U.params||Bc,tt),Dn=Y&&Y.params||Bc,Yn=this.buildStyles(_,Dn,tt),xi=new Set,vi=new Map,vs=new Map,ro="void"===_,mf={params:Object.assign(Object.assign({},wt),Dn)},ql=$e?[]:lp(o,s,this.ast.animation,w,D,nn,Yn,mf,ae,tt);let Do=0;if(ql.forEach(rl=>{Do=Math.max(rl.duration+rl.delay,Do)}),tt.length)return v_(s,this._triggerName,h,_,ro,nn,Yn,[],[],vi,vs,Do,tt);ql.forEach(rl=>{const pc=rl.element,_f=jl(vi,pc,{});rl.preStyleProps.forEach(Na=>_f[Na]=!0);const $u=jl(vs,pc,{});rl.postStyleProps.forEach(Na=>$u[Na]=!0),pc!==s&&xi.add(pc)});const ju=og(xi.values());return v_(s,this._triggerName,h,_,ro,nn,Yn,ql,ju,vi,vs,Do)}}class wd{constructor(o,s,h){this.styles=o,this.defaultParams=s,this.normalizer=h}buildStyles(o,s){const h={},_=Uc(this.defaultParams);return Object.keys(o).forEach(w=>{const D=o[w];null!=D&&(_[w]=D)}),this.styles.styles.forEach(w=>{if("string"!=typeof w){const D=w;Object.keys(D).forEach(U=>{let Y=D[U];Y.length>1&&(Y=uc(Y,_,s));const ae=this.normalizer.normalizePropertyName(U,s);Y=this.normalizer.normalizeStyleValue(U,ae,Y,s),h[ae]=Y})}}),h}}class rf{constructor(o,s,h){this.name=o,this.ast=s,this._normalizer=h,this.transitionFactories=[],this.states={},s.states.forEach(_=>{this.states[_.name]=new wd(_.style,_.options&&_.options.params||{},h)}),dp(this.states,"true","1"),dp(this.states,"false","0"),s.transitions.forEach(_=>{this.transitionFactories.push(new tf(o,_,this.states))}),this.fallbackTransition=function(c,o,s){return new tf(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(D,U)=>!0],options:null,queryCount:0,depCount:0},o)}(o,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(o,s,h,_){return this.transitionFactories.find(D=>D.match(o,s,h,_))||null}matchStyles(o,s,h){return this.fallbackTransition.buildStyles(o,s,h)}}function dp(c,o,s){c.hasOwnProperty(o)?c.hasOwnProperty(s)||(c[s]=c[o]):c.hasOwnProperty(s)&&(c[o]=c[s])}const Tg=new sh;class Ig{constructor(o,s,h){this.bodyNode=o,this._driver=s,this._normalizer=h,this._animations={},this._playersById={},this.players=[]}register(o,s){const h=[],_=dg(this._driver,s,h);if(h.length)throw new Error(`Unable to build the animation due to the following errors: ${h.join("\n")}`);this._animations[o]=_}_buildPlayer(o,s,h){const _=o.element,w=Jp(0,this._normalizer,0,o.keyframes,s,h);return this._driver.animate(_,w,o.duration,o.delay,o.easing,[],!0)}create(o,s,h={}){const _=[],w=this._animations[o];let D;const U=new Map;if(w?(D=lp(this._driver,s,w,oc,_u,{},{},h,Tg,_),D.forEach($e=>{const tt=jl(U,$e.element,{});$e.postStyleProps.forEach(wt=>tt[wt]=null)})):(_.push("The requested animation doesn't exist or has already been destroyed"),D=[]),_.length)throw new Error(`Unable to create the animation due to the following errors: ${_.join("\n")}`);U.forEach(($e,tt)=>{Object.keys($e).forEach(wt=>{$e[wt]=this._driver.computeStyle(tt,wt,es.l3)})});const ae=mu(D.map($e=>{const tt=U.get($e.element);return this._buildPlayer($e,{},tt)}));return this._playersById[o]=ae,ae.onDestroy(()=>this.destroy(o)),this.players.push(ae),ae}destroy(o){const s=this._getPlayer(o);s.destroy(),delete this._playersById[o];const h=this.players.indexOf(s);h>=0&&this.players.splice(h,1)}_getPlayer(o){const s=this._playersById[o];if(!s)throw new Error(`Unable to find the timeline player referenced by ${o}`);return s}listen(o,s,h,_){const w=Em(s,"","","");return Xp(this._getPlayer(o),h,w,_),()=>{}}command(o,s,h,_){if("register"==h)return void this.register(o,_[0]);if("create"==h)return void this.create(o,s,_[0]||{});const w=this._getPlayer(o);switch(h){case"play":w.play();break;case"pause":w.pause();break;case"reset":w.reset();break;case"restart":w.restart();break;case"finish":w.finish();break;case"init":w.init();break;case"setPosition":w.setPosition(parseFloat(_[0]));break;case"destroy":this.destroy(o)}}}const sf="ng-animate-queued",Am="ng-animate-disabled",af=".ng-animate-disabled",Sg=[],fp={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ah={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Sl="__ng_removed";class pp{constructor(o,s=""){this.namespaceId=s;const h=o&&o.hasOwnProperty("value");if(this.value=function(c){return null!=c?c:null}(h?o.value:o),h){const w=Uc(o);delete w.value,this.options=w}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(o){const s=o.params;if(s){const h=this.options.params;Object.keys(s).forEach(_=>{null==h[_]&&(h[_]=s[_])})}}}const lf="void",uf=new pp(lf);class w_{constructor(o,s,h){this.id=o,this.hostElement=s,this._engine=h,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+o,ma(s,this._hostClassName)}listen(o,s,h,_){if(!this._triggers.hasOwnProperty(s))throw new Error(`Unable to listen on the animation trigger event "${h}" because the animation trigger "${s}" doesn't exist!`);if(null==h||0==h.length)throw new Error(`Unable to listen on the animation trigger "${s}" because the provided event is undefined!`);if(!function(c){return"start"==c||"done"==c}(h))throw new Error(`The provided animation trigger event "${h}" for the animation trigger "${s}" is not supported!`);const w=jl(this._elementListeners,o,[]),D={name:s,phase:h,callback:_};w.push(D);const U=jl(this._engine.statesByElement,o,{});return U.hasOwnProperty(s)||(ma(o,ac),ma(o,ac+"-"+s),U[s]=uf),()=>{this._engine.afterFlush(()=>{const Y=w.indexOf(D);Y>=0&&w.splice(Y,1),this._triggers[s]||delete U[s]})}}register(o,s){return!this._triggers[o]&&(this._triggers[o]=s,!0)}_getTrigger(o){const s=this._triggers[o];if(!s)throw new Error(`The provided animation trigger "${o}" has not been registered!`);return s}trigger(o,s,h,_=!0){const w=this._getTrigger(s),D=new mp(this.id,s,o);let U=this._engine.statesByElement.get(o);U||(ma(o,ac),ma(o,ac+"-"+s),this._engine.statesByElement.set(o,U={}));let Y=U[s];const ae=new pp(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&Y&&ae.absorbOptions(Y.options),U[s]=ae,Y||(Y=uf),ae.value!==lf&&Y.value===ae.value){if(!function(c,o){const s=Object.keys(c),h=Object.keys(o);if(s.length!=h.length)return!1;for(let _=0;_<s.length;_++){const w=s[_];if(!o.hasOwnProperty(w)||c[w]!==o[w])return!1}return!0}(Y.params,ae.params)){const Dn=[],Yn=w.matchStyles(Y.value,Y.params,Dn),xi=w.matchStyles(ae.value,ae.params,Dn);Dn.length?this._engine.reportError(Dn):this._engine.afterFlush(()=>{Oa(o,Yn),Pa(o,xi)})}return}const wt=jl(this._engine.playersByElement,o,[]);wt.forEach(Dn=>{Dn.namespaceId==this.id&&Dn.triggerName==s&&Dn.queued&&Dn.destroy()});let sn=w.matchTransition(Y.value,ae.value,o,ae.params),nn=!1;if(!sn){if(!_)return;sn=w.fallbackTransition,nn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:s,transition:sn,fromState:Y,toState:ae,player:D,isFallbackTransition:nn}),nn||(ma(o,sf),D.onStart(()=>{cc(o,sf)})),D.onDone(()=>{let Dn=this.players.indexOf(D);Dn>=0&&this.players.splice(Dn,1);const Yn=this._engine.playersByElement.get(o);if(Yn){let xi=Yn.indexOf(D);xi>=0&&Yn.splice(xi,1)}}),this.players.push(D),wt.push(D),D}deregister(o){delete this._triggers[o],this._engine.statesByElement.forEach((s,h)=>{delete s[o]}),this._elementListeners.forEach((s,h)=>{this._elementListeners.set(h,s.filter(_=>_.name!=o))})}clearElementCache(o){this._engine.statesByElement.delete(o),this._elementListeners.delete(o);const s=this._engine.playersByElement.get(o);s&&(s.forEach(h=>h.destroy()),this._engine.playersByElement.delete(o))}_signalRemovalForInnerTriggers(o,s){const h=this._engine.driver.query(o,Gh,!0);h.forEach(_=>{if(_[Sl])return;const w=this._engine.fetchNamespacesByElement(_);w.size?w.forEach(D=>D.triggerLeaveAnimation(_,s,!1,!0)):this.clearElementCache(_)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(_=>this.clearElementCache(_)))}triggerLeaveAnimation(o,s,h,_){const w=this._engine.statesByElement.get(o);if(w){const D=[];if(Object.keys(w).forEach(U=>{if(this._triggers[U]){const Y=this.trigger(o,U,lf,_);Y&&D.push(Y)}}),D.length)return this._engine.markElementAsRemoved(this.id,o,!0,s),h&&mu(D).onDone(()=>this._engine.processLeaveNode(o)),!0}return!1}prepareLeaveAnimationListeners(o){const s=this._elementListeners.get(o),h=this._engine.statesByElement.get(o);if(s&&h){const _=new Set;s.forEach(w=>{const D=w.name;if(_.has(D))return;_.add(D);const Y=this._triggers[D].fallbackTransition,ae=h[D]||uf,$e=new pp(lf),tt=new mp(this.id,D,o);this._engine.totalQueuedPlayers++,this._queue.push({element:o,triggerName:D,transition:Y,fromState:ae,toState:$e,player:tt,isFallbackTransition:!0})})}}removeNode(o,s){const h=this._engine;if(o.childElementCount&&this._signalRemovalForInnerTriggers(o,s),this.triggerLeaveAnimation(o,s,!0))return;let _=!1;if(h.totalAnimations){const w=h.players.length?h.playersByQueriedElement.get(o):[];if(w&&w.length)_=!0;else{let D=o;for(;D=D.parentNode;)if(h.statesByElement.get(D)){_=!0;break}}}if(this.prepareLeaveAnimationListeners(o),_)h.markElementAsRemoved(this.id,o,!1,s);else{const w=o[Sl];(!w||w===fp)&&(h.afterFlush(()=>this.clearElementCache(o)),h.destroyInnerAnimations(o),h._onRemovalComplete(o,s))}}insertNode(o,s){ma(o,this._hostClassName)}drainQueuedTransitions(o){const s=[];return this._queue.forEach(h=>{const _=h.player;if(_.destroyed)return;const w=h.element,D=this._elementListeners.get(w);D&&D.forEach(U=>{if(U.name==h.triggerName){const Y=Em(w,h.triggerName,h.fromState.value,h.toState.value);Y._data=o,Xp(h.player,U.phase,Y,U.callback)}}),_.markedForDestroy?this._engine.afterFlush(()=>{_.destroy()}):s.push(h)}),this._queue=[],s.sort((h,_)=>{const w=h.transition.ast.depCount,D=_.transition.ast.depCount;return 0==w||0==D?w-D:this._engine.driver.containsElement(h.element,_.element)?1:-1})}destroy(o){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,o)}elementContainsData(o){let s=!1;return this._elementListeners.has(o)&&(s=!0),s=!!this._queue.find(h=>h.element===o)||s,s}}class gp{constructor(o,s,h){this.bodyNode=o,this.driver=s,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(_,w)=>{}}_onRemovalComplete(o,s){this.onRemovalComplete(o,s)}get queuedPlayers(){const o=[];return this._namespaceList.forEach(s=>{s.players.forEach(h=>{h.queued&&o.push(h)})}),o}createNamespace(o,s){const h=new w_(o,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(h,s):(this.newHostElements.set(s,h),this.collectEnterElement(s)),this._namespaceLookup[o]=h}_balanceNamespaceList(o,s){const h=this._namespaceList.length-1;if(h>=0){let _=!1;for(let w=h;w>=0;w--)if(this.driver.containsElement(this._namespaceList[w].hostElement,s)){this._namespaceList.splice(w+1,0,o),_=!0;break}_||this._namespaceList.splice(0,0,o)}else this._namespaceList.push(o);return this.namespacesByHostElement.set(s,o),o}register(o,s){let h=this._namespaceLookup[o];return h||(h=this.createNamespace(o,s)),h}registerTrigger(o,s,h){let _=this._namespaceLookup[o];_&&_.register(s,h)&&this.totalAnimations++}destroy(o,s){if(!o)return;const h=this._fetchNamespace(o);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[o];const _=this._namespaceList.indexOf(h);_>=0&&this._namespaceList.splice(_,1)}),this.afterFlushAnimationsDone(()=>h.destroy(s))}_fetchNamespace(o){return this._namespaceLookup[o]}fetchNamespacesByElement(o){const s=new Set,h=this.statesByElement.get(o);if(h){const _=Object.keys(h);for(let w=0;w<_.length;w++){const D=h[_[w]].namespaceId;if(D){const U=this._fetchNamespace(D);U&&s.add(U)}}}return s}trigger(o,s,h,_){if(Dg(s)){const w=this._fetchNamespace(o);if(w)return w.trigger(s,h,_),!0}return!1}insertNode(o,s,h,_){if(!Dg(s))return;const w=s[Sl];if(w&&w.setForRemoval){w.setForRemoval=!1,w.setForMove=!0;const D=this.collectedLeaveElements.indexOf(s);D>=0&&this.collectedLeaveElements.splice(D,1)}if(o){const D=this._fetchNamespace(o);D&&D.insertNode(s,h)}_&&this.collectEnterElement(s)}collectEnterElement(o){this.collectedEnterElements.push(o)}markElementAsDisabled(o,s){s?this.disabledNodes.has(o)||(this.disabledNodes.add(o),ma(o,Am)):this.disabledNodes.has(o)&&(this.disabledNodes.delete(o),cc(o,Am))}removeNode(o,s,h,_){if(Dg(s)){const w=o?this._fetchNamespace(o):null;if(w?w.removeNode(s,_):this.markElementAsRemoved(o,s,!1,_),h){const D=this.namespacesByHostElement.get(s);D&&D.id!==o&&D.removeNode(s,_)}}else this._onRemovalComplete(s,_)}markElementAsRemoved(o,s,h,_){this.collectedLeaveElements.push(s),s[Sl]={namespaceId:o,setForRemoval:_,hasAnimation:h,removedBeforeQueried:!1}}listen(o,s,h,_,w){return Dg(s)?this._fetchNamespace(o).listen(s,h,_,w):()=>{}}_buildInstruction(o,s,h,_,w){return o.transition.build(this.driver,o.element,o.fromState.value,o.toState.value,h,_,o.fromState.options,o.toState.options,s,w)}destroyInnerAnimations(o){let s=this.driver.query(o,Gh,!0);s.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(o,tp,!0),s.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(o){const s=this.playersByElement.get(o);s&&s.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(o){const s=this.playersByQueriedElement.get(o);s&&s.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(o=>{if(this.players.length)return mu(this.players).onDone(()=>o());o()})}processLeaveNode(o){const s=o[Sl];if(s&&s.setForRemoval){if(o[Sl]=fp,s.namespaceId){this.destroyInnerAnimations(o);const h=this._fetchNamespace(s.namespaceId);h&&h.clearElementCache(o)}this._onRemovalComplete(o,s.setForRemoval)}this.driver.matchesElement(o,af)&&this.markElementAsDisabled(o,!1),this.driver.query(o,af,!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(o=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,_)=>this._balanceNamespaceList(h,_)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)ma(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{s=this._flushAnimations(h,o)}finally{for(let _=0;_<h.length;_++)h[_]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],s.length?mu(s).onDone(()=>{h.forEach(_=>_())}):h.forEach(_=>_())}}reportError(o){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${o.join("\n")}`)}_flushAnimations(o,s){const h=new sh,_=[],w=new Map,D=[],U=new Map,Y=new Map,ae=new Map,$e=new Set;this.disabledNodes.forEach(Gn=>{$e.add(Gn);const dr=this.driver.query(Gn,".ng-animate-queued",!0);for(let Ir=0;Ir<dr.length;Ir++)$e.add(dr[Ir])});const tt=this.bodyNode,wt=Array.from(this.statesByElement.keys()),sn=xg(wt,this.collectedEnterElements),nn=new Map;let Dn=0;sn.forEach((Gn,dr)=>{const Ir=oc+Dn++;nn.set(dr,Ir),Gn.forEach(ti=>ma(ti,Ir))});const Yn=[],xi=new Set,vi=new Set;for(let Gn=0;Gn<this.collectedLeaveElements.length;Gn++){const dr=this.collectedLeaveElements[Gn],Ir=dr[Sl];Ir&&Ir.setForRemoval&&(Yn.push(dr),xi.add(dr),Ir.hasAnimation?this.driver.query(dr,".ng-star-inserted",!0).forEach(ti=>xi.add(ti)):vi.add(dr))}const vs=new Map,ro=xg(wt,Array.from(xi));ro.forEach((Gn,dr)=>{const Ir=_u+Dn++;vs.set(dr,Ir),Gn.forEach(ti=>ma(ti,Ir))}),o.push(()=>{sn.forEach((Gn,dr)=>{const Ir=nn.get(dr);Gn.forEach(ti=>cc(ti,Ir))}),ro.forEach((Gn,dr)=>{const Ir=vs.get(dr);Gn.forEach(ti=>cc(ti,Ir))}),Yn.forEach(Gn=>{this.processLeaveNode(Gn)})});const mf=[],ql=[];for(let Gn=this._namespaceList.length-1;Gn>=0;Gn--)this._namespaceList[Gn].drainQueuedTransitions(s).forEach(Ir=>{const ti=Ir.player,Es=Ir.element;if(mf.push(ti),this.collectedEnterElements.length){const gc=Es[Sl];if(gc&&gc.setForMove)return void ti.destroy()}const Hu=!tt||!this.driver.containsElement(tt,Es),Ma=vs.get(Es),Zu=nn.get(Es),zs=this._buildInstruction(Ir,h,Zu,Ma,Hu);if(zs.errors&&zs.errors.length)ql.push(zs);else{if(Hu)return ti.onStart(()=>Oa(Es,zs.fromStyles)),ti.onDestroy(()=>Pa(Es,zs.toStyles)),void _.push(ti);if(Ir.isFallbackTransition)return ti.onStart(()=>Oa(Es,zs.fromStyles)),ti.onDestroy(()=>Pa(Es,zs.toStyles)),void _.push(ti);zs.timelines.forEach(gc=>gc.stretchStartingKeyframe=!0),h.append(Es,zs.timelines),D.push({instruction:zs,player:ti,element:Es}),zs.queriedElements.forEach(gc=>jl(U,gc,[]).push(ti)),zs.preStyleProps.forEach((gc,Cp)=>{const yf=Object.keys(gc);if(yf.length){let Hc=Y.get(Cp);Hc||Y.set(Cp,Hc=new Set),yf.forEach(Fm=>Hc.add(Fm))}}),zs.postStyleProps.forEach((gc,Cp)=>{const yf=Object.keys(gc);let Hc=ae.get(Cp);Hc||ae.set(Cp,Hc=new Set),yf.forEach(Fm=>Hc.add(Fm))})}});if(ql.length){const Gn=[];ql.forEach(dr=>{Gn.push(`@${dr.triggerName} has failed due to:\n`),dr.errors.forEach(Ir=>Gn.push(`- ${Ir}\n`))}),mf.forEach(dr=>dr.destroy()),this.reportError(Gn)}const Do=new Map,ju=new Map;D.forEach(Gn=>{const dr=Gn.element;h.has(dr)&&(ju.set(dr,dr),this._beforeAnimationBuild(Gn.player.namespaceId,Gn.instruction,Do))}),_.forEach(Gn=>{const dr=Gn.element;this._getPreviousPlayers(dr,!1,Gn.namespaceId,Gn.triggerName,null).forEach(ti=>{jl(Do,dr,[]).push(ti),ti.destroy()})});const rl=Yn.filter(Gn=>Eu(Gn,Y,ae)),pc=new Map;cf(pc,this.driver,vi,ae,es.l3).forEach(Gn=>{Eu(Gn,Y,ae)&&rl.push(Gn)});const $u=new Map;sn.forEach((Gn,dr)=>{cf($u,this.driver,new Set(Gn),Y,es.k1)}),rl.forEach(Gn=>{const dr=pc.get(Gn),Ir=$u.get(Gn);pc.set(Gn,Object.assign(Object.assign({},dr),Ir))});const Na=[],Td=[],$c={};D.forEach(Gn=>{const{element:dr,player:Ir,instruction:ti}=Gn;if(h.has(dr)){if($e.has(dr))return Ir.onDestroy(()=>Pa(dr,ti.toStyles)),Ir.disabled=!0,Ir.overrideTotalTime(ti.totalTime),void _.push(Ir);let Es=$c;if(ju.size>1){let Ma=dr;const Zu=[];for(;Ma=Ma.parentNode;){const zs=ju.get(Ma);if(zs){Es=zs;break}Zu.push(Ma)}Zu.forEach(zs=>ju.set(zs,Es))}const Hu=this._buildAnimation(Ir.namespaceId,ti,Do,w,$u,pc);if(Ir.setRealPlayer(Hu),Es===$c)Na.push(Ir);else{const Ma=this.playersByElement.get(Es);Ma&&Ma.length&&(Ir.parentPlayer=mu(Ma)),_.push(Ir)}}else Oa(dr,ti.fromStyles),Ir.onDestroy(()=>Pa(dr,ti.toStyles)),Td.push(Ir),$e.has(dr)&&_.push(Ir)}),Td.forEach(Gn=>{const dr=w.get(Gn.element);if(dr&&dr.length){const Ir=mu(dr);Gn.setRealPlayer(Ir)}}),_.forEach(Gn=>{Gn.parentPlayer?Gn.syncPlayerEvents(Gn.parentPlayer):Gn.destroy()});for(let Gn=0;Gn<Yn.length;Gn++){const dr=Yn[Gn],Ir=dr[Sl];if(cc(dr,_u),Ir&&Ir.hasAnimation)continue;let ti=[];if(U.size){let Hu=U.get(dr);Hu&&Hu.length&&ti.push(...Hu);let Ma=this.driver.query(dr,tp,!0);for(let Zu=0;Zu<Ma.length;Zu++){let zs=U.get(Ma[Zu]);zs&&zs.length&&ti.push(...zs)}}const Es=ti.filter(Hu=>!Hu.destroyed);Es.length?Rg(this,dr,Es):this.processLeaveNode(dr)}return Yn.length=0,Na.forEach(Gn=>{this.players.push(Gn),Gn.onDone(()=>{Gn.destroy();const dr=this.players.indexOf(Gn);this.players.splice(dr,1)}),Gn.play()}),Na}elementContainsData(o,s){let h=!1;const _=s[Sl];return _&&_.setForRemoval&&(h=!0),this.playersByElement.has(s)&&(h=!0),this.playersByQueriedElement.has(s)&&(h=!0),this.statesByElement.has(s)&&(h=!0),this._fetchNamespace(o).elementContainsData(s)||h}afterFlush(o){this._flushFns.push(o)}afterFlushAnimationsDone(o){this._whenQuietFns.push(o)}_getPreviousPlayers(o,s,h,_,w){let D=[];if(s){const U=this.playersByQueriedElement.get(o);U&&(D=U)}else{const U=this.playersByElement.get(o);if(U){const Y=!w||w==lf;U.forEach(ae=>{ae.queued||!Y&&ae.triggerName!=_||D.push(ae)})}}return(h||_)&&(D=D.filter(U=>!(h&&h!=U.namespaceId||_&&_!=U.triggerName))),D}_beforeAnimationBuild(o,s,h){const w=s.element,D=s.isRemovalTransition?void 0:o,U=s.isRemovalTransition?void 0:s.triggerName;for(const Y of s.timelines){const ae=Y.element,$e=ae!==w,tt=jl(h,ae,[]);this._getPreviousPlayers(ae,$e,D,U,s.toState).forEach(sn=>{const nn=sn.getRealPlayer();nn.beforeDestroy&&nn.beforeDestroy(),sn.destroy(),tt.push(sn)})}Oa(w,s.fromStyles)}_buildAnimation(o,s,h,_,w,D){const U=s.triggerName,Y=s.element,ae=[],$e=new Set,tt=new Set,wt=s.timelines.map(nn=>{const Dn=nn.element;$e.add(Dn);const Yn=Dn[Sl];if(Yn&&Yn.removedBeforeQueried)return new es.ZN(nn.duration,nn.delay);const xi=Dn!==Y,vi=function(c){const o=[];return Pg(c,o),o}((h.get(Dn)||Sg).map(Do=>Do.getRealPlayer())).filter(Do=>!!Do.element&&Do.element===Dn),vs=w.get(Dn),ro=D.get(Dn),mf=Jp(0,this._normalizer,0,nn.keyframes,vs,ro),ql=this._buildPlayer(nn,mf,vi);if(nn.subTimeline&&_&&tt.add(Dn),xi){const Do=new mp(o,U,Dn);Do.setRealPlayer(ql),ae.push(Do)}return ql});ae.forEach(nn=>{jl(this.playersByQueriedElement,nn.element,[]).push(nn),nn.onDone(()=>function(c,o,s){let h;if(c instanceof Map){if(h=c.get(o),h){if(h.length){const _=h.indexOf(s);h.splice(_,1)}0==h.length&&c.delete(o)}}else if(h=c[o],h){if(h.length){const _=h.indexOf(s);h.splice(_,1)}0==h.length&&delete c[o]}return h}(this.playersByQueriedElement,nn.element,nn))}),$e.forEach(nn=>ma(nn,ep));const sn=mu(wt);return sn.onDestroy(()=>{$e.forEach(nn=>cc(nn,ep)),Pa(Y,s.toStyles)}),tt.forEach(nn=>{jl(_,nn,[]).push(sn)}),sn}_buildPlayer(o,s,h){return s.length>0?this.driver.animate(o.element,s,o.duration,o.delay,o.easing,h):new es.ZN(o.duration,o.delay)}}class mp{constructor(o,s,h){this.namespaceId=o,this.triggerName=s,this.element=h,this._player=new es.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(o){this._containsRealPlayer||(this._player=o,Object.keys(this._queuedCallbacks).forEach(s=>{this._queuedCallbacks[s].forEach(h=>Xp(o,s,void 0,h))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(o.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(o){this.totalTime=o}syncPlayerEvents(o){const s=this._player;s.triggerCallback&&o.onStart(()=>s.triggerCallback("start")),o.onDone(()=>this.finish()),o.onDestroy(()=>this.destroy())}_queueEvent(o,s){jl(this._queuedCallbacks,o,[]).push(s)}onDone(o){this.queued&&this._queueEvent("done",o),this._player.onDone(o)}onStart(o){this.queued&&this._queueEvent("start",o),this._player.onStart(o)}onDestroy(o){this.queued&&this._queueEvent("destroy",o),this._player.onDestroy(o)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(o){this.queued||this._player.setPosition(o)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(o){const s=this._player;s.triggerCallback&&s.triggerCallback(o)}}function Dg(c){return c&&1===c.nodeType}function lh(c,o){const s=c.style.display;return c.style.display=null!=o?o:"none",s}function cf(c,o,s,h,_){const w=[];s.forEach(Y=>w.push(lh(Y)));const D=[];h.forEach((Y,ae)=>{const $e={};Y.forEach(tt=>{const wt=$e[tt]=o.computeStyle(ae,tt,_);(!wt||0==wt.length)&&(ae[Sl]=ah,D.push(ae))}),c.set(ae,$e)});let U=0;return s.forEach(Y=>lh(Y,w[U++])),D}function xg(c,o){const s=new Map;if(c.forEach(U=>s.set(U,[])),0==o.length)return s;const _=new Set(o),w=new Map;function D(U){if(!U)return 1;let Y=w.get(U);if(Y)return Y;const ae=U.parentNode;return Y=s.has(ae)?ae:_.has(ae)?1:D(ae),w.set(U,Y),Y}return o.forEach(U=>{const Y=D(U);1!==Y&&s.get(Y).push(U)}),s}const uh="$$classes";function ma(c,o){if(c.classList)c.classList.add(o);else{let s=c[uh];s||(s=c[uh]={}),s[o]=!0}}function cc(c,o){if(c.classList)c.classList.remove(o);else{let s=c[uh];s&&delete s[o]}}function Rg(c,o,s){mu(s).onDone(()=>c.processLeaveNode(o))}function Pg(c,o){for(let s=0;s<c.length;s++){const h=c[s];h instanceof es.ZE?Pg(h.players,o):o.push(h)}}function Eu(c,o,s){const h=s.get(c);if(!h)return!1;let _=o.get(c);return _?h.forEach(w=>_.add(w)):o.set(c,h),s.delete(c),!0}class jc{constructor(o,s,h){this.bodyNode=o,this._driver=s,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(_,w)=>{},this._transitionEngine=new gp(o,s,h),this._timelineEngine=new Ig(o,s,h),this._transitionEngine.onRemovalComplete=(_,w)=>this.onRemovalComplete(_,w)}registerTrigger(o,s,h,_,w){const D=o+"-"+_;let U=this._triggerCache[D];if(!U){const Y=[],ae=dg(this._driver,w,Y);if(Y.length)throw new Error(`The animation trigger "${_}" has failed to build due to the following errors:\n - ${Y.join("\n - ")}`);U=function(c,o,s){return new rf(c,o,s)}(_,ae,this._normalizer),this._triggerCache[D]=U}this._transitionEngine.registerTrigger(s,_,U)}register(o,s){this._transitionEngine.register(o,s)}destroy(o,s){this._transitionEngine.destroy(o,s)}onInsert(o,s,h,_){this._transitionEngine.insertNode(o,s,h,_)}onRemove(o,s,h,_){this._transitionEngine.removeNode(o,s,_||!1,h)}disableAnimations(o,s){this._transitionEngine.markElementAsDisabled(o,s)}process(o,s,h,_){if("@"==h.charAt(0)){const[w,D]=m_(h);this._timelineEngine.command(w,s,D,_)}else this._transitionEngine.trigger(o,s,h,_)}listen(o,s,h,_,w){if("@"==h.charAt(0)){const[D,U]=m_(h);return this._timelineEngine.listen(D,s,U,w)}return this._transitionEngine.listen(o,s,h,_,w)}flush(o=-1){this._transitionEngine.flush(o)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Ng(c,o){let s=null,h=null;return Array.isArray(o)&&o.length?(s=yp(o[0]),o.length>1&&(h=yp(o[o.length-1]))):o&&(s=yp(o)),s||h?new xm(c,s,h):null}let xm=(()=>{class c{constructor(s,h,_){this._element=s,this._startStyles=h,this._endStyles=_,this._state=0;let w=c.initialStylesByElement.get(s);w||c.initialStylesByElement.set(s,w={}),this._initialStyles=w}start(){this._state<1&&(this._startStyles&&Pa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pa(this._element,this._initialStyles),this._endStyles&&(Pa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(Oa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Oa(this._element,this._endStyles),this._endStyles=null),Pa(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function yp(c){let o=null;const s=Object.keys(c);for(let h=0;h<s.length;h++){const _=s[h];Mg(_)&&(o=o||{},o[_]=c[_])}return o}function Mg(c){return"display"===c||"position"===c}const kg="animation",Rm="animationend";class Pm{constructor(o,s,h,_,w,D,U){this._element=o,this._name=s,this._duration=h,this._delay=_,this._easing=w,this._fillMode=D,this._onDoneFn=U,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=Y=>this._handleCallback(Y)}apply(){(function(c,o){const s=Ep(c,"").trim();let h=0;s.length&&(function(c,o){let s=0;for(let h=0;h<c.length;h++)","===c.charAt(h)&&s++;return s}(s)+1,o=`${s}, ${o}`),Cd(c,"",o)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Nm(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){I_(this._element,this._name,"paused")}resume(){I_(this._element,this._name,"running")}setPosition(o){const s=Fg(this._element,this._name);this._position=o*this._duration,Cd(this._element,"Delay",`-${this._position}ms`,s)}getPosition(){return this._position}_handleCallback(o){const s=o._ngTestManualTimestamp||Date.now(),h=1e3*parseFloat(o.elapsedTime.toFixed(3));o.animationName==this._name&&Math.max(s-this._startTime,0)>=this._delay&&h>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Nm(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(c,o){const h=Ep(c,"").split(","),_=vp(h,o);_>=0&&(h.splice(_,1),Cd(c,"",h.join(",")))}(this._element,this._name))}}function I_(c,o,s){Cd(c,"PlayState",s,Fg(c,o))}function Fg(c,o){const s=Ep(c,"");return s.indexOf(",")>0?vp(s.split(","),o):vp([s],o)}function vp(c,o){for(let s=0;s<c.length;s++)if(c[s].indexOf(o)>=0)return s;return-1}function Nm(c,o,s){s?c.removeEventListener(Rm,o):c.addEventListener(Rm,o)}function Cd(c,o,s,h){const _=kg+o;if(null!=h){const w=c.style[_];if(w.length){const D=w.split(",");D[h]=s,s=D.join(",")}}c.style[_]=s}function Ep(c,o){return c.style[kg+o]||""}class Al{constructor(o,s,h,_,w,D,U,Y){this.element=o,this.keyframes=s,this.animationName=h,this._duration=_,this._delay=w,this._finalStyles=U,this._specialStyles=Y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=D||"linear",this.totalTime=_+w,this._buildStyler()}onStart(o){this._onStartFns.push(o)}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(o=>o()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(o=>o()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(o){this._styler.setPosition(o)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Pm(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(o){const s="start"==o?this._onStartFns:this._onDoneFns;s.forEach(h=>h()),s.length=0}beforeDestroy(){this.init();const o={};if(this.hasStarted()){const s=this._state>=3;Object.keys(this._finalStyles).forEach(h=>{"offset"!=h&&(o[h]=s?this._finalStyles[h]:ag(this.element,h))})}this.currentSnapshot=o}}class bp extends es.ZN{constructor(o,s){super(),this.element=o,this._startingStyles={},this.__initialized=!1,this._styles=Yf(s)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(o=>{this._startingStyles[o]=this.element.style[o]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(o=>this.element.style.setProperty(o,this._styles[o])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(o=>{const s=this._startingStyles[o];s?this.element.style.setProperty(o,s):this.element.style.removeProperty(o)}),this._startingStyles=null,super.destroy())}}class Fo{constructor(){this._count=0}validateStyleProperty(o){return $h(o)}matchesElement(o,s){return Hh(o,s)}containsElement(o,s){return ng(o,s)}query(o,s,h){return Kf(o,s,h)}computeStyle(o,s,h){return window.getComputedStyle(o)[s]}buildKeyframeElement(o,s,h){h=h.map(U=>Yf(U));let _=`@keyframes ${s} {\n`,w="";h.forEach(U=>{w=" ";const Y=parseFloat(U.offset);_+=`${w}${100*Y}% {\n`,w+=" ",Object.keys(U).forEach(ae=>{const $e=U[ae];switch(ae){case"offset":return;case"easing":return void($e&&(_+=`${w}animation-timing-function: ${$e};\n`));default:return void(_+=`${w}${ae}: ${$e};\n`)}}),_+=`${w}}\n`}),_+="}\n";const D=document.createElement("style");return D.textContent=_,D}animate(o,s,h,_,w,D=[],U){const Y=D.filter(Yn=>Yn instanceof Al),ae={};rp(h,_)&&Y.forEach(Yn=>{let xi=Yn.currentSnapshot;Object.keys(xi).forEach(vi=>ae[vi]=xi[vi])});const $e=function(c){let o={};return c&&(Array.isArray(c)?c:[c]).forEach(h=>{Object.keys(h).forEach(_=>{"offset"==_||"easing"==_||(o[_]=h[_])})}),o}(s=rh(o,s,ae));if(0==h)return new bp(o,$e);const tt="gen_css_kf_"+this._count++,wt=this.buildKeyframeElement(o,tt,s);(function(c){var o;const s=null===(o=c.getRootNode)||void 0===o?void 0:o.call(c);return"undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot?s:document.head})(o).appendChild(wt);const nn=Ng(o,s),Dn=new Al(o,s,tt,h,_,w,$e,nn);return Dn.onDestroy(()=>function(c){c.parentNode.removeChild(c)}(wt)),Dn}}class hf{constructor(o,s,h,_){this.element=o,this.keyframes=s,this.options=h,this._specialStyles=_,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(o=>o()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const o=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,o,this.options),this._finalKeyframe=o.length?o[o.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(o,s,h){return o.animate(s,h)}onStart(o){this._onStartFns.push(o)}onDone(o){this._onDoneFns.push(o)}onDestroy(o){this._onDestroyFns.push(o)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(o=>o()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(o=>o()),this._onDestroyFns=[])}setPosition(o){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=o*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const o={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(s=>{"offset"!=s&&(o[s]=this._finished?this._finalKeyframe[s]:ag(this.element,s))}),this.currentSnapshot=o}triggerCallback(o){const s="start"==o?this._onStartFns:this._onDoneFns;s.forEach(h=>h()),s.length=0}}class D_{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(km().toString()),this._cssKeyframesDriver=new Fo}validateStyleProperty(o){return $h(o)}matchesElement(o,s){return Hh(o,s)}containsElement(o,s){return ng(o,s)}query(o,s,h){return Kf(o,s,h)}computeStyle(o,s,h){return window.getComputedStyle(o)[s]}overrideWebAnimationsSupport(o){this._isNativeImpl=o}animate(o,s,h,_,w,D=[],U){if(!U&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(o,s,h,_,w,D);const $e={duration:h,delay:_,fill:0==_?"both":"forwards"};w&&($e.easing=w);const tt={},wt=D.filter(nn=>nn instanceof hf);rp(h,_)&&wt.forEach(nn=>{let Dn=nn.currentSnapshot;Object.keys(Dn).forEach(Yn=>tt[Yn]=Dn[Yn])});const sn=Ng(o,s=rh(o,s=s.map(nn=>lc(nn,!1)),tt));return new hf(o,s,$e,sn)}}function km(){return Vh()&&Element.prototype.animate||{}}let x_=(()=>{class c extends es._j{constructor(s,h){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(h.body,{id:"0",encapsulation:v.ifc.None,styles:[],data:{animation:[]}})}build(s){const h=this._nextAnimationId.toString();this._nextAnimationId++;const _=Array.isArray(s)?(0,es.vP)(s):s;return R_(this._renderer,null,h,"register",[_]),new qs(h,this._renderer)}}return c.\u0275fac=function(s){return new(s||c)(v.LFG(v.FYo),v.LFG(ue.K0))},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac}),c})();class qs extends es.LC{constructor(o,s){super(),this._id=o,this._renderer=s}create(o,s){return new Ty(this._id,o,s||{},this._renderer)}}class Ty{constructor(o,s,h,_){this.id=o,this.element=s,this._renderer=_,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(o,s){return this._renderer.listen(this.element,`@@${this.id}:${o}`,s)}_command(o,...s){return R_(this._renderer,this.element,this.id,o,s)}onDone(o){this._listen("done",o)}onStart(o){this._listen("start",o)}onDestroy(o){this._listen("destroy",o)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(o){this._command("setPosition",o)}getPosition(){var o,s;return null!==(s=null===(o=this._renderer.engine.players[+this.id])||void 0===o?void 0:o.getPosition())&&void 0!==s?s:0}}function R_(c,o,s,h,_){return c.setProperty(o,`@@${s}:${h}`,_)}const dh="@.disabled";let hh=(()=>{class c{constructor(s,h,_){this.delegate=s,this.engine=h,this._zone=_,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(w,D)=>{D&&D.parentNode(w)&&D.removeChild(w.parentNode,w)}}createRenderer(s,h){const w=this.delegate.createRenderer(s,h);if(!(s&&h&&h.data&&h.data.animation)){let $e=this._rendererCache.get(w);return $e||($e=new Ug("",w,this.engine),this._rendererCache.set(w,$e)),$e}const D=h.id,U=h.id+"-"+this._currentId;this._currentId++,this.engine.register(U,s);const Y=$e=>{Array.isArray($e)?$e.forEach(Y):this.engine.registerTrigger(D,U,s,$e.name,$e)};return h.data.animation.forEach(Y),new Hl(this,U,w,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,h,_){s>=0&&s<this._microtaskId?this._zone.run(()=>h(_)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(w=>{const[D,U]=w;D(U)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,_]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(s){return new(s||c)(v.LFG(v.FYo),v.LFG(jc),v.LFG(v.R0b))},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac}),c})();class Ug{constructor(o,s,h){this.namespaceId=o,this.delegate=s,this.engine=h,this.destroyNode=this.delegate.destroyNode?_=>s.destroyNode(_):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(o,s){return this.delegate.createElement(o,s)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}appendChild(o,s){this.delegate.appendChild(o,s),this.engine.onInsert(this.namespaceId,s,o,!1)}insertBefore(o,s,h,_=!0){this.delegate.insertBefore(o,s,h),this.engine.onInsert(this.namespaceId,s,o,_)}removeChild(o,s,h){this.engine.onRemove(this.namespaceId,s,this.delegate,h)}selectRootElement(o,s){return this.delegate.selectRootElement(o,s)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,s,h,_){this.delegate.setAttribute(o,s,h,_)}removeAttribute(o,s,h){this.delegate.removeAttribute(o,s,h)}addClass(o,s){this.delegate.addClass(o,s)}removeClass(o,s){this.delegate.removeClass(o,s)}setStyle(o,s,h,_){this.delegate.setStyle(o,s,h,_)}removeStyle(o,s,h){this.delegate.removeStyle(o,s,h)}setProperty(o,s,h){"@"==s.charAt(0)&&s==dh?this.disableAnimations(o,!!h):this.delegate.setProperty(o,s,h)}setValue(o,s){this.delegate.setValue(o,s)}listen(o,s,h){return this.delegate.listen(o,s,h)}disableAnimations(o,s){this.engine.disableAnimations(o,s)}}class Hl extends Ug{constructor(o,s,h,_){super(s,h,_),this.factory=o,this.namespaceId=s}setProperty(o,s,h){"@"==s.charAt(0)?"."==s.charAt(1)&&s==dh?this.disableAnimations(o,h=void 0===h||!!h):this.engine.process(this.namespaceId,o,s.substr(1),h):this.delegate.setProperty(o,s,h)}listen(o,s,h){if("@"==s.charAt(0)){const _=function(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(o);let w=s.substr(1),D="";return"@"!=w.charAt(0)&&([w,D]=function(c){const o=c.indexOf(".");return[c.substring(0,o),c.substr(o+1)]}(w)),this.engine.listen(this.namespaceId,_,w,D,U=>{this.factory.scheduleListenerCallback(U._data||-1,h,U)})}return this.delegate.listen(o,s,h)}}let O_=(()=>{class c extends jc{constructor(s,h,_){super(s.body,h,_)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(s){return new(s||c)(v.LFG(ue.K0),v.LFG(Jf),v.LFG(cp))},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac}),c})();const Yo=new v.OlP("AnimationModuleType"),hc=[{provide:es._j,useClass:x_},{provide:cp,useFactory:function(){return new Ko}},{provide:jc,useClass:O_},{provide:v.FYo,useFactory:function(c,o,s){return new hh(c,o,s)},deps:[f.se,jc,v.R0b]}],Dl=[{provide:Jf,useFactory:function(){return"function"==typeof km()?new D_:new Fo}},{provide:Yo,useValue:"BrowserAnimations"},...hc],Zl=[{provide:Jf,useClass:Qf},{provide:Yo,useValue:"NoopAnimations"},...hc];let Gl=(()=>{class c{static withConfig(s){return{ngModule:c,providers:s.disableAnimations?Zl:Dl}}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=v.oAB({type:c}),c.\u0275inj=v.cJS({providers:Dl,imports:[f.b2]}),c})();var fc=N(7827);let fh=(()=>{class c{}return c.\u0275fac=function(s){return new(s||c)},c.\u0275mod=v.oAB({type:c,bootstrap:[vn]}),c.\u0275inj=v.cJS({providers:[_m.yb],imports:[[f.b2,pr,Et.hO.initializeApp(Qp_firebaseConfig),Dt.ww,g_,_m.yb,Gl,Te.Rh.forRoot(),ym.TE,jt.u5,jt.UX,fc.ZQ.forRoot()]]}),c})();(0,v.G48)(),f.q6().bootstrapModule(fh).catch(c=>console.error(c))},9517:(Vt,Ie,N)=>{"use strict";function Me(ce,Ne,Re,_e){return new(Re||(Re=Promise))(function(Te,jt){function mn(xn){try{Zt(_e.next(xn))}catch(pr){jt(pr)}}function Bn(xn){try{Zt(_e.throw(xn))}catch(pr){jt(pr)}}function Zt(xn){xn.done?Te(xn.value):function(Te){return Te instanceof Re?Te:new Re(function(jt){jt(Te)})}(xn.value).then(mn,Bn)}Zt((_e=_e.apply(ce,Ne||[])).next())})}function Ye(ce){return this instanceof Ye?(this.v=ce,this):new Ye(ce)}function Qe(ce,Ne,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,_e=Re.apply(ce,Ne||[]),Te=[];return ct={},jt("next"),jt("throw"),jt("return"),ct[Symbol.asyncIterator]=function(){return this},ct;function jt(vn){_e[vn]&&(ct[vn]=function(Et){return new Promise(function(Dt,at){Te.push([vn,Et,Dt,at])>1||mn(vn,Et)})})}function mn(vn,Et){try{!function(vn){vn.value instanceof Ye?Promise.resolve(vn.value.v).then(Zt,xn):pr(Te[0][2],vn)}(_e[vn](Et))}catch(Dt){pr(Te[0][3],Dt)}}function Zt(vn){mn("next",vn)}function xn(vn){mn("throw",vn)}function pr(vn,Et){vn(Et),Te.shift(),Te.length&&mn(Te[0][0],Te[0][1])}}function nt(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,Ne=ce[Symbol.asyncIterator];return Ne?Ne.call(ce):(ce=function(ce){var Ne="function"==typeof Symbol&&Symbol.iterator,Re=Ne&&ce[Ne],_e=0;if(Re)return Re.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&_e>=ce.length&&(ce=void 0),{value:ce&&ce[_e++],done:!ce}}};throw new TypeError(Ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),Re={},_e("next"),_e("throw"),_e("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function _e(Te){Re[Te]=ce[Te]&&function(jt){return new Promise(function(mn,Bn){!function(Te,jt,mn,Bn){Promise.resolve(Bn).then(function(Zt){Te({value:Zt,done:mn})},jt)}(mn,Bn,(jt=ce[Te](jt)).done,jt.value)})}}}N.d(Ie,{mG:()=>Me,qq:()=>Ye,FC:()=>Qe,KL:()=>nt})},4762:(Vt,Ie,N)=>{"use strict";function me(ce,Ne){var Re={};for(var _e in ce)Object.prototype.hasOwnProperty.call(ce,_e)&&Ne.indexOf(_e)<0&&(Re[_e]=ce[_e]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var ct=0;for(_e=Object.getOwnPropertySymbols(ce);ct<_e.length;ct++)Ne.indexOf(_e[ct])<0&&Object.prototype.propertyIsEnumerable.call(ce,_e[ct])&&(Re[_e[ct]]=ce[_e[ct]])}return Re}function Me(ce,Ne,Re,_e){return new(Re||(Re=Promise))(function(Te,jt){function mn(xn){try{Zt(_e.next(xn))}catch(pr){jt(pr)}}function Bn(xn){try{Zt(_e.throw(xn))}catch(pr){jt(pr)}}function Zt(xn){xn.done?Te(xn.value):function(Te){return Te instanceof Re?Te:new Re(function(jt){jt(Te)})}(xn.value).then(mn,Bn)}Zt((_e=_e.apply(ce,Ne||[])).next())})}function ge(ce,Ne){var _e,ct,Te,jt,Re={label:0,sent:function(){if(1&Te[0])throw Te[1];return Te[1]},trys:[],ops:[]};return jt={next:mn(0),throw:mn(1),return:mn(2)},"function"==typeof Symbol&&(jt[Symbol.iterator]=function(){return this}),jt;function mn(Zt){return function(xn){return function(Zt){if(_e)throw new TypeError("Generator is already executing.");for(;Re;)try{if(_e=1,ct&&(Te=2&Zt[0]?ct.return:Zt[0]?ct.throw||((Te=ct.return)&&Te.call(ct),0):ct.next)&&!(Te=Te.call(ct,Zt[1])).done)return Te;switch(ct=0,Te&&(Zt=[2&Zt[0],Te.value]),Zt[0]){case 0:case 1:Te=Zt;break;case 4:return Re.label++,{value:Zt[1],done:!1};case 5:Re.label++,ct=Zt[1],Zt=[0];continue;case 7:Zt=Re.ops.pop(),Re.trys.pop();continue;default:if(!(Te=(Te=Re.trys).length>0&&Te[Te.length-1])&&(6===Zt[0]||2===Zt[0])){Re=0;continue}if(3===Zt[0]&&(!Te||Zt[1]>Te[0]&&Zt[1]<Te[3])){Re.label=Zt[1];break}if(6===Zt[0]&&Re.label<Te[1]){Re.label=Te[1],Te=Zt;break}if(Te&&Re.label<Te[2]){Re.label=Te[2],Re.ops.push(Zt);break}Te[2]&&Re.ops.pop(),Re.trys.pop();continue}Zt=Ne.call(ce,Re)}catch(xn){Zt=[6,xn],ct=0}finally{_e=Te=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,xn])}}}function te(ce){var Ne="function"==typeof Symbol&&Symbol.iterator,Re=Ne&&ce[Ne],_e=0;if(Re)return Re.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&_e>=ce.length&&(ce=void 0),{value:ce&&ce[_e++],done:!ce}}};throw new TypeError(Ne?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(ce,Ne){var Re="function"==typeof Symbol&&ce[Symbol.iterator];if(!Re)return ce;var ct,jt,_e=Re.call(ce),Te=[];try{for(;(void 0===Ne||Ne-- >0)&&!(ct=_e.next()).done;)Te.push(ct.value)}catch(mn){jt={error:mn}}finally{try{ct&&!ct.done&&(Re=_e.return)&&Re.call(_e)}finally{if(jt)throw jt.error}}return Te}function Oe(ce,Ne,Re){if(Re||2===arguments.length)for(var Te,_e=0,ct=Ne.length;_e<ct;_e++)(Te||!(_e in Ne))&&(Te||(Te=Array.prototype.slice.call(Ne,0,_e)),Te[_e]=Ne[_e]);return ce.concat(Te||Array.prototype.slice.call(Ne))}N.d(Ie,{_T:()=>me,mG:()=>Me,Jh:()=>ge,XA:()=>te,CR:()=>de,ev:()=>Oe})},8239:(Vt,Ie,N)=>{"use strict";function f(J,me,le,ue,Ae,Me,ge){try{var K=J[Me](ge),Z=K.value}catch(te){return void le(te)}K.done?me(Z):Promise.resolve(Z).then(ue,Ae)}function v(J){return function(){var me=this,le=arguments;return new Promise(function(ue,Ae){var Me=J.apply(me,le);function ge(Z){f(Me,ue,Ae,ge,K,"next",Z)}function K(Z){f(Me,ue,Ae,ge,K,"throw",Z)}ge(void 0)})}}N.d(Ie,{Z:()=>v})}},Vt=>{Vt(Vt.s=8498)}]);